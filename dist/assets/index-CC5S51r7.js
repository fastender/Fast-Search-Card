var x1=Object.defineProperty;var C1=(t,e,i)=>e in t?x1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var ue=(t,e,i)=>C1(t,typeof e!="symbol"?e+"":e,i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=i(r);fetch(r.href,o)}})();const S1="modulepreload",N1=function(t){return"/"+t},Dc={},$e=function(e,i,n){let r=Promise.resolve();if(i&&i.length>0){let d=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};var a=d;document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=l?.nonce||l?.getAttribute("nonce");r=d(i.map(u=>{if(u=N1(u),u in Dc)return;Dc[u]=!0;const h=u.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":S1,h||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),h)return new Promise((g,p)=>{f.addEventListener("load",g),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return r.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};var xs,Se,im,Ai,Ac,nm,sm,rm,yl,pa,ga,om,rs={},am=[],L1=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Cs=Array.isArray;function Vt(t,e){for(var i in e)t[i]=e[i];return t}function bl(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Hi(t,e,i){var n,r,o,a={};for(o in e)o=="key"?n=e[o]:o=="ref"?r=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?xs.call(arguments,2):i),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)a[o]===void 0&&(a[o]=t.defaultProps[o]);return Gn(t,a,n,r,null)}function Gn(t,e,i,n,r){var o={type:t,props:e,key:i,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++im,__i:-1,__u:0};return r==null&&Se.vnode!=null&&Se.vnode(o),o}function ve(t){return t.children}function Et(t,e){this.props=t,this.context=e}function hn(t,e){if(e==null)return t.__?hn(t.__,t.__i+1):null;for(var i;e<t.__k.length;e++)if((i=t.__k[e])!=null&&i.__e!=null)return i.__e;return typeof t.type=="function"?hn(t):null}function lm(t){var e,i;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((i=t.__k[e])!=null&&i.__e!=null){t.__e=t.__c.base=i.__e;break}return lm(t)}}function va(t){(!t.__d&&(t.__d=!0)&&Ai.push(t)&&!Vr.__r++||Ac!=Se.debounceRendering)&&((Ac=Se.debounceRendering)||nm)(Vr)}function Vr(){for(var t,e,i,n,r,o,a,l=1;Ai.length;)Ai.length>l&&Ai.sort(sm),t=Ai.shift(),l=Ai.length,t.__d&&(i=void 0,r=(n=(e=t).__v).__e,o=[],a=[],e.__P&&((i=Vt({},n)).__v=n.__v+1,Se.vnode&&Se.vnode(i),wl(e.__P,i,n,e.__n,e.__P.namespaceURI,32&n.__u?[r]:null,o,r??hn(n),!!(32&n.__u),a),i.__v=n.__v,i.__.__k[i.__i]=i,um(o,i,a),i.__e!=r&&lm(i)));Vr.__r=0}function cm(t,e,i,n,r,o,a,l,c,d,u){var h,m,f,g,p,v,b,y=n&&n.__k||am,w=e.length;for(c=M1(i,e,y,c,w),h=0;h<w;h++)(f=i.__k[h])!=null&&(m=f.__i==-1?rs:y[f.__i]||rs,f.__i=h,v=wl(t,f,m,r,o,a,l,c,d,u),g=f.__e,f.ref&&m.ref!=f.ref&&(m.ref&&kl(m.ref,null,f),u.push(f.ref,f.__c||g,f)),p==null&&g!=null&&(p=g),(b=!!(4&f.__u))||m.__k===f.__k?c=dm(f,c,t,b):typeof f.type=="function"&&v!==void 0?c=v:g&&(c=g.nextSibling),f.__u&=-7);return i.__e=p,c}function M1(t,e,i,n,r){var o,a,l,c,d,u=i.length,h=u,m=0;for(t.__k=new Array(r),o=0;o<r;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(c=o+m,(a=t.__k[o]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?Gn(null,a,null,null,null):Cs(a)?Gn(ve,{children:a},null,null,null):a.constructor==null&&a.__b>0?Gn(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=t,a.__b=t.__b+1,l=null,(d=a.__i=T1(a,i,c,h))!=-1&&(h--,(l=i[d])&&(l.__u|=2)),l==null||l.__v==null?(d==-1&&(r>u?m--:r<u&&m++),typeof a.type!="function"&&(a.__u|=4)):d!=c&&(d==c-1?m--:d==c+1?m++:(d>c?m--:m++,a.__u|=4))):t.__k[o]=null;if(h)for(o=0;o<u;o++)(l=i[o])!=null&&(2&l.__u)==0&&(l.__e==n&&(n=hn(l)),mm(l,l));return n}function dm(t,e,i,n){var r,o;if(typeof t.type=="function"){for(r=t.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=t,e=dm(r[o],e,i,n));return e}t.__e!=e&&(n&&(e&&t.type&&!e.parentNode&&(e=hn(t)),i.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Qt(t,e){return e=e||[],t==null||typeof t=="boolean"||(Cs(t)?t.some(function(i){Qt(i,e)}):e.push(t)),e}function T1(t,e,i,n){var r,o,a,l=t.key,c=t.type,d=e[i],u=d!=null&&(2&d.__u)==0;if(d===null&&t.key==null||u&&l==d.key&&c==d.type)return i;if(n>(u?1:0)){for(r=i-1,o=i+1;r>=0||o<e.length;)if((d=e[a=r>=0?r--:o++])!=null&&(2&d.__u)==0&&l==d.key&&c==d.type)return a}return-1}function Fc(t,e,i){e[0]=="-"?t.setProperty(e,i??""):t[e]=i==null?"":typeof i!="number"||L1.test(e)?i:i+"px"}function Rs(t,e,i,n,r){var o,a;e:if(e=="style")if(typeof i=="string")t.style.cssText=i;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)i&&e in i||Fc(t.style,e,"");if(i)for(e in i)n&&i[e]==n[e]||Fc(t.style,e,i[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(rm,"$1")),a=e.toLowerCase(),e=a in t||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=i,i?n?i.u=n.u:(i.u=yl,t.addEventListener(e,o?ga:pa,o)):t.removeEventListener(e,o?ga:pa,o);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=i??"";break e}catch{}typeof i=="function"||(i==null||i===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&i==1?"":i))}}function Pc(t){return function(e){if(this.l){var i=this.l[e.type+t];if(e.t==null)e.t=yl++;else if(e.t<i.u)return;return i(Se.event?Se.event(e):e)}}}function wl(t,e,i,n,r,o,a,l,c,d){var u,h,m,f,g,p,v,b,y,w,_,k,N,C,S,x,B,A=e.type;if(e.constructor!=null)return null;128&i.__u&&(c=!!(32&i.__u),o=[l=e.__e=i.__e]),(u=Se.__b)&&u(e);e:if(typeof A=="function")try{if(b=e.props,y="prototype"in A&&A.prototype.render,w=(u=A.contextType)&&n[u.__c],_=u?w?w.props.value:u.__:n,i.__c?v=(h=e.__c=i.__c).__=h.__E:(y?e.__c=h=new A(b,_):(e.__c=h=new Et(b,_),h.constructor=A,h.render=D1),w&&w.sub(h),h.props=b,h.state||(h.state={}),h.context=_,h.__n=n,m=h.__d=!0,h.__h=[],h._sb=[]),y&&h.__s==null&&(h.__s=h.state),y&&A.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=Vt({},h.__s)),Vt(h.__s,A.getDerivedStateFromProps(b,h.__s))),f=h.props,g=h.state,h.__v=e,m)y&&A.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),y&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(y&&A.getDerivedStateFromProps==null&&b!==f&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(b,_),!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(b,h.__s,_)===!1||e.__v==i.__v){for(e.__v!=i.__v&&(h.props=b,h.state=h.__s,h.__d=!1),e.__e=i.__e,e.__k=i.__k,e.__k.some(function(P){P&&(P.__=e)}),k=0;k<h._sb.length;k++)h.__h.push(h._sb[k]);h._sb=[],h.__h.length&&a.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(b,h.__s,_),y&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(f,g,p)})}if(h.context=_,h.props=b,h.__P=t,h.__e=!1,N=Se.__r,C=0,y){for(h.state=h.__s,h.__d=!1,N&&N(e),u=h.render(h.props,h.state,h.context),S=0;S<h._sb.length;S++)h.__h.push(h._sb[S]);h._sb=[]}else do h.__d=!1,N&&N(e),u=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++C<25);h.state=h.__s,h.getChildContext!=null&&(n=Vt(Vt({},n),h.getChildContext())),y&&!m&&h.getSnapshotBeforeUpdate!=null&&(p=h.getSnapshotBeforeUpdate(f,g)),x=u,u!=null&&u.type===ve&&u.key==null&&(x=hm(u.props.children)),l=cm(t,Cs(x)?x:[x],e,i,n,r,o,a,l,c,d),h.base=e.__e,e.__u&=-161,h.__h.length&&a.push(h),v&&(h.__E=h.__=null)}catch(P){if(e.__v=null,c||o!=null)if(P.then){for(e.__u|=c?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,e.__e=l}else{for(B=o.length;B--;)bl(o[B]);ya(e)}else e.__e=i.__e,e.__k=i.__k,P.then||ya(e);Se.__e(P,e,i)}else o==null&&e.__v==i.__v?(e.__k=i.__k,e.__e=i.__e):l=e.__e=E1(i.__e,e,i,n,r,o,a,c,d);return(u=Se.diffed)&&u(e),128&e.__u?void 0:l}function ya(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(ya)}function um(t,e,i){for(var n=0;n<i.length;n++)kl(i[n],i[++n],i[++n]);Se.__c&&Se.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(o){o.call(r)})}catch(o){Se.__e(o,r.__v)}})}function hm(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Cs(t)?t.map(hm):Vt({},t)}function E1(t,e,i,n,r,o,a,l,c){var d,u,h,m,f,g,p,v=i.props,b=e.props,y=e.type;if(y=="svg"?r="http://www.w3.org/2000/svg":y=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),o!=null){for(d=0;d<o.length;d++)if((f=o[d])&&"setAttribute"in f==!!y&&(y?f.localName==y:f.nodeType==3)){t=f,o[d]=null;break}}if(t==null){if(y==null)return document.createTextNode(b);t=document.createElementNS(r,y,b.is&&b),l&&(Se.__m&&Se.__m(e,o),l=!1),o=null}if(y==null)v===b||l&&t.data==b||(t.data=b);else{if(o=o&&xs.call(t.childNodes),v=i.props||rs,!l&&o!=null)for(v={},d=0;d<t.attributes.length;d++)v[(f=t.attributes[d]).name]=f.value;for(d in v)if(f=v[d],d!="children"){if(d=="dangerouslySetInnerHTML")h=f;else if(!(d in b)){if(d=="value"&&"defaultValue"in b||d=="checked"&&"defaultChecked"in b)continue;Rs(t,d,null,f,r)}}for(d in b)f=b[d],d=="children"?m=f:d=="dangerouslySetInnerHTML"?u=f:d=="value"?g=f:d=="checked"?p=f:l&&typeof f!="function"||v[d]===f||Rs(t,d,f,v[d],r);if(u)l||h&&(u.__html==h.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(h&&(t.innerHTML=""),cm(e.type=="template"?t.content:t,Cs(m)?m:[m],e,i,n,y=="foreignObject"?"http://www.w3.org/1999/xhtml":r,o,a,o?o[0]:i.__k&&hn(i,0),l,c),o!=null)for(d=o.length;d--;)bl(o[d]);l||(d="value",y=="progress"&&g==null?t.removeAttribute("value"):g!=null&&(g!==t[d]||y=="progress"&&!g||y=="option"&&g!=v[d])&&Rs(t,d,g,v[d],r),d="checked",p!=null&&p!=t[d]&&Rs(t,d,p,v[d],r))}return t}function kl(t,e,i){try{if(typeof t=="function"){var n=typeof t.__u=="function";n&&t.__u(),n&&e==null||(t.__u=t(e))}else t.current=e}catch(r){Se.__e(r,i)}}function mm(t,e,i){var n,r;if(Se.unmount&&Se.unmount(t),(n=t.ref)&&(n.current&&n.current!=t.__e||kl(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){Se.__e(o,e)}n.base=n.__P=null}if(n=t.__k)for(r=0;r<n.length;r++)n[r]&&mm(n[r],e,i||typeof t.type!="function");i||bl(t.__e),t.__c=t.__=t.__e=void 0}function D1(t,e,i){return this.constructor(t,i)}function _r(t,e,i){var n,r,o,a;e==document&&(e=document.documentElement),Se.__&&Se.__(t,e),r=(n=!1)?null:e.__k,o=[],a=[],wl(e,t=e.__k=Hi(ve,null,[t]),r||rs,rs,e.namespaceURI,r?null:e.firstChild?xs.call(e.childNodes):null,o,r?r.__e:e.firstChild,n,a),um(o,t,a)}function A1(t,e,i){var n,r,o,a,l=Vt({},t.props);for(o in t.type&&t.type.defaultProps&&(a=t.type.defaultProps),e)o=="key"?n=e[o]:o=="ref"?r=e[o]:l[o]=e[o]===void 0&&a!=null?a[o]:e[o];return arguments.length>2&&(l.children=arguments.length>3?xs.call(arguments,2):i),Gn(t.type,l,n||t.key,r||t.ref,null)}function Yi(t){function e(i){var n,r;return this.getChildContext||(n=new Set,(r={})[e.__c]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&n.forEach(function(a){a.__e=!0,va(a)})},this.sub=function(o){n.add(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){n&&n.delete(o),a&&a.call(o)}}),i.children}return e.__c="__cC"+om++,e.__=t,e.Provider=e.__l=(e.Consumer=function(i,n){return i.children(n)}).contextType=e,e}xs=am.slice,Se={__e:function(t,e,i,n){for(var r,o,a;e=e.__;)if((r=e.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(t)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,n||{}),a=r.__d),a)return r.__E=r}catch(l){t=l}throw t}},im=0,Et.prototype.setState=function(t,e){var i;i=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Vt({},this.state),typeof t=="function"&&(t=t(Vt({},i),this.props)),t&&Vt(i,t),t!=null&&this.__v&&(e&&this._sb.push(e),va(this))},Et.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),va(this))},Et.prototype.render=ve,Ai=[],nm=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,sm=function(t,e){return t.__v.__b-e.__v.__b},Vr.__r=0,rm=/(PointerCapture)$|Capture$/i,yl=0,pa=Pc(!1),ga=Pc(!0),om=0;var F1=0;function s(t,e,i,n,r,o){e||(e={});var a,l,c=e;if("ref"in c)for(l in c={},e)l=="ref"?a=e[l]:c[l]=e[l];var d={type:t,props:c,key:i,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--F1,__i:-1,__u:0,__source:r,__self:o};if(typeof t=="function"&&(a=t.defaultProps))for(l in a)c[l]===void 0&&(c[l]=a[l]);return Se.vnode&&Se.vnode(d),d}var hi,He,Co,Ic,os=0,fm=[],Xe=Se,Rc=Xe.__b,Bc=Xe.__r,zc=Xe.diffed,Vc=Xe.__c,Wc=Xe.unmount,Oc=Xe.__;function vn(t,e){Xe.__h&&Xe.__h(He,t,os||e),os=0;var i=He.__H||(He.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({}),i.__[t]}function M(t){return os=1,pm(vm,t)}function pm(t,e,i){var n=vn(hi++,2);if(n.t=t,!n.__c&&(n.__=[i?i(e):vm(void 0,e),function(l){var c=n.__N?n.__N[0]:n.__[0],d=n.t(c,l);c!==d&&(n.__N=[d,n.__[1]],n.__c.setState({}))}],n.__c=He,!He.__f)){var r=function(l,c,d){if(!n.__c.__H)return!0;var u=n.__c.__H.__.filter(function(m){return!!m.__c});if(u.every(function(m){return!m.__N}))return!o||o.call(this,l,c,d);var h=n.__c.props!==l;return u.forEach(function(m){if(m.__N){var f=m.__[0];m.__=m.__N,m.__N=void 0,f!==m.__[0]&&(h=!0)}}),o&&o.call(this,l,c,d)||h};He.__f=!0;var o=He.shouldComponentUpdate,a=He.componentWillUpdate;He.componentWillUpdate=function(l,c,d){if(this.__e){var u=o;o=void 0,r(l,c,d),o=u}a&&a.call(this,l,c,d)},He.shouldComponentUpdate=r}return n.__N||n.__}function U(t,e){var i=vn(hi++,3);!Xe.__s&&xl(i.__H,e)&&(i.__=t,i.u=e,He.__H.__h.push(i))}function gm(t,e){var i=vn(hi++,4);!Xe.__s&&xl(i.__H,e)&&(i.__=t,i.u=e,He.__h.push(i))}function te(t){return os=5,Me(function(){return{current:t}},[])}function Me(t,e){var i=vn(hi++,7);return xl(i.__H,e)&&(i.__=t(),i.__H=e,i.__h=t),i.__}function Ee(t,e){return os=8,Me(function(){return t},e)}function tt(t){var e=He.context[t.__c],i=vn(hi++,9);return i.c=t,e?(i.__==null&&(i.__=!0,e.sub(He)),e.props.value):t.__}function _l(){var t=vn(hi++,11);if(!t.__){for(var e=He.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var i=e.__m||(e.__m=[0,0]);t.__="P"+i[0]+"-"+i[1]++}return t.__}function P1(){for(var t;t=fm.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(xr),t.__H.__h.forEach(ba),t.__H.__h=[]}catch(e){t.__H.__h=[],Xe.__e(e,t.__v)}}Xe.__b=function(t){He=null,Rc&&Rc(t)},Xe.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Oc&&Oc(t,e)},Xe.__r=function(t){Bc&&Bc(t),hi=0;var e=(He=t.__c).__H;e&&(Co===He?(e.__h=[],He.__h=[],e.__.forEach(function(i){i.__N&&(i.__=i.__N),i.u=i.__N=void 0})):(e.__h.forEach(xr),e.__h.forEach(ba),e.__h=[],hi=0)),Co=He},Xe.diffed=function(t){zc&&zc(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(fm.push(e)!==1&&Ic===Xe.requestAnimationFrame||((Ic=Xe.requestAnimationFrame)||I1)(P1)),e.__H.__.forEach(function(i){i.u&&(i.__H=i.u),i.u=void 0})),Co=He=null},Xe.__c=function(t,e){e.some(function(i){try{i.__h.forEach(xr),i.__h=i.__h.filter(function(n){return!n.__||ba(n)})}catch(n){e.some(function(r){r.__h&&(r.__h=[])}),e=[],Xe.__e(n,i.__v)}}),Vc&&Vc(t,e)},Xe.unmount=function(t){Wc&&Wc(t);var e,i=t.__c;i&&i.__H&&(i.__H.__.forEach(function(n){try{xr(n)}catch(r){e=r}}),i.__H=void 0,e&&Xe.__e(e,i.__v))};var $c=typeof requestAnimationFrame=="function";function I1(t){var e,i=function(){clearTimeout(n),$c&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(i,35);$c&&(e=requestAnimationFrame(i))}function xr(t){var e=He,i=t.__c;typeof i=="function"&&(t.__c=void 0,i()),He=e}function ba(t){var e=He;t.__c=t.__(),He=e}function xl(t,e){return!t||t.length!==e.length||e.some(function(i,n){return i!==t[n]})}function vm(t,e){return typeof e=="function"?e(t):e}function ym(t,e){for(var i in e)t[i]=e[i];return t}function wa(t,e){for(var i in t)if(i!=="__source"&&!(i in e))return!0;for(var n in e)if(n!=="__source"&&t[n]!==e[n])return!0;return!1}var Cl=gm;function Hc(t,e){this.props=t,this.context=e}function Sl(t,e){function i(r){var o=this.props.ref,a=o==r.ref;return!a&&o&&(o.call?o(null):o.current=null),e?!e(this.props,r)||!a:wa(this.props,r)}function n(r){return this.shouldComponentUpdate=i,Hi(t,r)}return n.displayName="Memo("+(t.displayName||t.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n.type=t,n}(Hc.prototype=new Et).isPureReactComponent=!0,Hc.prototype.shouldComponentUpdate=function(t,e){return wa(this.props,t)||wa(this.state,e)};var jc=Se.__b;Se.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),jc&&jc(t)};var R1=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function B1(t){function e(i){var n=ym({},i);return delete n.ref,t(n,i.ref||null)}return e.$$typeof=R1,e.render=t,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var Uc=function(t,e){return t==null?null:Qt(Qt(t).map(e))},z1={map:Uc,forEach:Uc,count:function(t){return t?Qt(t).length:0},only:function(t){var e=Qt(t);if(e.length!==1)throw"Children.only";return e[0]},toArray:Qt},V1=Se.__e;Se.__e=function(t,e,i,n){if(t.then){for(var r,o=e;o=o.__;)if((r=o.__c)&&r.__c)return e.__e==null&&(e.__e=i.__e,e.__k=i.__k),r.__c(t,e)}V1(t,e,i,n)};var Gc=Se.unmount;function bm(t,e,i){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),t.__c.__H=null),(t=ym({},t)).__c!=null&&(t.__c.__P===i&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(n){return bm(n,e,i)})),t}function wm(t,e,i){return t&&i&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(n){return wm(n,e,i)}),t.__c&&t.__c.__P===e&&(t.__e&&i.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=i)),t}function So(){this.__u=0,this.o=null,this.__b=null}function km(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Bs(){this.i=null,this.l=null}Se.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),Gc&&Gc(t)},(So.prototype=new Et).__c=function(t,e){var i=e.__c,n=this;n.o==null&&(n.o=[]),n.o.push(i);var r=km(n.__v),o=!1,a=function(){o||(o=!0,i.__R=null,r?r(l):l())};i.__R=a;var l=function(){if(!--n.__u){if(n.state.__a){var c=n.state.__a;n.__v.__k[0]=wm(c,c.__c.__P,c.__c.__O)}var d;for(n.setState({__a:n.__b=null});d=n.o.pop();)d.forceUpdate()}};n.__u++||32&e.__u||n.setState({__a:n.__b=n.__v.__k[0]}),t.then(a,a)},So.prototype.componentWillUnmount=function(){this.o=[]},So.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var i=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=bm(this.__b,i,n.__O=n.__P)}this.__b=null}var r=e.__a&&Hi(ve,null,t.fallback);return r&&(r.__u&=-33),[Hi(ve,null,e.__a?null:t.children),r]};var Kc=function(t,e,i){if(++i[1]===i[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(i=t.i;i;){for(;i.length>3;)i.pop()();if(i[1]<i[0])break;t.i=i=i[2]}};(Bs.prototype=new Et).__a=function(t){var e=this,i=km(e.__v),n=e.l.get(t);return n[0]++,function(r){var o=function(){e.props.revealOrder?(n.push(r),Kc(e,t,n)):r()};i?i(o):o()}},Bs.prototype.render=function(t){this.i=null,this.l=new Map;var e=Qt(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var i=e.length;i--;)this.l.set(e[i],this.i=[1,0,this.i]);return t.children},Bs.prototype.componentDidUpdate=Bs.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,i){Kc(t,i,e)})};var _m=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,W1=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,O1=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,$1=/[A-Z0-9]/g,H1=typeof document<"u",j1=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};Et.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Et.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var Yc=Se.event;function U1(){}function G1(){return this.cancelBubble}function K1(){return this.defaultPrevented}Se.event=function(t){return Yc&&(t=Yc(t)),t.persist=U1,t.isPropagationStopped=G1,t.isDefaultPrevented=K1,t.nativeEvent=t};var Y1={enumerable:!1,configurable:!0,get:function(){return this.class}},Zc=Se.vnode;Se.vnode=function(t){typeof t.type=="string"&&(function(e){var i=e.props,n=e.type,r={},o=n.indexOf("-")===-1;for(var a in i){var l=i[a];if(!(a==="value"&&"defaultValue"in i&&l==null||H1&&a==="children"&&n==="noscript"||a==="class"||a==="className")){var c=a.toLowerCase();a==="defaultValue"&&"value"in i&&i.value==null?a="value":a==="download"&&l===!0?l="":c==="translate"&&l==="no"?l=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?a="ondblclick":c!=="onchange"||n!=="input"&&n!=="textarea"||j1(i.type)?c==="onfocus"?a="onfocusin":c==="onblur"?a="onfocusout":O1.test(a)&&(a=c):c=a="oninput":o&&W1.test(a)?a=a.replace($1,"-$&").toLowerCase():l===null&&(l=void 0),c==="oninput"&&r[a=c]&&(a="oninputCapture"),r[a]=l}}n=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=Qt(i.children).forEach(function(d){d.props.selected=r.value.indexOf(d.props.value)!=-1})),n=="select"&&r.defaultValue!=null&&(r.value=Qt(i.children).forEach(function(d){d.props.selected=r.multiple?r.defaultValue.indexOf(d.props.value)!=-1:r.defaultValue==d.props.value})),i.class&&!i.className?(r.class=i.class,Object.defineProperty(r,"className",Y1)):(i.className&&!i.class||i.class&&i.className)&&(r.class=r.className=i.className),e.props=r})(t),t.$$typeof=_m,Zc&&Zc(t)};var qc=Se.__r;Se.__r=function(t){qc&&qc(t)};var Xc=Se.diffed;Se.diffed=function(t){Xc&&Xc(t);var e=t.props,i=t.__e;i!=null&&t.type==="textarea"&&"value"in e&&e.value!==i.value&&(i.value=e.value==null?"":e.value)};function xm(t){return!!t&&t.$$typeof===_m}function Z1(t){return xm(t)?A1.apply(null,arguments):t}const Nl=Yi({});function Ss(t){const e=te(null);return e.current===null&&(e.current=t()),e.current}const Ll=typeof window<"u",Ml=Ll?gm:U,ao=Yi(null);function Tl(t,e){t.indexOf(e)===-1&&t.push(e)}function El(t,e){const i=t.indexOf(e);i>-1&&t.splice(i,1)}const ei=(t,e,i)=>i>e?e:i<t?t:i,ti={},Cm=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Sm(t){return typeof t=="object"&&t!==null}const Nm=t=>/^0[^.\s]+$/u.test(t);function Dl(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ct=t=>t,q1=(t,e)=>i=>e(t(i)),Ns=(...t)=>t.reduce(q1),as=(t,e,i)=>{const n=e-t;return n===0?1:(i-t)/n};class Al{constructor(){this.subscriptions=[]}add(e){return Tl(this.subscriptions,e),()=>El(this.subscriptions,e)}notify(e,i,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,i,n);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,i,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ot=t=>t*1e3,xt=t=>t/1e3;function Lm(t,e){return e?t*(1e3/e):0}const Mm=(t,e,i)=>(((1-3*i+3*e)*t+(3*i-6*e))*t+3*e)*t,X1=1e-7,J1=12;function Q1(t,e,i,n,r){let o,a,l=0;do a=e+(i-e)/2,o=Mm(a,n,r)-t,o>0?i=a:e=a;while(Math.abs(o)>X1&&++l<J1);return a}function Ls(t,e,i,n){if(t===e&&i===n)return Ct;const r=o=>Q1(o,0,1,t,i);return o=>o===0||o===1?o:Mm(r(o),e,n)}const Tm=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Em=t=>e=>1-t(1-e),Dm=Ls(.33,1.53,.69,.99),Fl=Em(Dm),Am=Tm(Fl),Fm=t=>(t*=2)<1?.5*Fl(t):.5*(2-Math.pow(2,-10*(t-1))),Pl=t=>1-Math.sin(Math.acos(t)),Pm=Em(Pl),Im=Tm(Pl),e2=Ls(.42,0,1,1),t2=Ls(0,0,.58,1),Rm=Ls(.42,0,.58,1),i2=t=>Array.isArray(t)&&typeof t[0]!="number",Bm=t=>Array.isArray(t)&&typeof t[0]=="number",n2={linear:Ct,easeIn:e2,easeInOut:Rm,easeOut:t2,circIn:Pl,circInOut:Im,circOut:Pm,backIn:Fl,backInOut:Am,backOut:Dm,anticipate:Fm},s2=t=>typeof t=="string",Jc=t=>{if(Bm(t)){const[e,i,n,r]=t;return Ls(e,i,n,r)}else if(s2(t))return n2[t];return t},zs=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function r2(t,e){let i=new Set,n=new Set,r=!1,o=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(u){a.has(u)&&(d.schedule(u),t()),u(l)}const d={schedule:(u,h=!1,m=!1)=>{const g=m&&r?i:n;return h&&a.add(u),g.has(u)||g.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(l=u,r){o=!0;return}r=!0,[i,n]=[n,i],i.forEach(c),i.clear(),r=!1,o&&(o=!1,d.process(u))}};return d}const o2=40;function zm(t,e){let i=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>i=!0,a=zs.reduce((w,_)=>(w[_]=r2(o),w),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:u,update:h,preRender:m,render:f,postRender:g}=a,p=()=>{const w=ti.useManualTiming?r.timestamp:performance.now();i=!1,ti.useManualTiming||(r.delta=n?1e3/60:Math.max(Math.min(w-r.timestamp,o2),1)),r.timestamp=w,r.isProcessing=!0,l.process(r),c.process(r),d.process(r),u.process(r),h.process(r),m.process(r),f.process(r),g.process(r),r.isProcessing=!1,i&&e&&(n=!1,t(p))},v=()=>{i=!0,n=!0,r.isProcessing||t(p)};return{schedule:zs.reduce((w,_)=>{const k=a[_];return w[_]=(N,C=!1,S=!1)=>(i||v(),k.schedule(N,C,S)),w},{}),cancel:w=>{for(let _=0;_<zs.length;_++)a[zs[_]].cancel(w)},state:r,steps:a}}const{schedule:We,cancel:ii,state:at,steps:No}=zm(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ct,!0);let Cr;function a2(){Cr=void 0}const vt={now:()=>(Cr===void 0&&vt.set(at.isProcessing||ti.useManualTiming?at.timestamp:performance.now()),Cr),set:t=>{Cr=t,queueMicrotask(a2)}},Vm=t=>e=>typeof e=="string"&&e.startsWith(t),Il=Vm("--"),l2=Vm("var(--"),Rl=t=>l2(t)?c2.test(t.split("/*")[0].trim()):!1,c2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yn={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ls={...yn,transform:t=>ei(0,1,t)},Vs={...yn,default:1},Kn=t=>Math.round(t*1e5)/1e5,Bl=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function d2(t){return t==null}const u2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,zl=(t,e)=>i=>!!(typeof i=="string"&&u2.test(i)&&i.startsWith(t)||e&&!d2(i)&&Object.prototype.hasOwnProperty.call(i,e)),Wm=(t,e,i)=>n=>{if(typeof n!="string")return n;const[r,o,a,l]=n.match(Bl);return{[t]:parseFloat(r),[e]:parseFloat(o),[i]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},h2=t=>ei(0,255,t),Lo={...yn,transform:t=>Math.round(h2(t))},Pi={test:zl("rgb","red"),parse:Wm("red","green","blue"),transform:({red:t,green:e,blue:i,alpha:n=1})=>"rgba("+Lo.transform(t)+", "+Lo.transform(e)+", "+Lo.transform(i)+", "+Kn(ls.transform(n))+")"};function m2(t){let e="",i="",n="",r="";return t.length>5?(e=t.substring(1,3),i=t.substring(3,5),n=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),i=t.substring(2,3),n=t.substring(3,4),r=t.substring(4,5),e+=e,i+=i,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(i,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const ka={test:zl("#"),parse:m2,transform:Pi.transform},Ms=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),oi=Ms("deg"),$t=Ms("%"),we=Ms("px"),f2=Ms("vh"),p2=Ms("vw"),Qc={...$t,parse:t=>$t.parse(t)/100,transform:t=>$t.transform(t*100)},rn={test:zl("hsl","hue"),parse:Wm("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:i,alpha:n=1})=>"hsla("+Math.round(t)+", "+$t.transform(Kn(e))+", "+$t.transform(Kn(i))+", "+Kn(ls.transform(n))+")"},Qe={test:t=>Pi.test(t)||ka.test(t)||rn.test(t),parse:t=>Pi.test(t)?Pi.parse(t):rn.test(t)?rn.parse(t):ka.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Pi.transform(t):rn.transform(t),getAnimatableNone:t=>{const e=Qe.parse(t);return e.alpha=0,Qe.transform(e)}},g2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function v2(t){return isNaN(t)&&typeof t=="string"&&(t.match(Bl)?.length||0)+(t.match(g2)?.length||0)>0}const Om="number",$m="color",y2="var",b2="var(",ed="${}",w2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function cs(t){const e=t.toString(),i=[],n={color:[],number:[],var:[]},r=[];let o=0;const l=e.replace(w2,c=>(Qe.test(c)?(n.color.push(o),r.push($m),i.push(Qe.parse(c))):c.startsWith(b2)?(n.var.push(o),r.push(y2),i.push(c)):(n.number.push(o),r.push(Om),i.push(parseFloat(c))),++o,ed)).split(ed);return{values:i,split:l,indexes:n,types:r}}function Hm(t){return cs(t).values}function jm(t){const{split:e,types:i}=cs(t),n=e.length;return r=>{let o="";for(let a=0;a<n;a++)if(o+=e[a],r[a]!==void 0){const l=i[a];l===Om?o+=Kn(r[a]):l===$m?o+=Qe.transform(r[a]):o+=r[a]}return o}}const k2=t=>typeof t=="number"?0:Qe.test(t)?Qe.getAnimatableNone(t):t;function _2(t){const e=Hm(t);return jm(t)(e.map(k2))}const mi={test:v2,parse:Hm,createTransformer:jm,getAnimatableNone:_2};function Mo(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(e-t)*6*i:i<1/2?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function x2({hue:t,saturation:e,lightness:i,alpha:n}){t/=360,e/=100,i/=100;let r=0,o=0,a=0;if(!e)r=o=a=i;else{const l=i<.5?i*(1+e):i+e-i*e,c=2*i-l;r=Mo(c,l,t+1/3),o=Mo(c,l,t),a=Mo(c,l,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:n}}function Wr(t,e){return i=>i>0?e:t}const Ke=(t,e,i)=>t+(e-t)*i,To=(t,e,i)=>{const n=t*t,r=i*(e*e-n)+n;return r<0?0:Math.sqrt(r)},C2=[ka,Pi,rn],S2=t=>C2.find(e=>e.test(t));function td(t){const e=S2(t);if(!e)return!1;let i=e.parse(t);return e===rn&&(i=x2(i)),i}const id=(t,e)=>{const i=td(t),n=td(e);if(!i||!n)return Wr(t,e);const r={...i};return o=>(r.red=To(i.red,n.red,o),r.green=To(i.green,n.green,o),r.blue=To(i.blue,n.blue,o),r.alpha=Ke(i.alpha,n.alpha,o),Pi.transform(r))},_a=new Set(["none","hidden"]);function N2(t,e){return _a.has(t)?i=>i<=0?t:e:i=>i>=1?e:t}function L2(t,e){return i=>Ke(t,e,i)}function Vl(t){return typeof t=="number"?L2:typeof t=="string"?Rl(t)?Wr:Qe.test(t)?id:E2:Array.isArray(t)?Um:typeof t=="object"?Qe.test(t)?id:M2:Wr}function Um(t,e){const i=[...t],n=i.length,r=t.map((o,a)=>Vl(o)(o,e[a]));return o=>{for(let a=0;a<n;a++)i[a]=r[a](o);return i}}function M2(t,e){const i={...t,...e},n={};for(const r in i)t[r]!==void 0&&e[r]!==void 0&&(n[r]=Vl(t[r])(t[r],e[r]));return r=>{for(const o in n)i[o]=n[o](r);return i}}function T2(t,e){const i=[],n={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const o=e.types[r],a=t.indexes[o][n[o]],l=t.values[a]??0;i[r]=l,n[o]++}return i}const E2=(t,e)=>{const i=mi.createTransformer(e),n=cs(t),r=cs(e);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?_a.has(t)&&!r.values.length||_a.has(e)&&!n.values.length?N2(t,e):Ns(Um(T2(n,r),r.values),i):Wr(t,e)};function Gm(t,e,i){return typeof t=="number"&&typeof e=="number"&&typeof i=="number"?Ke(t,e,i):Vl(t)(t,e)}const D2=t=>{const e=({timestamp:i})=>t(i);return{start:(i=!0)=>We.update(e,i),stop:()=>ii(e),now:()=>at.isProcessing?at.timestamp:vt.now()}},Km=(t,e,i=10)=>{let n="";const r=Math.max(Math.round(e/i),2);for(let o=0;o<r;o++)n+=Math.round(t(o/(r-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Or=2e4;function Wl(t){let e=0;const i=50;let n=t.next(e);for(;!n.done&&e<Or;)e+=i,n=t.next(e);return e>=Or?1/0:e}function A2(t,e=100,i){const n=i({...t,keyframes:[0,e]}),r=Math.min(Wl(n),Or);return{type:"keyframes",ease:o=>n.next(r*o).value/e,duration:xt(r)}}const F2=5;function Ym(t,e,i){const n=Math.max(e-F2,0);return Lm(i-t(n),e-n)}const Ye={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Eo=.001;function P2({duration:t=Ye.duration,bounce:e=Ye.bounce,velocity:i=Ye.velocity,mass:n=Ye.mass}){let r,o,a=1-e;a=ei(Ye.minDamping,Ye.maxDamping,a),t=ei(Ye.minDuration,Ye.maxDuration,xt(t)),a<1?(r=d=>{const u=d*a,h=u*t,m=u-i,f=xa(d,a),g=Math.exp(-h);return Eo-m/f*g},o=d=>{const h=d*a*t,m=h*i+i,f=Math.pow(a,2)*Math.pow(d,2)*t,g=Math.exp(-h),p=xa(Math.pow(d,2),a);return(-r(d)+Eo>0?-1:1)*((m-f)*g)/p}):(r=d=>{const u=Math.exp(-d*t),h=(d-i)*t+1;return-Eo+u*h},o=d=>{const u=Math.exp(-d*t),h=(i-d)*(t*t);return u*h});const l=5/t,c=R2(r,o,l);if(t=Ot(t),isNaN(c))return{stiffness:Ye.stiffness,damping:Ye.damping,duration:t};{const d=Math.pow(c,2)*n;return{stiffness:d,damping:a*2*Math.sqrt(n*d),duration:t}}}const I2=12;function R2(t,e,i){let n=i;for(let r=1;r<I2;r++)n=n-t(n)/e(n);return n}function xa(t,e){return t*Math.sqrt(1-e*e)}const B2=["duration","bounce"],z2=["stiffness","damping","mass"];function nd(t,e){return e.some(i=>t[i]!==void 0)}function V2(t){let e={velocity:Ye.velocity,stiffness:Ye.stiffness,damping:Ye.damping,mass:Ye.mass,isResolvedFromDuration:!1,...t};if(!nd(t,z2)&&nd(t,B2))if(t.visualDuration){const i=t.visualDuration,n=2*Math.PI/(i*1.2),r=n*n,o=2*ei(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:Ye.mass,stiffness:r,damping:o}}else{const i=P2(t);e={...e,...i,mass:Ye.mass},e.isResolvedFromDuration=!0}return e}function $r(t=Ye.visualDuration,e=Ye.bounce){const i=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:r}=i;const o=i.keyframes[0],a=i.keyframes[i.keyframes.length-1],l={done:!1,value:o},{stiffness:c,damping:d,mass:u,duration:h,velocity:m,isResolvedFromDuration:f}=V2({...i,velocity:-xt(i.velocity||0)}),g=m||0,p=d/(2*Math.sqrt(c*u)),v=a-o,b=xt(Math.sqrt(c/u)),y=Math.abs(v)<5;n||(n=y?Ye.restSpeed.granular:Ye.restSpeed.default),r||(r=y?Ye.restDelta.granular:Ye.restDelta.default);let w;if(p<1){const k=xa(b,p);w=N=>{const C=Math.exp(-p*b*N);return a-C*((g+p*b*v)/k*Math.sin(k*N)+v*Math.cos(k*N))}}else if(p===1)w=k=>a-Math.exp(-b*k)*(v+(g+b*v)*k);else{const k=b*Math.sqrt(p*p-1);w=N=>{const C=Math.exp(-p*b*N),S=Math.min(k*N,300);return a-C*((g+p*b*v)*Math.sinh(S)+k*v*Math.cosh(S))/k}}const _={calculatedDuration:f&&h||null,next:k=>{const N=w(k);if(f)l.done=k>=h;else{let C=k===0?g:0;p<1&&(C=k===0?Ot(g):Ym(w,k,N));const S=Math.abs(C)<=n,x=Math.abs(a-N)<=r;l.done=S&&x}return l.value=l.done?a:N,l},toString:()=>{const k=Math.min(Wl(_),Or),N=Km(C=>_.next(k*C).value,k,30);return k+"ms "+N},toTransition:()=>{}};return _}$r.applyToOptions=t=>{const e=A2(t,100,$r);return t.ease=e.ease,t.duration=Ot(e.duration),t.type="keyframes",t};function Ca({keyframes:t,velocity:e=0,power:i=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=t[0],m={done:!1,value:h},f=S=>l!==void 0&&S<l||c!==void 0&&S>c,g=S=>l===void 0?c:c===void 0||Math.abs(l-S)<Math.abs(c-S)?l:c;let p=i*e;const v=h+p,b=a===void 0?v:a(v);b!==v&&(p=b-h);const y=S=>-p*Math.exp(-S/n),w=S=>b+y(S),_=S=>{const x=y(S),B=w(S);m.done=Math.abs(x)<=d,m.value=m.done?b:B};let k,N;const C=S=>{f(m.value)&&(k=S,N=$r({keyframes:[m.value,g(m.value)],velocity:Ym(w,S,m.value),damping:r,stiffness:o,restDelta:d,restSpeed:u}))};return C(0),{calculatedDuration:null,next:S=>{let x=!1;return!N&&k===void 0&&(x=!0,_(S),C(S)),k!==void 0&&S>=k?N.next(S-k):(!x&&_(S),m)}}}function W2(t,e,i){const n=[],r=i||ti.mix||Gm,o=t.length-1;for(let a=0;a<o;a++){let l=r(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||Ct:e;l=Ns(c,l)}n.push(l)}return n}function Zm(t,e,{clamp:i=!0,ease:n,mixer:r}={}){const o=t.length;if(o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=W2(e,n,r),c=l.length,d=u=>{if(a&&u<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const m=as(t[h],t[h+1],u);return l[h](m)};return i?u=>d(ei(t[0],t[o-1],u)):d}function O2(t,e){const i=t[t.length-1];for(let n=1;n<=e;n++){const r=as(0,e,n);t.push(Ke(i,1,r))}}function $2(t){const e=[0];return O2(e,t.length-1),e}function H2(t,e){return t.map(i=>i*e)}function j2(t,e){return t.map(()=>e||Rm).splice(0,t.length-1)}function Yn({duration:t=300,keyframes:e,times:i,ease:n="easeInOut"}){const r=i2(n)?n.map(Jc):Jc(n),o={done:!1,value:e[0]},a=H2(i&&i.length===e.length?i:$2(e),t),l=Zm(a,e,{ease:Array.isArray(r)?r:j2(e,r)});return{calculatedDuration:t,next:c=>(o.value=l(c),o.done=c>=t,o)}}const U2=t=>t!==null;function Ol(t,{repeat:e,repeatType:i="loop"},n,r=1){const o=t.filter(U2),l=r<0||e&&i!=="loop"&&e%2===1?0:o.length-1;return!l||n===void 0?o[l]:n}const G2={decay:Ca,inertia:Ca,tween:Yn,keyframes:Yn,spring:$r};function qm(t){typeof t.type=="string"&&(t.type=G2[t.type])}class $l{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,i){return this.finished.then(e,i)}}const K2=t=>t/100;class lo extends $l{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:i}=this.options;i&&i.updatedAt!==vt.now()&&this.tick(vt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;qm(e);const{type:i=Yn,repeat:n=0,repeatDelay:r=0,repeatType:o,velocity:a=0}=e;let{keyframes:l}=e;const c=i||Yn;c!==Yn&&typeof l[0]!="number"&&(this.mixKeyframes=Ns(K2,Gm(l[0],l[1])),l=[0,100]);const d=c({...e,keyframes:l});o==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-a})),d.calculatedDuration===null&&(d.calculatedDuration=Wl(d));const{calculatedDuration:u}=d;this.calculatedDuration=u,this.resolvedDuration=u+r,this.totalDuration=this.resolvedDuration*(n+1)-r,this.generator=d}updateTime(e){const i=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=i}tick(e,i=!1){const{generator:n,totalDuration:r,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:d=0,keyframes:u,repeat:h,repeatType:m,repeatDelay:f,type:g,onUpdate:p,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),i?this.currentTime=e:this.updateTime(e);const b=this.currentTime-d*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?b<0:b>r;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let w=this.currentTime,_=n;if(h){const S=Math.min(this.currentTime,r)/l;let x=Math.floor(S),B=S%1;!B&&S>=1&&(B=1),B===1&&x--,x=Math.min(x,h+1),!!(x%2)&&(m==="reverse"?(B=1-B,f&&(B-=f/l)):m==="mirror"&&(_=a)),w=ei(0,1,B)*l}const k=y?{done:!1,value:u[0]}:_.next(w);o&&(k.value=o(k.value));let{done:N}=k;!y&&c!==null&&(N=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return C&&g!==Ca&&(k.value=Ol(u,this.options,v,this.speed)),p&&p(k.value),C&&this.finish(),k}then(e,i){return this.finished.then(e,i)}get duration(){return xt(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+xt(e)}get time(){return xt(this.currentTime)}set time(e){e=Ot(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(vt.now());const i=this.playbackSpeed!==e;this.playbackSpeed=e,i&&(this.time=xt(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=D2,startTime:i}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=i??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(vt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function Y2(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ii=t=>t*180/Math.PI,Sa=t=>{const e=Ii(Math.atan2(t[1],t[0]));return Na(e)},Z2={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Sa,rotateZ:Sa,skewX:t=>Ii(Math.atan(t[1])),skewY:t=>Ii(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Na=t=>(t=t%360,t<0&&(t+=360),t),sd=Sa,rd=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),od=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),q2={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:rd,scaleY:od,scale:t=>(rd(t)+od(t))/2,rotateX:t=>Na(Ii(Math.atan2(t[6],t[5]))),rotateY:t=>Na(Ii(Math.atan2(-t[2],t[0]))),rotateZ:sd,rotate:sd,skewX:t=>Ii(Math.atan(t[4])),skewY:t=>Ii(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function La(t){return t.includes("scale")?1:0}function Ma(t,e){if(!t||t==="none")return La(e);const i=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,r;if(i)n=q2,r=i;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Z2,r=l}if(!r)return La(e);const o=n[e],a=r[1].split(",").map(J2);return typeof o=="function"?o(a):a[o]}const X2=(t,e)=>{const{transform:i="none"}=getComputedStyle(t);return Ma(i,e)};function J2(t){return parseFloat(t.trim())}const bn=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],wn=new Set(bn),ad=t=>t===yn||t===we,Q2=new Set(["x","y","z"]),ev=bn.filter(t=>!Q2.has(t));function tv(t){const e=[];return ev.forEach(i=>{const n=t.getValue(i);n!==void 0&&(e.push([i,n.get()]),n.set(i.startsWith("scale")?1:0))}),e}const zi={width:({x:t},{paddingLeft:e="0",paddingRight:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),height:({y:t},{paddingTop:e="0",paddingBottom:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Ma(e,"x"),y:(t,{transform:e})=>Ma(e,"y")};zi.translateX=zi.x;zi.translateY=zi.y;const Vi=new Set;let Ta=!1,Ea=!1,Da=!1;function Xm(){if(Ea){const t=Array.from(Vi).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),i=new Map;e.forEach(n=>{const r=tv(n);r.length&&(i.set(n,r),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const r=i.get(n);r&&r.forEach(([o,a])=>{n.getValue(o)?.set(a)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Ea=!1,Ta=!1,Vi.forEach(t=>t.complete(Da)),Vi.clear()}function Jm(){Vi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Ea=!0)})}function iv(){Da=!0,Jm(),Xm(),Da=!1}class Hl{constructor(e,i,n,r,o,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=i,this.name=n,this.motionValue=r,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Vi.add(this),Ta||(Ta=!0,We.read(Jm),We.resolveKeyframes(Xm))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:i,element:n,motionValue:r}=this;if(e[0]===null){const o=r?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&i){const l=n.readValue(i,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}Y2(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Vi.delete(this)}cancel(){this.state==="scheduled"&&(Vi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const nv=t=>t.startsWith("--");function sv(t,e,i){nv(e)?t.style.setProperty(e,i):t.style[e]=i}const rv=Dl(()=>window.ScrollTimeline!==void 0),ov={};function av(t,e){const i=Dl(t);return()=>ov[e]??i()}const Qm=av(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Rn=([t,e,i,n])=>`cubic-bezier(${t}, ${e}, ${i}, ${n})`,ld={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Rn([0,.65,.55,1]),circOut:Rn([.55,0,1,.45]),backIn:Rn([.31,.01,.66,-.59]),backOut:Rn([.33,1.53,.69,.99])};function ef(t,e){if(t)return typeof t=="function"?Qm()?Km(t,e):"ease-out":Bm(t)?Rn(t):Array.isArray(t)?t.map(i=>ef(i,e)||ld.easeOut):ld[t]}function lv(t,e,i,{delay:n=0,duration:r=300,repeat:o=0,repeatType:a="loop",ease:l="easeOut",times:c}={},d=void 0){const u={[e]:i};c&&(u.offset=c);const h=ef(l,r);Array.isArray(h)&&(u.easing=h);const m={delay:n,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(u,m)}function tf(t){return typeof t=="function"&&"applyToOptions"in t}function cv({type:t,...e}){return tf(t)&&Qm()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class dv extends $l{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:i,name:n,keyframes:r,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!o,this.allowFlatten=a,this.options=e;const d=cv(e);this.animation=lv(i,n,r,d,o),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const u=Ol(r,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(u):sv(i,n,u),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return xt(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+xt(e)}get time(){return xt(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ot(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:i}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&rv()?(this.animation.timeline=e,Ct):i(this)}}const nf={anticipate:Fm,backInOut:Am,circInOut:Im};function uv(t){return t in nf}function hv(t){typeof t.ease=="string"&&uv(t.ease)&&(t.ease=nf[t.ease])}const cd=10;class mv extends dv{constructor(e){hv(e),qm(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:i,onUpdate:n,onComplete:r,element:o,...a}=this.options;if(!i)return;if(e!==void 0){i.set(e);return}const l=new lo({...a,autoplay:!1}),c=Ot(this.finishedTime??this.time);i.setWithVelocity(l.sample(c-cd).value,l.sample(c).value,cd),l.stop()}}const dd=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(mi.test(t)||t==="0")&&!t.startsWith("url("));function fv(t){const e=t[0];if(t.length===1)return!0;for(let i=0;i<t.length;i++)if(t[i]!==e)return!0}function pv(t,e,i,n){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=dd(r,e),l=dd(o,e);return!a||!l?!1:fv(t)||(i==="spring"||tf(i))&&n}function Aa(t){t.duration=0,t.type="keyframes"}const gv=new Set(["opacity","clipPath","filter","transform"]),vv=Dl(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function yv(t){const{motionValue:e,name:i,repeatDelay:n,repeatType:r,damping:o,type:a}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return vv()&&i&&gv.has(i)&&(i!=="transform"||!d)&&!c&&!n&&r!=="mirror"&&o!==0&&a!=="inertia"}const bv=40;class wv extends $l{constructor({autoplay:e=!0,delay:i=0,type:n="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",keyframes:l,name:c,motionValue:d,element:u,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=vt.now();const m={autoplay:e,delay:i,type:n,repeat:r,repeatDelay:o,repeatType:a,name:c,motionValue:d,element:u,...h},f=u?.KeyframeResolver||Hl;this.keyframeResolver=new f(l,(g,p,v)=>this.onKeyframesResolved(g,p,m,!v),c,d,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,i,n,r){this.keyframeResolver=void 0;const{name:o,type:a,velocity:l,delay:c,isHandoff:d,onUpdate:u}=n;this.resolvedAt=vt.now(),pv(e,o,a,l)||((ti.instantAnimations||!c)&&u?.(Ol(e,n,i)),e[0]=e[e.length-1],Aa(n),n.repeat=0);const m={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>bv?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:i,...n,keyframes:e},f=!d&&yv(m)?new mv({...m,element:m.motionValue.owner.current}):new lo(m);f.finished.then(()=>this.notifyFinished()).catch(Ct),this.pendingTimeline&&(this.stopTimeline=f.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=f}get finished(){return this._animation?this.animation.finished:this._finished}then(e,i){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),iv()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const kv=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _v(t){const e=kv.exec(t);if(!e)return[,];const[,i,n,r]=e;return[`--${i??n}`,r]}function sf(t,e,i=1){const[n,r]=_v(t);if(!n)return;const o=window.getComputedStyle(e).getPropertyValue(n);if(o){const a=o.trim();return Cm(a)?parseFloat(a):a}return Rl(r)?sf(r,e,i+1):r}function jl(t,e){return t?.[e]??t?.default??t}const rf=new Set(["width","height","top","left","right","bottom",...bn]),xv={test:t=>t==="auto",parse:t=>t},of=t=>e=>e.test(t),af=[yn,we,$t,oi,p2,f2,xv],ud=t=>af.find(of(t));function Cv(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Nm(t):!0}const Sv=new Set(["brightness","contrast","saturate","opacity"]);function Nv(t){const[e,i]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=i.match(Bl)||[];if(!n)return t;const r=i.replace(n,"");let o=Sv.has(e)?1:0;return n!==i&&(o*=100),e+"("+o+r+")"}const Lv=/\b([a-z-]*)\(.*?\)/gu,Fa={...mi,getAnimatableNone:t=>{const e=t.match(Lv);return e?e.map(Nv).join(" "):t}},hd={...yn,transform:Math.round},Mv={rotate:oi,rotateX:oi,rotateY:oi,rotateZ:oi,scale:Vs,scaleX:Vs,scaleY:Vs,scaleZ:Vs,skew:oi,skewX:oi,skewY:oi,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:ls,originX:Qc,originY:Qc,originZ:we},Ul={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,backgroundPositionX:we,backgroundPositionY:we,...Mv,zIndex:hd,fillOpacity:ls,strokeOpacity:ls,numOctaves:hd},Tv={...Ul,color:Qe,backgroundColor:Qe,outlineColor:Qe,fill:Qe,stroke:Qe,borderColor:Qe,borderTopColor:Qe,borderRightColor:Qe,borderBottomColor:Qe,borderLeftColor:Qe,filter:Fa,WebkitFilter:Fa},lf=t=>Tv[t];function cf(t,e){let i=lf(t);return i!==Fa&&(i=mi),i.getAnimatableNone?i.getAnimatableNone(e):void 0}const Ev=new Set(["auto","none","0"]);function Dv(t,e,i){let n=0,r;for(;n<t.length&&!r;){const o=t[n];typeof o=="string"&&!Ev.has(o)&&cs(o).values.length&&(r=t[n]),n++}if(r&&i)for(const o of e)t[o]=cf(i,r)}class Av extends Hl{constructor(e,i,n,r,o){super(e,i,n,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:i,name:n}=this;if(!i||!i.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),Rl(d))){const u=sf(d,i.current);u!==void 0&&(e[c]=u),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!rf.has(n)||e.length!==2)return;const[r,o]=e,a=ud(r),l=ud(o);if(a!==l)if(ad(a)&&ad(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else zi[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:i}=this,n=[];for(let r=0;r<e.length;r++)(e[r]===null||Cv(e[r]))&&n.push(r);n.length&&Dv(e,n,i)}measureInitialState(){const{element:e,unresolvedKeyframes:i,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),i[0]=this.measuredOrigin;const r=i[i.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){const{element:e,name:i,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const r=e.getValue(i);r&&r.jump(this.measuredOrigin,!1);const o=n.length-1,a=n[o];n[o]=zi[i](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function Fv(t,e,i){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const r=i?.[t]??n.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const df=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function uf(t){return Sm(t)&&"offsetHeight"in t}const md=30,Pv=t=>!isNaN(parseFloat(t)),Zn={current:void 0};class Iv{constructor(e,i={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const r=vt.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=i.owner}setCurrent(e){this.current=e,this.updatedAt=vt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Pv(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,i){this.events[e]||(this.events[e]=new Al);const n=this.events[e].add(i);return e==="change"?()=>{n(),We.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,i){this.passiveEffect=e,this.stopPassiveEffect=i}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,i,n){this.set(i),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,i=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Zn.current&&Zn.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=vt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>md)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,md);return Lm(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(e){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=e(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ji(t,e){return new Iv(t,e)}const{schedule:Gl}=zm(queueMicrotask,!1),Lt={x:!1,y:!1};function hf(){return Lt.x||Lt.y}function Rv(t){return t==="x"||t==="y"?Lt[t]?null:(Lt[t]=!0,()=>{Lt[t]=!1}):Lt.x||Lt.y?null:(Lt.x=Lt.y=!0,()=>{Lt.x=Lt.y=!1})}function mf(t,e){const i=Fv(t),n=new AbortController,r={passive:!0,...e,signal:n.signal};return[i,r,()=>n.abort()]}function fd(t){return!(t.pointerType==="touch"||hf())}function Bv(t,e,i={}){const[n,r,o]=mf(t,i),a=l=>{if(!fd(l))return;const{target:c}=l,d=e(c,l);if(typeof d!="function"||!c)return;const u=h=>{fd(h)&&(d(h),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,r)};return n.forEach(l=>{l.addEventListener("pointerenter",a,r)}),o}const ff=(t,e)=>e?t===e?!0:ff(t,e.parentElement):!1,Kl=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,zv=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Vv(t){return zv.has(t.tagName)||t.tabIndex!==-1}const Sr=new WeakSet;function pd(t){return e=>{e.key==="Enter"&&t(e)}}function Do(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Wv=(t,e)=>{const i=t.currentTarget;if(!i)return;const n=pd(()=>{if(Sr.has(i))return;Do(i,"down");const r=pd(()=>{Do(i,"up")}),o=()=>Do(i,"cancel");i.addEventListener("keyup",r,e),i.addEventListener("blur",o,e)});i.addEventListener("keydown",n,e),i.addEventListener("blur",()=>i.removeEventListener("keydown",n),e)};function gd(t){return Kl(t)&&!hf()}function Ov(t,e,i={}){const[n,r,o]=mf(t,i),a=l=>{const c=l.currentTarget;if(!gd(l))return;Sr.add(c);const d=e(c,l),u=(f,g)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),Sr.has(c)&&Sr.delete(c),gd(f)&&typeof d=="function"&&d(f,{success:g})},h=f=>{u(f,c===window||c===document||i.useGlobalTarget||ff(c,f.target))},m=f=>{u(f,!1)};window.addEventListener("pointerup",h,r),window.addEventListener("pointercancel",m,r)};return n.forEach(l=>{(i.useGlobalTarget?window:l).addEventListener("pointerdown",a,r),uf(l)&&(l.addEventListener("focus",d=>Wv(d,r)),!Vv(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),o}function pf(t){return Sm(t)&&"ownerSVGElement"in t}function $v(t){return pf(t)&&t.tagName==="svg"}function Hv(...t){const e=!Array.isArray(t[0]),i=e?0:-1,n=t[0+i],r=t[1+i],o=t[2+i],a=t[3+i],l=Zm(r,o,a);return e?l(n):l}const st=t=>!!(t&&t.getVelocity);function jv(t,e,i){const n=t.get();let r=null,o=n,a;const l=typeof n=="string"?n.replace(/[\d.-]/g,""):void 0,c=()=>{r&&(r.stop(),r=null)},d=()=>{c(),r=new lo({keyframes:[yd(t.get()),yd(o)],velocity:t.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...i,onUpdate:a})};if(t.attach((u,h)=>(o=u,a=m=>h(vd(m,l)),We.postRender(d),t.get()),c),st(e)){const u=e.on("change",m=>t.set(vd(m,l))),h=t.on("destroy",u);return()=>{u(),h()}}return c}function vd(t,e){return e?t+e:t}function yd(t){return typeof t=="number"?t:parseFloat(t)}const Uv=[...af,Qe,mi],Gv=t=>Uv.find(of(t)),Ts=Yi({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function bd(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Kv(...t){return e=>{let i=!1;const n=t.map(r=>{const o=bd(r,e);return!i&&typeof o=="function"&&(i=!0),o});if(i)return()=>{for(let r=0;r<n.length;r++){const o=n[r];typeof o=="function"?o():bd(t[r],null)}}}}function Yv(...t){return Ee(Kv(...t),t)}class Zv extends Et{getSnapshotBeforeUpdate(e){const i=this.props.childRef.current;if(i&&e.isPresent&&!this.props.isPresent){const n=i.offsetParent,r=uf(n)&&n.offsetWidth||0,o=this.props.sizeRef.current;o.height=i.offsetHeight||0,o.width=i.offsetWidth||0,o.top=i.offsetTop,o.left=i.offsetLeft,o.right=r-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function qv({children:t,isPresent:e,anchorX:i,root:n}){const r=_l(),o=te(null),a=te({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=tt(Ts),c=Yv(o,t?.ref);return Cl(()=>{const{width:d,height:u,top:h,left:m,right:f}=a.current;if(e||!o.current||!d||!u)return;const g=i==="left"?`left: ${m}`:`right: ${f}`;o.current.dataset.motionPopId=r;const p=document.createElement("style");l&&(p.nonce=l);const v=n??document.head;return v.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${u}px !important;
            ${g}px !important;
            top: ${h}px !important;
          }
        `),()=>{v.contains(p)&&v.removeChild(p)}},[e]),s(Zv,{isPresent:e,childRef:o,sizeRef:a,children:Z1(t,{ref:c})})}const Xv=({children:t,initial:e,isPresent:i,onExitComplete:n,custom:r,presenceAffectsLayout:o,mode:a,anchorX:l,root:c})=>{const d=Ss(Jv),u=_l();let h=!0,m=Me(()=>(h=!1,{id:u,initial:e,isPresent:i,custom:r,onExitComplete:f=>{d.set(f,!0);for(const g of d.values())if(!g)return;n&&n()},register:f=>(d.set(f,!1),()=>d.delete(f))}),[i,d,n]);return o&&h&&(m={...m}),Me(()=>{d.forEach((f,g)=>d.set(g,!1))},[i]),U(()=>{!i&&!d.size&&n&&n()},[i]),a==="popLayout"&&(t=s(qv,{isPresent:i,anchorX:l,root:c,children:t})),s(ao.Provider,{value:m,children:t})};function Jv(){return new Map}function gf(t=!0){const e=tt(ao);if(e===null)return[!0,null];const{isPresent:i,onExitComplete:n,register:r}=e,o=_l();U(()=>{if(t)return r(o)},[t]);const a=Ee(()=>t&&n&&n(o),[o,n,t]);return!i&&n?[!1,a]:[!0]}const Ws=t=>t.key||"";function wd(t){const e=[];return z1.forEach(t,i=>{xm(i)&&e.push(i)}),e}const Ce=({children:t,custom:e,initial:i=!0,onExitComplete:n,presenceAffectsLayout:r=!0,mode:o="sync",propagate:a=!1,anchorX:l="left",root:c})=>{const[d,u]=gf(a),h=Me(()=>wd(t),[t]),m=a&&!d?[]:h.map(Ws),f=te(!0),g=te(h),p=Ss(()=>new Map),[v,b]=M(h),[y,w]=M(h);Ml(()=>{f.current=!1,g.current=h;for(let N=0;N<y.length;N++){const C=Ws(y[N]);m.includes(C)?p.delete(C):p.get(C)!==!0&&p.set(C,!1)}},[y,m.length,m.join("-")]);const _=[];if(h!==v){let N=[...h];for(let C=0;C<y.length;C++){const S=y[C],x=Ws(S);m.includes(x)||(N.splice(C,0,S),_.push(S))}return o==="wait"&&_.length&&(N=_),w(wd(N)),b(h),null}const{forceRender:k}=tt(Nl);return s(ve,{children:y.map(N=>{const C=Ws(N),S=a&&!d?!1:h===y||m.includes(C),x=()=>{if(p.has(C))p.set(C,!0);else return;let B=!0;p.forEach(A=>{A||(B=!1)}),B&&(k?.(),w(g.current),a&&u?.(),n&&n())};return s(Xv,{isPresent:S,initial:!f.current||i?void 0:!1,custom:e,presenceAffectsLayout:r,mode:o,root:c,onExitComplete:S?void 0:x,anchorX:l,children:N},C)})})},vf=Yi({strict:!1}),kd={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},mn={};for(const t in kd)mn[t]={isEnabled:e=>kd[t].some(i=>!!e[i])};function Qv(t){for(const e in t)mn[e]={...mn[e],...t[e]}}const ey=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hr(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ey.has(t)}let yf=t=>!Hr(t);function ty(t){typeof t=="function"&&(yf=e=>e.startsWith("on")?!Hr(e):t(e))}try{ty(require("@emotion/is-prop-valid").default)}catch{}function iy(t,e,i){const n={};for(const r in t)r==="values"&&typeof t.values=="object"||(yf(r)||i===!0&&Hr(r)||!e&&!Hr(r)||t.draggable&&r.startsWith("onDrag"))&&(n[r]=t[r]);return n}const co=Yi({});function uo(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ds(t){return typeof t=="string"||Array.isArray(t)}const Yl=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zl=["initial",...Yl];function ho(t){return uo(t.animate)||Zl.some(e=>ds(t[e]))}function bf(t){return!!(ho(t)||t.variants)}function ny(t,e){if(ho(t)){const{initial:i,animate:n}=t;return{initial:i===!1||ds(i)?i:void 0,animate:ds(n)?n:void 0}}return t.inherit!==!1?e:{}}function sy(t){const{initial:e,animate:i}=ny(t,tt(co));return Me(()=>({initial:e,animate:i}),[_d(e),_d(i)])}function _d(t){return Array.isArray(t)?t.join(" "):t}const us={};function ry(t){for(const e in t)us[e]=t[e],Il(e)&&(us[e].isCSSVariable=!0)}function wf(t,{layout:e,layoutId:i}){return wn.has(t)||t.startsWith("origin")||(e||i!==void 0)&&(!!us[t]||t==="opacity")}const oy={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ay=bn.length;function ly(t,e,i){let n="",r=!0;for(let o=0;o<ay;o++){const a=bn[o],l=t[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||i){const d=df(l,Ul[a]);if(!c){r=!1;const u=oy[a]||a;n+=`${u}(${d}) `}i&&(e[a]=d)}}return n=n.trim(),i?n=i(e,r?"":n):r&&(n="none"),n}function ql(t,e,i){const{style:n,vars:r,transformOrigin:o}=t;let a=!1,l=!1;for(const c in e){const d=e[c];if(wn.has(c)){a=!0;continue}else if(Il(c)){r[c]=d;continue}else{const u=df(d,Ul[c]);c.startsWith("origin")?(l=!0,o[c]=u):n[c]=u}}if(e.transform||(a||i?n.transform=ly(e,t.transform,i):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=o;n.transformOrigin=`${c} ${d} ${u}`}}const Xl=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function kf(t,e,i){for(const n in e)!st(e[n])&&!wf(n,i)&&(t[n]=e[n])}function cy({transformTemplate:t},e){return Me(()=>{const i=Xl();return ql(i,e,t),Object.assign({},i.vars,i.style)},[e])}function dy(t,e){const i=t.style||{},n={};return kf(n,i,t),Object.assign(n,cy(t,e)),n}function uy(t,e){const i={},n=dy(t,e);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=n,i}const hy={offset:"stroke-dashoffset",array:"stroke-dasharray"},my={offset:"strokeDashoffset",array:"strokeDasharray"};function fy(t,e,i=1,n=0,r=!0){t.pathLength=1;const o=r?hy:my;t[o.offset]=we.transform(-n);const a=we.transform(e),l=we.transform(i);t[o.array]=`${a} ${l}`}function _f(t,{attrX:e,attrY:i,attrScale:n,pathLength:r,pathSpacing:o=1,pathOffset:a=0,...l},c,d,u){if(ql(t,l,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:m}=t;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=u?.transformBox??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),i!==void 0&&(h.y=i),n!==void 0&&(h.scale=n),r!==void 0&&fy(h,r,o,a,!1)}const xf=()=>({...Xl(),attrs:{}}),Cf=t=>typeof t=="string"&&t.toLowerCase()==="svg";function py(t,e,i,n){const r=Me(()=>{const o=xf();return _f(o,e,Cf(n),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};kf(o,t.style,t),r.style={...o,...r.style}}return r}const gy=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jl(t){return typeof t!="string"||t.includes("-")?!1:!!(gy.indexOf(t)>-1||/[A-Z]/u.test(t))}function vy(t,e,i,{latestValues:n},r,o=!1){const l=(Jl(t)?py:uy)(e,n,r,t),c=iy(e,typeof t=="string",o),d=t!==ve?{...c,...l,ref:i}:{},{children:u}=e,h=Me(()=>st(u)?u.get():u,[u]);return Hi(t,{...d,children:h})}function xd(t){const e=[{},{}];return t?.values.forEach((i,n)=>{e[0][n]=i.get(),e[1][n]=i.getVelocity()}),e}function Ql(t,e,i,n){if(typeof e=="function"){const[r,o]=xd(n);e=e(i!==void 0?i:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=xd(n);e=e(i!==void 0?i:t.custom,r,o)}return e}function Nr(t){return st(t)?t.get():t}function yy({scrapeMotionValuesFromProps:t,createRenderState:e},i,n,r){return{latestValues:by(i,n,r,t),renderState:e()}}function by(t,e,i,n){const r={},o=n(t,{});for(const m in o)r[m]=Nr(o[m]);let{initial:a,animate:l}=t;const c=ho(t),d=bf(t);e&&d&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let u=i?i.initial===!1:!1;u=u||a===!1;const h=u?l:a;if(h&&typeof h!="boolean"&&!uo(h)){const m=Array.isArray(h)?h:[h];for(let f=0;f<m.length;f++){const g=Ql(t,m[f]);if(g){const{transitionEnd:p,transition:v,...b}=g;for(const y in b){let w=b[y];if(Array.isArray(w)){const _=u?w.length-1:0;w=w[_]}w!==null&&(r[y]=w)}for(const y in p)r[y]=p[y]}}}return r}const Sf=t=>(e,i)=>{const n=tt(co),r=tt(ao),o=()=>yy(t,e,n,r);return i?o():Ss(o)};function ec(t,e,i){const{style:n}=t,r={};for(const o in n)(st(n[o])||e.style&&st(e.style[o])||wf(o,t)||i?.getValue(o)?.liveStyle!==void 0)&&(r[o]=n[o]);return r}const wy=Sf({scrapeMotionValuesFromProps:ec,createRenderState:Xl});function Nf(t,e,i){const n=ec(t,e,i);for(const r in t)if(st(t[r])||st(e[r])){const o=bn.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[o]=t[r]}return n}const ky=Sf({scrapeMotionValuesFromProps:Nf,createRenderState:xf}),_y=Symbol.for("motionComponentSymbol");function on(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function xy(t,e,i){return Ee(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),i&&(typeof i=="function"?i(n):on(i)&&(i.current=n))},[e])}const tc=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Cy="framerAppearId",Lf="data-"+tc(Cy),Mf=Yi({});function Sy(t,e,i,n,r){const{visualElement:o}=tt(co),a=tt(vf),l=tt(ao),c=tt(Ts).reducedMotion,d=te(null);n=n||a.renderer,!d.current&&n&&(d.current=n(t,{visualState:e,parent:o,props:i,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const u=d.current,h=tt(Mf);u&&!u.projection&&r&&(u.type==="html"||u.type==="svg")&&Ny(d.current,i,r,h);const m=te(!1);Cl(()=>{u&&m.current&&u.update(i,l)});const f=i[Lf],g=te(!!f&&!window.MotionHandoffIsComplete?.(f)&&window.MotionHasOptimisedAnimation?.(f));return Ml(()=>{u&&(m.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),g.current&&u.animationState&&u.animationState.animateChanges())}),U(()=>{u&&(!g.current&&u.animationState&&u.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(f)}),g.current=!1),u.enteringChildren=void 0)}),u}function Ny(t,e,i,n){const{layoutId:r,layout:o,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:u}=e;t.projection=new i(t.latestValues,e["data-framer-portal-id"]?void 0:Tf(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!a||l&&on(l),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,crossfade:u,layoutScroll:c,layoutRoot:d})}function Tf(t){if(t)return t.options.allowProjection!==!1?t.projection:Tf(t.parent)}function Ao(t,{forwardMotionProps:e=!1}={},i,n){i&&Qv(i);const r=Jl(t)?ky:wy;function o(l,c){let d;const u={...tt(Ts),...l,layoutId:Ly(l)},{isStatic:h}=u,m=sy(l),f=r(l,h);if(!h&&Ll){My();const g=Ty(u);d=g.MeasureLayout,m.visualElement=Sy(t,f,u,n,g.ProjectionNode)}return s(co.Provider,{value:m,children:[d&&m.visualElement?s(d,{visualElement:m.visualElement,...u}):null,vy(t,l,xy(f,m.visualElement,c),f,h,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=B1(o);return a[_y]=t,a}function Ly({layoutId:t}){const e=tt(Nl).id;return e&&t!==void 0?e+"-"+t:t}function My(t,e){tt(vf).strict}function Ty(t){const{drag:e,layout:i}=mn;if(!e&&!i)return{};const n={...e,...i};return{MeasureLayout:e?.isEnabled(t)||i?.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function Ey(t,e){if(typeof Proxy>"u")return Ao;const i=new Map,n=(o,a)=>Ao(o,a,t,e),r=(o,a)=>n(o,a);return new Proxy(r,{get:(o,a)=>a==="create"?n:(i.has(a)||i.set(a,Ao(a,void 0,t,e)),i.get(a))})}function Ef({top:t,left:e,right:i,bottom:n}){return{x:{min:e,max:i},y:{min:t,max:n}}}function Dy({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Ay(t,e){if(!e)return t;const i=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:i.y,left:i.x,bottom:n.y,right:n.x}}function Fo(t){return t===void 0||t===1}function Pa({scale:t,scaleX:e,scaleY:i}){return!Fo(t)||!Fo(e)||!Fo(i)}function Ti(t){return Pa(t)||Df(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Df(t){return Cd(t.x)||Cd(t.y)}function Cd(t){return t&&t!=="0%"}function jr(t,e,i){const n=t-i,r=e*n;return i+r}function Sd(t,e,i,n,r){return r!==void 0&&(t=jr(t,r,n)),jr(t,i,n)+e}function Ia(t,e=0,i=1,n,r){t.min=Sd(t.min,e,i,n,r),t.max=Sd(t.max,e,i,n,r)}function Af(t,{x:e,y:i}){Ia(t.x,e.translate,e.scale,e.originPoint),Ia(t.y,i.translate,i.scale,i.originPoint)}const Nd=.999999999999,Ld=1.0000000000001;function Fy(t,e,i,n=!1){const r=i.length;if(!r)return;e.x=e.y=1;let o,a;for(let l=0;l<r;l++){o=i[l],a=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&ln(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,Af(t,a)),n&&Ti(o.latestValues)&&ln(t,o.latestValues))}e.x<Ld&&e.x>Nd&&(e.x=1),e.y<Ld&&e.y>Nd&&(e.y=1)}function an(t,e){t.min=t.min+e,t.max=t.max+e}function Md(t,e,i,n,r=.5){const o=Ke(t.min,t.max,r);Ia(t,e,i,o,n)}function ln(t,e){Md(t.x,e.x,e.scaleX,e.scale,e.originX),Md(t.y,e.y,e.scaleY,e.scale,e.originY)}function Ff(t,e){return Ef(Ay(t.getBoundingClientRect(),e))}function Py(t,e,i){const n=Ff(t,i),{scroll:r}=e;return r&&(an(n.x,r.offset.x),an(n.y,r.offset.y)),n}const Td=()=>({translate:0,scale:1,origin:0,originPoint:0}),cn=()=>({x:Td(),y:Td()}),Ed=()=>({min:0,max:0}),qe=()=>({x:Ed(),y:Ed()}),Ra={current:null},Pf={current:!1};function Iy(){if(Pf.current=!0,!!Ll)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ra.current=t.matches;t.addEventListener("change",e),e()}else Ra.current=!1}const Ry=new WeakMap;function By(t,e,i){for(const n in e){const r=e[n],o=i[n];if(st(r))t.addValue(n,r);else if(st(o))t.addValue(n,ji(r,{owner:t}));else if(o!==r)if(t.hasValue(n)){const a=t.getValue(n);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(n);t.addValue(n,ji(a!==void 0?a:r,{owner:t}))}}for(const n in i)e[n]===void 0&&t.removeValue(n);return e}const Dd=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class zy{scrapeMotionValuesFromProps(e,i,n){return{}}constructor({parent:e,props:i,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Hl,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=vt.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,We.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=i.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=i,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=ho(i),this.isVariantNode=bf(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(i,{},this);for(const m in h){const f=h[m];c[m]!==void 0&&st(f)&&f.set(c[m])}}mount(e){this.current=e,Ry.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,n)=>this.bindToMotionValue(n,i)),Pf.current||Iy(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ra.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ii(this.notifyUpdate),ii(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const i=this.features[e];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,i){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=wn.has(e);n&&this.onBindTransform&&this.onBindTransform();const r=i.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&We.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,i)),this.valueSubscriptions.set(e,()=>{r(),o&&o(),i.owner&&i.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in mn){const i=mn[e];if(!i)continue;const{isEnabled:n,Feature:r}=i;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qe()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,i){this.latestValues[e]=i}update(e,i){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let n=0;n<Dd.length;n++){const r=Dd[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,a=e[o];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=By(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(e),()=>i.variantChildren.delete(e)}addValue(e,i){const n=this.values.get(e);i!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,i),this.values.set(e,i),this.latestValues[e]=i.get())}removeValue(e){this.values.delete(e);const i=this.valueSubscriptions.get(e);i&&(i(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,i){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&i!==void 0&&(n=ji(i===null?void 0:i,{owner:this}),this.addValue(e,n)),n}readValue(e,i){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(Cm(n)||Nm(n))?n=parseFloat(n):!Gv(n)&&mi.test(i)&&(n=cf(e,i)),this.setBaseTarget(e,st(n)?n.get():n)),st(n)?n.get():n}setBaseTarget(e,i){this.baseTarget[e]=i}getBaseTarget(e){const{initial:i}=this.props;let n;if(typeof i=="string"||typeof i=="object"){const o=Ql(this.props,i,this.presenceContext?.custom);o&&(n=o[e])}if(i&&n!==void 0)return n;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!st(r)?r:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,i){return this.events[e]||(this.events[e]=new Al),this.events[e].add(i)}notify(e,...i){this.events[e]&&this.events[e].notify(...i)}scheduleRenderMicrotask(){Gl.render(this.render)}}class If extends zy{constructor(){super(...arguments),this.KeyframeResolver=Av}sortInstanceNodePosition(e,i){return e.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(e,i){return e.style?e.style[i]:void 0}removeValueFromRenderState(e,{vars:i,style:n}){delete i[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;st(e)&&(this.childSubscription=e.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}function Rf(t,{style:e,vars:i},n,r){const o=t.style;let a;for(a in e)o[a]=e[a];r?.applyProjectionStyles(o,n);for(a in i)o.setProperty(a,i[a])}function Vy(t){return window.getComputedStyle(t)}class Wy extends If{constructor(){super(...arguments),this.type="html",this.renderInstance=Rf}readValueFromInstance(e,i){if(wn.has(i))return this.projection?.isProjecting?La(i):X2(e,i);{const n=Vy(e),r=(Il(i)?n.getPropertyValue(i):n[i])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:i}){return Ff(e,i)}build(e,i,n){ql(e,i,n.transformTemplate)}scrapeMotionValuesFromProps(e,i,n){return ec(e,i,n)}}const Bf=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Oy(t,e,i,n){Rf(t,e,void 0,n);for(const r in e.attrs)t.setAttribute(Bf.has(r)?r:tc(r),e.attrs[r])}class $y extends If{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qe}getBaseTargetFromProps(e,i){return e[i]}readValueFromInstance(e,i){if(wn.has(i)){const n=lf(i);return n&&n.default||0}return i=Bf.has(i)?i:tc(i),e.getAttribute(i)}scrapeMotionValuesFromProps(e,i,n){return Nf(e,i,n)}build(e,i,n){_f(e,i,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,i,n,r){Oy(e,i,n,r)}mount(e){this.isSVGTag=Cf(e.tagName),super.mount(e)}}const Hy=(t,e)=>Jl(t)?new $y(e):new Wy(e,{allowProjection:t!==ve});function dn(t,e,i){const n=t.getProps();return Ql(n,e,i!==void 0?i:n.custom,t)}const Ba=t=>Array.isArray(t);function jy(t,e,i){t.hasValue(e)?t.getValue(e).set(i):t.addValue(e,ji(i))}function Uy(t){return Ba(t)?t[t.length-1]||0:t}function Gy(t,e){const i=dn(t,e);let{transitionEnd:n={},transition:r={},...o}=i||{};o={...o,...n};for(const a in o){const l=Uy(o[a]);jy(t,a,l)}}function Ky(t){return!!(st(t)&&t.add)}function za(t,e){const i=t.getValue("willChange");if(Ky(i))return i.add(e);if(!i&&ti.WillChange){const n=new ti.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function zf(t){return t.props[Lf]}const Yy=t=>t!==null;function Zy(t,{repeat:e,repeatType:i="loop"},n){const r=t.filter(Yy),o=e&&i!=="loop"&&e%2===1?0:r.length-1;return r[o]}const qy={type:"spring",stiffness:500,damping:25,restSpeed:10},Xy=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Jy={type:"keyframes",duration:.8},Qy={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},eb=(t,{keyframes:e})=>e.length>2?Jy:wn.has(t)?t.startsWith("scale")?Xy(e[1]):qy:Qy;function tb({when:t,delay:e,delayChildren:i,staggerChildren:n,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const ic=(t,e,i,n={},r,o)=>a=>{const l=jl(n,t)||{},c=l.delay||n.delay||0;let{elapsed:d=0}=n;d=d-Ot(c);const u={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:o?void 0:r};tb(l)||Object.assign(u,eb(t,u)),u.duration&&(u.duration=Ot(u.duration)),u.repeatDelay&&(u.repeatDelay=Ot(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(Aa(u),u.delay===0&&(h=!0)),(ti.instantAnimations||ti.skipAnimations)&&(h=!0,Aa(u),u.delay=0),u.allowFlatten=!l.type&&!l.ease,h&&!o&&e.get()!==void 0){const m=Zy(u.keyframes,l);if(m!==void 0){We.update(()=>{u.onUpdate(m),u.onComplete()});return}}return l.isSync?new lo(u):new wv(u)};function ib({protectedKeys:t,needsAnimating:e},i){const n=t.hasOwnProperty(i)&&e[i]!==!0;return e[i]=!1,n}function Vf(t,e,{delay:i=0,transitionOverride:n,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;n&&(o=n);const c=[],d=r&&t.animationState&&t.animationState.getState()[r];for(const u in l){const h=t.getValue(u,t.latestValues[u]??null),m=l[u];if(m===void 0||d&&ib(d,u))continue;const f={delay:i,...jl(o||{},u)},g=h.get();if(g!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===g&&!f.velocity)continue;let p=!1;if(window.MotionHandoffAnimation){const b=zf(t);if(b){const y=window.MotionHandoffAnimation(b,u,We);y!==null&&(f.startTime=y,p=!0)}}za(t,u),h.start(ic(u,h,m,t.shouldReduceMotion&&rf.has(u)?{type:!1}:f,t,p));const v=h.animation;v&&c.push(v)}return a&&Promise.all(c).then(()=>{We.update(()=>{a&&Gy(t,a)})}),c}function Wf(t,e,i,n=0,r=1){const o=Array.from(t).sort((d,u)=>d.sortNodePosition(u)).indexOf(e),a=t.size,l=(a-1)*n;return typeof i=="function"?i(o,a):r===1?o*n:l-o*n}function Va(t,e,i={}){const n=dn(t,e,i.type==="exit"?t.presenceContext?.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=n||{};i.transitionOverride&&(r=i.transitionOverride);const o=n?()=>Promise.all(Vf(t,n,i)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:u,staggerDirection:h}=r;return nb(t,e,c,d,u,h,i)}:()=>Promise.resolve(),{when:l}=r;if(l){const[c,d]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>d())}else return Promise.all([o(),a(i.delay)])}function nb(t,e,i=0,n=0,r=0,o=1,a){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(Va(c,e,{...a,delay:i+(typeof n=="function"?0:n)+Wf(t.variantChildren,c,n,r,o)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function sb(t,e,i={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const r=e.map(o=>Va(t,o,i));n=Promise.all(r)}else if(typeof e=="string")n=Va(t,e,i);else{const r=typeof e=="function"?dn(t,e,i.custom):e;n=Promise.all(Vf(t,r,i))}return n.then(()=>{t.notify("AnimationComplete",e)})}function Of(t,e){if(!Array.isArray(e))return!1;const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(e[n]!==t[n])return!1;return!0}const rb=Zl.length;function $f(t){if(!t)return;if(!t.isControllingVariants){const i=t.parent?$f(t.parent)||{}:{};return t.props.initial!==void 0&&(i.initial=t.props.initial),i}const e={};for(let i=0;i<rb;i++){const n=Zl[i],r=t.props[n];(ds(r)||r===!1)&&(e[n]=r)}return e}const ob=[...Yl].reverse(),ab=Yl.length;function lb(t){return e=>Promise.all(e.map(({animation:i,options:n})=>sb(t,i,n)))}function cb(t){let e=lb(t),i=Ad(),n=!0;const r=c=>(d,u)=>{const h=dn(t,u,c==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:m,transitionEnd:f,...g}=h;d={...d,...g,...f}}return d};function o(c){e=c(t)}function a(c){const{props:d}=t,u=$f(t.parent)||{},h=[],m=new Set;let f={},g=1/0;for(let v=0;v<ab;v++){const b=ob[v],y=i[b],w=d[b]!==void 0?d[b]:u[b],_=ds(w),k=b===c?y.isActive:null;k===!1&&(g=v);let N=w===u[b]&&w!==d[b]&&_;if(N&&n&&t.manuallyAnimateOnMount&&(N=!1),y.protectedKeys={...f},!y.isActive&&k===null||!w&&!y.prevProp||uo(w)||typeof w=="boolean")continue;const C=db(y.prevProp,w);let S=C||b===c&&y.isActive&&!N&&_||v>g&&_,x=!1;const B=Array.isArray(w)?w:[w];let A=B.reduce(r(b),{});k===!1&&(A={});const{prevResolvedValues:P={}}=y,I={...P,...A},z=E=>{S=!0,m.has(E)&&(x=!0,m.delete(E)),y.needsAnimating[E]=!0;const W=t.getValue(E);W&&(W.liveStyle=!1)};for(const E in I){const W=A[E],F=P[E];if(f.hasOwnProperty(E))continue;let K=!1;Ba(W)&&Ba(F)?K=!Of(W,F):K=W!==F,K?W!=null?z(E):m.add(E):W!==void 0&&m.has(E)?z(E):y.protectedKeys[E]=!0}y.prevProp=w,y.prevResolvedValues=A,y.isActive&&(f={...f,...A}),n&&t.blockInitialAnimation&&(S=!1);const D=N&&C;S&&(!D||x)&&h.push(...B.map(E=>{const W={type:b};if(typeof E=="string"&&n&&!D&&t.manuallyAnimateOnMount&&t.parent){const{parent:F}=t,K=dn(F,E);if(F.enteringChildren&&K){const{delayChildren:G}=K.transition||{};W.delay=Wf(F.enteringChildren,t,G)}}return{animation:E,options:W}}))}if(m.size){const v={};if(typeof d.initial!="boolean"){const b=dn(t,Array.isArray(d.initial)?d.initial[0]:d.initial);b&&b.transition&&(v.transition=b.transition)}m.forEach(b=>{const y=t.getBaseTarget(b),w=t.getValue(b);w&&(w.liveStyle=!0),v[b]=y??null}),h.push({animation:v})}let p=!!h.length;return n&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(p=!1),n=!1,p?e(h):Promise.resolve()}function l(c,d){if(i[c].isActive===d)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(c,d)),i[c].isActive=d;const u=a(c);for(const h in i)i[h].protectedKeys={};return u}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>i,reset:()=>{i=Ad(),n=!0}}}function db(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Of(e,t):!1}function ki(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ad(){return{animate:ki(!0),whileInView:ki(),whileHover:ki(),whileTap:ki(),whileDrag:ki(),whileFocus:ki(),exit:ki()}}class gi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class ub extends gi{constructor(e){super(e),e.animationState||(e.animationState=cb(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();uo(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:i}=this.node.prevProps||{};e!==i&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let hb=0;class mb extends gi{constructor(){super(...arguments),this.id=hb++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:i}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);i&&!e&&r.then(()=>{i(this.id)})}mount(){const{register:e,onExitComplete:i}=this.node.presenceContext||{};i&&i(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const fb={animation:{Feature:ub},exit:{Feature:mb}};function hs(t,e,i,n={passive:!0}){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i)}function Es(t){return{point:{x:t.pageX,y:t.pageY}}}const pb=t=>e=>Kl(e)&&t(e,Es(e));function qn(t,e,i,n){return hs(t,e,pb(i),n)}const Hf=1e-4,gb=1-Hf,vb=1+Hf,jf=.01,yb=0-jf,bb=0+jf;function ht(t){return t.max-t.min}function wb(t,e,i){return Math.abs(t-e)<=i}function Fd(t,e,i,n=.5){t.origin=n,t.originPoint=Ke(e.min,e.max,t.origin),t.scale=ht(i)/ht(e),t.translate=Ke(i.min,i.max,t.origin)-t.originPoint,(t.scale>=gb&&t.scale<=vb||isNaN(t.scale))&&(t.scale=1),(t.translate>=yb&&t.translate<=bb||isNaN(t.translate))&&(t.translate=0)}function Xn(t,e,i,n){Fd(t.x,e.x,i.x,n?n.originX:void 0),Fd(t.y,e.y,i.y,n?n.originY:void 0)}function Pd(t,e,i){t.min=i.min+e.min,t.max=t.min+ht(e)}function kb(t,e,i){Pd(t.x,e.x,i.x),Pd(t.y,e.y,i.y)}function Id(t,e,i){t.min=e.min-i.min,t.max=t.min+ht(e)}function Jn(t,e,i){Id(t.x,e.x,i.x),Id(t.y,e.y,i.y)}function _t(t){return[t("x"),t("y")]}const Uf=({current:t})=>t?t.ownerDocument.defaultView:null,Rd=(t,e)=>Math.abs(t-e);function _b(t,e){const i=Rd(t.x,e.x),n=Rd(t.y,e.y);return Math.sqrt(i**2+n**2)}class Gf{constructor(e,i,{transformPagePoint:n,contextWindow:r=window,dragSnapToOrigin:o=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Io(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=_b(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!f&&!g)return;const{point:p}=m,{timestamp:v}=at;this.history.push({...p,timestamp:v});const{onStart:b,onMove:y}=this.handlers;f||(b&&b(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,m)},this.handlePointerMove=(m,f)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Po(f,this.transformPagePoint),We.update(this.updatePoint,!0)},this.handlePointerUp=(m,f)=>{this.end();const{onEnd:g,onSessionEnd:p,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Io(m.type==="pointercancel"?this.lastMoveEventInfo:Po(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(m,b),p&&p(m,b)},!Kl(e))return;this.dragSnapToOrigin=o,this.handlers=i,this.transformPagePoint=n,this.distanceThreshold=a,this.contextWindow=r||window;const l=Es(e),c=Po(l,this.transformPagePoint),{point:d}=c,{timestamp:u}=at;this.history=[{...d,timestamp:u}];const{onSessionStart:h}=i;h&&h(e,Io(c,this.history)),this.removeListeners=Ns(qn(this.contextWindow,"pointermove",this.handlePointerMove),qn(this.contextWindow,"pointerup",this.handlePointerUp),qn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ii(this.updatePoint)}}function Po(t,e){return e?{point:e(t.point)}:t}function Bd(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Io({point:t},e){return{point:t,delta:Bd(t,Kf(e)),offset:Bd(t,xb(e)),velocity:Cb(e,.1)}}function xb(t){return t[0]}function Kf(t){return t[t.length-1]}function Cb(t,e){if(t.length<2)return{x:0,y:0};let i=t.length-1,n=null;const r=Kf(t);for(;i>=0&&(n=t[i],!(r.timestamp-n.timestamp>Ot(e)));)i--;if(!n)return{x:0,y:0};const o=xt(r.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-n.x)/o,y:(r.y-n.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Sb(t,{min:e,max:i},n){return e!==void 0&&t<e?t=n?Ke(e,t,n.min):Math.max(t,e):i!==void 0&&t>i&&(t=n?Ke(i,t,n.max):Math.min(t,i)),t}function zd(t,e,i){return{min:e!==void 0?t.min+e:void 0,max:i!==void 0?t.max+i-(t.max-t.min):void 0}}function Nb(t,{top:e,left:i,bottom:n,right:r}){return{x:zd(t.x,i,r),y:zd(t.y,e,n)}}function Vd(t,e){let i=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([i,n]=[n,i]),{min:i,max:n}}function Lb(t,e){return{x:Vd(t.x,e.x),y:Vd(t.y,e.y)}}function Mb(t,e){let i=.5;const n=ht(t),r=ht(e);return r>n?i=as(e.min,e.max-n,t.min):n>r&&(i=as(t.min,t.max-r,e.min)),ei(0,1,i)}function Tb(t,e){const i={};return e.min!==void 0&&(i.min=e.min-t.min),e.max!==void 0&&(i.max=e.max-t.min),i}const Wa=.35;function Eb(t=Wa){return t===!1?t=0:t===!0&&(t=Wa),{x:Wd(t,"left","right"),y:Wd(t,"top","bottom")}}function Wd(t,e,i){return{min:Od(t,e),max:Od(t,i)}}function Od(t,e){return typeof t=="number"?t:t[e]||0}const Db=new WeakMap;class Ab{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qe(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:i=!1,distanceThreshold:n}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=h=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(Es(h).point)},a=(h,m)=>{const{drag:f,dragPropagation:g,onDragStart:p}=this.getProps();if(f&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Rv(f),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_t(b=>{let y=this.getAxisMotionValue(b).get()||0;if($t.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const _=w.layout.layoutBox[b];_&&(y=ht(_)*(parseFloat(y)/100))}}this.originPoint[b]=y}),p&&We.postRender(()=>p(h,m)),za(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},l=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m;const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:p,onDrag:v}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:b}=m;if(g&&this.currentDirection===null){this.currentDirection=Fb(b),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",m.point,b),this.updateAxis("y",m.point,b),this.visualElement.render(),v&&v(h,m)},c=(h,m)=>{this.latestPointerEvent=h,this.latestPanInfo=m,this.stop(h,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>_t(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Gf(e,{onSessionStart:o,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:n,contextWindow:Uf(this.visualElement)})}stop(e,i){const n=e||this.latestPointerEvent,r=i||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!r||!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&We.postRender(()=>l(n,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:i}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(e,i,n){const{drag:r}=this.getProps();if(!n||!Os(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=Sb(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:i}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&on(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=Nb(n.layoutBox,e):this.constraints=!1,this.elastic=Eb(i),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&_t(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Tb(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:i}=this.getProps();if(!e||!on(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=Py(n,r.root,this.visualElement.getTransformPagePoint());let a=Lb(r.layout.layoutBox,o);if(i){const l=i(Dy(a));this.hasMutatedConstraints=!!l,l&&(a=Ef(l))}return a}startAnimation(e){const{drag:i,dragMomentum:n,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=_t(u=>{if(!Os(u,i,this.currentDirection))return;let h=c&&c[u]||{};a&&(h={min:0,max:0});const m=r?200:1e6,f=r?40:1e7,g={type:"inertia",velocity:n?e[u]:0,bounceStiffness:m,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(u,g)});return Promise.all(d).then(l)}startAxisValueAnimation(e,i){const n=this.getAxisMotionValue(e);return za(this.visualElement,e),n.start(ic(e,n,0,i,this.visualElement,!1))}stopAnimation(){_t(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){_t(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const i=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[i];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){_t(i=>{const{drag:n}=this.getProps();if(!Os(i,n,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(i);if(r&&r.layout){const{min:a,max:l}=r.layout.layoutBox[i];o.set(e[i]-Ke(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:i}=this.getProps(),{projection:n}=this.visualElement;if(!on(i)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};_t(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();r[a]=Mb({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),_t(a=>{if(!Os(a,e,null))return;const l=this.getAxisMotionValue(a),{min:c,max:d}=this.constraints[a];l.set(Ke(c,d,r[a]))})}addListeners(){if(!this.visualElement.current)return;Db.set(this.visualElement,this);const e=this.visualElement.current,i=qn(e,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();on(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),We.read(n);const a=hs(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(_t(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())}));return()=>{a(),i(),o(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=Wa,dragMomentum:l=!0}=e;return{...e,drag:i,dragDirectionLock:n,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function Os(t,e,i){return(e===!0||e===t)&&(i===null||i===t)}function Fb(t,e=10){let i=null;return Math.abs(t.y)>e?i="y":Math.abs(t.x)>e&&(i="x"),i}class Pb extends gi{constructor(e){super(e),this.removeGroupControls=Ct,this.removeListeners=Ct,this.controls=new Ab(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ct}unmount(){this.removeGroupControls(),this.removeListeners()}}const $d=t=>(e,i)=>{t&&We.postRender(()=>t(e,i))};class Ib extends gi{constructor(){super(...arguments),this.removePointerDownListener=Ct}onPointerDown(e){this.session=new Gf(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Uf(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:i,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:$d(e),onStart:$d(i),onMove:n,onEnd:(o,a)=>{delete this.session,r&&We.postRender(()=>r(o,a))}}}mount(){this.removePointerDownListener=qn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Lr={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Hd(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const xn={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(we.test(t))t=parseFloat(t);else return t;const i=Hd(t,e.target.x),n=Hd(t,e.target.y);return`${i}% ${n}%`}},Rb={correct:(t,{treeScale:e,projectionDelta:i})=>{const n=t,r=mi.parse(t);if(r.length>5)return n;const o=mi.createTransformer(t),a=typeof r[0]!="number"?1:0,l=i.x.scale*e.x,c=i.y.scale*e.y;r[0+a]/=l,r[1+a]/=c;const d=Ke(l,c,.5);return typeof r[2+a]=="number"&&(r[2+a]/=d),typeof r[3+a]=="number"&&(r[3+a]/=d),o(r)}};let Ro=!1;class Bb extends Et{componentDidMount(){const{visualElement:e,layoutGroup:i,switchLayoutGroup:n,layoutId:r}=this.props,{projection:o}=e;ry(zb),o&&(i.group&&i.group.add(o),n&&n.register&&r&&n.register(o),Ro&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Lr.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:i,visualElement:n,drag:r,isPresent:o}=this.props,{projection:a}=n;return a&&(a.isPresent=o,Ro=!0,r||e.layoutDependency!==i||i===void 0||e.isPresent!==o?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||We.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Gl.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:i,switchLayoutGroup:n}=this.props,{projection:r}=e;Ro=!0,r&&(r.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Yf(t){const[e,i]=gf(),n=tt(Nl);return s(Bb,{...t,layoutGroup:n,switchLayoutGroup:tt(Mf),isPresent:e,safeToRemove:i})}const zb={borderRadius:{...xn,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xn,borderTopRightRadius:xn,borderBottomLeftRadius:xn,borderBottomRightRadius:xn,boxShadow:Rb};function Vb(t,e,i){const n=st(t)?t:ji(t);return n.start(ic("",n,e,i)),n.animation}const Wb=(t,e)=>t.depth-e.depth;class Ob{constructor(){this.children=[],this.isDirty=!1}add(e){Tl(this.children,e),this.isDirty=!0}remove(e){El(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Wb),this.isDirty=!1,this.children.forEach(e)}}function $b(t,e){const i=vt.now(),n=({timestamp:r})=>{const o=r-i;o>=e&&(ii(n),t(o-e))};return We.setup(n,!0),()=>ii(n)}const Zf=["TopLeft","TopRight","BottomLeft","BottomRight"],Hb=Zf.length,jd=t=>typeof t=="string"?parseFloat(t):t,Ud=t=>typeof t=="number"||we.test(t);function jb(t,e,i,n,r,o){r?(t.opacity=Ke(0,i.opacity??1,Ub(n)),t.opacityExit=Ke(e.opacity??1,0,Gb(n))):o&&(t.opacity=Ke(e.opacity??1,i.opacity??1,n));for(let a=0;a<Hb;a++){const l=`border${Zf[a]}Radius`;let c=Gd(e,l),d=Gd(i,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Ud(c)===Ud(d)?(t[l]=Math.max(Ke(jd(c),jd(d),n),0),($t.test(d)||$t.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||i.rotate)&&(t.rotate=Ke(e.rotate||0,i.rotate||0,n))}function Gd(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Ub=qf(0,.5,Pm),Gb=qf(.5,.95,Ct);function qf(t,e,i){return n=>n<t?0:n>e?1:i(as(t,e,n))}function Kd(t,e){t.min=e.min,t.max=e.max}function wt(t,e){Kd(t.x,e.x),Kd(t.y,e.y)}function Yd(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Zd(t,e,i,n,r){return t-=e,t=jr(t,1/i,n),r!==void 0&&(t=jr(t,1/r,n)),t}function Kb(t,e=0,i=1,n=.5,r,o=t,a=t){if($t.test(e)&&(e=parseFloat(e),e=Ke(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=Ke(o.min,o.max,n);t===o&&(l-=e),t.min=Zd(t.min,e,i,l,r),t.max=Zd(t.max,e,i,l,r)}function qd(t,e,[i,n,r],o,a){Kb(t,e[i],e[n],e[r],e.scale,o,a)}const Yb=["x","scaleX","originX"],Zb=["y","scaleY","originY"];function Xd(t,e,i,n){qd(t.x,e,Yb,i?i.x:void 0,n?n.x:void 0),qd(t.y,e,Zb,i?i.y:void 0,n?n.y:void 0)}function Jd(t){return t.translate===0&&t.scale===1}function Xf(t){return Jd(t.x)&&Jd(t.y)}function Qd(t,e){return t.min===e.min&&t.max===e.max}function qb(t,e){return Qd(t.x,e.x)&&Qd(t.y,e.y)}function eu(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Jf(t,e){return eu(t.x,e.x)&&eu(t.y,e.y)}function tu(t){return ht(t.x)/ht(t.y)}function iu(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Xb{constructor(){this.members=[]}add(e){Tl(this.members,e),e.scheduleRender()}remove(e){if(El(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(e){const i=this.members.findIndex(r=>e===r);if(i===0)return!1;let n;for(let r=i;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(e,i){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,i&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:i,resumingFrom:n}=e;i.onExitComplete&&i.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Jb(t,e,i){let n="";const r=t.x.translate/e.x,o=t.y.translate/e.y,a=i?.z||0;if((r||o||a)&&(n=`translate3d(${r}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),i){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:m,skewX:f,skewY:g}=i;d&&(n=`perspective(${d}px) ${n}`),u&&(n+=`rotate(${u}deg) `),h&&(n+=`rotateX(${h}deg) `),m&&(n+=`rotateY(${m}deg) `),f&&(n+=`skewX(${f}deg) `),g&&(n+=`skewY(${g}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const Bo=["","X","Y","Z"],Qb=1e3;let e5=0;function zo(t,e,i,n){const{latestValues:r}=e;r[t]&&(i[t]=r[t],e.setStaticValue(t,0),n&&(n[t]=0))}function Qf(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const i=zf(e);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",We,!(r||o))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&Qf(n)}function ep({attachResizeListener:t,defaultParent:e,measureScroll:i,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(a={},l=e?.()){this.id=e5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(n5),this.nodes.forEach(a5),this.nodes.forEach(l5),this.nodes.forEach(s5)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ob)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Al),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=pf(a)&&!$v(a),this.instance=a;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let u,h=0;const m=()=>this.root.updateBlockedByResize=!1;We.read(()=>{h=window.innerWidth}),t(a,()=>{const f=window.innerWidth;f!==h&&(h=f,this.root.updateBlockedByResize=!0,u&&u(),u=$b(m,250),Lr.hasAnimatedSinceResize&&(Lr.hasAnimatedSinceResize=!1,this.nodes.forEach(ru)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||m5,{onLayoutAnimationStart:p,onLayoutAnimationComplete:v}=d.getProps(),b=!this.targetLayout||!Jf(this.targetLayout,f),y=!h&&m;if(this.options.layoutRoot||this.resumeFrom||y||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...jl(g,"layout"),onPlay:p,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(u,y)}else h||ru(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ii(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(c5),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Qf(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nu);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(su);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(o5),this.nodes.forEach(t5),this.nodes.forEach(i5)):this.nodes.forEach(su),this.clearAllSnapshots();const l=vt.now();at.delta=ei(0,1e3/60,l-at.timestamp),at.timestamp=l,at.isProcessing=!0,No.update.process(at),No.preRender.process(at),No.render.process(at),at.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Gl.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(r5),this.sharedNodes.forEach(d5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,We.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){We.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ht(this.snapshot.measuredBox.x)&&!ht(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Xf(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;a&&this.instance&&(l||Ti(this.latestValues)||u)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),f5(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return qe();const l=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(p5))){const{scroll:d}=this.root;d&&(an(l.x,d.offset.x),an(l.y,d.offset.y))}return l}removeElementScroll(a){const l=qe();if(wt(l,a),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:u,options:h}=d;d!==this.root&&u&&h.layoutScroll&&(u.wasRoot&&wt(l,a),an(l.x,u.offset.x),an(l.y,u.offset.y))}return l}applyTransform(a,l=!1){const c=qe();wt(c,a);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&ln(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Ti(u.latestValues)&&ln(c,u.latestValues)}return Ti(this.latestValues)&&ln(c,this.latestValues),c}removeTransform(a){const l=qe();wt(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Ti(d.latestValues))continue;Pa(d.latestValues)&&d.updateSnapshot();const u=qe(),h=d.measurePageBox();wt(u,h),Xd(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return Ti(this.latestValues)&&Xd(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==at.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=at.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qe(),this.relativeTargetOrigin=qe(),Jn(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),wt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qe(),this.targetWithTransforms=qe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),kb(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wt(this.target,this.layout.layoutBox),Af(this.target,this.targetDelta)):wt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qe(),this.relativeTargetOrigin=qe(),Jn(this.relativeTargetOrigin,this.target,m.target),wt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Pa(this.parent.latestValues)||Df(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===at.timestamp&&(c=!1),c)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;wt(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;Fy(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=qe());const{target:f}=a;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Yd(this.prevProjectionDelta.x,this.projectionDelta.x),Yd(this.prevProjectionDelta.y,this.projectionDelta.y)),Xn(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!iu(this.projectionDelta.x,this.prevProjectionDelta.x)||!iu(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=cn(),this.projectionDelta=cn(),this.projectionDeltaWithTransform=cn()}setAnimationOrigin(a,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=cn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=qe(),f=c?c.source:void 0,g=this.layout?this.layout.source:void 0,p=f!==g,v=this.getStack(),b=!v||v.members.length<=1,y=!!(p&&!b&&this.options.crossfade===!0&&!this.path.some(h5));this.animationProgress=0;let w;this.mixTargetDelta=_=>{const k=_/1e3;ou(h.x,a.x,k),ou(h.y,a.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jn(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),u5(this.relativeTarget,this.relativeTargetOrigin,m,k),w&&qb(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=qe()),wt(w,this.relativeTarget)),p&&(this.animationValues=u,jb(u,d,this.latestValues,k,y,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ii(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=We.update(()=>{Lr.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ji(0)),this.currentAnimation=Vb(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Qb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=a;if(!(!l||!c||!d)){if(this!==a&&this.layout&&d&&tp(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||qe();const h=ht(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const m=ht(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+m}wt(l,c),ln(l,u),Xn(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Xb),this.sharedNodes.get(a).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&zo("z",a,d,this.animationValues);for(let u=0;u<Bo.length;u++)zo(`rotate${Bo[u]}`,a,d,this.animationValues),zo(`skew${Bo[u]}`,a,d,this.animationValues);a.render();for(const u in d)a.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Nr(l?.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Nr(l?.pointerEvents)||""),this.hasProjected&&!Ti(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const u=d.animationValues||d.latestValues;this.applyTransformsToTarget();let h=Jb(this.projectionDeltaWithTransform,this.treeScale,u);c&&(h=c(u,h)),a.transform=h;const{x:m,y:f}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${f.origin*100}% 0`,d.animationValues?a.opacity=d===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:a.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const g in us){if(u[g]===void 0)continue;const{correct:p,applyTo:v,isCSSVariable:b}=us[g],y=h==="none"?u[g]:p(u[g],d);if(v){const w=v.length;for(let _=0;_<w;_++)a[v[_]]=y}else b?this.options.visualElement.renderState.vars[g]=y:a[g]=y}this.options.layoutId&&(a.pointerEvents=d===this?Nr(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(nu),this.root.sharedNodes.clear()}}}function t5(t){t.updateLayout()}function i5(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:n}=t.layout,{animationType:r}=t.options,o=e.source!==t.layout.source;r==="size"?_t(u=>{const h=o?e.measuredBox[u]:e.layoutBox[u],m=ht(h);h.min=i[u].min,h.max=h.min+m}):tp(r,e.layoutBox,i)&&_t(u=>{const h=o?e.measuredBox[u]:e.layoutBox[u],m=ht(i[u]);h.max=h.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[u].max=t.relativeTarget[u].min+m)});const a=cn();Xn(a,i,e.layoutBox);const l=cn();o?Xn(l,t.applyTransform(n,!0),e.measuredBox):Xn(l,i,e.layoutBox);const c=!Xf(a);let d=!1;if(!t.resumeFrom){const u=t.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:h,layout:m}=u;if(h&&m){const f=qe();Jn(f,e.layoutBox,h.layoutBox);const g=qe();Jn(g,i,m.layoutBox),Jf(f,g)||(d=!0),u.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=f,t.relativeParent=u)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function n5(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function s5(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function r5(t){t.clearSnapshot()}function nu(t){t.clearMeasurements()}function su(t){t.isLayoutDirty=!1}function o5(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function ru(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function a5(t){t.resolveTargetDelta()}function l5(t){t.calcProjection()}function c5(t){t.resetSkewAndRotation()}function d5(t){t.removeLeadSnapshot()}function ou(t,e,i){t.translate=Ke(e.translate,0,i),t.scale=Ke(e.scale,1,i),t.origin=e.origin,t.originPoint=e.originPoint}function au(t,e,i,n){t.min=Ke(e.min,i.min,n),t.max=Ke(e.max,i.max,n)}function u5(t,e,i,n){au(t.x,e.x,i.x,n),au(t.y,e.y,i.y,n)}function h5(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const m5={duration:.45,ease:[.4,0,.1,1]},lu=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),cu=lu("applewebkit/")&&!lu("chrome/")?Math.round:Ct;function du(t){t.min=cu(t.min),t.max=cu(t.max)}function f5(t){du(t.x),du(t.y)}function tp(t,e,i){return t==="position"||t==="preserve-aspect"&&!wb(tu(e),tu(i),.2)}function p5(t){return t!==t.root&&t.scroll?.wasRoot}const g5=ep({attachResizeListener:(t,e)=>hs(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Vo={current:void 0},ip=ep({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Vo.current){const t=new g5({});t.mount(window),t.setOptions({layoutScroll:!0}),Vo.current=t}return Vo.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),v5={pan:{Feature:Ib},drag:{Feature:Pb,ProjectionNode:ip,MeasureLayout:Yf}};function uu(t,e,i){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",i==="Start");const r="onHover"+i,o=n[r];o&&We.postRender(()=>o(e,Es(e)))}class y5 extends gi{mount(){const{current:e}=this.node;e&&(this.unmount=Bv(e,(i,n)=>(uu(this.node,n,"Start"),r=>uu(this.node,r,"End"))))}unmount(){}}class b5 extends gi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ns(hs(this.node.current,"focus",()=>this.onFocus()),hs(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function hu(t,e,i){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",i==="Start");const r="onTap"+(i==="End"?"":i),o=n[r];o&&We.postRender(()=>o(e,Es(e)))}class w5 extends gi{mount(){const{current:e}=this.node;e&&(this.unmount=Ov(e,(i,n)=>(hu(this.node,n,"Start"),(r,{success:o})=>hu(this.node,r,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Oa=new WeakMap,Wo=new WeakMap,k5=t=>{const e=Oa.get(t.target);e&&e(t)},_5=t=>{t.forEach(k5)};function x5({root:t,...e}){const i=t||document;Wo.has(i)||Wo.set(i,{});const n=Wo.get(i),r=JSON.stringify(e);return n[r]||(n[r]=new IntersectionObserver(_5,{root:t,...e})),n[r]}function C5(t,e,i){const n=x5(e);return Oa.set(t,i),n.observe(t),()=>{Oa.delete(t),n.unobserve(t)}}const S5={some:0,all:1};class N5 extends gi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:i,margin:n,amount:r="some",once:o}=e,a={root:i?i.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:S5[r]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),m=d?u:h;m&&m(c)};return C5(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:i}=this.node;["amount","margin","root"].some(L5(e,i))&&this.startObserver()}unmount(){}}function L5({viewport:t={}},{viewport:e={}}={}){return i=>t[i]!==e[i]}const M5={inView:{Feature:N5},tap:{Feature:w5},focus:{Feature:b5},hover:{Feature:y5}},T5={layout:{ProjectionNode:ip,MeasureLayout:Yf}},E5={...fb,...M5,...v5,...T5},T=Ey(E5,Hy);function Ur(t){const e=Ss(()=>ji(t)),{isStatic:i}=tt(Ts);if(i){const[,n]=M(t);U(()=>e.on("change",n),[])}return e}function np(t,e){const i=Ur(e()),n=()=>i.set(e());return n(),Ml(()=>{const r=()=>We.preRender(n,!1,!0),o=t.map(a=>a.on("change",r));return()=>{o.forEach(a=>a()),ii(n)}}),i}function D5(t){Zn.current=[],t();const e=np(Zn.current,t);return Zn.current=void 0,e}function Wi(t,e,i,n){if(typeof t=="function")return D5(t);const r=typeof e=="function"?e:Hv(e,i,n);return Array.isArray(t)?mu(t,r):mu([t],([o])=>r(o))}function mu(t,e){const i=Ss(()=>[]);return np(t,()=>{i.length=0;const n=t.length;for(let r=0;r<n;r++)i[r]=t[r].get();return e(i)})}function Gr(t,e={}){const{isStatic:i}=tt(Ts),n=()=>st(t)?t.get():t;if(i)return Wi(n);const r=Ur(n());return Cl(()=>jv(r,t,e),[r,JSON.stringify(e)]),r}const A5={ui:{common:{pleaseSelect:"Bitte auswhlen"},controls:{brightness:"Helligkeit",colorTemperature:"Farbtemperatur",color:"Farbe",effects:"Effekte",hvac:"HVAC",fan:"Lfter",preset:"Voreinstellung",swing:"Schwenk",play:"Wiedergabe",pause:"Pause",previous:"Zurck",next:"Weiter",source:"Quelle",open:"ffnen",stop:"Stop",close:"Schlieen",position:"Position",speed:"Geschwindigkeit",volume:"Lautstrke",targetTemperature:"Zieltemperatur",currentTemperature:"Aktuell",control:"Steuerung",production:"Produktion",consumption:"Verbrauch",battery:"Batterie",printProgress:"Druckfortschritt",sensor:"Sensor",sensors:"Sensoren",diagnostics:"Diagnose",misc:"Sonstiges",controls:"Steuerung",temperature:"Temperatur",humidity:"Luftfeuchtigkeit",power:"Leistung",energy:"Energie",co2:"CO",movement:"Bewegung",door:"Tr",window:"Fenster",presence:"Prsenz",solar:"Solar",info:"Information",settings:"Einstellungen",systemSettings:"System Einstellungen",appearance:"Darstellung",language:"Sprache",notifications:"Benachrichtigungen",privacy:"Datenschutz",about:"ber",theme:"Design",darkMode:"Dunkler Modus",lightMode:"Heller Modus",autoMode:"Automatisch",security:"Sicherheit",lock:"Verriegeln",unlock:"Entriegeln",locked:"Verriegelt",unlocked:"Entriegelt",activate:"Aktivieren",run:"Ausfhren",disable:"Deaktivieren",enable:"Aktivieren",trigger:"Auslsen",scene:"Szene",script:"Skript",automation:"Automatisierung",veryWarm:"Sehr Warm",warm:"Warm",neutral:"Neutral",cold:"Kalt",daylight:"Tageslicht",on:"An",off:"Aus",active:"Aktiv",inactive:"Inaktiv",since:"seit",noRoom:"Kein Raum",unknown:"Unbekannt",justNow:"gerade eben",turned_on:"Eingeschaltet",turned_off:"Ausgeschaltet",heating:"Heizen",cooling:"Khlen",auto:"Auto",drying:"Entfeuchten",fanOnly:"Nur Lfter",idle:"Bereit",heatingTo:"Heizen auf",coolingTo:"Khlen auf",maintaining:"Halte",eco:"Eco-Modus",comfort:"Komfort",boost:"Boost",fanSpeed:"Lftergeschwindigkeit",horizontalOscillation:"Horizontale Oszillation",verticalOscillation:"Vertikale Oszillation",apply:"Anwenden",cancel:"Abbrechen",veryCold:"Sehr kalt",cold:"Kalt",cool:"Khl",comfortable:"Angenehm",warm:"Warm",hot:"Hei",veryHot:"Sehr hei",veryDry:"Sehr trocken",dry:"Trocken",optimal:"Optimal",humid:"Feucht",veryHumid:"Sehr feucht",critical:"Kritisch",low:"Niedrig",medium:"Mittel",good:"Gut",full:"Voll",minimal:"Minimal",high:"Hoch",veryHigh:"Sehr hoch",excellent:"Exzellent",acceptable:"Akzeptabel",moderate:"Mig",poor:"Schlecht"},search:{noResults:'Keine Ergebnisse fr "{term}"',tryDifferent:"Versuche es mit anderen Suchbegriffen"},aiMode:{askAnything:"Frag mich was",subtitle:"Frage mich alles ber dein Smart Home",thinking:"AI denkt nach...",wasHelpful:"War das hilfreich?",yes:"Ja",no:"Nein",followUp:"Stelle eine Folgefrage...",suggestions:{lightsOff:"Schalte alle Lichter aus",weather:"Wie ist das Wetter heute?",temperature:"Stelle die Heizung auf 22 Grad"},badges:{webSearch:"Web-Suche",location:"Standort",deviceControl:"Gertesteuerung",assistant:"Assistent"}},subcategories:{all:"Alle",favorites:"Favoriten",suggestions:"Vorschlge",lights:"Beleuchtung",switches:"Schalter",climate:"Klima",covers:"Rollden",media:"Medien",cleaning:"Reinigung",security:"Sicherheit",utilities:"Drucker",scripts:"Skripte",automations:"Automationen",scenes:"Szenen",temperature:"Temperatur",humidity:"Feuchtigkeit",motion:"Bewegung",door_window:"Tren & Fenster",energy:"Energie",light:"Licht",presence:"Prsenz",pressure:"Luftdruck",battery:"Batterie",air_quality:"Luftqualitt",other_sensors:"Sonstige",system:"System",apps:"Apps"},placeholders:{searchDevices:"Gerte",searchSensors:"Sensoren",searchActions:"Aktionen",searchCustom:"Benutzerdefiniert",search:"Suchen..."},categories:{devices:"Gerte",sensors:"Sensoren",actions:"Aktionen",custom:"Benutzerdefiniert"},viewModes:{grid:"Kacheln",list:"Liste"},filters:{categories:"Kategorien",areas:"Rume",types:"Typen",toggleFilter:"Filter ffnen/schlieen"},tooltips:{gridView:"Kachelansicht",listView:"Listenansicht",filterCategories:"Nach Kategorien filtern",filterAreas:"Nach Rumen filtern",filterTypes:"Nach Typen filtern",toggleFilter:"Filter ffnen/schlieen",controlsTab:"Steuerung",scheduleTab:"Zeitplan",historyTab:"Verlauf",contextTab:"Kontext",generalTab:"Allgemein",appearanceTab:"Darstellung",privacyTab:"Privatsphre",aboutTab:"ber"},actionButtons:{overview:"bersicht",settings:"Einstellungen",refresh:"Aktualisieren",back:"Zurck",add:"Hinzufgen",camera:"Kamera",image:"Bild",read:"Gelesen/Ungelesen",favorite:"Favorit"},general:{noRoom:"Kein Raum",favorites:"Favoriten"},suggestions:{highlyLikely:"Sehr wahrscheinlich",likely:"Wahrscheinlich",possible:"Mglich"},deviceNames:{settings:"Einstellungen",marketplace:"Marktplatz",weather:"Wetter",news:"Nachrichten",todos:"Aufgaben","all-schedules":"Zeitplne bersicht",pluginstore:"Plugin Store"},settings:{general:"ALLGEMEIN",appearance:"Darstellung",privacy:"Datenschutz",about:"ber",generalSettings:"Allgemeine Einstellungen",aiMode:"AI-Modus",aiModeDescription:"KI-Assistent fr erweiterte Suche und Steuerung aktivieren",animations:"Animationen",animationsDescription:"bergangseffekte und Animationen aktivieren",soundEffects:"Soundeffekte",soundEffectsDescription:"Akustische Rckmeldungen bei Aktionen",languageSettings:"Spracheinstellungen",appLanguage:"App-Sprache",appLanguageDescription:"Whle deine bevorzugte Sprache",currencySettings:"Whrungseinstellungen",appCurrency:"Whrung",appCurrencyDescription:"Whle deine bevorzugte Whrung",notifications:"Benachrichtigungen",pushNotifications:"Push-Benachrichtigungen",pushNotificationsDescription:"Erhalte Benachrichtigungen ber wichtige Ereignisse",design:"Design",backgroundMode:"Hintergrund-Modus",backgroundModeDescription:"Overlay anpassen fr besseren Fokus",automatic:"Automatisch",light:"Hell",dark:"Dunkel",background:"Hintergrund",backgroundDescription:"Filter und Effekte anpassen",gridColumns:"Rasterspalten",gridColumnsDescription:"Anzahl der Gertekarten pro Zeile",fourColumns:"4 Spalten",fourColumnsDescription:"Standard-Layout - mehr Platz pro Karte",fiveColumns:"5 Spalten",fiveColumnsDescription:"Kompaktes Layout - mehr Karten auf einen Blick",columnsCount:"{count} Spalten",gridColumnsFooter:"Diese Einstellung gilt nur fr die Desktop-Ansicht (ab 1024px Bildschirmbreite).",cardShape:"Kartenform",cardShapeDescription:"Ecken-Rundung der Gertekarten",squircleStandard:"Standard",squircleStandardDescription:"Klassische abgerundete Ecken",squircleProminent:"Ausgeprgt",squircleProminentDescription:"Starke, markante Kurvenform",squircleBalanced:"Ausgewogen",squircleBalancedDescription:"Ausgewogene organische Kurven",squircleSubtle:"Dezent",squircleSubtleDescription:"Zarte weiche Kurven",squircleFooter:"Squircles sind organischere Kurven als normale Rundungen - je strker, desto mehr weichen sie vom Kreis ab.",customized:"Angepasst",brightness:"Helligkeit",brightnessLabel:"Deckkraft",brightnessFooter:"Steuert die Helligkeit des Hintergrundbildes (100% = Original, 0% = Schwarz)",blur:"Unschrfe",blurLabel:"Weichzeichner",blurFooter:"Wendet einen weichen Unschrfe-Effekt auf den Hintergrund an (0px = Scharf, 50px = Sehr unscharf)",contrast:"Kontrast",contrastLabel:"Kontrast",contrastFooter:"Kontrast-Anpassung (100% = Original, 0% = Grau, 200% = Maximum)",saturation:"Sttigung",saturationLabel:"Sttigung",saturationFooter:"Farbintensitt (100% = Original, 0% = Graustufen, 200% = bersttigt)",grayscale:"Graustufen",grayscaleLabel:"Schwarz & Wei",grayscaleFooter:"Schwarz-Wei-Effekt (0% = Farbe, 100% = Vollstndig Schwarz & Wei)",detailViewVideos:"Detail-Ansicht Videos",detailViewVideosDescription:"Hintergrund-Videos in der Detail-Ansicht",enableVideos:"Videos aktivieren",enableVideosDescription:"Hintergrund-Videos in der Detail-Ansicht anzeigen",onMobile:"Auf mobilen Gerten",onMobileDescription:"Videos auch auf Smartphones/Tablets anzeigen",videoFolder:"Video-Ordner",path:"Pfad",videoFiles:"Video-Dateien",videoFooter:"Videos im Home Assistant www-Ordner platzieren: config/www/fast-search-videos/",videoNamingScheme:"Namensschema:",videoExamples:"Beispiele:",videoNote:"Hinweis:",videoNoteDescription:"Videos werden einmalig abgespielt, wenn die Detail-Ansicht geffnet wird. Das letzte Frame bleibt sichtbar. Default_1.mp4 bis default_10.mp4 knnen als Platzhalter verwendet werden (zufllige Auswahl).",back:"Zurck",active:"Aktiv",inactive:"Inaktiv",standard:"Standard",privacySecurity:"Datenschutz & Sicherheit",clearCache:"Cache leeren",clearCacheConfirm:"Cache wirklich lschen?",clearCacheSuccess:"Cache erfolgreich gelscht",resetData:"Daten zurcksetzen",resetDataWarning:"ACHTUNG: Alle Daten werden gelscht. Fortfahren?",resetDataConfirm:"Wirklich ALLE Einstellungen und Daten zurcksetzen?",privacySecure:"Ihre Daten sind sicher",privacyLocalOnly:"Alle Berechnungen erfolgen lokal. Keine Daten verlassen Ihr Gert.",intelligentSuggestions:"Intelligente Vorschlge",predictiveSuggestions:"VORSCHLGE AKTIVIEREN",predictiveSuggestionsDesc:"Lernt Ihre Nutzungsmuster und schlgt Gerte vor",enableSuggestions:"Vorschlge aktivieren",enableSuggestionsDescription:"KI-Assistent fr erweiterte Suche und Steuerung aktivieren",confidenceThreshold:"Confidence-Schwellenwert",confidenceThresholdLabel:"Confidence-Schwellenwert",confidenceThresholdDescription:"Mindest-Wahrscheinlichkeit fr Vorschlge",confidenceThresholdCurrent:"Aktuell: {value}%",confidenceThresholdDesc:"Mindest-Wahrscheinlichkeit fr Vorschlge",timeWindow:"Zeitfenster",timeWindowLabel:"Zeitfenster",timeWindowDescription:"Zeitraum um die aktuelle Uhrzeit fr Vorschlge",timeWindowCurrent:"Aktuell: {value} Minuten",timeWindowDesc:"Zeitraum um die aktuelle Uhrzeit fr Vorschlge",maxSuggestions:"Maximale Anzahl",maxSuggestionsLabel:"Maximale Anzahl",maxSuggestionsDescription:"Maximale Anzahl der angezeigten Vorschlge",maxSuggestionsShow:"Zeige {value} Vorschlge",maxSuggestionsDesc:"Maximale Anzahl der angezeigten Vorschlge",learningSpeed:"Lern-Geschwindigkeit",learningSpeedDescription:"Wie schnell sich das System an neue Muster anpasst",learningRate:"Lern-Geschwindigkeit",learningRateDesc:"Wie schnell sich das System an neue Muster anpasst",slow:"Langsam",normal:"Normal",fast:"Schnell",learningRateSlow:"Langsam",learningRateNormal:"Normal",learningRateFast:"Schnell",privacyTitle:"Ihre Daten sind sicher",privacyDesc:"Alle Berechnungen erfolgen lokal. Keine Daten verlassen Ihr Gert.",cacheCleared:"Gelscht",statsBar:"StatsBar",settings:"Einstellungen",widgets:"Widgets",widgetsDescription:"Verfgbare Widgets verwalten",dataSources:"Datenquellen",dataSourcesDescription:"Energie-Sensoren konfigurieren",aboutStatsBar:"BER STATSBAR",statsBarDescription:"Die StatsBar zeigt wichtige Informationen wie Wetter, Energieverbrauch und Uhrzeit dauerhaft oberhalb des Suchfeldes an.",features:"Features:",liveUpdates:"Live-Updates",energyDashboardIntegration:"Energy Dashboard Integration",customizableWidgets:"Anpassbare Widgets",availableWidgets:"Verfgbare Widgets",weatherWidget:"Wetter (Temperatur & Icon)",weatherWidgetDescription:"Temperatur & Icon",energyGridConsumptionWidget:"Leistung (Netzbezug)",energyGridConsumptionDescription:"Aktueller Netzbezug",energyGridReturnWidget:"Leistung (Einspeisung)",energyGridReturnDescription:"Rckspeisung ins Netz",solarProductionWidget:"PV Leistung",solarProductionDescription:"Aktuelle PV-Erzeugung",notificationsWidget:"Benachrichtigungen (mit Zhler)",notificationsWidgetDescription:"Zhler anzeigen",timeWidget:"Uhrzeit (live)",timeWidgetDescription:"Live-Update",consumptionWidget:"Verbrauch",consumptionDescription:"Aktueller Hausverbrauch",todayConsumptionWidget:"Bisheriger Verbrauch heute",todayConsumptionDescription:"Tagesverbrauch in kWh",todayCostWidget:"Heutige Kosten",todayCostDescription:"Kosten basierend auf Energiepreis",widgetsFooter:"Widgets werden in der StatsBar rechts angezeigt",detectionMode:"Erkennungsmodus",autoDetection:"Automatische Erkennung",detectionRunning:"Erkennung luft...",energyDashboardFound:"Energy Dashboard gefunden",patternBasedDetection:"Muster-basierte Erkennung",noSensorsDetected:"Keine Sensoren erkannt",detectionError:"Fehler bei Erkennung",notChecked:"Nicht geprft",startDetection:"Erkennung starten",redetectSensors:"Sensoren neu erkennen",searchRunning:"Suche luft...",autoDetectionInfo:"Sensoren werden aus dem Energy Dashboard oder durch Muster erkannt",manualConfigInfo:"Manuelle Konfiguration: Gib die Entity IDs selbst ein",gridPowerConsumption:"Leistung (Netzbezug)",gridPowerReturn:"Leistung (Einspeisung)",pvPower:"PV Leistung",homeConsumption:"Verbrauch",configuredSensors:"Konfigurierte Sensoren",gridConsumption:"Netzbezug",gridReturn:"Einspeisung",solar:"Solar",battery:"Batterie",notConfigured:"Nicht konfiguriert",sensorStatusLegend:" Konfiguriert |  Nicht gefunden | -- Nicht konfiguriert",energyPriceConfig:"Energiepreis",energyPriceLabel:"Preis pro kWh",energyPriceDescription:"Strompreis fr Kostenberechnung",energyPriceFooter:"Dieser Preis wird verwendet, um die tglichen Kosten zu berechnen",manualConfiguration:"Manuelle Konfiguration",manualConfigDescription:"Whle die Sensor-Entity IDs manuell aus. Tipp: Die Entity-Auswahl wird in einer zuknftigen Version hinzugefgt.",gridConsumptionEntityLabel:"Netzbezug Entity ID",gridReturnEntityLabel:"Einspeisung Entity ID",solarEntityLabel:"Solar Entity ID",batteryEntityLabel:"Batterie Entity ID",aboutDataSources:"ber Datenquellen",autoDetectionDescription:`Automatische Erkennung:
1. Energy Dashboard - Nutzt die konfigurierten Energie-Sensoren
2. Muster-basiert - Sucht nach Sensoren mit blichen Namen

Manuelle Konfiguration:
Gib die Entity IDs deiner Energie-Sensoren direkt ein. Diese werden fr die StatsBar Widgets verwendet.`,systemSettings:"Systemeinstellungen",maxEntities:"Maximale Anzahl Entities",maxEntitiesDescription:"{count} Entities laden (0 = Unbegrenzt)",maxEntitiesUnlimited:"Unbegrenzte Entities laden (0 = Unbegrenzt)",onlyEntitiesWithArea:"Nur Entities mit Bereich laden",onlyEntitiesWithAreaDescription:"Filtert Entities ohne Bereichszuweisung heraus (Permanent aktiviert)",excludedPatterns:"Ausschlussmuster",excludedPatternsDescription:"Definiere Muster um bestimmte Entities von der Suche auszuschlieen. Verwende Wildcards:",wildcardAny:"beliebige Zeichen (z.B.",wildcardAnySuffix:"fr alle Sensoren)",wildcardSingle:"ein einzelnes Zeichen",examples:"Beispiele:",patternPlaceholder:"z.B. sensor.temp_*",addPattern:"+ Hinzufgen",activePatterns:"Aktive Muster ({count})",removePattern:"Muster entfernen",noPatternsYet:"Keine Muster definiert. Alle Entities werden angezeigt.",statusAndGreetings:"STATUS & BEGRSSUNG",statsBarLabel:"StatsBar",statsBarDescription:"Statusleiste mit Widgets anzeigen",greetingsBarLabel:"GreetingsBar",greetingsBarDescription:"Begrung anzeigen",showStatsBar:"StatsBar anzeigen",showStatsBarDescription:"Statusleiste oberhalb des Suchfeldes",username:"Benutzername",usernamePlaceholder:"Benutzername eingeben",usernameFooter:"Der Benutzername wird in der StatsBar links angezeigt",widgets:"Widgets",fixedWidgets:"Feste Widgets:",weatherWidget:"Wetter (Temperatur & Icon)",energyWidget:"Energieverbrauch",notificationsWidget:"Benachrichtigungen (mit Zhler)",timeWidget:"Uhrzeit (live)",statsBarNote:"Die StatsBar bleibt immer sichtbar, auch wenn das Panel geffnet ist.",namingScheme:"Namensschema:",namingSchemeNote:"Videos werden einmalig abgespielt wenn die Detail-Ansicht geffnet wird. Das letzte Frame bleibt sichtbar. Als Platzhalter knnen default_1.mp4 bis default_10.mp4 verwendet werden (zufllige Auswahl).",suggestions:"Vorschlge",aboutCard:"ber Fast Search Card",version:"Version",build:"Build",developer:"Entwickler",license:"Lizenz"},schedule:{all:"Alle",timer:"Timer",schedules:"Zeitplne",turnOn:"Einschalten",turnOff:"Ausschalten",open:"ffnen",close:"Schlieen",setPosition:"Position setzen",position:"Position",timerMode:"Timer",scheduleMode:"Zeitplan",timeFormat:"Zeitanzeige",format24h:"24h",formatAM:"AM",formatPM:"PM",days:"Tage",monday:"Mo",tuesday:"Di",wednesday:"Mi",thursday:"Do",friday:"Fr",saturday:"Sa",sunday:"So",daily:"Tglich",weekdays:"Mo-Fr",weekend:"Sa, So",noDays:"Keine",selectDay:"Auswhlen",deselectDay:"Abwhlen",repeat:"Wiederholung",regular:"Regelmig",once:"Einmalig",add:"Neu",cancel:"Abbrechen",confirm:"Jetzt erstellen",save:"Speichern",action:"Aktion",scheduler:"Scheduler",atTime:"Um",remaining:"Noch",minutes:"Min",noTimers:"Keine Timer",noSchedules:"Keine Zeitplne",noEntries:"Keine Eintrge",timerName:"Timer",scheduleName:"Zeitplan",morningRoutine:"Morgenroutine",evening:"Abends"},climate:{temperature:"Temperatur",hvacMode:"HVAC-Modus",fanMode:"Lftermodus",swingMode:"Schwenkmodus",presetMode:"Voreinstellung",off:"Aus",heat:"Heizen",cool:"Khlen",heatCool:"Auto",auto:"Automatisch",dry:"Entfeuchten",fanOnly:"Nur Lfter",low:"Niedrig",medium:"Mittel",high:"Hoch",quiet:"Leise",turbo:"Turbo",vertical:"Vertikal",horizontal:"Horizontal",both:"Beide",none:"Keine",away:"Abwesend",home:"Zuhause",eco:"Eco",boost:"Boost",comfort:"Komfort",sleep:"Schlaf"},context:{tabActions:"Aktionen",tabFavorites:"Favoriten",tabEnvironment:"Umgebung",loading:"Lade Umgebung...",noFavorites:"Keine Favoriten markiert",noEnvironment:"Keine verwandten Gerte gefunden",noActions:"Keine Aktionen gefunden"}},states:{on:"Ein",off:"Aus",home:"Zuhause",not_home:"Abwesend",unknown:"Unbekannt",unavailable:"Nicht verfgbar",heat:"Heizen",cool:"Khlen",heat_cool:"Auto",dry:"Entfeuchten",fan_only:"Nur Lfter",auto:"Automatisch",open:"Offen",closed:"Geschlossen",opening:"ffnet",closing:"Schliet",stopped:"Gestoppt",locked:"Verriegelt",unlocked:"Entriegelt",locking:"Verriegelt...",unlocking:"Entriegelt...",jammed:"Verklemmt",disarmed:"Deaktiviert",armed_home:"Zuhause scharf",armed_away:"Abwesend scharf",armed_night:"Nacht scharf",armed_vacation:"Urlaub scharf",armed_custom_bypass:"Teilscharf",pending:"Aktiviert...",triggered:"Ausgelst",arming:"Wird scharf...",playing:"Wiedergabe",paused:"Pausiert",idle:"Bereit",standby:"Standby",buffering:"Puffert",docked:"Ladestation",cleaning:"Reinigt",returning:"Kehrt zurck",error:"Fehler","clear-night":"Klare Nacht",cloudy:"Bewlkt",fog:"Neblig",hail:"Hagel",lightning:"Gewitter","lightning-rainy":"Gewitterregen",partlycloudy:"Teilweise bewlkt",pouring:"Starkregen",rainy:"Regnerisch",snowy:"Schnee","snowy-rainy":"Schneeregen",sunny:"Sonnig",windy:"Windig","windy-variant":"Windig",exceptional:"Auergewhnlich",recording:"Aufnahme",streaming:"Streaming",active:"Aktiv",scening:"Szene"},deviceClasses:{battery:{on:"Niedrig",off:"Normal"},battery_charging:{on:"Ldt",off:"Ldt nicht"},cold:{on:"Kalt",off:"Normal"},connectivity:{on:"Verbunden",off:"Getrennt"},door:{on:"Offen",off:"Geschlossen"},garage_door:{on:"Offen",off:"Geschlossen"},gas:{on:"Gas erkannt",off:"Kein Gas"},heat:{on:"Hei",off:"Normal"},light:{on:"Licht erkannt",off:"Dunkel"},lock:{on:"Entriegelt",off:"Verriegelt"},moisture:{on:"Feucht",off:"Trocken"},motion:{on:"Bewegung",off:"Keine Bewegung"},moving:{on:"Bewegt sich",off:"Stillstand"},occupancy:{on:"Belegt",off:"Frei"},opening:{on:"Offen",off:"Geschlossen"},plug:{on:"Eingesteckt",off:"Ausgesteckt"},power:{on:"Ein",off:"Aus"},presence:{on:"Anwesend",off:"Abwesend"},problem:{on:"Problem",off:"OK"},running:{on:"Luft",off:"Gestoppt"},safety:{on:"Unsicher",off:"Sicher"},smoke:{on:"Rauch erkannt",off:"Kein Rauch"},sound:{on:"Gerusch erkannt",off:"Still"},tamper:{on:"Manipulation",off:"OK"},update:{on:"Update verfgbar",off:"Aktuell"},vibration:{on:"Vibration",off:"Keine Vibration"},window:{on:"Offen",off:"Geschlossen"}},domains:{automation:"Automatisierung",binary_sensor:"Sensor",camera:"Kamera",climate:"Klima",cover:"Abdeckung",device_tracker:"Gert",fan:"Ventilator",input_boolean:"Schalter",input_number:"Nummer",light:"Licht",lock:"Schloss",media_player:"Media Player",person:"Person",scene:"Szene",script:"Skript",sensor:"Sensor",switch:"Schalter",timer:"Timer",vacuum:"Staubsauger",weather:"Wetter",alarm_control_panel:"Alarmanlage"},units:{"C":"C","F":"F","%":"%",W:"W",kW:"kW",kWh:"kWh",A:"A",V:"V","km/h":"km/h","m/s":"m/s",mm:"mm",hPa:"hPa",bar:"bar",lx:"lx",lm:"lm",dB:"dB",ppm:"ppm","g/m":"g/m"},advice:{temp_very_cold:"Sehr kalt",temp_cold:"Kalt",temp_cool:"Khl",temp_comfortable:"Angenehm",temp_warm:"Warm",temp_hot:"Hei",temp_very_hot:"Sehr hei",humidity_too_dry:"Zu trocken",humidity_dry:"Trocken",humidity_optimal:"Optimal",humidity_humid:"Feucht",humidity_too_humid:"Zu feucht",energy_none:"Keine Produktion",energy_low:"Geringer Ertrag",energy_medium:"Mittlerer Ertrag",energy_good:"Guter Ertrag",energy_excellent:"Sehr guter Ertrag",energy_consuming:"Verbrauch",air_excellent:"Sehr gut",air_good:"Gut",air_acceptable:"Akzeptabel",air_moderate:"Mig",air_poor:"Lften empfohlen",air_very_poor:"Dringend lften",battery_critical:"Kritisch niedrig",battery_low:"Niedrig",battery_medium:"Mittel",battery_good:"Gut",battery_full:"Voll",light_dark:"Dunkel",light_dim:"Dmmerig",light_moderate:"Mig hell",light_bright:"Hell",light_very_bright:"Sehr hell",pressure_low:"Tiefdruck",pressure_normal:"Normal",pressure_high:"Hochdruck",noise_quiet:"Ruhig",noise_moderate:"Mig",noise_loud:"Laut",noise_very_loud:"Sehr laut"},actions:{title:"Aktionen",execute:"Ausfhren",toggle:"Umschalten",noActions:"Keine Aktionen verfgbar",noRelevantActions:"Keine relevanten Aktionen fr dieses Gert",loading:"Lade Aktionen...",sceneActivated:"Szene aktiviert",scriptExecuted:"Skript ausgefhrt",automationOn:"Automation aktiviert",automationOff:"Automation deaktiviert",actionExecuted:"Aktion erfolgreich ausgefhrt",executionError:"Fehler beim Ausfhren der Aktion",loadingError:"Fehler beim Laden der Aktionen",noCallback:"Keine Callback-Funktion verfgbar",types:{scene:"Szene",script:"Skript",automation:"Automation"},relevance:{veryHigh:"Sehr relevant",high:"Relevant",medium:"Mig relevant",low:"Wenig relevant"},areas:{noRoom:"Kein Raum",house:"Haus",global:"Global"},states:{on:"EIN",off:"AUS",unknown:"Unbekannt"}}},F5={ui:{common:{pleaseSelect:"Please select"},controls:{brightness:"Brightness",colorTemperature:"Color Temperature",color:"Color",effects:"Effects",hvac:"HVAC",fan:"Fan",preset:"Preset",swing:"Swing",play:"Play",pause:"Pause",previous:"Previous",next:"Next",source:"Source",open:"Open",stop:"Stop",close:"Close",position:"Position",speed:"Speed",volume:"Volume",targetTemperature:"Target Temperature",currentTemperature:"Current",control:"Control",production:"Production",consumption:"Consumption",battery:"Battery",printProgress:"Print Progress",sensor:"Sensor",sensors:"Sensors",diagnostics:"Diagnostics",misc:"Miscellaneous",controls:"Controls",temperature:"Temperature",humidity:"Humidity",power:"Power",energy:"Energy",co2:"CO",movement:"Motion",door:"Door",window:"Window",presence:"Presence",solar:"Solar",info:"Information",settings:"Settings",systemSettings:"System Settings",appearance:"Appearance",language:"Language",notifications:"Notifications",privacy:"Privacy",about:"About",theme:"Theme",darkMode:"Dark Mode",lightMode:"Light Mode",autoMode:"Automatic",security:"Security",lock:"Lock",unlock:"Unlock",locked:"Locked",unlocked:"Unlocked",activate:"Activate",run:"Run",disable:"Disable",enable:"Enable",trigger:"Trigger",scene:"Scene",script:"Script",automation:"Automation",veryWarm:"Very Warm",warm:"Warm",neutral:"Neutral",cold:"Cold",daylight:"Daylight",on:"On",off:"Off",active:"Active",inactive:"Inactive",since:"since",noRoom:"No Room",unknown:"Unknown",justNow:"just now",turned_on:"Turned on",turned_off:"Turned off",heating:"Heating",cooling:"Cooling",auto:"Auto",drying:"Drying",fanOnly:"Fan only",idle:"Idle",heatingTo:"Heating to",coolingTo:"Cooling to",maintaining:"Maintaining",eco:"Eco mode",comfort:"Comfort",boost:"Boost",veryCold:"Very cold",cold:"Cold",cool:"Cool",comfortable:"Comfortable",warm:"Warm",hot:"Hot",veryHot:"Very hot",veryDry:"Very dry",dry:"Dry",optimal:"Optimal",humid:"Humid",veryHumid:"Very humid",critical:"Critical",low:"Low",medium:"Medium",good:"Good",full:"Full",minimal:"Minimal",high:"High",veryHigh:"Very high",excellent:"Excellent",acceptable:"Acceptable",moderate:"Moderate",poor:"Poor"},search:{noResults:'No results for "{term}"',tryDifferent:"Try different search terms"},aiMode:{askAnything:"Ask Anything",subtitle:"Ask me anything about your Smart Home",thinking:"AI is thinking...",wasHelpful:"Was this helpful?",yes:"Yes",no:"No",followUp:"Ask a follow-up question...",suggestions:{lightsOff:"Turn off all lights",weather:"What's the weather today?",temperature:"Set temperature to 72F"},badges:{webSearch:"Web Search",location:"Location",deviceControl:"Device Control",assistant:"Assistant"}},subcategories:{all:"All",favorites:"Favorites",suggestions:"Suggestions",lights:"Lights",switches:"Switches",climate:"Climate",covers:"Covers",media:"Media",cleaning:"Cleaning",security:"Security",utilities:"Utilities",scripts:"Scripts",automations:"Automations",scenes:"Scenes",temperature:"Temperature",humidity:"Humidity",motion:"Motion",door_window:"Doors & Windows",energy:"Energy",light:"Light",presence:"Presence",pressure:"Pressure",battery:"Battery",air_quality:"Air Quality",other_sensors:"Other",system:"System",apps:"Apps"},placeholders:{searchDevices:"Devices",searchSensors:"Sensors",searchActions:"Actions",searchCustom:"Custom",search:"Search..."},categories:{devices:"Devices",sensors:"Sensors",actions:"Actions",custom:"Custom"},viewModes:{grid:"Grid",list:"List"},filters:{categories:"Categories",areas:"Areas",types:"Types",toggleFilter:"Toggle filters"},tooltips:{gridView:"Grid view",listView:"List view",filterCategories:"Filter by categories",filterAreas:"Filter by areas",filterTypes:"Filter by types",toggleFilter:"Toggle filters",controlsTab:"Controls",scheduleTab:"Schedule",historyTab:"History",contextTab:"Context",generalTab:"General",appearanceTab:"Appearance",privacyTab:"Privacy",aboutTab:"About"},actionButtons:{overview:"Overview",settings:"Settings",refresh:"Refresh",back:"Back",add:"Add",camera:"Camera",image:"Image",read:"Read/Unread",favorite:"Favorite"},general:{noRoom:"No Room",favorites:"Favorites"},deviceNames:{settings:"Settings",marketplace:"Marketplace",weather:"Weather",news:"News",todos:"Tasks","all-schedules":"Schedules Overview",pluginstore:"Plugin Store"},settings:{general:"GENERAL",appearance:"Appearance",privacy:"Privacy",about:"About",generalSettings:"General Settings",aiMode:"AI Mode",aiModeDescription:"Enable AI assistant for advanced search and control",animations:"Animations",animationsDescription:"Enable transition effects and animations",soundEffects:"Sound Effects",soundEffectsDescription:"Acoustic feedback for actions",languageSettings:"Language Settings",appLanguage:"App Language",appLanguageDescription:"Choose your preferred language",currencySettings:"Currency Settings",appCurrency:"Currency",appCurrencyDescription:"Choose your preferred currency",notifications:"Notifications",pushNotifications:"Push Notifications",pushNotificationsDescription:"Receive notifications about important events",design:"Design",backgroundMode:"Background Mode",backgroundModeDescription:"Adjust overlay for better focus",automatic:"Automatic",light:"Light",dark:"Dark",background:"Background",backgroundDescription:"Adjust filters and effects",gridColumns:"Grid Columns",gridColumnsDescription:"Number of device cards per row",fourColumns:"4 Columns",fourColumnsDescription:"Standard layout - more space per card",fiveColumns:"5 Columns",fiveColumnsDescription:"Compact layout - more cards at a glance",columnsCount:"{count} Columns",gridColumnsFooter:"This setting only applies to desktop view (from 1024px screen width).",cardShape:"Card Shape",cardShapeDescription:"Corner rounding of device cards",squircleStandard:"Standard",squircleStandardDescription:"Classic rounded corners",squircleProminent:"Prominent",squircleProminentDescription:"Strong, distinctive curve form",squircleBalanced:"Balanced",squircleBalancedDescription:"Balanced organic curves",squircleSubtle:"Subtle",squircleSubtleDescription:"Delicate soft curves",squircleFooter:"Squircles are more organic curves than normal rounding - the stronger, the more they deviate from the circle.",customized:"Customized",brightness:"Brightness",brightnessLabel:"Opacity",brightnessFooter:"Controls the brightness of the background image (100% = Original, 0% = Black)",blur:"Blur",blurLabel:"Blur",blurFooter:"Applies a soft blur to the background (0px = Sharp, 50px = Very blurred)",contrast:"Contrast",contrastLabel:"Contrast",contrastFooter:"Contrast adjustment (100% = Original, 0% = Gray, 200% = Maximum)",saturation:"Saturation",saturationLabel:"Saturation",saturationFooter:"Color intensity (100% = Original, 0% = Grayscale, 200% = Oversaturated)",grayscale:"Grayscale",grayscaleLabel:"Black & White",grayscaleFooter:"Black and white effect (0% = Color, 100% = Fully Black & White)",detailViewVideos:"Detail View Videos",detailViewVideosDescription:"Background videos in detail view",enableVideos:"Enable videos",enableVideosDescription:"Show background videos in detail view",onMobile:"On mobile devices",onMobileDescription:"Also show videos on smartphones/tablets",videoFolder:"Video Folder",path:"Path",videoFiles:"Video Files",videoFooter:"Place videos in Home Assistant www folder: config/www/fast-search-videos/",videoNamingScheme:"Naming Scheme:",videoExamples:"Examples:",videoNote:"Note:",videoNoteDescription:"Videos are played once when the detail view is opened. The last frame remains visible. Default_1.mp4 to default_10.mp4 can be used as placeholders (random selection).",back:"Back",active:"Active",inactive:"Inactive",standard:"Standard",privacySecurity:"Privacy & Security",clearCache:"Clear Cache",clearCacheConfirm:"Really clear cache?",clearCacheSuccess:"Cache successfully cleared",resetData:"Reset Data",resetDataWarning:"WARNING: All data will be deleted. Continue?",resetDataConfirm:"Really reset ALL settings and data?",privacySecure:"Your data is secure",privacyLocalOnly:"All calculations are performed locally. No data leaves your device.",intelligentSuggestions:"Intelligent Suggestions",predictiveSuggestions:"ENABLE SUGGESTIONS",predictiveSuggestionsDesc:"Learns your usage patterns and suggests devices",enableSuggestions:"Enable Suggestions",enableSuggestionsDescription:"AI assistant for enhanced search and control",confidenceThreshold:"Confidence Threshold",confidenceThresholdLabel:"Confidence Threshold",confidenceThresholdDescription:"Minimum probability for suggestions",confidenceThresholdCurrent:"Current: {value}%",confidenceThresholdDesc:"Minimum probability for suggestions",timeWindow:"Time Window",timeWindowLabel:"Time Window",timeWindowDescription:"Time range around current time for suggestions",timeWindowCurrent:"Current: {value} minutes",timeWindowDesc:"Time range around current time for suggestions",maxSuggestions:"Maximum Number",maxSuggestionsLabel:"Maximum Number",maxSuggestionsDescription:"Maximum number of displayed suggestions",maxSuggestionsShow:"Show {value} suggestions",maxSuggestionsDesc:"Maximum number of displayed suggestions",learningSpeed:"Learning Speed",learningSpeedDescription:"How quickly the system adapts to new patterns",learningRate:"Learning Speed",learningRateDesc:"How quickly the system adapts to new patterns",slow:"Slow",normal:"Normal",fast:"Fast",learningRateSlow:"Slow",learningRateNormal:"Normal",learningRateFast:"Fast",privacyTitle:"Your data is secure",privacyDesc:"All calculations are performed locally. No data leaves your device.",cacheCleared:"Cleared",statsBar:"StatsBar",settings:"Settings",widgets:"Widgets",widgetsDescription:"Manage available widgets",dataSources:"Data Sources",dataSourcesDescription:"Configure energy sensors",aboutStatsBar:"ABOUT STATSBAR",statsBarDescription:"The StatsBar displays important information like weather, energy consumption, and time permanently above the search field.",features:"Features:",liveUpdates:"Live Updates",energyDashboardIntegration:"Energy Dashboard Integration",customizableWidgets:"Customizable Widgets",availableWidgets:"Available Widgets",weatherWidget:"Weather (Temperature & Icon)",weatherWidgetDescription:"Temperature & Icon",energyGridConsumptionWidget:"Power (Grid Import)",energyGridConsumptionDescription:"Current grid import",energyGridReturnWidget:"Power (Grid Export)",energyGridReturnDescription:"Return to grid",solarProductionWidget:"PV Power",solarProductionDescription:"Current PV generation",notificationsWidget:"Notifications (with counter)",notificationsWidgetDescription:"Show counter",timeWidget:"Time (live)",timeWidgetDescription:"Live update",consumptionWidget:"Consumption",consumptionDescription:"Current home consumption",todayConsumptionWidget:"Today's Consumption",todayConsumptionDescription:"Daily consumption in kWh",todayCostWidget:"Today's Cost",todayCostDescription:"Cost based on energy price",widgetsFooter:"Widgets are displayed on the right side of the StatsBar",detectionMode:"Detection Mode",autoDetection:"Automatic Detection",detectionRunning:"Detection running...",energyDashboardFound:"Energy Dashboard found",patternBasedDetection:"Pattern-based detection",noSensorsDetected:"No sensors detected",detectionError:"Detection error",notChecked:"Not checked",startDetection:"Start Detection",redetectSensors:"Redetect sensors",searchRunning:"Search running...",autoDetectionInfo:"Sensors are detected from Energy Dashboard or by pattern",manualConfigInfo:"Manual configuration: Enter the entity IDs yourself",gridPowerConsumption:"Power (Grid Import)",gridPowerReturn:"Power (Grid Export)",pvPower:"PV Power",homeConsumption:"Consumption",configuredSensors:"Configured Sensors",gridConsumption:"Grid Import",gridReturn:"Grid Export",solar:"Solar",battery:"Battery",notConfigured:"Not configured",sensorStatusLegend:" Configured |  Not found | -- Not configured",energyPriceConfig:"Energy Price",energyPriceLabel:"Price per kWh",energyPriceDescription:"Electricity price for cost calculation",energyPriceFooter:"This price is used to calculate daily costs",manualConfiguration:"Manual Configuration",manualConfigDescription:"Select the sensor entity IDs manually. Tip: Entity selection will be added in a future version.",gridConsumptionEntityLabel:"Grid Import Entity ID",gridReturnEntityLabel:"Grid Export Entity ID",solarEntityLabel:"Solar Entity ID",batteryEntityLabel:"Battery Entity ID",aboutDataSources:"About Data Sources",autoDetectionDescription:`Automatic Detection:
1. Energy Dashboard - Uses configured energy sensors
2. Pattern-based - Searches for sensors with common names

Manual Configuration:
Enter the entity IDs of your energy sensors directly. These are used for the StatsBar widgets.`,systemSettings:"System Settings",maxEntities:"Maximum Number of Entities",maxEntitiesDescription:"{count} entities load (0 = Unlimited)",maxEntitiesUnlimited:"Unlimited entities load (0 = Unlimited)",onlyEntitiesWithArea:"Load only entities with area",onlyEntitiesWithAreaDescription:"Filters out entities without area assignment (Permanently enabled)",excludedPatterns:"Excluded Patterns",excludedPatternsDescription:"Define patterns to exclude specific entities from search. Use wildcards:",wildcardAny:"any characters (e.g.",wildcardAnySuffix:"for all sensors)",wildcardSingle:"a single character",examples:"Examples:",patternPlaceholder:"e.g. sensor.temp_*",addPattern:"+ Add",activePatterns:"Active Patterns ({count})",removePattern:"Remove pattern",noPatternsYet:"No patterns defined. All entities will be shown.",statusAndGreetings:"STATUS & GREETINGS",statsBarLabel:"StatsBar",statsBarDescription:"Show status bar with widgets",greetingsBarLabel:"GreetingsBar",greetingsBarDescription:"Show greeting",showStatsBar:"Show StatsBar",showStatsBarDescription:"Status bar above search field",username:"Username",usernamePlaceholder:"Enter username",usernameFooter:"The username is displayed on the left in the StatsBar",widgets:"Widgets",fixedWidgets:"Fixed Widgets:",weatherWidget:"Weather (Temperature & Icon)",energyWidget:"Energy consumption",notificationsWidget:"Notifications (with counter)",timeWidget:"Time (live)",statsBarNote:"The StatsBar remains visible even when the panel is open.",namingScheme:"Naming Scheme:",namingSchemeNote:"Videos are played once when the detail view is opened. The last frame remains visible. Placeholder videos default_1.mp4 to default_10.mp4 can be used (random selection).",suggestions:"Suggestions",aboutCard:"About Fast Search Card",version:"Version",build:"Build",developer:"Developer",license:"License"},schedule:{all:"All",timer:"Timer",schedules:"Schedules",turnOn:"Turn on",turnOff:"Turn off",open:"Open",close:"Close",setPosition:"Set position",position:"Position",timerMode:"Timer",scheduleMode:"Schedule",timeFormat:"Time Display",format24h:"24h",formatAM:"AM",formatPM:"PM",days:"Days",monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun",daily:"Daily",weekdays:"Mon-Fri",weekend:"Sat, Sun",noDays:"None",selectDay:"Select",deselectDay:"Deselect",repeat:"Repeat",regular:"Regular",once:"Once",add:"New",cancel:"Cancel",confirm:"Create now",save:"Save",action:"Action",scheduler:"Scheduler",atTime:"At",remaining:"Remaining",minutes:"min",noTimers:"No timers",noSchedules:"No schedules",noEntries:"No entries",timerName:"Timer",scheduleName:"Schedule",morningRoutine:"Morning routine",evening:"Evening"},context:{tabActions:"Actions",tabFavorites:"Favorites",tabEnvironment:"Environment",loading:"Loading environment...",noFavorites:"No favorites marked",noEnvironment:"No related devices found",noActions:"No actions found"}},states:{on:"On",off:"Off",home:"Home",not_home:"Away",unknown:"Unknown",unavailable:"Unavailable",heat:"Heating",cool:"Cooling",heat_cool:"Auto",dry:"Drying",fan_only:"Fan only",auto:"Automatic",open:"Open",closed:"Closed",opening:"Opening",closing:"Closing",stopped:"Stopped",locked:"Locked",unlocked:"Unlocked",locking:"Locking...",unlocking:"Unlocking...",jammed:"Jammed",disarmed:"Disarmed",armed_home:"Armed Home",armed_away:"Armed Away",armed_night:"Armed Night",armed_vacation:"Armed Vacation",armed_custom_bypass:"Armed Custom",pending:"Pending...",triggered:"Triggered",arming:"Arming...",playing:"Playing",paused:"Paused",idle:"Idle",standby:"Standby",buffering:"Buffering",docked:"Docked",cleaning:"Cleaning",returning:"Returning",error:"Error","clear-night":"Clear Night",cloudy:"Cloudy",fog:"Foggy",hail:"Hail",lightning:"Lightning","lightning-rainy":"Lightning Rain",partlycloudy:"Partly Cloudy",pouring:"Heavy Rain",rainy:"Rainy",snowy:"Snowy","snowy-rainy":"Sleet",sunny:"Sunny",windy:"Windy","windy-variant":"Windy",exceptional:"Exceptional",recording:"Recording",streaming:"Streaming",active:"Active",scening:"Scene"},deviceClasses:{battery:{on:"Low",off:"Normal"},battery_charging:{on:"Charging",off:"Not charging"},cold:{on:"Cold",off:"Normal"},connectivity:{on:"Connected",off:"Disconnected"},door:{on:"Open",off:"Closed"},garage_door:{on:"Open",off:"Closed"},gas:{on:"Gas detected",off:"Clear"},heat:{on:"Hot",off:"Normal"},light:{on:"Light detected",off:"Dark"},lock:{on:"Unlocked",off:"Locked"},moisture:{on:"Wet",off:"Dry"},motion:{on:"Motion detected",off:"No motion"},moving:{on:"Moving",off:"Stopped"},occupancy:{on:"Occupied",off:"Clear"},opening:{on:"Open",off:"Closed"},plug:{on:"Plugged in",off:"Unplugged"},power:{on:"On",off:"Off"},presence:{on:"Present",off:"Away"},problem:{on:"Problem",off:"OK"},running:{on:"Running",off:"Stopped"},safety:{on:"Unsafe",off:"Safe"},smoke:{on:"Smoke detected",off:"Clear"},sound:{on:"Sound detected",off:"Quiet"},tamper:{on:"Tampered",off:"OK"},update:{on:"Update available",off:"Up to date"},vibration:{on:"Vibration",off:"No vibration"},window:{on:"Open",off:"Closed"}},domains:{automation:"Automation",binary_sensor:"Sensor",camera:"Camera",climate:"Climate",cover:"Cover",device_tracker:"Device",fan:"Fan",input_boolean:"Switch",input_number:"Number",light:"Light",lock:"Lock",media_player:"Media Player",person:"Person",scene:"Scene",script:"Script",sensor:"Sensor",switch:"Switch",timer:"Timer",vacuum:"Vacuum",weather:"Weather",alarm_control_panel:"Alarm"},units:{"C":"C","F":"F","%":"%",W:"W",kW:"kW",kWh:"kWh",A:"A",V:"V","km/h":"km/h",mph:"mph","m/s":"m/s",mm:"mm",in:"in",hPa:"hPa",bar:"bar",lx:"lx",lm:"lm",dB:"dB",ppm:"ppm","g/m":"g/m"},advice:{temp_very_cold:"Very cold",temp_cold:"Cold",temp_cool:"Cool",temp_comfortable:"Comfortable",temp_warm:"Warm",temp_hot:"Hot",temp_very_hot:"Very hot",humidity_too_dry:"Too dry",humidity_dry:"Dry",humidity_optimal:"Optimal",humidity_humid:"Humid",humidity_too_humid:"Too humid",energy_none:"No production",energy_low:"Low yield",energy_medium:"Medium yield",energy_good:"Good yield",energy_excellent:"Excellent yield",energy_consuming:"Consuming",air_excellent:"Excellent",air_good:"Good",air_acceptable:"Acceptable",air_moderate:"Moderate",air_poor:"Ventilate",air_very_poor:"Ventilate now",battery_critical:"Critical",battery_low:"Low",battery_medium:"Medium",battery_good:"Good",battery_full:"Full",light_dark:"Dark",light_dim:"Dim",light_moderate:"Moderate",light_bright:"Bright",light_very_bright:"Very bright",pressure_low:"Low pressure",pressure_normal:"Normal",pressure_high:"High pressure",noise_quiet:"Quiet",noise_moderate:"Moderate",noise_loud:"Loud",noise_very_loud:"Very loud"},actions:{title:"Actions",execute:"Execute",toggle:"Toggle",noActions:"No actions available",noRelevantActions:"No relevant actions for this device",loading:"Loading actions...",sceneActivated:"Scene activated",scriptExecuted:"Script executed",automationOn:"Automation enabled",automationOff:"Automation disabled",actionExecuted:"Action executed successfully",executionError:"Error executing action",loadingError:"Error loading actions",noCallback:"No callback function available",types:{scene:"Scene",script:"Script",automation:"Automation"},relevance:{veryHigh:"Very relevant",high:"Relevant",medium:"Moderately relevant",low:"Less relevant"},areas:{noRoom:"No Room",house:"House",global:"Global"},states:{on:"ON",off:"OFF",unknown:"Unknown"}}},P5={ui:{common:{pleaseSelect:"Veuillez slectionner"},controls:{brightness:"Luminosit",colorTemperature:"Temprature de couleur",color:"Couleur",effects:"Effets",hvac:"CVC",fan:"Ventilateur",preset:"Prrglage",swing:"Oscillation",play:"Lecture",pause:"Pause",previous:"Prcdent",next:"Suivant",source:"Source",open:"Ouvrir",stop:"Arrt",close:"Fermer",position:"Position",speed:"Vitesse",volume:"Volume",targetTemperature:"Temprature cible",currentTemperature:"Actuelle",control:"Contrle",production:"Production",consumption:"Consommation",battery:"Batterie",sensor:"Capteur",temperature:"Temprature",humidity:"Humidit",power:"Puissance",energy:"nergie",co2:"CO",movement:"Mouvement",door:"Porte",window:"Fentre",presence:"Prsence",solar:"Solaire",info:"Information",settings:"Paramtres",systemSettings:"Paramtres systme",appearance:"Apparence",language:"Langue",notifications:"Notifications",privacy:"Confidentialit",about:" propos",theme:"Thme",darkMode:"Mode sombre",lightMode:"Mode clair",autoMode:"Automatique",security:"Scurit",lock:"Verrouiller",unlock:"Dverrouiller",locked:"Verrouill",unlocked:"Dverrouill",activate:"Activer",run:"Excuter",disable:"Dsactiver",enable:"Activer",trigger:"Dclencher",scene:"Scne",script:"Script",automation:"Automatisation",veryWarm:"Trs chaud",warm:"Chaud",neutral:"Neutre",cold:"Froid",daylight:"Lumire du jour",on:"Allum",off:"teint",active:"Actif",inactive:"Inactif",since:"depuis",noRoom:"Aucune pice",unknown:"Inconnu",justNow:" l'instant",turned_on:"Allum",turned_off:"teint",heating:"Chauffage",cooling:"Refroidissement",auto:"Auto",drying:"Dshumidification",fanOnly:"Ventilateur seulement",idle:"En attente",heatingTo:"Chauffage ",coolingTo:"Refroidissement ",maintaining:"Maintien",eco:"Mode co",comfort:"Confort",boost:"Boost",veryCold:"Trs froid",cold:"Froid",cool:"Frais",comfortable:"Confortable",warm:"Chaud",hot:"Trs chaud",veryHot:"Extrmement chaud",veryDry:"Trs sec",dry:"Sec",optimal:"Optimal",humid:"Humide",veryHumid:"Trs humide",critical:"Critique",low:"Bas",medium:"Moyen",good:"Bon",full:"Plein",minimal:"Minimal",high:"lev",veryHigh:"Trs lev",excellent:"Excellent",acceptable:"Acceptable",moderate:"Modr",poor:"Mauvais"},search:{noResults:"Aucun rsultat pour",tryDifferent:"Essayez avec d'autres termes"},aiMode:{askAnything:"Demandez tout",subtitle:"Posez-moi toutes vos questions sur votre maison intelligente",thinking:"L'IA rflchit...",wasHelpful:"Cela vous a-t-il aid ?",yes:"Oui",no:"Non",followUp:"Posez une question de suivi...",suggestions:{lightsOff:"teindre toutes les lumires",weather:"Quel temps fait-il aujourd'hui ?",temperature:"Rgler la temprature  22C"},badges:{webSearch:"Recherche Web",location:"Localisation",deviceControl:"Contrle des appareils",assistant:"Assistant"}},subcategories:{all:"Tous",lights:"clairage",switches:"Interrupteurs",climate:"Climat",covers:"Volets",media:"Mdias",cleaning:"Nettoyage",security:"Scurit",utilities:"Appareils",scripts:"Scripts",automations:"Automatisations",scenes:"Scnes",temperature:"Temprature",humidity:"Humidit",motion:"Mouvement",door_window:"Portes & Fentres",energy:"nergie",light:"Lumire",presence:"Prsence",pressure:"Pression",battery:"Batterie",air_quality:"Qualit de l'air",other_sensors:"Autres",system:"Systme",apps:"Applications"},placeholders:{searchDevices:"Appareils",searchSensors:"Capteurs",searchActions:"Actions",searchCustom:"Personnalis",search:"Rechercher..."},categories:{devices:"Appareils",sensors:"Capteurs",actions:"Actions",custom:"Personnalis"},viewModes:{grid:"Grille",list:"Liste"},filters:{categories:"Catgories",areas:"Pices",types:"Types"},general:{noRoom:"Aucune pice"},deviceNames:{settings:"Paramtres",marketplace:"Boutique"},settings:{general:"Gnral",appearance:"Apparence",privacy:"Confidentialit",about:" propos",generalSettings:"Paramtres gnraux",aiMode:"Mode IA",aiModeDescription:"Activer l'assistant IA pour recherche et contrle avancs",animations:"Animations",animationsDescription:"Activer les effets de transition et animations",soundEffects:"Effets sonores",soundEffectsDescription:"Retour acoustique pour les actions",languageSettings:"Paramtres de langue",appLanguage:"Langue de l'application",appLanguageDescription:"Choisissez votre langue prfre",notifications:"Notifications",pushNotifications:"Notifications push",pushNotificationsDescription:"Recevoir des notifications sur les vnements importants",design:"Design",backgroundMode:"Mode d'arrire-plan",backgroundModeDescription:"Ajuster la superposition pour une meilleure concentration",automatic:"Automatique",light:"Clair",dark:"Sombre",background:"Arrire-plan",privacySecurity:"Confidentialit et scurit",clearCache:"Vider le cache",resetData:"Rinitialiser les donnes",aboutCard:" propos de Fast Search Card",version:"Version",build:"Build",developer:"Dveloppeur",license:"Licence"},schedule:{all:"Tous",timer:"Minuteur",schedules:"Horaires",turnOn:"Allumer",turnOff:"teindre",timerMode:"Minuteur",scheduleMode:"Horaire",timeFormat:"Format horaire",format24h:"24h",formatAM:"AM",formatPM:"PM",days:"Jours",monday:"Lun",tuesday:"Mar",wednesday:"Mer",thursday:"Jeu",friday:"Ven",saturday:"Sam",sunday:"Dim",daily:"Quotidien",weekdays:"Lun-Ven",weekend:"Sam, Dim",noDays:"Aucun",selectDay:"Slectionner",deselectDay:"Dslectionner",repeat:"Rptition",regular:"Rgulier",once:"Une fois",add:"Nouveau",cancel:"Annuler",confirm:"Crer maintenant",save:"Enregistrer",action:"Action",scheduler:"Planificateur",atTime:"",remaining:"Restant",minutes:"min",noTimers:"Aucun minuteur",noSchedules:"Aucun horaire",noEntries:"Aucune entre",timerName:"Minuteur",scheduleName:"Horaire",morningRoutine:"Routine matinale",evening:"Soir"},context:{tabActions:"Actions",tabFavorites:"Favoris",tabEnvironment:"Environnement",loading:"Chargement de l'environnement...",noFavorites:"Aucun favori marqu",noEnvironment:"Aucun appareil associ trouv",noActions:"Aucune action trouve"}},states:{on:"Allum",off:"teint",home:"Maison",not_home:"Absent",heat:"Chauffage",cool:"Refroidissement",unknown:"Inconnu",unavailable:"Indisponible"},deviceClasses:{motion:{on:"Mouvement dtect",off:"Pas de mouvement"},door:{on:"Ouvert",off:"Ferm"},window:{on:"Ouvert",off:"Ferm"}},domains:{light:"Lumire",switch:"Interrupteur",sensor:"Capteur",climate:"Climat"}},I5={ui:{common:{pleaseSelect:"Por favor seleccione"},controls:{brightness:"Brillo",colorTemperature:"Temperatura de color",color:"Color",effects:"Efectos",hvac:"HVAC",fan:"Ventilador",preset:"Preajuste",swing:"Oscilacin",play:"Reproducir",pause:"Pausar",previous:"Anterior",next:"Siguiente",source:"Fuente",open:"Abrir",stop:"Detener",close:"Cerrar",position:"Posicin",speed:"Velocidad",volume:"Volumen",targetTemperature:"Temperatura objetivo",currentTemperature:"Actual",control:"Control",production:"Produccin",consumption:"Consumo",battery:"Batera",sensor:"Sensor",temperature:"Temperatura",humidity:"Humedad",power:"Potencia",energy:"Energa",co2:"CO",movement:"Movimiento",door:"Puerta",window:"Ventana",presence:"Presencia",solar:"Solar",info:"Informacin",settings:"Configuracin",systemSettings:"Configuracin del sistema",appearance:"Apariencia",language:"Idioma",notifications:"Notificaciones",privacy:"Privacidad",about:"Acerca de",theme:"Tema",darkMode:"Modo oscuro",lightMode:"Modo claro",autoMode:"Automtico",security:"Seguridad",lock:"Bloquear",unlock:"Desbloquear",locked:"Bloqueado",unlocked:"Desbloqueado",activate:"Activar",run:"Ejecutar",disable:"Desactivar",enable:"Activar",trigger:"Disparar",scene:"Escena",script:"Script",automation:"Automatizacin",veryWarm:"Muy clido",warm:"Clido",neutral:"Neutro",cold:"Fro",daylight:"Luz del da",on:"Encendido",off:"Apagado",active:"Activo",inactive:"Inactivo",since:"desde",noRoom:"Sin habitacin",unknown:"Desconocido",justNow:"justo ahora",turned_on:"Encendido",turned_off:"Apagado",heating:"Calefaccin",cooling:"Refrigeracin",auto:"Auto",drying:"Deshumidificacin",fanOnly:"Solo ventilador",idle:"En espera",heatingTo:"Calentando a",coolingTo:"Enfriando a",maintaining:"Manteniendo",eco:"Modo eco",comfort:"Confort",boost:"Boost",veryCold:"Muy fro",cold:"Fro",cool:"Fresco",comfortable:"Confortable",warm:"Clido",hot:"Caliente",veryHot:"Muy caliente",veryDry:"Muy seco",dry:"Seco",optimal:"ptimo",humid:"Hmedo",veryHumid:"Muy hmedo",critical:"Crtico",low:"Bajo",medium:"Medio",good:"Bueno",full:"Lleno",minimal:"Mnimo",high:"Alto",veryHigh:"Muy alto",excellent:"Excelente",acceptable:"Aceptable",moderate:"Moderado",poor:"Pobre"},search:{noResults:"Sin resultados para",tryDifferent:"Prueba con otros trminos"},aiMode:{askAnything:"Pregunta lo que sea",subtitle:"Pregntame cualquier cosa sobre tu hogar inteligente",thinking:"La IA est pensando...",wasHelpful:"Te fue til?",yes:"S",no:"No",followUp:"Haz una pregunta de seguimiento...",suggestions:{lightsOff:"Apagar todas las luces",weather:"Cmo est el tiempo hoy?",temperature:"Ajustar temperatura a 22C"},badges:{webSearch:"Bsqueda web",location:"Ubicacin",deviceControl:"Control de dispositivos",assistant:"Asistente"}},subcategories:{all:"Todos",lights:"Iluminacin",switches:"Interruptores",climate:"Clima",covers:"Persianas",media:"Medios",cleaning:"Limpieza",security:"Seguridad",utilities:"Dispositivos",scripts:"Scripts",automations:"Automatizaciones",scenes:"Escenas",temperature:"Temperatura",humidity:"Humedad",motion:"Movimiento",door_window:"Puertas y Ventanas",energy:"Energa",light:"Luz",presence:"Presencia",pressure:"Presin",battery:"Batera",air_quality:"Calidad del aire",other_sensors:"Otros",system:"Sistema",apps:"Aplicaciones"},placeholders:{searchDevices:"Dispositivos",searchSensors:"Sensores",searchActions:"Acciones",searchCustom:"Personalizado",search:"Buscar..."},categories:{devices:"Dispositivos",sensors:"Sensores",actions:"Acciones",custom:"Personalizado"},viewModes:{grid:"Cuadrcula",list:"Lista"},filters:{categories:"Categoras",areas:"Habitaciones",types:"Tipos"},general:{noRoom:"Sin habitacin"},deviceNames:{settings:"Configuracin",marketplace:"Tienda"},settings:{general:"General",appearance:"Apariencia",privacy:"Privacidad",about:"Acerca de",generalSettings:"Configuracin general",aiMode:"Modo IA",aiModeDescription:"Activar asistente de IA para bsqueda y control avanzados",animations:"Animaciones",animationsDescription:"Activar efectos de transicin y animaciones",soundEffects:"Efectos de sonido",soundEffectsDescription:"Retroalimentacin acstica para acciones",languageSettings:"Configuracin de idioma",appLanguage:"Idioma de la aplicacin",appLanguageDescription:"Elige tu idioma preferido",notifications:"Notificaciones",pushNotifications:"Notificaciones push",pushNotificationsDescription:"Recibir notificaciones sobre eventos importantes",design:"Diseo",backgroundMode:"Modo de fondo",backgroundModeDescription:"Ajustar superposicin para mejor enfoque",automatic:"Automtico",light:"Claro",dark:"Oscuro",background:"Fondo",privacySecurity:"Privacidad y seguridad",clearCache:"Limpiar cach",resetData:"Restablecer datos",aboutCard:"Acerca de Fast Search Card",version:"Versin",build:"Build",developer:"Desarrollador",license:"Licencia"},schedule:{all:"Todos",timer:"Temporizador",schedules:"Horarios",turnOn:"Encender",turnOff:"Apagar",timerMode:"Temporizador",scheduleMode:"Horario",timeFormat:"Formato de hora",format24h:"24h",formatAM:"AM",formatPM:"PM",days:"Das",monday:"Lun",tuesday:"Mar",wednesday:"Mi",thursday:"Jue",friday:"Vie",saturday:"Sb",sunday:"Dom",daily:"Diario",weekdays:"Lun-Vie",weekend:"Sb, Dom",noDays:"Ninguno",selectDay:"Seleccionar",deselectDay:"Deseleccionar",repeat:"Repeticin",regular:"Regular",once:"Una vez",add:"Nuevo",cancel:"Cancelar",confirm:"Crear ahora",save:"Guardar",action:"Accin",scheduler:"Programador",atTime:"A las",remaining:"Restante",minutes:"min",noTimers:"Sin temporizadores",noSchedules:"Sin horarios",noEntries:"Sin entradas",timerName:"Temporizador",scheduleName:"Horario",morningRoutine:"Rutina matutina",evening:"Noche"},context:{tabActions:"Acciones",tabFavorites:"Favoritos",tabEnvironment:"Entorno",loading:"Cargando entorno...",noFavorites:"No hay favoritos marcados",noEnvironment:"No se encontraron dispositivos relacionados",noActions:"No se encontraron acciones"}},states:{on:"Encendido",off:"Apagado",home:"En casa",not_home:"Ausente",heat:"Calefaccin",cool:"Refrigeracin",unknown:"Desconocido",unavailable:"No disponible"}},R5={ui:{common:{pleaseSelect:"Seleziona"},controls:{brightness:"Luminosit",colorTemperature:"Temperatura colore",color:"Colore",temperature:"Temperatura",humidity:"Umidit",settings:"Impostazioni",security:"Sicurezza",on:"Acceso",off:"Spento",open:"Apri",close:"Chiudi",locked:"Bloccato",unlocked:"Sbloccato",active:"Attivo",inactive:"Inattivo",since:"da",noRoom:"Nessuna stanza",unknown:"Sconosciuto",justNow:"proprio ora",turned_on:"Acceso",turned_off:"Spento"},search:{noResults:"Nessun risultato per",tryDifferent:"Prova con altri termini"},aiMode:{askAnything:"Chiedi qualsiasi cosa",subtitle:"Chiedimi tutto sulla tua casa intelligente",thinking:"L'IA sta pensando...",wasHelpful:" stato utile?",yes:"S",no:"No",followUp:"Fai una domanda di follow-up...",suggestions:{lightsOff:"Spegni tutte le luci",weather:"Com' il tempo oggi?",temperature:"Imposta la temperatura a 22C"},badges:{webSearch:"Ricerca Web",location:"Posizione",deviceControl:"Controllo dispositivi",assistant:"Assistente"}},subcategories:{all:"Tutti",lights:"Illuminazione",switches:"Interruttori",climate:"Clima",covers:"Tapparelle",media:"Media",cleaning:"Pulizia",security:"Sicurezza",utilities:"Dispositivi",scripts:"Script",automations:"Automazioni",scenes:"Scene",temperature:"Temperatura",humidity:"Umidit",motion:"Movimento",door_window:"Porte e Finestre",energy:"Energia",light:"Luce",presence:"Presenza",pressure:"Pressione",battery:"Batteria",air_quality:"Qualit dell'aria",other_sensors:"Altri",system:"Sistema",apps:"Applicazioni"},placeholders:{searchDevices:"Dispositivi",searchSensors:"Sensori",searchActions:"Azioni",searchCustom:"Personalizzato",search:"Cerca..."},categories:{devices:"Dispositivi",sensors:"Sensori",actions:"Azioni",custom:"Personalizzato"},viewModes:{grid:"Griglia",list:"Lista"},filters:{categories:"Categorie",areas:"Stanze",types:"Tipi"},general:{noRoom:"Nessuna stanza"},deviceNames:{settings:"Impostazioni",marketplace:"Negozio"},settings:{general:"Generale",appearance:"Aspetto",privacy:"Privacy",about:"Informazioni",generalSettings:"Impostazioni generali",aiMode:"Modalit IA",aiModeDescription:"Abilita assistente IA per ricerca e controllo avanzati",animations:"Animazioni",animationsDescription:"Abilita effetti di transizione e animazioni",soundEffects:"Effetti sonori",soundEffectsDescription:"Feedback acustico per le azioni",languageSettings:"Impostazioni lingua",appLanguage:"Lingua dell'app",appLanguageDescription:"Scegli la tua lingua preferita",notifications:"Notifiche",pushNotifications:"Notifiche push",pushNotificationsDescription:"Ricevi notifiche su eventi importanti",design:"Design",backgroundMode:"Modalit sfondo",backgroundModeDescription:"Regola sovrapposizione per migliore focus",automatic:"Automatico",light:"Chiaro",dark:"Scuro",background:"Sfondo",privacySecurity:"Privacy e sicurezza",clearCache:"Svuota cache",resetData:"Ripristina dati",aboutCard:"Info su Fast Search Card",version:"Versione",build:"Build",developer:"Sviluppatore",license:"Licenza"},schedule:{all:"Tutti",timer:"Timer",schedules:"Programmi",turnOn:"Accendi",turnOff:"Spegni",timerMode:"Timer",scheduleMode:"Programma",timeFormat:"Formato ora",format24h:"24h",formatAM:"AM",formatPM:"PM",days:"Giorni",monday:"Lun",tuesday:"Mar",wednesday:"Mer",thursday:"Gio",friday:"Ven",saturday:"Sab",sunday:"Dom",daily:"Giornaliero",weekdays:"Lun-Ven",weekend:"Sab, Dom",noDays:"Nessuno",selectDay:"Seleziona",deselectDay:"Deseleziona",repeat:"Ripeti",regular:"Regolare",once:"Una volta",add:"Nuovo",cancel:"Annulla",confirm:"Crea ora",save:"Salva",action:"Azione",scheduler:"Programmatore",atTime:"Alle",remaining:"Rimanente",minutes:"min",noTimers:"Nessun timer",noSchedules:"Nessun programma",noEntries:"Nessun elemento",timerName:"Timer",scheduleName:"Programma",morningRoutine:"Routine mattutina",evening:"Sera"},context:{tabActions:"Azioni",tabFavorites:"Preferiti",tabEnvironment:"Ambiente",loading:"Caricamento ambiente...",noFavorites:"Nessun preferito contrassegnato",noEnvironment:"Nessun dispositivo correlato trovato",noActions:"Nessuna azione trovata"}},states:{on:"Acceso",off:"Spento",home:"Casa",not_home:"Assente"}},B5={ui:{common:{pleaseSelect:"Selecteer alstublieft"},controls:{brightness:"Helderheid",colorTemperature:"Kleurtemperatuur",color:"Kleur",temperature:"Temperatuur",humidity:"Vochtigheid",settings:"Instellingen",security:"Beveiliging",on:"Aan",off:"Uit",open:"Open",close:"Sluiten",locked:"Vergrendeld",unlocked:"Ontgrendeld"},search:{noResults:"Geen resultaten voor",tryDifferent:"Probeer andere zoektermen"},aiMode:{askAnything:"Vraag het maar",subtitle:"Vraag me alles over je slimme woning",thinking:"AI is aan het denken...",wasHelpful:"Was dit nuttig?",yes:"Ja",no:"Nee",followUp:"Stel een vervolgvraag...",suggestions:{lightsOff:"Schakel alle lichten uit",weather:"Hoe is het weer vandaag?",temperature:"Stel temperatuur in op 22C"},badges:{webSearch:"Web zoeken",location:"Locatie",deviceControl:"Apparaatbediening",assistant:"Assistent"}},subcategories:{all:"Alle",lights:"Verlichting",switches:"Schakelaars",climate:"Klimaat",covers:"Rolgordijnen",media:"Media",cleaning:"Reiniging",security:"Beveiliging",utilities:"Apparaten",scripts:"Scripts",automations:"Automatiseringen",scenes:"Scnes",temperature:"Temperatuur",humidity:"Vochtigheid",motion:"Beweging",door_window:"Deuren en Ramen",energy:"Energie",light:"Licht",presence:"Aanwezigheid",pressure:"Druk",battery:"Batterij",air_quality:"Luchtkwaliteit",other_sensors:"Overige",system:"Systeem",apps:"Apps"},placeholders:{searchDevices:"Apparaten",searchSensors:"Sensoren",searchActions:"Acties",searchCustom:"Aangepast",search:"Zoeken..."},categories:{devices:"Apparaten",sensors:"Sensoren",actions:"Acties",custom:"Aangepast"},viewModes:{grid:"Raster",list:"Lijst"},filters:{categories:"Categorien",areas:"Kamers",types:"Types"},general:{noRoom:"Geen kamer"},deviceNames:{settings:"Instellingen",marketplace:"Winkel"},settings:{general:"Algemeen",appearance:"Uiterlijk",privacy:"Privacy",about:"Over",generalSettings:"Algemene instellingen",aiMode:"AI-modus",aiModeDescription:"AI-assistent inschakelen voor geavanceerd zoeken en beheer",animations:"Animaties",animationsDescription:"Overgangseffecten en animaties inschakelen",soundEffects:"Geluidseffecten",soundEffectsDescription:"Akoestische feedback bij acties",languageSettings:"Taalinstellingen",appLanguage:"App-taal",appLanguageDescription:"Kies je voorkeurstaal",notifications:"Meldingen",pushNotifications:"Push-meldingen",pushNotificationsDescription:"Ontvang meldingen over belangrijke gebeurtenissen",design:"Ontwerp",backgroundMode:"Achtergrondmodus",backgroundModeDescription:"Overlay aanpassen voor betere focus",automatic:"Automatisch",light:"Licht",dark:"Donker",background:"Achtergrond",privacySecurity:"Privacy & Beveiliging",clearCache:"Cache wissen",resetData:"Gegevens resetten",aboutCard:"Over Fast Search Card",version:"Versie",build:"Build",developer:"Ontwikkelaar",license:"Licentie"},schedule:{all:"Alle",timer:"Timer",schedules:"Schema's",turnOn:"Inschakelen",turnOff:"Uitschakelen",timerMode:"Timer",scheduleMode:"Schema",timeFormat:"Tijdweergave",format24h:"24u",formatAM:"AM",formatPM:"PM",days:"Dagen",monday:"Ma",tuesday:"Di",wednesday:"Wo",thursday:"Do",friday:"Vr",saturday:"Za",sunday:"Zo",daily:"Dagelijks",weekdays:"Ma-Vr",weekend:"Za, Zo",noDays:"Geen",selectDay:"Selecteren",deselectDay:"Deselecteren",repeat:"Herhaling",regular:"Regelmatig",once:"Eenmalig",add:"Nieuw",cancel:"Annuleren",confirm:"Nu maken",save:"Opslaan",action:"Actie",scheduler:"Planner",atTime:"Om",remaining:"Resterend",minutes:"min",noTimers:"Geen timers",noSchedules:"Geen schema's",noEntries:"Geen items",timerName:"Timer",scheduleName:"Schema",morningRoutine:"Ochtendroutine",evening:"Avond"},context:{tabActions:"Acties",tabFavorites:"Favorieten",tabEnvironment:"Omgeving",loading:"Omgeving laden...",noFavorites:"Geen favorieten gemarkeerd",noEnvironment:"Geen gerelateerde apparaten gevonden",noActions:"Geen acties gevonden"}},states:{on:"Aan",off:"Uit",home:"Thuis",not_home:"Afwezig"}},z5={ui:{common:{pleaseSelect:"Por favor selecione"},controls:{brightness:"Brilho",colorTemperature:"Temperatura de cor",color:"Cor",temperature:"Temperatura",humidity:"Umidade",settings:"Configuraes",security:"Segurana",on:"Ligado",off:"Desligado",open:"Abrir",close:"Fechar",locked:"Bloqueado",unlocked:"Desbloqueado"},search:{noResults:"Sem resultados para",tryDifferent:"Tente termos diferentes"},aiMode:{askAnything:"Pergunte qualquer coisa",subtitle:"Me pergunte tudo sobre sua casa inteligente",thinking:"IA est pensando...",wasHelpful:"Isso foi til?",yes:"Sim",no:"No",followUp:"Faa uma pergunta de acompanhamento...",suggestions:{lightsOff:"Apagar todas as luzes",weather:"Como est o tempo hoje?",temperature:"Definir temperatura para 22C"},badges:{webSearch:"Pesquisa na Web",location:"Localizao",deviceControl:"Controle de dispositivos",assistant:"Assistente"}},subcategories:{all:"Todos",lights:"Iluminao",switches:"Interruptores",climate:"Clima",covers:"Persianas",media:"Mdia",cleaning:"Limpeza",security:"Segurana",utilities:"Dispositivos",scripts:"Scripts",automations:"Automaes",scenes:"Cenas",temperature:"Temperatura",humidity:"Umidade",motion:"Movimento",door_window:"Portas e Janelas",energy:"Energia",light:"Luz",presence:"Presena",pressure:"Presso",battery:"Bateria",air_quality:"Qualidade do ar",other_sensors:"Outros",system:"Sistema",apps:"Aplicaes"},placeholders:{searchDevices:"Dispositivos",searchSensors:"Sensores",searchActions:"Aes",searchCustom:"Personalizado",search:"Buscar..."},categories:{devices:"Dispositivos",sensors:"Sensores",actions:"Aes",custom:"Personalizado"},viewModes:{grid:"Grade",list:"Lista"},filters:{categories:"Categorias",areas:"Cmodos",types:"Tipos"},general:{noRoom:"Sem cmodo"},deviceNames:{settings:"Configuraes",marketplace:"Loja"},settings:{general:"Geral",appearance:"Aparncia",privacy:"Privacidade",about:"Sobre",generalSettings:"Configuraes gerais",aiMode:"Modo IA",aiModeDescription:"Ativar assistente de IA para busca e controle avanados",animations:"Animaes",animationsDescription:"Ativar efeitos de transio e animaes",soundEffects:"Efeitos sonoros",soundEffectsDescription:"Feedback acstico para aes",languageSettings:"Configuraes de idioma",appLanguage:"Idioma do app",appLanguageDescription:"Escolha seu idioma preferido",notifications:"Notificaes",pushNotifications:"Notificaes push",pushNotificationsDescription:"Receber notificaes sobre eventos importantes",design:"Design",backgroundMode:"Modo de fundo",backgroundModeDescription:"Ajustar sobreposio para melhor foco",automatic:"Automtico",light:"Claro",dark:"Escuro",background:"Fundo",privacySecurity:"Privacidade e Segurana",clearCache:"Limpar cache",resetData:"Redefinir dados",aboutCard:"Sobre Fast Search Card",version:"Verso",build:"Build",developer:"Desenvolvedor",license:"Licena"},schedule:{all:"Todos",timer:"Timer",schedules:"Agendamentos",turnOn:"Ligar",turnOff:"Desligar",timerMode:"Timer",scheduleMode:"Agendamento",timeFormat:"Formato de hora",format24h:"24h",formatAM:"AM",formatPM:"PM",days:"Dias",monday:"Seg",tuesday:"Ter",wednesday:"Qua",thursday:"Qui",friday:"Sex",saturday:"Sb",sunday:"Dom",daily:"Dirio",weekdays:"Seg-Sex",weekend:"Sb, Dom",noDays:"Nenhum",selectDay:"Selecionar",deselectDay:"Desselecionar",repeat:"Repetir",regular:"Regular",once:"Uma vez",add:"Novo",cancel:"Cancelar",confirm:"Criar agora",save:"Salvar",action:"Ao",scheduler:"Agendador",atTime:"s",remaining:"Restante",minutes:"min",noTimers:"Sem timers",noSchedules:"Sem agendamentos",noEntries:"Sem itens",timerName:"Timer",scheduleName:"Agendamento",morningRoutine:"Rotina matinal",evening:"Noite"},context:{tabActions:"Aes",tabFavorites:"Favoritos",tabEnvironment:"Ambiente",loading:"Carregando ambiente...",noFavorites:"Nenhum favorito marcado",noEnvironment:"Nenhum dispositivo relacionado encontrado",noActions:"Nenhuma ao encontrada"}},states:{on:"Ligado",off:"Desligado",home:"Em casa",not_home:"Ausente"}},V5={ui:{common:{pleaseSelect:", "},controls:{brightness:"",colorTemperature:" ",color:"",temperature:"",humidity:"",settings:"",security:"",on:"",off:"",open:"",close:"",locked:"",unlocked:""},search:{noResults:"  ",tryDifferent:"   "},aiMode:{askAnything:"  ",subtitle:"     ",thinking:" ...",wasHelpful:"  ?",yes:"",no:"",followUp:"  ...",suggestions:{lightsOff:"  ",weather:"  ?",temperature:"  22C"},badges:{webSearch:"  ",location:"",deviceControl:" ",assistant:""}},subcategories:{all:"",lights:"",switches:"",climate:"",covers:"",media:"",cleaning:"",security:"",utilities:"",scripts:"",automations:"",scenes:"",temperature:"",humidity:"",motion:"",door_window:"  ",energy:"",light:"",presence:"",pressure:"",battery:"",air_quality:" ",other_sensors:"",system:"",apps:""},placeholders:{searchDevices:"",searchSensors:"",searchActions:"",searchCustom:"",search:"..."},categories:{devices:"",sensors:"",actions:"",custom:""},viewModes:{grid:"",list:""},filters:{categories:"",areas:"",types:""},general:{noRoom:" "},deviceNames:{settings:"",marketplace:""},settings:{general:"",appearance:" ",privacy:"",about:" ",generalSettings:" ",aiMode:" ",aiModeDescription:" -     ",animations:"",animationsDescription:"    ",soundEffects:" ",soundEffectsDescription:"    ",languageSettings:" ",appLanguage:" ",appLanguageDescription:"  ",notifications:"",pushNotifications:"Push-",pushNotificationsDescription:"    ",design:"",backgroundMode:" ",backgroundModeDescription:"    ",automatic:"",light:"",dark:"",background:"",privacySecurity:"  ",clearCache:" ",resetData:" ",aboutCard:" Fast Search Card",version:"",build:"",developer:"",license:""},schedule:{all:"",timer:"",schedules:"",turnOn:"",turnOff:"",timerMode:"",scheduleMode:"",timeFormat:" ",format24h:"24",formatAM:"AM",formatPM:"PM",days:"",monday:"",tuesday:"",wednesday:"",thursday:"",friday:"",saturday:"",sunday:"",daily:"",weekdays:"-",weekend:", ",noDays:"",selectDay:"",deselectDay:" ",repeat:"",regular:"",once:" ",add:"",cancel:"",confirm:" ",save:"",action:"",scheduler:"",atTime:"",remaining:"",minutes:"",noTimers:" ",noSchedules:" ",noEntries:" ",timerName:"",scheduleName:"",morningRoutine:" ",evening:""},context:{tabActions:"",tabFavorites:"",tabEnvironment:"",loading:" ...",noFavorites:" ",noEnvironment:"   ",noActions:"  "}},states:{on:"",off:"",home:"",not_home:""}},W5={ui:{common:{pleaseSelect:""},controls:{brightness:"",colorTemperature:"",color:"",temperature:"",humidity:"",settings:"",security:"",on:"",off:"",open:"",close:"",locked:"",unlocked:""},search:{noResults:"",tryDifferent:""},aiMode:{askAnything:"",subtitle:"",thinking:"AI ...",wasHelpful:"",yes:"",no:"",followUp:"...",suggestions:{lightsOff:"",weather:"",temperature:"22C"},badges:{webSearch:"",location:"",deviceControl:"",assistant:""}},subcategories:{all:"",lights:"",switches:"",climate:"",covers:"",media:"",cleaning:"",security:"",utilities:"",scripts:"",automations:"",scenes:"",temperature:"",humidity:"",motion:"",door_window:"",energy:"",light:"",presence:"",pressure:"",battery:"",air_quality:"",other_sensors:"",system:"",apps:""},placeholders:{searchDevices:"",searchSensors:"",searchActions:"",searchCustom:"",search:"..."},categories:{devices:"",sensors:"",actions:"",custom:""},viewModes:{grid:"",list:""},filters:{categories:"",areas:"",types:""},general:{noRoom:""},deviceNames:{settings:"",marketplace:""},settings:{general:"",appearance:"",privacy:"",about:"",generalSettings:"",aiMode:"AI ",aiModeDescription:"AI",animations:"",animationsDescription:"",soundEffects:"",soundEffectsDescription:"",languageSettings:"",appLanguage:"",appLanguageDescription:"",notifications:"",pushNotifications:"",pushNotificationsDescription:"",design:"",backgroundMode:"",backgroundModeDescription:"",automatic:"",light:"",dark:"",background:"",privacySecurity:"",clearCache:"",resetData:"",aboutCard:" Fast Search Card",version:"",build:"",developer:"",license:""},schedule:{all:"",timer:"",schedules:"",turnOn:"",turnOff:"",timerMode:"",scheduleMode:"",timeFormat:"",format24h:"24",formatAM:"",formatPM:"",days:"",monday:"",tuesday:"",wednesday:"",thursday:"",friday:"",saturday:"",sunday:"",daily:"",weekdays:"",weekend:"",noDays:"",selectDay:"",deselectDay:"",repeat:"",regular:"",once:"",add:"",cancel:"",confirm:"",save:"",action:"",scheduler:"",atTime:"",remaining:"",minutes:"",noTimers:"",noSchedules:"",noEntries:"",timerName:"",scheduleName:"",morningRoutine:"",evening:""},context:{tabActions:"",tabFavorites:"",tabEnvironment:"",loading:"...",noFavorites:"",noEnvironment:"",noActions:""}},states:{on:"",off:"",home:"",not_home:""}},O5={ui:{common:{pleaseSelect:"Ltfen sein"},controls:{brightness:"Parlaklk",colorTemperature:"Renk scakl",color:"Renk",temperature:"Scaklk",humidity:"Nem",settings:"Ayarlar",security:"Gvenlik",on:"Ak",off:"Kapal",open:"A",close:"Kapat",locked:"Kilitli",unlocked:"Kilit ak"},search:{noResults:"unun iin sonu yok",tryDifferent:"Farkl arama terimleri deneyin"},aiMode:{askAnything:"Ne istersen sor",subtitle:"Akll eviniz hakknda bana her eyi sorun",thinking:"AI dnyor...",wasHelpful:"Bu yardmc oldu mu?",yes:"Evet",no:"Hayr",followUp:"Bir takip sorusu sorun...",suggestions:{lightsOff:"Tm klar kapat",weather:"Bugn hava nasl?",temperature:"Scakl 22C'ye ayarla"},badges:{webSearch:"Web Aramas",location:"Konum",deviceControl:"Cihaz Kontrol",assistant:"Asistan"}},subcategories:{all:"Tm",lights:"Aydnlatma",switches:"Anahtarlar",climate:"klim",covers:"Perdeler",media:"Medya",cleaning:"Temizlik",security:"Gvenlik",utilities:"Cihazlar",scripts:"Betikler",automations:"Otomasyonlar",scenes:"Sahneler",temperature:"Scaklk",humidity:"Nem",motion:"Hareket",door_window:"Kaplar ve Pencereler",energy:"Enerji",light:"Ik",presence:"Varlk",pressure:"Basn",battery:"Pil",air_quality:"Hava kalitesi",other_sensors:"Dier",system:"Sistem",apps:"Uygulamalar"},placeholders:{searchDevices:"Cihazlar",searchSensors:"Sensrler",searchActions:"Eylemler",searchCustom:"zel",search:"Ara..."},categories:{devices:"Cihazlar",sensors:"Sensrler",actions:"Eylemler",custom:"zel"},viewModes:{grid:"Izgara",list:"Liste"},filters:{categories:"Kategoriler",areas:"Odalar",types:"Trler"},general:{noRoom:"Oda yok"},deviceNames:{settings:"Ayarlar",marketplace:"Maaza"},settings:{general:"Genel",appearance:"Grnm",privacy:"Gizlilik",about:"Hakknda",generalSettings:"Genel Ayarlar",aiMode:"AI Modu",aiModeDescription:"Gelimi arama ve kontrol iin AI asistann etkinletir",animations:"Animasyonlar",animationsDescription:"Gei efektlerini ve animasyonlar etkinletir",soundEffects:"Ses Efektleri",soundEffectsDescription:"Eylemler iin sesli geri bildirim",languageSettings:"Dil Ayarlar",appLanguage:"Uygulama Dili",appLanguageDescription:"Tercih ettiiniz dili sein",notifications:"Bildirimler",pushNotifications:"Anlk Bildirimler",pushNotificationsDescription:"nemli olaylar hakknda bildirimler aln",design:"Tasarm",backgroundMode:"Arka Plan Modu",backgroundModeDescription:"Daha iyi odaklanma iin kaplamay ayarlayn",automatic:"Otomatik",light:"Ak",dark:"Koyu",background:"Arka Plan",privacySecurity:"Gizlilik ve Gvenlik",clearCache:"nbellei Temizle",resetData:"Verileri Sfrla",aboutCard:"Fast Search Card Hakknda",version:"Srm",build:"Yap",developer:"Gelitirici",license:"Lisans"},schedule:{all:"Tm",timer:"Zamanlayc",schedules:"Programlar",turnOn:"A",turnOff:"Kapat",timerMode:"Zamanlayc",scheduleMode:"Program",timeFormat:"Saat Gsterimi",format24h:"24 saat",formatAM:"",formatPM:"S",days:"Gnler",monday:"Pzt",tuesday:"Sal",wednesday:"ar",thursday:"Per",friday:"Cum",saturday:"Cmt",sunday:"Paz",daily:"Her gn",weekdays:"Hafta ii",weekend:"Hafta sonu",noDays:"Yok",selectDay:"Se",deselectDay:"Seimi kaldr",repeat:"Tekrar",regular:"Dzenli",once:"Bir kere",add:"Yeni",cancel:"ptal",confirm:"imdi olutur",save:"Kaydet",action:"Eylem",scheduler:"Programlayc",atTime:"Saat",remaining:"Kalan",minutes:"dk",noTimers:"Zamanlayc yok",noSchedules:"Program yok",noEntries:"Giri yok",timerName:"Zamanlayc",scheduleName:"Program",morningRoutine:"Sabah rutini",evening:"Akam"},context:{tabActions:"Eylemler",tabFavorites:"Favoriler",tabEnvironment:"evre",loading:"evre yklenyor...",noFavorites:"aretlenmi favori yok",noEnvironment:"lgili cihaz bulunamad",noActions:"Eylem bulunamad"}},states:{on:"Ak",off:"Kapal",home:"Evde",not_home:"Darda"}};function $5(t,e,i,n="de",r={}){const o=r[n]||r.de;return e==="binary_sensor"&&i&&o.deviceClasses?.[i]?o.deviceClasses[i][t]||o.states?.[t]||t:o.states?.[t]||t}function $a(t){if(!t)return null;const e=t.domain,i=t.attributes?.device_class,n=t.entity_id;return e==="binary_sensor"?["door","window","garage_door","opening"].includes(i)?"door_window":["motion","moving","occupancy"].includes(i)?"motion":["presence","home"].includes(i)?"presence":["smoke","gas","carbon_monoxide","safety","sound","vibration","problem"].includes(i)?"security":["moisture","water"].includes(i)?"water":i==="light"?"light":i==="battery"||i==="battery_charging"?"battery":"other_sensors":e==="sensor"?i==="temperature"||n?.includes("temperature")?"temperature":i==="humidity"||n?.includes("humidity")?"humidity":["power","energy","current","voltage","apparent_power","reactive_power"].includes(i)?"energy":i==="battery"||n?.includes("battery")?"battery":i==="illuminance"||n?.includes("illuminance")||n?.includes("lux")?"light":i==="pressure"||n?.includes("pressure")?"pressure":["pm25","pm10","co2","co","aqi","voc","nox"].includes(i)||n?.includes("air_quality")||n?.includes("pm25")?"air_quality":"other_sensors":null}function H5(t,e,i,n="de"){const r={de:{temperature:{cold:"Khl - Heizung erwgen",optimal:"Optimale Temperatur",warm:"Warm - Lften empfohlen",hot:"Sehr warm - Khlung empfohlen"},humidity:{low:"Zu trocken - Befeuchter empfohlen",optimal:"Optimale Luftfeuchtigkeit",high:"Zu feucht - Lften empfohlen"},co2:{good:"Gute Luftqualitt",moderate:"Mige Luftqualitt",poor:"Schlechte Luft - Lften!"},battery:{critical:"Batterie fast leer!",low:"Batterie schwach",good:"Batterie OK",full:"Batterie voll"}},en:{temperature:{cold:"Cool - Consider heating",optimal:"Optimal temperature",warm:"Warm - Ventilation recommended",hot:"Very warm - Cooling recommended"},humidity:{low:"Too dry - Humidifier recommended",optimal:"Optimal humidity",high:"Too humid - Ventilation recommended"},co2:{good:"Good air quality",moderate:"Moderate air quality",poor:"Poor air - Ventilate!"},battery:{critical:"Battery almost empty!",low:"Battery low",good:"Battery OK",full:"Battery full"}}},o=r[n]||r.en;if(!t||!e||!o[e])return null;const a=parseFloat(t);if(isNaN(a))return null;if(e==="temperature"){if(a<18)return o.temperature.cold;if(a>=18&&a<=24)return o.temperature.optimal;if(a>24&&a<=27)return o.temperature.warm;if(a>27)return o.temperature.hot}if(e==="humidity"){if(a<30)return o.humidity.low;if(a>=30&&a<=60)return o.humidity.optimal;if(a>60)return o.humidity.high}if(e==="co2"||i==="ppm"){if(a<800)return o.co2.good;if(a>=800&&a<=1200)return o.co2.moderate;if(a>1200)return o.co2.poor}if(e==="battery"||i==="%"){if(a<=10)return o.battery.critical;if(a>10&&a<=30)return o.battery.low;if(a>30&&a<90)return o.battery.good;if(a>=90)return o.battery.full}return null}function j5(t,e,i={}){if(!t)return!1;const n=t.toString().toLowerCase();if(["on","ein","an","open","offen","home","zuhause","playing","active","aktiv"].includes(n))return!0;switch(e){case"light":case"switch":case"input_boolean":case"fan":return n==="on"||n==="ein";case"cover":return n==="open"||n==="offen";case"lock":return n==="unlocked"||n==="entriegelt";case"binary_sensor":return n==="on"||n==="true";case"media_player":return["playing","paused","on"].includes(n);case"climate":return n!=="off"&&n!=="aus";case"vacuum":return["cleaning","returning","docked"].includes(n);case"person":case"device_tracker":return n==="home"||n==="zuhause";case"alarm_control_panel":return["armed_home","armed_away","armed_night","triggered"].includes(n);case"timer":return n==="active"||n==="paused";case"automation":case"script":case"scene":if(i.last_triggered){const o=new Date(i.last_triggered);return(new Date-o)/1e3/60<5}return!1;case"sensor":return!1;default:return n==="on"||n==="ein"}}function Ha(t,e,i="de"){const n=e?.unit_of_measurement||"",r=e?.device_class;if(!isNaN(parseFloat(t))){const o=parseFloat(t);let a,l=n;switch(r){case"temperature":a=o.toFixed(1);break;case"humidity":case"battery":a=Math.round(o).toString();break;case"power":o>=1e3?(a=(o/1e3).toFixed(1),l="kW"):a=Math.round(o).toString();break;case"energy":a=o.toFixed(1);break;default:n&&(n.includes("")||n==="K")?a=o.toFixed(1):o%1===0?a=o.toString():a=o.toFixed(1)}return{value:a,unit:l,combined:`${a}${l?" "+l:""}`}}return{value:t,unit:"",combined:t}}function U5(t,e,i="de"){const n=t[i]||t.de;if(!n)return console.error("getTranslation: No language data found!"),e;const r=e.split(".");let o=n;for(let a=0;a<r.length;a++){const l=r[a];if(o&&typeof o=="object"&&l in o)o=o[l];else{o=t.de;for(const c of r)if(o&&typeof o=="object"&&c in o)o=o[c];else return e;break}}return o||e}function G5(t,e){return t.replace(/\{(\w+)\}/g,(i,n)=>e.hasOwnProperty(n)?e[n]:i)}const ja={de:A5,en:F5,fr:P5,es:I5,it:R5,nl:B5,pt:z5,ru:V5,zh:W5,tr:O5};function K5(t,e="de",i={}){const n=U5(ja,t,e);return i&&Object.keys(i).length>0?G5(n,i):n}function fu(t,e,i,n="de"){return ja[n]||(console.warn(`Language '${n}' not found, falling back to 'de'`),n="de"),$5(t,e,i,n,ja)}function ee(t,e="de",i={}){const n=`ui.${t}`;return K5(n,e,i)}const fe={smooth:[.16,1,.3,1],spring:[.25,.46,.45,.94],elastic:[.68,-.55,.265,1.55],easeOut:[0,0,.2,1],easeIn:[.4,0,1,1],easeInOut:[.4,0,.2,1]},Ne={instant:.1,fast:.2,normal:.3,medium:.4},pu={collapsed:{height:60,opacity:.95,scale:.98,transition:{duration:Ne.medium,ease:fe.smooth}},expanded:{height:"auto",opacity:1,scale:1,transition:{duration:Ne.medium,ease:fe.smooth}}},$s={initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1,transition:{duration:Ne.normal,ease:fe.easeInOut}},exit:{scale:.8,opacity:0,transition:{duration:Ne.normal,ease:fe.easeInOut}}},gu={hover:{scale:1.05,backgroundColor:"rgba(255, 255, 255, 0.25)",transition:{duration:Ne.fast,ease:fe.spring}},tap:{scale:.95,transition:{duration:Ne.instant,ease:fe.easeOut}}},Cn={active:{backgroundColor:"rgba(255, 255, 255, 0.25)",transition:{duration:Ne.normal,ease:fe.smooth}},inactive:{backgroundColor:"transparent",transition:{duration:Ne.normal,ease:fe.smooth}}},Pt={hover:{scale:1.05,backgroundColor:"rgba(255, 255, 255, 0.15)",transition:{duration:Ne.fast,ease:fe.spring}},tap:{scale:.95,transition:{duration:Ne.instant,ease:fe.easeOut}}},Y5={inactive:{backgroundColor:"rgba(255, 255, 255, 0.08)",transition:{duration:Ne.normal,ease:fe.smooth}},active:{backgroundColor:"rgb(0, 145, 255)",transition:{duration:Ne.normal,ease:fe.smooth}},hover:{scale:1.08,transition:{duration:Ne.fast,ease:fe.spring}},tap:{scale:.92,transition:{duration:Ne.fast,ease:fe.easeOut}}},Z5={hidden:{opacity:0,scale:.8,y:10},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:300,damping:24}}},vu={hover:{scale:1.05,transition:{duration:Ne.fast,ease:fe.spring}},tap:{scale:.95,transition:{duration:Ne.instant,ease:fe.easeOut}}},q5=t=>({scale:1,backgroundColor:t?"rgba(255, 255, 255, 0.95)":"rgba(255, 255, 255, 0.08)",borderColor:t?"rgba(255, 255, 255, 0.3)":"rgba(255, 255, 255, 0.1)",transition:{duration:Ne.normal,ease:fe.easeInOut}}),yu={hover:{scale:1.1,backgroundColor:"rgba(0, 0, 0, 0.25)",transition:{duration:Ne.fast,ease:fe.spring}},tap:{scale:.95,transition:{duration:Ne.instant,ease:fe.easeOut}}},X5={inactive:{scale:1,backgroundColor:"rgba(255, 255, 255, 0.08)",borderColor:"rgba(255, 255, 255, 0.15)"},active:{scale:1,backgroundColor:"rgba(255, 255, 255, 0.25)",borderColor:"rgba(255, 255, 255, 0.35)",transition:{duration:Ne.normal,ease:fe.smooth}},hover:{scale:1.04,backgroundColor:"rgba(255, 255, 255, 0.15)",transition:{duration:Ne.fast,ease:fe.easeOut}},tap:{scale:.96,transition:{duration:Ne.instant,ease:fe.easeOut}}},J5={hidden:{opacity:0,scale:.85,y:10},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:300,damping:24}},idle:{scale:1,backgroundColor:"rgba(255, 255, 255, 0.1)",transition:{duration:Ne.normal,ease:fe.smooth}},hover:{scale:1.05,backgroundColor:"rgba(255, 255, 255, 0.15)",boxShadow:"0 8px 24px rgba(0, 145, 255, 0.2)",transition:{duration:Ne.fast,ease:fe.spring}},tap:{scale:.95,transition:{duration:Ne.instant,ease:fe.easeOut}}},bu={hidden:{opacity:0,scale:.8,y:10},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",stiffness:300,damping:24}},idle:{scale:1,backgroundColor:"rgba(255, 255, 255, 0.1)",borderColor:"rgba(255, 255, 255, 0.2)"},hover:{scale:1.05,backgroundColor:"rgba(255, 255, 255, 0.15)",borderColor:"rgba(255, 255, 255, 0.3)",transition:{duration:Ne.fast,ease:fe.spring}},tap:{scale:.95,transition:{duration:Ne.instant,ease:fe.easeOut}}},Q5={initial:{opacity:0},animate:{opacity:1,transition:{duration:Ne.fast}},exit:{opacity:0,transition:{duration:Ne.fast}}},Hs={initial:{x:20,scale:.8,opacity:0},animate:(t=.1)=>({x:0,scale:1,opacity:1,transition:{duration:Ne.medium,delay:t,ease:fe.easeInOut}}),exit:{x:20,scale:.8,opacity:0,transition:{duration:Ne.medium,ease:fe.easeInOut}}},ew={hidden:{opacity:0,x:20},visible:{opacity:1,x:0,transition:{duration:.35,ease:fe.smooth,staggerChildren:.08,delayChildren:.1}}},tw={hidden:{x:"100%",opacity:0},visible:{x:0,opacity:1,transition:{duration:.6,ease:fe.smooth,opacity:{duration:.4,ease:fe.easeOut}}},exit:{x:"100%",opacity:0,transition:{duration:.4,ease:fe.easeInOut}}},wu={hidden:{opacity:0,scale:.8,transition:{duration:Ne.fast,ease:fe.easeIn}},visible:{opacity:1,scale:1,backgroundColor:"rgba(0, 0, 0, 0.5)",transition:{duration:Ne.medium,ease:fe.smooth}},hover:{scale:1.15,backgroundColor:"rgba(255, 255, 255, 0.25)",transition:{duration:Ne.fast,ease:fe.spring}}},ku={visible:{opacity:1,height:280,scale:1,y:0,transition:{duration:.35,ease:fe.smooth}},hidden:{opacity:0,height:0,scale:.9,y:-20,transition:{duration:.35,ease:[.4,0,.6,1]}}},_u={visible:{opacity:1,height:160,scale:1,y:0,transition:{duration:.35,ease:fe.smooth}},hidden:{opacity:0,height:0,scale:.9,y:-20,transition:{duration:.35,ease:[.4,0,.6,1]}}},xu={normal:{y:0,transition:{duration:.4,ease:[.34,1.56,.64,1]}},movedUp:{y:-8,transition:{duration:.4,ease:[.34,1.56,.64,1]}}},iw={hidden:{opacity:0,height:0,y:-10,overflow:"hidden",transition:{duration:.3,ease:fe.easeInOut}},visible:{opacity:1,height:"auto",y:0,overflow:"visible",transition:{duration:.4,ease:fe.smooth,delayChildren:.1,staggerChildren:.03}}},nw={hidden:{opacity:0,scale:.85,rotate:-12},visible:{opacity:1,scale:1,rotate:0,transition:{duration:.6,ease:fe.elastic,when:"beforeChildren",staggerChildren:.08}},hover:{scale:1.01,transition:{duration:Ne.fast,ease:fe.spring}}},sw={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1,transition:{duration:.4,ease:fe.smooth}}},rw={idle:{scale:1,filter:"brightness(1)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},hover:{scale:1.08,filter:"brightness(1.05)",boxShadow:"0 4px 16px rgba(255, 255, 255, 0.3)",transition:{type:"spring",stiffness:400,damping:15}},dragging:{scale:1.15,filter:"brightness(1.2)",boxShadow:"0 0 24px rgba(255, 255, 255, 0.7)",transition:{type:"spring",stiffness:600,damping:20}}},Cu={hidden:{opacity:0,y:-5,scale:.9},visible:{opacity:1,y:0,scale:1,transition:{duration:.3,ease:fe.smooth}},update:{scale:[1,1.08,1],transition:{duration:.25,ease:fe.spring}}},ow={off:{rotate:0,scale:1},on:{rotate:360,scale:1,transition:{rotate:{type:"spring",stiffness:200,damping:20},scale:{duration:.2}}},tap:{scale:.9,transition:{duration:.1}}},js={hidden:{opacity:0,y:10},visible:{opacity:.5,y:0,transition:{delay:.2,duration:.4,ease:fe.smooth}}},aw={hidden:{opacity:0,scale:.92,y:20,filter:"blur(4px)"},inactive:{backgroundColor:"rgba(255, 255, 255, 0.1)",scale:1,opacity:1,y:0,filter:"blur(0px)",transition:{duration:Ne.medium,ease:fe.smooth,opacity:{duration:.4,ease:fe.easeOut},scale:{duration:.45,ease:fe.smooth},y:{duration:.45,ease:fe.smooth},filter:{duration:.35,ease:fe.easeOut}}},active:{backgroundColor:"#FFFFFF",scale:1,opacity:1,y:0,filter:"blur(0px)",transition:{duration:Ne.medium,ease:fe.smooth}}},lw={hidden:{opacity:0,scale:.92,y:20,filter:"blur(4px)"},inactive:{backgroundColor:"rgba(255, 255, 255, 0.1)",scale:1,opacity:1,y:0,filter:"blur(0px)",transition:{duration:Ne.medium,ease:fe.smooth,opacity:{duration:.4,ease:fe.easeOut},scale:{duration:.45,ease:fe.smooth},y:{duration:.45,ease:fe.smooth},filter:{duration:.35,ease:fe.easeOut}}},active:{backgroundColor:"#FFFFFF",scale:1,opacity:1,y:0,filter:"blur(0px)",transition:{duration:Ne.medium,ease:fe.smooth}}},cw={hidden:{opacity:0,scale:.92,y:20,filter:"blur(4px)"},inactive:{backgroundColor:"#FFFFFF",scale:1,opacity:1,y:0,filter:"blur(0px)",transition:{duration:Ne.medium,ease:fe.smooth,opacity:{duration:.4,ease:fe.easeOut},scale:{duration:.45,ease:fe.smooth},y:{duration:.45,ease:fe.smooth},filter:{duration:.35,ease:fe.easeOut}}},active:{backgroundColor:"#FFFFFF",scale:1,opacity:1,y:0,filter:"blur(0px)",transition:{duration:Ne.medium,ease:fe.smooth}}},dw={hidden:{scale:.96,opacity:0,filter:"blur(25px)"},visible:{scale:1,opacity:1,filter:"blur(0px)",transition:{delay:.05,duration:.35,ease:[.25,.1,.25,1],scale:{type:"spring",damping:28,stiffness:250,mass:.6},opacity:{duration:.25,ease:fe.easeOut},filter:{duration:.35,ease:[.16,1,.3,1]}}},exit:{scale:.94,y:20,opacity:0,filter:"blur(18px)",transition:{duration:.32,ease:[.4,0,.6,1],opacity:{duration:.28,ease:fe.easeIn},filter:{duration:.35,ease:[.4,0,1,1]}}}},uw={hidden:{opacity:0,scale:.98,filter:"blur(15px)"},visible:{opacity:1,scale:1,filter:"blur(0px)",transition:{delay:.08,duration:.3,ease:[.25,.1,.25,1],opacity:{duration:.25,ease:fe.easeOut,delay:.1},filter:{duration:.32,ease:[.16,1,.3,1],delay:.08}}},exit:{opacity:0,scale:.96,y:15,filter:"blur(12px)",transition:{duration:.25,ease:[.4,0,.6,1],filter:{duration:.28,ease:fe.easeIn}}}},hw=({activeCategory:t="devices",items:e=[],onSubcategoryChange:i,mode:n="categories",lang:r="de",activeSubcategory:o="all",suggestions:a=[],hasSuggestions:l=!1})=>{const[c,d]=M({}),[u,h]=M({}),[m,f]=M(!1),[g,p]=M(!1),v=te(null),b={light:"lights",switch:"switches",climate:"climate",fan:"climate",humidifier:"climate",cover:"covers",media_player:"media",vacuum:"cleaning",dishwasher:"cleaning",washing_machine:"cleaning",air_purifier:"cleaning",camera:"security",lock:"security",siren:"security",alert:"security",alarm_control_panel:"security",valve:"utilities",printer3d_device:"utilities",script:"scripts",automation:"automations",scene:"scenes"},y=I=>ee(`subcategories.${I}`,r),w={all:ee("subcategories.all",r),script:"Skripte",automation:"Automationen",scene:"Szenen",playlist:"Playlists",custom_card:"Karten",lovelace_view:"Views"},_=()=>{const I=e.some(G=>G.isFavorite),z=["all"];if(I&&z.push("favorites"),l&&z.push("suggestions"),n==="areas"){const G=new Set(e.map($=>$.area).filter(Boolean));return[...z,...Array.from(G).sort()]}if(n==="types"&&t==="custom"){const G=new Set(e.map($=>$.custom_data?.type).filter(Boolean));return["all",...Array.from(G)]}if(t==="custom")return[...z,"system","apps"];if(t==="sensors"){const G=new Set;e.forEach(re=>{const he=$a(re);he&&he!==null&&G.add(he)});const $=["temperature","humidity","motion","door_window","presence","energy","light","pressure","battery","air_quality","other_sensors"],Q=Array.from(G).sort((re,he)=>{const O=$.indexOf(re),H=$.indexOf(he);return(O===-1?999:O)-(H===-1?999:H)});return[...z,...Q]}if(t==="actions"){const G=new Set(e.map(he=>he.domain)),$=new Set;G.forEach(he=>{const O=b[he];O&&$.add(O)});const Q=["scripts","automations","scenes"],re=Array.from($).sort((he,O)=>{const H=Q.indexOf(he),X=Q.indexOf(O);return(H===-1?999:H)-(X===-1?999:X)});return[...z,...re]}const D=new Set(e.map(G=>G.domain)),L=new Set;D.forEach(G=>{if(t==="devices"&&G==="scene")return;const $=b[G];$&&L.add($)}),e.some(G=>G.domain==="fan"&&G.attributes?.device_class==="air_purifier")&&(L.add("cleaning"),!e.some($=>$.domain==="fan"&&$.attributes?.device_class!=="air_purifier")&&L.has("climate")&&(e.some(Q=>Q.domain==="climate"||Q.domain==="humidifier")||L.delete("climate"))),e.some(G=>G.domain==="binary_sensor"?["smoke","gas","carbon_monoxide","safety","sound","vibration","problem"].includes(G.attributes?.device_class):!1)&&L.add("security");const F=["lights","switches","climate","covers","media","cleaning","security","utilities"],K=Array.from(L).sort((G,$)=>{const Q=F.indexOf(G),re=F.indexOf($);return(Q===-1?999:Q)-(re===-1?999:re)});return[...z,...K]},k=()=>{const I={},z={};_().forEach(L=>{if(L==="all")I.all=e.length,z.all=e.filter(E=>E.isActive).length;else if(L==="favorites"){const E=e.filter(W=>W.isFavorite);I.favorites=E.length,z.favorites=E.filter(W=>W.isActive).length}else if(L==="suggestions")I.suggestions=a.length,z.suggestions=a.filter(E=>E.isActive).length;else if(n==="areas"){const E=e.filter(W=>W.area===L);I[L]=E.length,z[L]=E.filter(W=>W.isActive).length}else if(n==="types"){const E=e.filter(W=>W.custom_data?.type===L);I[L]=E.length,z[L]=E.filter(W=>W.isActive).length}else if(t==="sensors"){const E=e.filter(W=>$a(W)===L);I[L]=E.length,z[L]=E.filter(W=>W.isActive).length}else if(t==="actions"){const E=e.filter(W=>b[W.domain]===L);I[L]=E.length,z[L]=E.filter(W=>W.isActive).length}else if(t==="custom"){if(L==="system"){const E=e.filter(W=>W.domain==="settings");I[L]=E.length,z[L]=E.filter(W=>W.isActive).length}else if(L==="apps"){const E=e.filter(W=>W.domain==="marketplace");I[L]=E.length,z[L]=E.filter(W=>W.isActive).length}}else{const E=Object.entries(b).filter(([F,K])=>K===L).map(([F])=>F),W=e.filter(F=>E.includes(F.domain)?F.domain==="fan"&&F.attributes?.device_class==="air_purifier"?L==="cleaning":!0:!!(F.domain==="fan"&&F.attributes?.device_class==="air_purifier"&&L==="cleaning"||F.domain==="binary_sensor"&&L==="security"&&["smoke","gas","carbon_monoxide","safety","sound","vibration","problem"].includes(F.attributes?.device_class)));I[L]=W.length,z[L]=W.filter(F=>F.isActive).length}}),d(I),h(z)},N=()=>{if(!v.current)return;const{scrollLeft:I,scrollWidth:z,clientWidth:D}=v.current;f(I>0),p(I<z-D-5)};U(()=>{k()},[e,n,t]),U(()=>{const I=v.current;if(I){I.addEventListener("scroll",N),N();const z=new ResizeObserver(N);return z.observe(I),()=>{I.removeEventListener("scroll",N),z.disconnect()}}},[]);const C=(I,z)=>{I&&(I.stopPropagation(),I.preventDefault()),i?.(z===o&&z!=="all"?"all":z)},S=(I,z)=>{if(I&&(I.stopPropagation(),I.preventDefault()),!v.current)return;const D=200;v.current.scrollBy({left:z==="left"?-D:D,behavior:"smooth"})},x=I=>n==="areas"?I==="all"?ee("subcategories.all",r)+" "+ee("filters.areas",r):I==="favorites"||I==="suggestions"?y(I):I:n==="types"?w[I]||I:y(I),B=_(),A=I=>{I.stopPropagation(),I.preventDefault()},P=I=>{I.stopPropagation(),I.preventDefault()};return s(T.div,{className:"subcategory-bar-container",onClick:A,onMouseDown:P,onPointerDown:P,"data-subcategory-bar":"true",variants:tw,initial:"hidden",animate:"visible",exit:"exit",children:[s("style",{children:`
        .subcategory-bar-container {
          position: relative;
          margin: 0;
          width: 100%;
        }

        .subcategory-bar {
          display: flex;
          gap: 8px;
          padding: 8px 20px;
          margin: 0 -20px;
          overflow-x: auto;
          scrollbar-width: none;
          -ms-overflow-style: none;
          -webkit-overflow-scrolling: touch;
          scroll-behavior: smooth;
          position: relative;
        }

        .subcategory-bar::-webkit-scrollbar {
          display: none;
        }

        .subcategory-chip {
          padding: 8px 16px;
          border: 0px solid;
          border-radius: 20px;
          cursor: pointer;
          white-space: nowrap;
          flex-shrink: 0;
          user-select: none;
          display: inline-flex;
          align-items: center;
          gap: 8px;
          min-height: 38px;
          font-size: 17px;
          /* Removed CSS transitions - handled by Framer Motion */
        }

        .chip-label {
          font-weight: 500;
          color: rgba(255, 255, 255, 0.9);
          font-size: 16px;
        }

        .chip-active-badge {
          font-size: 14px;
          padding: 2px 6px;
          background: rgba(255, 255, 255, 0.1);
          border-radius: 10px;
          color: rgba(255, 255, 255, 0.7);
          font-weight: 500;
          min-width: 20px;
          text-align: center;
        }

        .scroll-indicator {
          position: absolute;
          top: 25%;
          transform: translateY(-50%);
          width: 28px;
          height: 28px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          cursor: pointer;
          z-index: 10;
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          border: 1px solid rgba(255, 255, 255, 0.1);
          /* Removed CSS transitions - handled by Framer Motion */
        }

        .scroll-indicator-left {
          left: 0px;
        }

        .scroll-indicator-right {
          right: 0px;
        }

        .scroll-indicator svg {
          width: 14px;
          height: 14px;
        }
      `}),s("div",{ref:v,className:"subcategory-bar",children:s(Ce,{mode:"sync",children:B.map((I,z)=>{const D=u[I]||0,L=I===o,E=D>0;return s(T.div,{layout:!0,className:"subcategory-chip","data-subcategory":I,onClick:W=>C(W,I),initial:"inactive",animate:L?"active":"inactive",whileHover:L?{}:"hover",whileTap:"tap",variants:X5,transition:{layout:{duration:.3,ease:[.16,1,.3,1]},backgroundColor:{duration:.2},scale:{duration:.2,ease:[.16,1,.3,1]}},children:[s(T.span,{className:"chip-label",layout:"position",children:x(I)}),s(Ce,{children:E&&s(T.span,{className:"chip-active-badge",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.2,ease:"easeOut"},layout:"position",children:D})})]},I)})})}),s(Ce,{children:m&&s(T.div,{className:"scroll-indicator scroll-indicator-left",onClick:I=>S(I,"left"),variants:wu,initial:"hidden",animate:"visible",exit:"hidden",whileHover:"hover",whileTap:{scale:.95},children:s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s("polyline",{points:"15 18 9 12 15 6"})})})}),s(Ce,{children:g&&s(T.div,{className:"scroll-indicator scroll-indicator-right",onClick:I=>S(I,"right"),variants:wu,initial:"hidden",animate:"visible",exit:"hidden",whileHover:"hover",whileTap:{scale:.95},children:s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s("polyline",{points:"9 18 15 12 9 6"})})})})]})},Pe=({scrollContainerRef:t,isHovered:e=!1})=>{const[i,n]=M(!1),[r,o]=M(0),[a,l]=M(8),[c,d]=M(!1),u=te(null),h=80,m=8;return U(()=>{const f=t?.current;if(!f)return;const g=()=>{const{scrollTop:v,scrollHeight:b,clientHeight:y}=f,w=b>y;if(n(w),!w)return;const _=y/b,k=Math.max(m,h*_);l(k);const N=v/(b-y),C=h-k,S=N*C;o(S),d(!0),clearTimeout(u.current),u.current=setTimeout(()=>{d(!1)},1e3)};g(),f.addEventListener("scroll",g);const p=new ResizeObserver(g);return p.observe(f),()=>{f.removeEventListener("scroll",g),p.disconnect(),clearTimeout(u.current)}},[t]),i?s(Ce,{children:i&&s(T.div,{className:"custom-scrollbar-container",initial:{opacity:0},animate:{opacity:c||e?1:0},exit:{opacity:0},transition:{duration:.3},style:{position:"absolute",right:"3px",top:"50%",transform:"translateY(-50%)",zIndex:1e3,pointerEvents:"none"},children:s("div",{style:{width:"14px",height:`${h}px`,background:"rgba(255, 255, 255, 0.1)",borderRadius:"14px",position:"relative",overflow:"hidden"},children:s(T.div,{style:{position:"absolute",top:`${r}px`,left:"3px",right:"3px",height:`${a}px`,background:"rgba(255, 255, 255, 0.6)",borderRadius:"10px"},transition:{type:"spring",stiffness:300,damping:30}})})})}):null};class rt{constructor(e){if(!e.id)throw new Error("SystemEntity requires an id");if(!e.domain)throw new Error("SystemEntity requires a domain");if(!e.name)throw new Error("SystemEntity requires a name");this.id=e.id,this.domain=e.domain,this.name=e.name,this.icon=e.icon||"mdi:puzzle",this.category=e.category||"system",this.description=e.description||"",this.relevance=e.relevance||80,this.brandColor=e.brandColor||null,this.attributes=e.attributes||{},this.permissions=e.permissions||[],this.routes=e.routes||{},this.actions=e.actions||{},this.viewComponent=e.viewComponent||null,this.isPlugin=e.isPlugin||!1,this.pluginManifest=e.pluginManifest||null,this.hasTabs=e.hasTabs!==void 0?e.hasTabs:!1,this.hasCustomView=e.hasCustomView!==void 0?e.hasCustomView:!0,this.showInDetailView=e.showInDetailView!==void 0?e.showInDetailView:!0,this.actionButtons=e.actionButtons||null,this._mounted=!1,this._context=null,this._storage=null,this._config=e}async onMount(e){if(this._mounted){console.warn(`SystemEntity ${this.id} is already mounted`);return}this._context=e,this._mounted=!0,e.storage&&(this._storage=await this._initializeStorage(e.storage)),console.log(` SystemEntity mounted: ${this.id}`)}async onUnmount(){this._mounted&&(this._context=null,this._storage=null,this._mounted=!1,console.log(` SystemEntity unmounted: ${this.id}`))}async _initializeStorage(e){const i=`system_entity_${this.id}`;return{get:n=>e.get(`${i}_${n}`),set:(n,r)=>e.set(`${i}_${n}`,r),delete:n=>e.delete(`${i}_${n}`),clear:()=>e.clearNamespace(i)}}async executeAction(e,i={}){const n=this.actions[e];if(!n)throw new Error(`Action '${e}' not found in entity '${this.id}'`);if(typeof n!="function")throw new Error(`Action '${e}' is not a function`);try{return await n.call(this,i,this._context)}catch(r){throw console.error(` Action failed: ${this.id}.${e}`,r),r}}getRoute(e){return this.routes[e]||null}hasPermission(e){return this.permissions.includes(e)}toEntity(){const e=this.isPlugin?`plugin.${this.id}`:`system.${this.id}`;return{entity_id:e,id:e,domain:this.domain,name:this.name,state:this._mounted?"active":"inactive",area:null,category:this.category,attributes:{friendly_name:this.name,icon:this.icon,description:this.description,category:this.category,is_plugin:this.isPlugin,permissions:this.permissions,routes:Object.keys(this.routes),actions:Object.keys(this.actions),...this.attributes},is_system:!0,is_plugin:this.isPlugin,relevance_score:this.relevance,usage_count:0,last_used:null}}async loadView(){if(!this.viewComponent)throw new Error(`No view component defined for entity '${this.id}'`);if(typeof this.viewComponent=="function")try{const e=await this.viewComponent();return e.default||e}catch(e){throw console.error(`Failed to load view for entity '${this.id}':`,e),e}return this.viewComponent}updateAttributes(e){if(this.attributes={...this.attributes,...e},typeof window<"u"){const i=new CustomEvent("system-entity-updated",{detail:{entity_id:this.isPlugin?`plugin.${this.id}`:`system.${this.id}`,attributes:this.attributes}});window.dispatchEvent(i)}}getStorage(){return this._storage||console.warn(`No storage available for entity '${this.id}'`),this._storage}getContext(){return this._mounted||console.warn(`Entity '${this.id}' is not mounted`),this._context}isMounted(){return this._mounted}clone(){return new rt(this._config)}toJSON(){return{id:this.id,domain:this.domain,name:this.name,icon:this.icon,category:this.category,description:this.description,relevance:this.relevance,attributes:this.attributes,permissions:this.permissions,routes:this.routes,actions:Object.keys(this.actions),isPlugin:this.isPlugin,isMounted:this._mounted}}}class mw{constructor(){this.entities=new Map,this.viewComponents=new Map,this.categories=new Map,this.plugins=new Map,this.pluginLoaders=new Map,this.isInitialized=!1,this.context=null,this.listeners=new Map,this._initializeCategories()}_initializeCategories(){[{id:"system",label:"System",order:1},{id:"tools",label:"Tools",order:2},{id:"apps",label:"Apps",order:3},{id:"services",label:"Services",order:4}].forEach(i=>{this.categories.set(i.id,i)})}async initialize(e){if(this.isInitialized){console.warn("SystemEntityRegistry is already initialized");return}this.context=e,await this.autoDiscover(),await this.mountAll(),this.isInitialized=!0,console.log(" SystemEntityRegistry initialized with",this.entities.size,"entities"),this._emit("initialized",{count:this.entities.size})}register(e){if(e instanceof rt||(e=new rt(e)),!e.id||!e.domain)throw new Error("Invalid entity: missing id or domain");this.entities.has(e.id)&&console.warn(`Entity '${e.id}' is already registered, overwriting...`),this.entities.set(e.id,e),e.viewComponent&&this.viewComponents.set(e.domain,e.viewComponent);const i=e.category||"system";return this.categories.has(i)||this.categories.set(i,{id:i,label:i.charAt(0).toUpperCase()+i.slice(1),order:99}),console.log(` Registered entity: ${e.id} (${e.domain})`),this.isInitialized&&this.context&&e.onMount(this.context).catch(n=>{console.error(`Failed to mount entity '${e.id}':`,n)}),this._emit("entity-registered",{entity:e}),this}async unregister(e){const i=this.entities.get(e);if(!i){console.warn(`Entity '${e}' not found`);return}i.isMounted()&&await i.onUnmount(),this.entities.delete(e),this.viewComponents.delete(i.domain),i.isPlugin&&this.plugins.delete(e),console.log(` Unregistered entity: ${e}`),this._emit("entity-unregistered",{id:e})}getEntity(e){return this.entities.get(e)||null}getEntityByDomain(e){for(const i of this.entities.values())if(i.domain===e)return i;return null}getViewComponent(e){return this.viewComponents.has(e)?this.viewComponents.get(e):this.getEntityByDomain(e)?.viewComponent||null}getAllEntities(){return Array.from(this.entities.values())}getEntitiesByCategory(e){return this.getAllEntities().filter(i=>i.category===e)}getAsHomeAssistantEntities(){return this.getAllEntities().map(e=>e.toEntity())}isSystemEntity(e){return e?this.getEntityByDomain(e)!==null:!1}hasTabs(e){return this.getEntityByDomain(e)?.hasTabs||!1}hasCustomView(e){const i=this.getEntityByDomain(e);return i?.hasCustomView!==void 0?i.hasCustomView:!0}shouldShowInDetailView(e){const i=this.getEntityByDomain(e);return i?.showInDetailView!==void 0?i.showInDetailView:!0}getActionButtons(e){const i=this.getEntityByDomain(e);return console.log(" Registry.getActionButtons for domain:",e),console.log(" Entity found:",i),console.log(" Entity.actionButtons:",i?.actionButtons),i?.actionButtons||null}async autoDiscover(){console.log(" Auto-discovering system entities...");const e=[()=>$e(()=>Promise.resolve().then(()=>xS),void 0),()=>$e(()=>Promise.resolve().then(()=>SS),void 0),()=>$e(()=>Promise.resolve().then(()=>MS),void 0),()=>$e(()=>Promise.resolve().then(()=>TS),void 0),()=>$e(()=>Promise.resolve().then(()=>ES),void 0),()=>$e(()=>Promise.resolve().then(()=>DS),void 0),()=>$e(()=>Promise.resolve().then(()=>BS),void 0)];for(const i of e)try{const n=await i(),r=n.default||n.entity||n;if(r){const o=typeof r=="function"&&!(r instanceof rt)?r():r;o&&this.register(o)}}catch(n){console.error("Failed to load known entity:",n)}}async mountAll(){if(!this.context){console.warn("Cannot mount entities without context");return}const e=[];for(const i of this.entities.values())i.isMounted()||e.push(i.onMount(this.context).catch(n=>{console.error(`Failed to mount entity '${i.id}':`,n)}));await Promise.all(e),console.log(` Mounted ${e.length} entities`)}async unmountAll(){const e=[];for(const i of this.entities.values())i.isMounted()&&e.push(i.onUnmount().catch(n=>{console.error(`Failed to unmount entity '${i.id}':`,n)}));await Promise.all(e),console.log(` Unmounted ${e.length} entities`)}async registerPlugin(e,i){const n=new rt({id:i.id,domain:i.system_entity.domain,name:i.name,icon:i.system_entity.icon||"mdi:puzzle",category:i.system_entity.category||"apps",description:i.description,relevance:i.system_entity.relevance||80,isPlugin:!0,pluginManifest:i,viewComponent:e.viewComponent||i.system_entity.viewComponent,actions:e.actions||{},permissions:i.requirements?.permissions||[]});if(this.plugins.set(i.id,{entity:n,plugin:e,manifest:i}),this.register(n),typeof e.init=="function")try{console.log(` Initializing plugin: ${i.id}`),await e.init({hass:window._hass||null,storage:localStorage,registry:this}),console.log(` Plugin initialized: ${i.id}`)}catch(r){console.error(` Plugin init failed for ${i.id}:`,r)}console.log(` Registered plugin: ${i.id}`)}getPlugin(e){return this.plugins.get(e)||null}getAllPlugins(){return Array.from(this.plugins.values())}on(e,i){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(i)}off(e,i){const n=this.listeners.get(e);n&&n.delete(i)}_emit(e,i){const n=this.listeners.get(e);n&&n.forEach(r=>{try{r(i)}catch(o){console.error(`Error in event listener for '${e}':`,o)}})}async reset(){await this.unmountAll(),this.entities.clear(),this.viewComponents.clear(),this.plugins.clear(),this.pluginLoaders.clear(),this.isInitialized=!1,this.context=null,console.log(" Registry reset")}debug(){console.group("SystemEntityRegistry Debug"),console.log("Initialized:",this.isInitialized),console.log("Entities:",this.entities.size),console.log("Plugins:",this.plugins.size),console.log("Categories:",Array.from(this.categories.keys())),console.table(this.getAllEntities().map(e=>({id:e.id,domain:e.domain,category:e.category,mounted:e.isMounted(),isPlugin:e.isPlugin}))),console.groupEnd()}}const _e=new mw;typeof window<"u"&&(window.systemRegistry=_e,window.debugRegistry=()=>{console.log("Registry initialized:",_e.isInitialized),console.log("Entities:",_e.entities.size),console.log("All entities:",_e.getAllEntities()),console.log("As HA entities:",_e.getAsHomeAssistantEntities())},console.log(" SystemRegistry attached to window"));const sp={light:{turn_on:{parameters:["transition","rgb_color","rgbw_color","rgbww_color","color_name","hs_color","xy_color","color_temp","color_temp_kelvin","brightness","brightness_pct","brightness_step","brightness_step_pct","white","profile","flash","effect"]},turn_off:{parameters:["transition","flash"]},toggle:{parameters:["transition"]}},switch:{turn_on:{parameters:[]},turn_off:{parameters:[]},toggle:{parameters:[]}},climate:{set_temperature:{parameters:["temperature","target_temp_high","target_temp_low","hvac_mode"]},set_hvac_mode:{parameters:["hvac_mode"]},set_preset_mode:{parameters:["preset_mode"]},set_fan_mode:{parameters:["fan_mode"]},set_swing_mode:{parameters:["swing_mode"]},set_humidity:{parameters:["humidity"]},turn_on:{parameters:[]},turn_off:{parameters:[]}},cover:{open_cover:{parameters:[]},close_cover:{parameters:[]},stop_cover:{parameters:[]},toggle:{parameters:[]},open_cover_tilt:{parameters:[]},close_cover_tilt:{parameters:[]},stop_cover_tilt:{parameters:[]},set_cover_position:{parameters:["position"]},set_cover_tilt_position:{parameters:["tilt_position"]}},media_player:{turn_on:{parameters:[]},turn_off:{parameters:[]},toggle:{parameters:[]},volume_up:{parameters:[]},volume_down:{parameters:[]},volume_set:{parameters:["volume_level"]},volume_mute:{parameters:["is_volume_muted"]},media_play_pause:{parameters:[]},media_play:{parameters:[]},media_pause:{parameters:[]},media_stop:{parameters:[]},media_next_track:{parameters:[]},media_previous_track:{parameters:[]},media_seek:{parameters:["seek_position"]},select_source:{parameters:["source"]},select_sound_mode:{parameters:["sound_mode"]},play_media:{parameters:["media_content_type","media_content_id","enqueue","announce"]},shuffle_set:{parameters:["shuffle"]},repeat_set:{parameters:["repeat"]}},fan:{turn_on:{parameters:["speed","percentage","preset_mode"]},turn_off:{parameters:[]},toggle:{parameters:[]},set_percentage:{parameters:["percentage"]},set_preset_mode:{parameters:["preset_mode"]},set_direction:{parameters:["direction"]},oscillate:{parameters:["oscillating"]}},lock:{lock:{parameters:["code"]},unlock:{parameters:["code"]},open:{parameters:["code"]}},vacuum:{turn_on:{parameters:[]},turn_off:{parameters:[]},start:{parameters:[]},pause:{parameters:[]},stop:{parameters:[]},return_to_base:{parameters:[]},clean_spot:{parameters:[]},locate:{parameters:[]},set_fan_speed:{parameters:["fan_speed"]},send_command:{parameters:["command","params"]}},alarm_control_panel:{alarm_disarm:{parameters:["code"]},alarm_arm_home:{parameters:["code"]},alarm_arm_away:{parameters:["code"]},alarm_arm_night:{parameters:["code"]},alarm_arm_vacation:{parameters:["code"]},alarm_arm_custom_bypass:{parameters:["code"]},alarm_trigger:{parameters:[]}},scene:{turn_on:{parameters:["transition"]}},script:{turn_on:{parameters:[]},turn_off:{parameters:[]},toggle:{parameters:[]}},automation:{turn_on:{parameters:[]},turn_off:{parameters:[]},toggle:{parameters:[]},trigger:{parameters:["skip_condition"]}},input_boolean:{turn_on:{parameters:[]},turn_off:{parameters:[]},toggle:{parameters:[]}},input_number:{set_value:{parameters:["value"]},increment:{parameters:[]},decrement:{parameters:[]}},timer:{start:{parameters:["duration"]},pause:{parameters:[]},cancel:{parameters:[]},finish:{parameters:[]}}};function nc(t,e,i){const n={...i};return t==="light"&&("kelvin"in n&&!("color_temp_kelvin"in n)&&(n.color_temp_kelvin=n.kelvin,delete n.kelvin),"color_temp"in n&&!("color_temp_kelvin"in n)&&(n.color_temp_kelvin=Math.round(1e6/n.color_temp)),"brightness"in n&&(n.brightness=Math.max(0,Math.min(255,Math.round(n.brightness)))),"brightness_pct"in n&&!("brightness"in n)&&(n.brightness=Math.round(n.brightness_pct/100*255)),"rgb_color"in n&&(n.rgb_color=n.rgb_color.map(r=>Math.max(0,Math.min(255,Math.round(r))))),"hs_color"in n&&(n.hs_color=[Math.max(0,Math.min(360,n.hs_color[0])),Math.max(0,Math.min(100,n.hs_color[1]))])),t==="climate"&&("temperature"in n&&(n.temperature=Number(n.temperature)),"target_temp_high"in n&&(n.target_temp_high=Number(n.target_temp_high)),"target_temp_low"in n&&(n.target_temp_low=Number(n.target_temp_low)),"humidity"in n&&(n.humidity=Math.max(0,Math.min(100,Number(n.humidity))))),t==="media_player"&&"volume_level"in n&&(n.volume_level=Math.max(0,Math.min(1,Number(n.volume_level)))),t==="cover"&&("position"in n&&(n.position=Math.max(0,Math.min(100,Math.round(n.position)))),"tilt_position"in n&&(n.tilt_position=Math.max(0,Math.min(100,Math.round(n.tilt_position))))),t==="fan"&&"percentage"in n&&(n.percentage=Math.max(0,Math.min(100,Math.round(n.percentage)))),n}function rp(t,e){return sp[t]?.hasOwnProperty(e)||!1}async function op(t,e,i,n){if(!t)return console.warn("Home Assistant not available"),Promise.reject("Home Assistant not available");if(!rp(e,i))return console.warn(`Service ${e}.${i} not available`),Promise.reject(`Service ${e}.${i} not available`);const r=nc(e,i,n);console.log("Calling HA Service:",{domain:e,service:i,data:r});try{return await t.callService(e,i,r)}catch(o){throw console.error("HA Service Call failed:",o),o}}async function ap(t){if(!t)return console.warn("Home Assistant not available"),[];try{const e=await t.callWS({type:"config/area_registry/list"});return console.log("Loaded areas from HA:",e.length),e||[]}catch(e){return console.error("Failed to load areas from HA:",e),[]}}async function lp(t){if(!t)return console.warn("Home Assistant not available"),[];try{const e=await t.callWS({type:"config/device_registry/list"});return console.log("Loaded devices from HA:",e.length),e||[]}catch(e){return console.error("Failed to load devices from HA:",e),[]}}async function cp(t){if(!t)return console.warn("Home Assistant not available"),[];try{const e=await t.callWS({type:"config/entity_registry/list"});return console.log("Loaded entity registry from HA:",e.length),e||[]}catch(e){return console.error("Failed to load entity registry from HA:",e),[]}}function dp(t,e=[],i=[],n=[]){const r=n.find(o=>o.entity_id===t.entity_id);if(r?.area_id){const o=e.find(a=>a.area_id===r.area_id);if(o)return{...t,area:o.name,area_id:r.area_id}}if(r?.device_id){const o=i.find(a=>a.id===r.device_id);if(o?.area_id){const a=e.find(l=>l.area_id===o.area_id);if(a)return{...t,area:a.name,area_id:o.area_id}}}return t.attributes?.area?t:{...t,area:null,area_id:null}}function up(t,e,i,n){return console.log("Enriching entities with areas...",{entities:t.length,areas:e.length,devices:i.length,entityRegistry:n.length}),t.map(r=>dp(r,e,i,n))}async function fw(t,e,i="24h"){if(!t)return console.warn("Home Assistant not available"),null;try{const n=new Date,r=n.toISOString();let o;switch(i){case"1h":o=new Date(n.getTime()-3600*1e3).toISOString();break;case"24h":o=new Date(n.getTime()-1440*60*1e3).toISOString();break;case"7d":o=new Date(n.getTime()-10080*60*1e3).toISOString();break;default:o=new Date(n.getTime()-1440*60*1e3).toISOString()}console.log(" Loading history from HA:",{entityId:e,timeRange:i,startTime:o,endTime:r});const a=await t.callApi("GET",`history/period/${o}?filter_entity_id=${e}&end_time=${r}&minimal_response&no_attributes`);if(!a||!a[0]||a[0].length===0)return console.warn("No history data returned from HA"),null;const l=a[0];console.log(" Received history data points:",l.length);const c=l.map(u=>({timestamp:new Date(u.last_changed).getTime(),value:Su(u.state),state:u.state})).filter(u=>u.value!==null),d=l.filter((u,h)=>h===0?!0:u.state!==l[h-1].state).map(u=>({timestamp:new Date(u.last_changed).getTime(),state:u.state,value:Su(u.state)}));return console.log(" Processed data:",{chartPoints:c.length,events:d.length}),{data:c,events:d}}catch(n){return console.error("Failed to load history from HA:",n),null}}function Su(t){const e=parseFloat(t);return isNaN(e)?t==="on"?100:t==="off"?0:t==="open"?100:t==="closed"||t==="locked"?0:t==="unlocked"||t==="home"?100:t==="not_home"?0:t==="playing"?100:t==="paused"?50:t==="idle"?0:null:e}const pw=Object.freeze(Object.defineProperty({__proto__:null,DOMAIN_SERVICES:sp,callHAService:op,enrichAllEntitiesWithAreas:up,enrichEntityWithArea:dp,formatServiceData:nc,isServiceAvailable:rp,loadAreasFromHA:ap,loadDeviceRegistry:lp,loadEntityHistory:fw,loadEntityRegistry:cp},Symbol.toStringTag,{value:"Module"})),gw=()=>_e&&_e.isInitialized?_e.getAsHomeAssistantEntities():[{entity_id:"system.settings",id:"system.settings",domain:"settings",name:"Einstellungen",state:"active",area:null,attributes:{friendly_name:"Einstellungen",icon:"mdi:cog",description:"Konfiguriere deine Fast Search Card"},relevance_score:100,is_system:!0,usage_count:0,last_used:null},{entity_id:"system.pluginstore",id:"system.pluginstore",domain:"pluginstore",name:"Plugin Store",state:"active",area:null,attributes:{friendly_name:"Plugin Store",icon:"mdi:puzzle-plus",description:"Erweitere deine Fast Search Card mit Plugins"},relevance_score:90,is_system:!0,usage_count:0,last_used:null}],vw="FastSearchDB",yw=1,ze={ENTITIES:"entities",SETTINGS:"settings",SEARCH_INDEX:"searchIndex",USER_PATTERNS:"userPatterns",AREA_MAPPINGS:"areaMappings",FAVORITES:"favorites"};class bw{constructor(){this.db=null,this.isInitialized=!1}async init(){return this.isInitialized?this.db:new Promise((e,i)=>{const n=indexedDB.open(vw,yw);n.onerror=()=>{console.error("IndexedDB error:",n.error),i(n.error)},n.onsuccess=()=>{this.db=n.result,this.isInitialized=!0,console.log("IndexedDB initialized successfully"),e(this.db)},n.onupgradeneeded=r=>{const o=r.target.result;this.createStores(o)}})}createStores(e){if(!e.objectStoreNames.contains(ze.ENTITIES)){const i=e.createObjectStore(ze.ENTITIES,{keyPath:"entity_id"});i.createIndex("domain","domain",{unique:!1}),i.createIndex("area_id","area_id",{unique:!1}),i.createIndex("relevance_score","relevance_score",{unique:!1}),i.createIndex("last_used","last_used",{unique:!1})}if(e.objectStoreNames.contains(ze.SETTINGS)||e.createObjectStore(ze.SETTINGS,{keyPath:"key"}),e.objectStoreNames.contains(ze.SEARCH_INDEX)||e.createObjectStore(ze.SEARCH_INDEX,{keyPath:"term"}).createIndex("entity_count","entity_count",{unique:!1}),!e.objectStoreNames.contains(ze.USER_PATTERNS)){const i=e.createObjectStore(ze.USER_PATTERNS,{keyPath:"id",autoIncrement:!0});i.createIndex("entity_id","entity_id",{unique:!1}),i.createIndex("timestamp","timestamp",{unique:!1}),i.createIndex("action_type","action_type",{unique:!1})}if(e.objectStoreNames.contains(ze.AREA_MAPPINGS)||e.createObjectStore(ze.AREA_MAPPINGS,{keyPath:"area_id"}).createIndex("activity_level","activity_level",{unique:!1}),!e.objectStoreNames.contains(ze.FAVORITES)){const i=e.createObjectStore(ze.FAVORITES,{keyPath:"entity_id"});i.createIndex("added_date","added_date",{unique:!1}),i.createIndex("usage_count","usage_count",{unique:!1})}console.log("IndexedDB stores created successfully")}async get(e,i){return this.db||await this.init(),new Promise((n,r)=>{const l=this.db.transaction([e],"readonly").objectStore(e).get(i);l.onsuccess=()=>n(l.result),l.onerror=()=>r(l.error)})}async put(e,i){return this.db||await this.init(),new Promise((n,r)=>{const l=this.db.transaction([e],"readwrite").objectStore(e).put(i);l.onsuccess=()=>n(l.result),l.onerror=()=>r(l.error)})}async delete(e,i){return this.db||await this.init(),new Promise((n,r)=>{const l=this.db.transaction([e],"readwrite").objectStore(e).delete(i);l.onsuccess=()=>n(l.result),l.onerror=()=>r(l.error)})}async getAll(e,i=null,n=null){return this.db||await this.init(),new Promise((r,o)=>{const l=this.db.transaction([e],"readonly").objectStore(e),c=i?l.index(i):l,d=n?c.getAll(n):c.getAll();d.onsuccess=()=>r(d.result||[]),d.onerror=()=>o(d.error)})}async clear(e){return this.db||await this.init(),new Promise((i,n)=>{const a=this.db.transaction([e],"readwrite").objectStore(e).clear();a.onsuccess=()=>i(!0),a.onerror=()=>n(a.error)})}}class ww{constructor(){this.cache={settings:{language:"de",viewMode:"grid",theme:"auto",aiModeEnabled:!0},entities:new Map,favorites:new Set,recentSearches:[],searchCache:new Map,areaMappings:new Map,activeFilters:{category:"devices",subcategory:"all",area:null}},this.stats={hits:0,misses:0,writes:0}}get(e,i=null){return this.stats.hits++,i?this.cache[e]?.[i]:this.cache[e]}set(e,i,n=null){this.stats.writes++,n?(this.cache[e]||(this.cache[e]={}),this.cache[e][n]=i):this.cache[e]=i}has(e,i=null){return i?this.cache[e]?.hasOwnProperty(i):this.cache.hasOwnProperty(e)}clear(e=null){if(e)this.cache[e]instanceof Map?this.cache[e].clear():this.cache[e]instanceof Set?this.cache[e].clear():this.cache[e]={};else{const i=this.cache.settings;this.cache=this.constructor().cache,this.cache.settings=i}}getStats(){return{...this.stats,hitRate:this.stats.hits/(this.stats.hits+this.stats.misses)}}}const kw=(t,e)=>{if(!t||!e)return!1;try{const i=e.replace(/\./g,"\\.").replace(/\*/g,".*").replace(/\?/g,".");return new RegExp(`^${i}$`,"i").test(t)}catch(i){return console.error("Invalid pattern regex:",e,i),!1}},hp=t=>{try{const e=localStorage.getItem("excludedPatterns");if(!e)return t;const i=JSON.parse(e);if(!Array.isArray(i)||i.length===0)return t;const n=t.filter(o=>{if(o.is_system===!0)return!0;const a=o.entity_id||o.id;return a?!i.some(c=>kw(a,c)):!0}),r=t.length-n.length;return r>0&&console.log(` Filtered out ${r} entities based on ${i.length} patterns`),n}catch(e){return console.error("Error filtering excluded entities:",e),t}},Us=async(t,e,i,n,r={})=>{if(!n){console.warn("recordUserAction called without entityId");return}const o=new Date,a={action_type:i,entity_id:n,timestamp:o.toISOString(),context:{time_of_day:o.getHours()<12?"morning":o.getHours()<18?"afternoon":"evening",hour:o.getHours(),minute:o.getMinutes(),day_of_week:o.getDay(),week_of_year:Math.ceil((o-new Date(o.getFullYear(),0,1))/6048e5),is_weekend:o.getDay()===0||o.getDay()===6,...r}};try{await t.put(ze.USER_PATTERNS,a);const l=await t.get(ze.ENTITIES,n);l&&(l.usage_count=(l.usage_count||0)+1,l.last_used=new Date().toISOString(),await t.put(ze.ENTITIES,l),e.cache.entities.has(n)&&e.cache.entities.set(n,l))}catch(l){console.error("Failed to record user action:",l)}},_w=async(t,e)=>{const i=await t.getAll(ze.USER_PATTERNS),n=new Map;return i.forEach(r=>{const o=n.get(r.entity_id)||0;n.set(r.entity_id,o+1)}),e.map(r=>{let o=0;o+={light:15,switch:12,climate:18,cover:10,media_player:8,sensor:5,binary_sensor:5,scene:10,script:8,automation:6}[r.domain]||3,r.state!=="unavailable"&&r.state!=="unknown"&&(o+=10,(r.state==="on"||r.state==="playing"||r.state==="open")&&(o+=5));const l=n.get(r.entity_id)||0;o+=Math.min(l*3,30);const c=["living_room","kitchen","bedroom","bathroom"];if(r.area_id&&c.includes(r.area_id)&&(o+=20),r.attributes?.friendly_name&&(o+=5),r.last_updated){const d=new Date(r.last_updated),u=new Date(Date.now()-3600*1e3);d>u&&(o+=10)}return{...r,relevance_score:o,usage_count:l}})},xw=t=>t?t.toLowerCase().replace(/[^a-z0-9\s]/g,"").split(/\s+/).filter(e=>e.length>1):[],Cw=async(t,e)=>{const i=new Map;for(const n of e){const r=[n.attributes?.friendly_name,n.entity_id,n.area,n.domain].filter(Boolean).join(" "),o=xw(r);for(const a of o)i.has(a)||i.set(a,[]),i.get(a).push({entity_id:n.entity_id,score:n.relevance_score})}for(const[n,r]of i.entries())await t.put(ze.SEARCH_INDEX,{term:n,matches:r,entity_count:r.length});console.log(`Search index built with ${i.size} terms`)},Sw=async(t,e,i,n)=>{try{const r=await t.get(ze.SETTINGS,"user_preferences");r&&(e.set("settings",r.value),i(r.value));const o=await t.getAll(ze.FAVORITES),a=new Set(o.map(l=>l.entity_id));e.set("favorites",a),n(a),console.log("Critical data loaded to memory cache")}catch(r){console.error("Failed to load critical data:",r)}},Nw=async(t,e,i,n,r)=>{try{if(i.current)await r();else{const a=await t.getAll(ze.ENTITIES),l=_e.isInitialized?_e.getAsHomeAssistantEntities():[];console.log(`[loadBackgroundData] System entities from registry: ${l.length}`);const c=[...l,...a.filter(d=>!d.is_system)];if(c.length>0){const d=hp(c);console.log(`[loadBackgroundData] Setting ${d.length} entities (${l.length} system)`),n(d),d.sort((h,m)=>(m.relevance_score||0)-(h.relevance_score||0)).slice(0,20).forEach(h=>{e.cache.entities.set(h.entity_id,h)})}}(await t.getAll(ze.AREA_MAPPINGS)).forEach(a=>{e.cache.areaMappings.set(a.area_id,a)}),console.log("Background data loaded")}catch(o){console.error("Failed to load background data:",o)}},Lw=async(t,e)=>{try{if(localStorage.getItem("predictiveSuggestions")==="false")return[];const i=parseInt(localStorage.getItem("confidenceThreshold")||"60")/100,n=parseInt(localStorage.getItem("suggestionTimeWindow")||"45"),r=parseInt(localStorage.getItem("maxSuggestions")||"10"),o=localStorage.getItem("learningRate")||"normal",a=new Date,l=a.getHours(),c=a.getMinutes(),d=a.getDay(),u={slow:45,normal:30,fast:15}[o]||30,h=new Date(a.getTime()-u*24*60*60*1e3),f=(await t.getAll(ze.USER_PATTERNS)).filter(v=>{if(!v.context?.hour||new Date(v.timestamp)<h)return!1;const y=v.context.hour*60+(v.context.minute||0),w=l*60+c;let _=Math.abs(y-w);return _>720&&(_=1440-_),_<=n}),g=new Map;f.forEach(v=>{if(v.action_type!=="device_click")return;const b=v.entity_id;g.has(b)||g.set(b,{entity_id:b,total_count:0,same_day_count:0,recent_uses:[],last_used:null});const y=g.get(b);y.total_count++,v.context?.day_of_week===d&&y.same_day_count++,y.recent_uses.push(new Date(v.timestamp)),y.last_used=v.timestamp});const p=[];for(const[v,b]of g.entries()){const y={slow:5,normal:3,fast:2}[o]||3;if(b.total_count<y)continue;let w=b.total_count/u;const _={slow:.8,normal:1,fast:1.3}[o]||1;if(b.same_day_count>0){const C=b.same_day_count/Math.ceil(u/7)*.3*_;w+=C}const k=Math.floor((a-new Date(b.last_used))/(1440*60*1e3));k>7&&(w*=o==="fast"?.5:.7);const N=b.recent_uses.sort((C,S)=>C-S);if(N.length>=y){const C=[];for(let B=1;B<N.length;B++)C.push(N[B]-N[B-1]);C.reduce((B,A)=>B+A)/C.length<2880*60*1e3&&(w+=.2*_)}if(w=Math.min(Math.max(w,0),1),w>=i){const C=e.find(S=>S.entity_id===v||S.id===v);C&&p.push({...C,suggestion_confidence:w,suggestion_reason:w>.85?"highly_likely":w>.7?"likely":"possible",usage_pattern:{total_uses:b.total_count,same_weekday_uses:b.same_day_count,days_since_last:k,lookback_days:u}})}}return p.sort((v,b)=>b.suggestion_confidence-v.suggestion_confidence),p.slice(0,r)}catch(i){return console.error("Failed to calculate suggestions:",i),[]}},mp=Yi(null),Mw=({children:t,hass:e=null,config:i=null})=>{const[n,r]=M(!1),[o,a]=M(!0),[l,c]=M(null),[d,u]=M([]),[h,m]=M(new Set),[f,g]=M({}),p=te(new bw),v=te(new ww),b=te(e);U(()=>{b.current=e},[e]),U(()=>{if(!e?.connection)return;console.log(" [DataProvider] Subscribing to state_changed events...");const L=e.connection.subscribeMessage(E=>{if(E?.event_type==="state_changed"&&E?.data){const{entity_id:W,new_state:F}=E.data;if(!F||!W)return;I(W,F)}},{type:"subscribe_events",event_type:"state_changed"});return()=>{console.log(" [DataProvider] Unsubscribing from state_changed events"),L.then(E=>E())}},[e?.connection]),U(()=>{const L=()=>{console.log(" Excluded patterns changed, reloading entities..."),b.current?N():k()};return window.addEventListener("excludedPatternsChanged",L),()=>window.removeEventListener("excludedPatternsChanged",L)},[]),U(()=>{const L=()=>{console.log(" System entity registered, updating entities list..."),y()},E=()=>{console.log(" System entity unregistered, updating entities list..."),y()};return _e.on("entity-registered",L),_e.on("entity-unregistered",E),()=>{_e.off("entity-registered",L),_e.off("entity-unregistered",E)}},[]),U(()=>{const L=E=>{const{entity_id:W,attributes:F}=E.detail;u(K=>{const G=K.findIndex($=>$.entity_id===W);if(G!==-1){const $=[...K];return $[G]={...$[G],attributes:{...$[G].attributes,...F}},$}return K})};return window.addEventListener("system-entity-updated",L),()=>{window.removeEventListener("system-entity-updated",L)}},[]);const y=()=>{u(L=>{const E=_e.getAsHomeAssistantEntities(),W=L.filter(F=>!F.is_system);return[...E,...W]})};U(()=>{w()},[]);const w=async()=>{try{a(!0),await p.current.init(),console.log(" Initializing System-Entity Registry...");try{await _e.initialize({hass:b.current,storage:{get:E=>localStorage.getItem(E),set:(E,W)=>localStorage.setItem(E,W),delete:E=>localStorage.removeItem(E),clearNamespace:E=>{Object.keys(localStorage).forEach(W=>{W.startsWith(E)&&localStorage.removeItem(W)})}}});const L=_e.getAsHomeAssistantEntities();console.log(` Loaded ${L.length} system entities`),console.log("System entity IDs:",L.map(E=>E.entity_id)),u(L),console.log(" System entities set as initial entities")}catch(L){console.error("Failed to initialize system registry:",L)}await _(),r(!0),k()}catch(L){console.error("Failed to initialize DataProvider:",L),c(L.message)}finally{a(!1)}},_=async()=>{await Sw(p.current,v.current,g,m)},k=async()=>{await Nw(p.current,v.current,b,u,N)},N=async()=>{if(b.current)try{console.log("Loading entities from Home Assistant...");const[L,E,W]=await Promise.all([ap(b.current),lp(b.current),cp(b.current)]);console.log("Loaded registries:",{areas:L.length,devices:E.length,entities:W.length});const K=Object.values(b.current.states||{}).map(X=>({entity_id:X.entity_id,domain:X.entity_id.split(".")[0],state:X.state,attributes:X.attributes,last_changed:X.last_changed,last_updated:X.last_updated,context:X.context,relevance_score:0,usage_count:0,last_used:null}));console.log("Enriching entities with area information...");const G=up(K,L,E,W);console.log("Entities enriched with areas:",{total:G.length,withArea:G.filter(X=>X.area).length,withoutArea:G.filter(X=>!X.area).length});const $=await _w(p.current,G),Q=gw(),re=$.filter(X=>!(["unavailable","unknown","disabled","None"].includes(X.state)||X.attributes?.disabled===!0||X.entity_id&&X.entity_id.startsWith("disabled_")));console.log("Filtered out inactive entities:",{total:$.length,active:re.length,filtered:$.length-re.length});const he=parseInt(localStorage.getItem("maxEntitiesLimit")||"0");let O=re.filter(X=>X.area!=null&&X.area!=="").sort((X,me)=>me.relevance_score-X.relevance_score);he>0&&(O=O.slice(0,he));let H=[...Q,...O];H=hp(H);for(const X of O)X.is_system||await p.current.put(ze.ENTITIES,X);u(H),H.slice(0,20).forEach(X=>{v.current.cache.entities.set(X.entity_id,X)}),await Cw(p.current,H),console.log(`Loaded ${O.length} HA entities + ${Q.length} system entities`)}catch(L){console.error("Failed to load entities from HA:",L)}},C=Ee(async L=>{if(!L){console.warn("toggleFavorite called without entityId");return}const E=new Set(h);try{E.has(L)?(E.delete(L),await p.current.delete(ze.FAVORITES,L),await Us(p.current,v.current,"unfavorite",L)):(E.add(L),await p.current.put(ze.FAVORITES,{entity_id:L,added_date:new Date().toISOString(),usage_count:0}),await Us(p.current,v.current,"favorite",L)),m(E),v.current.set("favorites",E)}catch(W){console.error("Failed to toggle favorite:",W)}},[h]),S=Ee(async(L,E)=>{const W={...f,[L]:E};v.current.set("settings",W),g(W),await p.current.put(ze.SETTINGS,{key:"user_preferences",value:W,updated:new Date().toISOString()}),console.log(`Setting updated: ${L} = ${E}`)},[f]),x=Ee(async L=>{if(!L||L.length<2)return[];if(v.current.cache.searchCache.has(L))return v.current.cache.searchCache.get(L);const E=L.toLowerCase().split(/\s+/).filter(K=>K.length>1),W=new Map;for(const K of E){const G=await p.current.get(ze.SEARCH_INDEX,K);if(G)for(const $ of G.matches){const Q=W.get($.entity_id)||0;W.set($.entity_id,Q+$.score)}}const F=Array.from(W.entries()).sort((K,G)=>G[1]-K[1]).slice(0,20).map(([K])=>d.find(G=>G.entity_id===K)).filter(Boolean);return v.current.cache.searchCache.set(L,F),F},[d]),B=Ee(async()=>Lw(p.current,d),[d]),A=Ee(async(L,E,W={})=>{if(!b.current)return console.warn("No Home Assistant connection"),!1;try{return await b.current.callService(L,E,W),W.entity_id&&Us(p.current,v.current,"service_call",W.entity_id,{domain:L,service:E}),!0}catch(F){return console.error("Service call failed:",F),!1}},[]),P=async()=>{const L=new Date;let E=[];d&&d.length>0?E=d.slice(0,Math.min(10,d.length)).map(F=>F.entity_id||F.id):E=["light.wohnzimmer","light.schlafzimmer","switch.kaffeemaschine","climate.heizung_wohnzimmer","cover.rolladen_wohnzimmer"];for(let F=0;F<30;F++)for(const K of E){const G=Math.floor(Math.random()*3)+2;for(let $=0;$<G;$++){const Q=new Date(L);Q.setDate(Q.getDate()-F);const re=L.getHours(),he=L.getMinutes();$===0?(Q.setHours(re),Q.setMinutes(he)):$===1?(Q.setHours(re),Q.setMinutes(Math.max(0,he-30))):(Q.setHours(re+(Math.random()-.5)),Q.setMinutes(Math.floor(Math.random()*60)));const O={action_type:"device_click",entity_id:K,timestamp:Q.toISOString(),context:{time_of_day:Q.getHours()<12?"morning":Q.getHours()<18?"afternoon":"evening",hour:Q.getHours(),minute:Q.getMinutes(),day_of_week:Q.getDay(),week_of_year:Math.ceil((Q-new Date(Q.getFullYear(),0,1))/6048e5),is_weekend:Q.getDay()===0||Q.getDay()===6}};try{await p.current.put(ze.USER_PATTERNS,O)}catch{}}}return await B()},I=Ee((L,E)=>{if(!L||!E){console.warn("[DataProvider] updateEntityState called with invalid data:",{entity_id:L,new_state:E});return}u(W=>{const F=W.findIndex(G=>G.entity_id===L),K=[...W];if(F!==-1){const G=K[F];K[F]={...G,state:E.state,attributes:{...G.attributes,...E.attributes},last_changed:E.last_changed,last_updated:E.last_updated,context:E.context}}else{const G=L.split(".")[0];K.push({entity_id:L,domain:G,state:E.state,attributes:E.attributes||{},last_changed:E.last_changed,last_updated:E.last_updated,context:E.context,relevance_score:0,usage_count:0,last_used:null})}return K})},[]),z=Ee(async(L,E,W={})=>{try{p.current&&v.current&&await Us(p.current,v.current,L,E,W)}catch(F){console.warn("Failed to record user action:",F)}},[]),D={isInitialized:n,isLoading:o,error:l,entities:d,favorites:h,settings:f,cache:v.current,toggleFavorite:C,updateSetting:S,searchEntities:x,callService:A,calculateSuggestions:B,updateEntityState:I,recordUserAction:z,db:p.current,generateTestPatterns:P,hass:b.current};return s(mp.Provider,{value:D,children:t})},At=()=>{const t=tt(mp);if(!t)throw new Error("useData must be used within DataProvider");return t},fp=()=>{const{settings:t,updateSetting:e}=At();return[t,e]},Tw=()=>{const{favorites:t,toggleFavorite:e}=At();return[t,e]},sc=()=>{const{entities:t,searchEntities:e}=At();return[t,e]},Ew=()=>{const{hass:t,callService:e}=At();return[t,e]},Dw=()=>{const{calculateSuggestions:t}=At(),[e,i]=M([]),[n,r]=M(!1),o=Ee(async()=>{r(!0);try{const l=await t();i(l)}catch(l){console.error("Failed to load suggestions:",l),i([])}finally{r(!1)}},[t]);return U(()=>{o()},[]),U(()=>{const l=setInterval(o,3e5);return()=>clearInterval(l)},[o]),U(()=>{const l=c=>{console.log("Predictive settings changed:",c.detail),o()};return window.addEventListener("predictiveSettingChanged",l),()=>{window.removeEventListener("predictiveSettingChanged",l)}},[o]),[localStorage.getItem("predictiveSuggestions")!=="false"?e:[],n,o]},Qn={SINGLE:"single",REPEAT:"repeat"},Aw={MONDAY:{key:"mon",label:"Montag",labelEn:"Monday",labelShort:"Mo",labelShortEn:"Mon"},TUESDAY:{key:"tue",label:"Dienstag",labelEn:"Tuesday",labelShort:"Di",labelShortEn:"Tue"},WEDNESDAY:{key:"wed",label:"Mittwoch",labelEn:"Wednesday",labelShort:"Mi",labelShortEn:"Wed"},THURSDAY:{key:"thu",label:"Donnerstag",labelEn:"Thursday",labelShort:"Do",labelShortEn:"Thu"},FRIDAY:{key:"fri",label:"Freitag",labelEn:"Friday",labelShort:"Fr",labelShortEn:"Fri"},SATURDAY:{key:"sat",label:"Samstag",labelEn:"Saturday",labelShort:"Sa",labelShortEn:"Sat"},SUNDAY:{key:"sun",label:"Sonntag",labelEn:"Sunday",labelShort:"So",labelShortEn:"Sun"}},Oo=["mon","tue","wed","thu","fri","sat","sun"],pp={LIGHT:{TURN_ON:{service:"turn_on",label:"Einschalten",labelEn:"Turn On"},TURN_OFF:{service:"turn_off",label:"Ausschalten",labelEn:"Turn Off"}},SWITCH:{TURN_ON:{service:"turn_on",label:"Einschalten",labelEn:"Turn On"},TURN_OFF:{service:"turn_off",label:"Ausschalten",labelEn:"Turn Off"}},CLIMATE:{SET_TEMPERATURE:{service:"set_temperature",label:"Temperatur setzen",labelEn:"Set Temperature"},TURN_ON:{service:"turn_on",label:"Einschalten",labelEn:"Turn On"},TURN_OFF:{service:"turn_off",label:"Ausschalten",labelEn:"Turn Off"}},COVER:{OPEN:{service:"open_cover",label:"ffnen",labelEn:"Open"},CLOSE:{service:"close_cover",label:"Schlieen",labelEn:"Close"},SET_POSITION:{service:"set_cover_position",label:"Position setzen",labelEn:"Set Position"},STOP:{service:"stop_cover",label:"Stoppen",labelEn:"Stop"}},MEDIA_PLAYER:{TURN_ON:{service:"turn_on",label:"Einschalten",labelEn:"Turn On"},TURN_OFF:{service:"turn_off",label:"Ausschalten",labelEn:"Turn Off"},PLAY:{service:"media_play",label:"Abspielen",labelEn:"Play"},PAUSE:{service:"media_pause",label:"Pausieren",labelEn:"Pause"}}},Xi={MIN_SCHEDULES:2,MAX_SCHEDULES:8,MIN_TIMERS:1,MAX_TIMERS:4},Bn={MINUTE_IN_MS:6e4,HOUR_IN_MS:36e5},Fw=(t,e="de")=>!t||t.length===0?e==="en"?"No days":"Keine Tage":t.length===7?e==="en"?"Daily":"Tglich":t.length===5&&t.includes("mon")&&t.includes("tue")&&t.includes("wed")&&t.includes("thu")&&t.includes("fri")?e==="en"?"Weekdays":"Werktags":t.length===2&&t.includes("sat")&&t.includes("sun")?e==="en"?"Weekend":"Wochenende":t.map(n=>{const r=Object.values(Aw).find(o=>o.key===n);return r?e==="en"?r.labelShortEn:r.labelShort:n}).join(", "),Pw=t=>{const e=new Date,n=new Date(t)-e;if(n<=0)return{hours:0,minutes:0,seconds:0,isPast:!0};const r=Math.floor(n/Bn.HOUR_IN_MS),o=Math.floor(n%Bn.HOUR_IN_MS/Bn.MINUTE_IN_MS),a=Math.floor(n%Bn.MINUTE_IN_MS/1e3);return{hours:r,minutes:o,seconds:a,isPast:!1}},Nu=(t,e)=>`${String(t).padStart(2,"0")}:${String(e).padStart(2,"0")}`,Lu=(t,e,i="de")=>{if(!t)return e;const n=pp[t.toUpperCase()];if(!n)return e;const r=Object.values(n).find(o=>o.service===e);return r?i==="en"?r.labelEn:r.label:e},Iw=async(t,e)=>{if(!t||!e)return console.warn("fetchSchedules: hass oder entityId fehlt"),[];try{console.log(` Lade Schedules fr ${e}...`);let i=[],n=[];if(t.states)console.log(" Suche in States nach switch.schedule_* Entities"),n=Object.values(t.states);else if(t.connection&&t.connection.sendMessagePromise)console.log(" States nicht verfgbar, lade via sendMessagePromise..."),n=await t.connection.sendMessagePromise({type:"get_states"});else if(t.callWS)console.log(" States nicht verfgbar, lade via callWS..."),n=await t.callWS({type:"get_states"});else return console.error(" Keine Methode zum Laden der States gefunden!"),[];if(n.length===0)return console.warn(" Keine States geladen!"),[];console.log(` ${n.length} States geladen`);const r=n.filter(a=>a.entity_id.startsWith("switch.schedule_"));return console.log(` Gefundene switch.schedule_* entities: ${r.length}`),i=r.filter(a=>{const l=a.attributes?.entities||[],c=l.includes(e);return console.log(` Check ${a.entity_id}:`,{entities:l,match:c,weekdays:a.attributes?.weekdays,timeslots:a.attributes?.timeslots,actions:a.attributes?.actions}),c}).map(a=>({schedule_id:a.entity_id,name:a.attributes.friendly_name||a.entity_id,entity_id:e,enabled:a.state==="on",weekdays:a.attributes.weekdays||[],timeslots:a.attributes.timeslots||[],actions:a.attributes.actions||[],entities:a.attributes.entities||[],repeat_type:Rw(a.attributes),time:a.attributes.timeslots?.[0]||"00:00",...a.attributes})),console.log(` ${i.length} passende Schedules gefunden fr ${e}`),i.length===0&&console.warn(` Keine Schedules fr ${e} gefunden`),i}catch(i){return console.error(" Fehler beim Laden der Schedules:",i),[]}},Rw=t=>{const e=t?.weekdays||[];return e.includes("daily")||e.length>1||e.length===1&&e[0]!=="daily",Qn.REPEAT},Bw=t=>{if(!t||!t.entity_id)return console.warn("generateMockSchedules: item oder entity_id fehlt"),[];console.log(` Generiere Mock-Schedules fr ${t.entity_id}`);const e=[],i=[],n=Math.floor(Math.random()*(Xi.MAX_SCHEDULES-Xi.MIN_SCHEDULES+1))+Xi.MIN_SCHEDULES;for(let a=0;a<n;a++){const l=Math.floor(Math.random()*24),c=Math.floor(Math.random()*60),d=Ww(),u=Mu(t.domain);e.push({schedule_id:`schedule_mock_${t.entity_id}_${a}`,name:`${t.name||t.entity_id} - ${Nu(l,c)}`,entity_id:t.entity_id,enabled:Math.random()>.3,repeat_type:Qn.REPEAT,weekdays:d,time:Nu(l,c),action:u.service,service_data:u.data||{},next_execution:Ow(l,c,d)})}const r=Math.floor(Math.random()*(Xi.MAX_TIMERS-Xi.MIN_TIMERS+1))+Xi.MIN_TIMERS;for(let a=0;a<r;a++){const l=new Date(Date.now()+Math.random()*3*Bn.HOUR_IN_MS),c=Mu(t.domain);i.push({schedule_id:`timer_mock_${t.entity_id}_${a}`,name:`Timer: ${t.name||t.entity_id}`,entity_id:t.entity_id,enabled:!0,repeat_type:Qn.SINGLE,execution_time:l.toISOString(),action:c.service,service_data:c.data||{},remaining_time:Pw(l.toISOString())})}const o=[...e,...i];return console.log(` ${e.length} Schedules + ${i.length} Timer generiert`),o},zw=(t,e,i)=>{if(!t||t.length===0)return console.warn("transformToScheduleObject: Keine Schedules vorhanden"),{activeSchedules:[],activeTimers:[],stats:{totalSchedules:0,activeSchedules:0,totalTimers:0,activeTimers:0}};console.log(` Transformiere ${t.length} Schedules fr ${e}`);const n=t.filter(c=>{const d=c.name||c.attributes?.friendly_name||"";return!d.toLowerCase().startsWith("timer")&&!d.toLowerCase().includes("timer:")}),r=t.filter(c=>{const d=c.name||c.attributes?.friendly_name||"";return d.toLowerCase().startsWith("timer")||d.toLowerCase().includes("timer:")});console.log(` Kategorisierung: ${n.length} Schedules, ${r.length} Timer`);const o=n.map(c=>{const d=c.timeslots?.[0]||"00:00",u=c.actions?.[0]||{},h=u.service||"turn_on",m=h.includes(".")?h.split(".")[1]:h,f=c.entities||[],g=f[0]||e,p=g?g.split(".")[0]:i||"unknown";return{id:c.schedule_id,type:"schedule",name:c.name,time:d.slice(0,5),days:Fw(c.weekdays||[]),daysRaw:c.weekdays||[],action:Lu(p,m),actionRaw:h,enabled:c.enabled!==!1,nextExecution:c.next_execution,serviceData:u.data||u.service_data||{},domain:p,entities:f}}),a=r.map(c=>{const d=c.timeslots?.[0]||"00:00",u=c.actions?.[0]||{},h=u.service||"turn_on",m=h.includes(".")?h.split(".")[1]:h,f=new Date,[g,p]=d.split(":").map(S=>parseInt(S)),v=new Date;v.setHours(g,p,0,0),v<=f&&v.setDate(v.getDate()+1);const b=v.getTime()-f.getTime(),y=Math.floor(b/6e4),w=Math.floor(y/60),_=y%60,k=c.entities||[],N=k[0]||e,C=N?N.split(".")[0]:i||"unknown";return{id:c.schedule_id,type:"timer",name:c.name,time:d.slice(0,5),executionTime:v.toISOString(),action:Lu(C,m),actionRaw:h,enabled:c.enabled!==!1,remaining:y,remainingTime:{hours:w,minutes:_,isPast:y<0},isPast:y<0,serviceData:u.data||u.service_data||{},domain:C,entities:k}}),l={totalSchedules:n.length,activeSchedules:n.filter(c=>c.enabled!==!1).length,totalTimers:r.length,activeTimers:r.filter(c=>c.enabled!==!1).length};return console.log(" Transformation abgeschlossen:",{schedules:o.length,timers:a.length,stats:l}),{activeSchedules:o,activeTimers:a,stats:l}},gp=async(t,e)=>{if(!t||!e)return console.warn("createSchedule: hass oder scheduleData fehlt"),!1;try{return console.log(" Erstelle neuen Schedule:",e),t.callService?(await t.callService("scheduler","add",e),console.log(" Schedule erfolgreich erstellt"),!0):(console.warn(" Keine Methode zum Erstellen verfgbar"),!1)}catch(i){return console.error(" Fehler beim Erstellen des Schedules:",i),!1}},Vw=async(t,e)=>{if(!t||!e)return console.warn("deleteSchedule: hass oder scheduleId fehlt"),!1;try{return console.log(` Lsche Schedule ${e}`),t.callService?(await t.callService("scheduler","remove",{entity_id:e}),console.log(" Schedule erfolgreich gelscht"),!0):(console.warn(" Keine Methode zum Lschen verfgbar"),!1)}catch(i){return console.error(" Fehler beim Lschen des Schedules:",i),!1}},Ww=()=>{const t=Math.random();if(t>.7)return["daily"];if(t>.5)return["mon","tue","wed","thu","fri"];if(t>.3)return["sat","sun"];{const e=Math.floor(Math.random()*4)+2;return[...Oo].sort(()=>Math.random()-.5).slice(0,e).sort((n,r)=>Oo.indexOf(n)-Oo.indexOf(r))}},Mu=t=>{const e=t?.toUpperCase()||"LIGHT",i=pp[e];if(!i)return{service:"turn_on",data:{}};const n=Object.keys(i),r=n[Math.floor(Math.random()*n.length)],o=i[r];let a={};return t==="light"&&o.service==="turn_on"?a.brightness=Math.floor(Math.random()*255):t==="climate"&&o.service==="set_temperature"&&(a.temperature=18+Math.floor(Math.random()*8)),{service:o.service,data:a}},Ow=(t,e,i)=>{if(!i||i.length===0)return null;const n=new Date,r=n.getDay(),o=n.getHours(),a=n.getMinutes(),l=["sun","mon","tue","wed","thu","fri","sat"];for(let d=0;d<7;d++){const u=(r+d)%7,h=l[u];if((i.includes(h)||i.includes("daily"))&&!(d===0&&(o>t||o===t&&a>=e))){const g=new Date(n);return g.setDate(n.getDate()+d),g.setHours(t,e,0,0),g.toISOString()}}const c=new Date(n);return c.setDate(n.getDate()+7),c.setHours(t,e,0,0),c.toISOString()},$w=async(t,e,i)=>{if(console.log(" handleTimerCreate called with:",i),!t)return console.warn(" No hass available, cannot create timer"),!1;if(!e||!e.entity_id)return console.warn(" No valid item provided"),!1;try{const n={weekdays:i.weekdays||[],timeslots:[{start:i.time||"00:00",actions:[{service:`${e.domain}.${i.action||"turn_on"}`,entity_id:e.entity_id,service_data:i.serviceData||{}}]}],name:i.name||`Timer: ${e.name||e.entity_id}`,repeat_type:"single"},r=await gp(t,n);return r?(console.log(" Timer erfolgreich erstellt! Warte kurz vor Reload..."),await new Promise(o=>setTimeout(o,500))):console.error(" Timer konnte nicht erstellt werden"),r}catch(n){return console.error(" Error creating timer:",n),!1}},Hw=async(t,e,i)=>{if(console.log(" handleScheduleCreate called with:",i),!t)return console.warn(" No hass available, cannot create schedule"),!1;if(!e||!e.entity_id)return console.warn(" No valid item provided"),!1;try{const n={weekdays:i.weekdays||[],timeslots:[{start:i.time||"00:00",actions:[{service:`${e.domain}.${i.action||"turn_on"}`,entity_id:e.entity_id,service_data:i.serviceData||{}}]}],name:i.name||`Schedule: ${e.name||e.entity_id}`,repeat_type:"repeat"};console.log(" Sende an Scheduler Component:",n);const r=await gp(t,n);return r?(console.log(" Schedule erfolgreich erstellt! Warte kurz vor Reload..."),await new Promise(o=>setTimeout(o,500))):console.error(" Schedule konnte nicht erstellt werden"),r}catch(n){return console.error(" Error creating schedule:",n),!1}},Gs={heat:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="6" stroke-linecap="round" stroke-linejoin="round"/><path d="M22 12L23 12M12 2V1M12 23V22M20 20L19 19M20 4L19 5M4 20L5 19M4 4L5 5M1 12L2 12" stroke-linecap="round" stroke-linejoin="round"/></svg>',cool:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 7L6.5 9M21 17L17.5 15M12 12L6.5 9M12 12L6.5 15M12 12V5M12 12V18.5M12 12L17.5 15M12 12L17.5 9M12 2V5M12 22V18.5M21 7L17.5 9M3 17L6.5 15M6.5 9L3 10M6.5 9L6 5.5M6.5 15L3 14M6.5 15L6 18.5M12 5L9.5 4M12 5L14.5 4M12 18.5L14.5 20M12 18.5L9.5 20M17.5 15L18 18.5M17.5 15L21 14M17.5 9L21 10M17.5 9L18 5.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',dry:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M20 14C20 9.58172 12 2 12 2C12 2 4 9.58172 4 14C4 18.4183 7.58172 22 12 22C16.4183 22 20 18.4183 20 14Z"/></svg>',fan_only:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M18.2785 7C19.7816 7 21 8.11929 21 9.5C21 10.8807 19.7816 12 18.2785 12H3M17.9375 20C19.0766 20 20.5 19.5 20.5 17.5C20.5 15.5 19.0766 15 17.9375 15H3M10.4118 4C11.8412 4 13 5.11929 13 6.5C13 7.88071 11.8412 9 10.4118 9H3" stroke-linecap="round" stroke-linejoin="round"/></svg>'},mt={brightness:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>',thermometer:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="2"><path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"/></svg>',palette:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="2"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/></svg>',settings:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6m4.22-13.22l4.24 4.24M1.54 1.54l4.24 4.24M20.46 20.46l-4.24-4.24M1.54 20.46l4.24-4.24"/></svg>',settings_climate:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="1.5"><path d="M13.9922 17H16.9922M19.9922 17H16.9922M16.9922 17V14M16.9922 17V20" stroke-linecap="round" stroke-linejoin="round"/><path d="M4 9.4V4.6C4 4.26863 4.26863 4 4.6 4H9.4C9.73137 4 10 4.26863 10 4.6V9.4C10 9.73137 9.73137 10 9.4 10H4.6C4.26863 10 4 9.73137 4 9.4Z"/><path d="M4 19.4V14.6C4 14.2686 4.26863 14 4.6 14H9.4C9.73137 14 10 14.2686 10 14.6V19.4C10 19.7314 9.73137 20 9.4 20H4.6C4.26863 20 4 19.7314 4 19.4Z"/><path d="M14 9.4V4.6C14 4.26863 14.2686 4 14.6 4H19.4C19.7314 4 20 4.26863 20 4.6V9.4C20 9.73137 19.7314 10 19.4 10H14.6C14.2686 10 14 9.73137 14 9.4Z"/></svg>',play:'<svg width="24" height="24" viewBox="0 0 24 24" fill="white"><polygon points="5 3 19 12 5 21 5 3"/></svg>',pause:'<svg width="24" height="24" viewBox="0 0 24 24" fill="white"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>',skip_back:'<svg width="24" height="24" viewBox="0 0 24 24" fill="white"><polygon points="11 19 2 12 11 5 11 19"/><polygon points="22 19 13 12 22 5 22 19"/></svg>',skip_forward:'<svg width="24" height="24" viewBox="0 0 24 24" fill="white"><polygon points="13 19 22 12 13 5 13 19"/><polygon points="2 19 11 12 2 5 2 19"/></svg>',tv:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="2"><rect x="2" y="7" width="20" height="15" rx="2" ry="2"/><polyline points="17 2 12 7 7 2"/></svg>',info:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>',lock:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>',unlock:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" strokeWidth="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 9.9-1"/></svg>'},jw=(t,e,i,n="de")=>{const r=o=>ee(`controls.${o}`,n);if(e==="temperature"){const o=parseFloat(t);return isNaN(o)?"":i==="F"?o<50?r("cold"):o<68?r("cool"):o<77?r("comfortable"):o<86?r("warm"):r("hot"):o<10?r("cold"):o<20?r("cool"):o<25?r("comfortable"):o<30?r("warm"):r("hot")}if(e==="humidity"){const o=parseFloat(t);return isNaN(o)?"":o<30?r("veryDry"):o<40?r("dry"):o<60?r("optimal"):o<70?r("humid"):r("veryHumid")}if(e==="battery"){const o=parseFloat(t);return isNaN(o)?"":o<20?r("critical"):o<40?r("low"):o<60?r("medium"):o<80?r("good"):r("full")}if(e==="power"||e==="energy"){const o=parseFloat(t);return isNaN(o)?"":o===0?r("off"):o<100?r("minimal"):o<500?r("low"):o<1e3?r("medium"):o<3e3?r("high"):r("veryHigh")}if(e==="carbon_dioxide"){const o=parseFloat(t);return isNaN(o)?"":o<400?r("excellent"):o<600?r("good"):o<1e3?r("acceptable"):o<1500?r("moderate"):r("poor")}return""},Uw=(t,e="de")=>{const i=t?.attributes?.device_class||t?.entity?.attributes?.device_class,n=t?.entity_id||t?.id||"",r=o=>ee(`controls.${o}`,e);return i==="temperature"?r("temperature"):i==="humidity"?r("humidity"):i==="battery"?r("battery"):i==="power"?r("power"):i==="energy"?r("energy"):i==="carbon_dioxide"?r("co2"):i==="motion"?r("movement"):i==="door"?r("door"):i==="window"?r("window"):i==="presence"?r("presence"):n.includes("temperature")||n.includes("temperatur")?r("temperature"):n.includes("humidity")||n.includes("feuchtigkeit")?r("humidity"):n.includes("power")||n.includes("leistung")?r("power"):n.includes("energy")||n.includes("energie")?r("energy"):n.includes("battery")||n.includes("batterie")?r("battery"):n.includes("co2")?r("co2"):n.includes("solar")?r("solar"):r("sensor")},Gw=(t,e="C")=>{let i=parseFloat(t);return e==="F"&&(i=(i-32)*5/9),i<16?"#0288D1":i<18?"#03A9F4":i<20?"#00BCD4":i<22?"#4CAF50":i<24?"#8BC34A":i<26?"#FFC107":i<28?"#FF9800":i<30?"#FF5722":"#F44336"},Ks=(t,e)=>{const i=t?.supported_features||0,n=t?.supported_color_modes||[],r=1,o=2,a=4,l=16;switch(e){case"brightness":return i&r||n.includes("brightness")||n.includes("color_temp")||n.includes("hs")||n.includes("xy")||n.includes("rgb")||n.includes("rgbw")||n.includes("rgbww");case"colortemp":return i&o||n.includes("color_temp");case"color":return i&l||n.includes("hs")||n.includes("xy")||n.includes("rgb")||n.includes("rgbw")||n.includes("rgbww");case"effects":return i&a||t?.effect_list&&t.effect_list.length>0;default:return!1}},Kw=(t,e="de")=>{const i=String(t).toLowerCase();return{idle:e==="de"?"Leerlauf":"Idle",offline:"Offline",unavailable:e==="de"?"Nicht verfgbar":"Unavailable",unknown:e==="de"?"Unbekannt":"Unknown",bereit:e==="de"?"Bereit":"Ready",ready:e==="de"?"Bereit":"Ready",printing:e==="de"?"Druckt":"Printing",paused:e==="de"?"Pausiert":"Paused",error:e==="de"?"Fehler":"Error",complete:e==="de"?"Abgeschlossen":"Complete",finished:e==="de"?"Fertig":"Finished"}[i]||t},Ua=(t,e="de")=>{const i=t?.domain||"unknown",n=t?.entity?.state||t?.state,r=t?.entity?.attributes||t?.attributes||{},o=a=>ee(`controls.${a}`,e);switch(i){case"switch":return{primary:[],expandable:[]};case"light":const a=[],l=[];return Ks(r,"brightness")&&(a.push({id:"brightness",icon:mt.brightness,label:o("brightness"),expandable:!0}),l.push({id:"brightness",service:"turn_on",items:[{label:"10%",data:{brightness_pct:10},style:{background:"rgba(255, 255, 255, 0.1)"}},{label:"25%",data:{brightness_pct:25},style:{background:"rgba(255, 255, 255, 0.25)"}},{label:"50%",data:{brightness_pct:50},style:{background:"rgba(255, 255, 255, 0.5)"}},{label:"75%",data:{brightness_pct:75},style:{background:"rgba(255, 255, 255, 0.75)"}},{label:"100%",data:{brightness_pct:100},style:{background:"rgba(255, 215, 0, 0.9)"}}]})),Ks(r,"colortemp")&&(a.push({id:"colortemp",icon:mt.thermometer,label:o("colorTemperature"),expandable:!0}),l.push({id:"colortemp",service:"turn_on",items:[{label:o("veryWarm"),data:{color_temp_kelvin:2e3},style:{background:"#ff8c42"}},{label:o("warm"),data:{color_temp_kelvin:2700},style:{background:"#ffb366"}},{label:o("neutral"),data:{color_temp_kelvin:3500},style:{background:"#ffd4a3"}},{label:o("cold"),data:{color_temp_kelvin:5e3},style:{background:"#e8e4ff"}},{label:o("daylight"),data:{color_temp_kelvin:6500},style:{background:"#d4e4ff"}}]})),Ks(r,"color")&&(a.push({id:"color",icon:mt.palette,label:o("color"),expandable:!0}),l.push({id:"color",service:"turn_on",items:[{label:e==="de"?"Rot":"Red",data:{rgb_color:[255,0,0]},style:{background:"#ff0000"}},{label:e==="de"?"Grn":"Green",data:{rgb_color:[0,255,0]},style:{background:"#00ff00"}},{label:e==="de"?"Blau":"Blue",data:{rgb_color:[0,0,255]},style:{background:"#0000ff"}},{label:e==="de"?"Gelb":"Yellow",data:{rgb_color:[255,255,0]},style:{background:"#ffff00"}},{label:"Cyan",data:{rgb_color:[0,255,255]},style:{background:"#00ffff"}},{label:"Magenta",data:{rgb_color:[255,0,255]},style:{background:"#ff00ff"}},{label:"Orange",data:{rgb_color:[255,165,0]},style:{background:"#ffa500"}},{label:"Pink",data:{rgb_color:[255,192,203]},style:{background:"#ffc0cb"}}]})),Ks(r,"effects")&&(a.push({id:"effects",icon:mt.settings,label:o("effects"),expandable:!0}),l.push({id:"effects",service:"turn_on",items:r.effect_list?.slice(0,8).map(v=>({label:v,data:{effect:v},icon:""}))||[]})),a.length===0&&a.push({id:"info",icon:mt.info,label:e==="de"?"Einfaches Licht":"Simple Light",expandable:!1,disabled:!0}),{primary:a,expandable:l};case"climate":const c=[],d=r.hvac_modes||[],u={heat:{icon:Gs.heat,label:o("heating")||"Heizen"},cool:{icon:Gs.cool,label:o("cooling")||"Khlen"},dry:{icon:Gs.dry,label:o("drying")||"Entfeuchten"},fan_only:{icon:Gs.fan_only,label:o("fanOnly")||"Nur Lfter"}};return["heat","cool","dry","fan_only"].forEach(v=>{d.includes(v)&&u[v]&&c.push({id:`hvac_${v}`,icon:u[v].icon,label:u[v].label,action:"set_hvac_mode",data:{hvac_mode:v},active:r.hvac_mode===v})}),c.push({id:"settings",icon:mt.settings_climate,label:o("settings")||"Einstellungen",expandable:!0}),{primary:c,expandable:[{id:"settings",renderCustom:!0}]};case"printer3d_device":const h={controls:'<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="currentColor"><path d="M12 2V6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 18V22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M22 12H18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M6 12H2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4.92896 4.92896L7.75738 7.75738" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M16.2427 16.2427L19.0711 19.0711" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M19.071 4.92896L16.2426 7.75738" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M7.75732 16.2427L4.9289 19.0711" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',sensors:'<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="currentColor"><path d="M3 12H6L9 3L15 21L18 12H21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',diagnostics:'<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg" color="currentColor"><path d="M10.0503 10.6066L2.97923 17.6777C2.19818 18.4587 2.19818 19.725 2.97923 20.5061V20.5061C3.76027 21.2871 5.0266 21.2871 5.80765 20.5061L12.8787 13.435" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M10.0502 10.6066C9.20638 8.45358 9.37134 5.6286 11.1109 3.88909C12.8504 2.14957 16.0606 1.76777 17.8284 2.82843L14.7877 5.8691L14.5051 8.98014L17.6161 8.69753L20.6568 5.65685C21.7175 7.42462 21.3357 10.6349 19.5961 12.3744C17.8566 14.1139 15.0316 14.2789 12.8786 13.435" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',misc:'<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg" color="currentColor"><path d="M5.5 5C5.22386 5 5 4.77614 5 4.5C5 4.22386 5.22386 4 5.5 4C5.77614 4 6 4.22386 6 4.5C6 4.77614 5.77614 5 5.5 5Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5.5 10C5.22386 10 5 9.77614 5 9.5C5 9.22386 5.22386 9 5.5 9C5.77614 9 6 9.22386 6 9.5C6 9.77614 5.77614 10 5.5 10Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5.5 15C5.22386 15 5 14.7761 5 14.5C5 14.2239 5.22386 14 5.5 14C5.77614 14 6 14.2239 6 14.5C6 14.7761 5.77614 15 5.5 15Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 5C11.7239 5 11.5 4.77614 11.5 4.5C11.5 4.22386 11.7239 4 12 4C12.2761 4 12.5 4.22386 12.5 4.5C12.5 4.77614 12.2761 5 12 5Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 10C11.7239 10 11.5 9.77614 11.5 9.5C11.5 9.22386 11.7239 9 12 9C12.2761 9 12.5 9.22386 12.5 9.5C12.5 9.77614 12.2761 10 12 10Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 15C11.7239 15 11.5 14.7761 11.5 14.5C11.5 14.2239 11.7239 14 12 14C12.2761 14 12.5 14.2239 12.5 14.5C12.5 14.7761 12.2761 15 12 15Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 20C11.7239 20 11.5 19.7761 11.5 19.5C11.5 19.2239 11.7239 19 12 19C12.2761 19 12.5 19.2239 12.5 19.5C12.5 19.7761 12.2761 20 12 20Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M18.5 5C18.2239 5 18 4.77614 18 4.5C18 4.22386 18.2239 4 18.5 4C18.7761 4 19 4.22386 19 4.5C19 4.77614 18.7761 5 18.5 5Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M18.5 10C18.2239 10 18 9.77614 18 9.5C18 9.22386 18.2239 9 18.5 9C18.7761 9 19 9.22386 19 9.5C19 9.77614 18.7761 10 18.5 10Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M18.5 15C18.2239 15 18 14.7761 18 14.5C18 14.2239 18.2239 14 18.5 14C18.7761 14 19 14.2239 19 14.5C19 14.7761 18.7761 15 18.5 15Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>'};return{primary:[{id:"controls",icon:h.controls,label:e==="de"?"Steuerung":"Controls",expandable:!0},{id:"sensors",icon:h.sensors,label:e==="de"?"Sensoren":"Sensors",expandable:!0},{id:"diagnostics",icon:h.diagnostics,label:e==="de"?"Diagnose":"Diagnostics",expandable:!0},{id:"misc",icon:h.misc,label:e==="de"?"Sonstiges":"Miscellaneous",expandable:!0}],expandable:[{id:"controls",service:"button.press",items:[{label:e==="de"?"Fortsetzen":"Resume",data:{action:"resume"},customIcon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="currentColor" stroke-width="1.5"><path d="M6.90588 4.53682C6.50592 4.2998 6 4.58808 6 5.05299V18.947C6 19.4119 6.50592 19.7002 6.90588 19.4632L18.629 12.5162C19.0211 12.2838 19.0211 11.7162 18.629 11.4838L6.90588 4.53682Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',style:{background:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)"}},{label:e==="de"?"Pausieren":"Pause",data:{action:"pause"},customIcon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="currentColor" stroke-width="1.5"><path d="M6 18.4V5.6C6 5.26863 6.26863 5 6.6 5H9.4C9.73137 5 10 5.26863 10 5.6V18.4C10 18.7314 9.73137 19 9.4 19H6.6C6.26863 19 6 18.7314 6 18.4Z" fill="currentColor" stroke="currentColor" stroke-width="1.5"></path><path d="M14 18.4V5.6C14 5.26863 14.2686 5 14.6 5H17.4C17.7314 5 18 5.26863 18 5.6V18.4C18 18.7314 17.7314 19 17.4 19H14.6C14.2686 19 14 18.7314 14 18.4Z" fill="currentColor" stroke="currentColor" stroke-width="1.5"></path></svg>',style:{background:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)"}},{label:e==="de"?"Stoppen":"Stop",data:{action:"stop"},customIcon:'<svg width="24" height="24" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="currentColor"><path d="M21 3.6V20.4C21 20.7314 20.7314 21 20.4 21H3.6C3.26863 21 3 20.7314 3 20.4V3.6C3 3.26863 3.26863 3 3.6 3H20.4C20.7314 3 21 3.26863 21 3.6Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="currentColor"></path></svg>',style:{background:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)"}}]},{id:"sensors",renderCustom:!0},{id:"diagnostics",renderCustom:!0},{id:"misc",renderCustom:!0}]};case"energy_dashboard_device":const f={controls:'<svg width="24" height="24" viewBox="0 0 463 463" fill="currentColor" xmlns="http://www.w3.org/2000/svg" color="currentColor"><path d="M367.5,159c4.142,0,7.5-3.357,7.5-7.5v-32c0-0.278-0.018-0.552-0.047-0.822c-0.004-0.037-0.012-0.074-0.017-0.111 c-0.039-0.313-0.1-0.619-0.176-0.919c-0.015-0.061-0.03-0.121-0.046-0.181c-0.093-0.332-0.206-0.656-0.342-0.967 c-0.013-0.03-0.029-0.058-0.042-0.087c-0.132-0.291-0.282-0.57-0.448-0.839c-0.031-0.051-0.06-0.103-0.093-0.153 c-0.183-0.281-0.384-0.549-0.602-0.802c-0.044-0.052-0.092-0.101-0.138-0.152c-0.225-0.248-0.462-0.483-0.718-0.699 c-0.011-0.009-0.019-0.02-0.03-0.029l-0.026-0.022c-0.003-0.002-0.006-0.005-0.008-0.007l-95.292-79.41L253.5,3 c-1.417-1.889-3.639-3-6-3h-32c-2.361,0-4.583,1.111-6,3l-23.474,31.299l-95.292,79.41c-0.003,0.002-0.006,0.005-0.008,0.007 l-0.026,0.022c-0.011,0.009-0.019,0.02-0.03,0.029c-0.256,0.216-0.493,0.452-0.718,0.699c-0.046,0.051-0.093,0.1-0.138,0.152 c-0.218,0.253-0.419,0.521-0.602,0.802c-0.033,0.05-0.062,0.102-0.093,0.153c-0.166,0.269-0.317,0.548-0.448,0.839 c-0.013,0.029-0.029,0.057-0.042,0.087c-0.136,0.312-0.248,0.635-0.342,0.967c-0.017,0.06-0.031,0.12-0.046,0.181 c-0.076,0.3-0.137,0.606-0.176,0.919c-0.005,0.037-0.013,0.074-0.017,0.111C88.018,118.948,88,119.222,88,119.5v32 c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5V127h81v68.987l-93.267,77.722c-0.003,0.002-0.006,0.005-0.008,0.007l-0.026,0.022 c-0.011,0.009-0.019,0.02-0.03,0.029c-0.256,0.216-0.493,0.452-0.718,0.699c-0.046,0.051-0.093,0.1-0.138,0.152 c-0.218,0.253-0.419,0.521-0.602,0.802c-0.033,0.05-0.062,0.102-0.093,0.153c-0.166,0.269-0.317,0.548-0.448,0.839 c-0.013,0.029-0.029,0.057-0.042,0.087c-0.136,0.312-0.248,0.635-0.342,0.967c-0.017,0.06-0.031,0.12-0.046,0.181 c-0.076,0.3-0.137,0.606-0.176,0.919c-0.005,0.037-0.013,0.074-0.017,0.111C88.018,278.948,88,279.222,88,279.5v32 c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5V287h77.792l-58.545,161H111.5c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5h40 c4.142,0,7.5-3.357,7.5-7.5s-3.358-7.5-7.5-7.5h-8.173L231.5,340.233L319.673,448H319.5c-4.142,0-7.5,3.357-7.5,7.5 s3.358,7.5,7.5,7.5h40c4.142,0,7.5-3.357,7.5-7.5s-3.358-7.5-7.5-7.5h-18.747l-58.545-161H360v24.5c0,4.143,3.358,7.5,7.5,7.5 s7.5-3.357,7.5-7.5v-32c0-0.278-0.018-0.552-0.047-0.822c-0.004-0.037-0.012-0.074-0.017-0.111c-0.039-0.313-0.1-0.619-0.176-0.919 c-0.015-0.061-0.03-0.121-0.046-0.181c-0.093-0.332-0.206-0.656-0.342-0.967c-0.013-0.03-0.029-0.058-0.042-0.087 c-0.132-0.291-0.282-0.57-0.448-0.839c-0.031-0.051-0.06-0.103-0.093-0.153c-0.183-0.281-0.384-0.549-0.602-0.802 c-0.044-0.052-0.092-0.101-0.138-0.152c-0.225-0.248-0.462-0.483-0.718-0.699c-0.011-0.009-0.019-0.02-0.03-0.029l-0.026-0.022 c-0.003-0.002-0.006-0.005-0.008-0.007L279,195.987V127h81v24.5C360,155.643,363.358,159,367.5,159z M220.893,79.5L199,101.393 V57.607L220.893,79.5z M209.607,47h43.786L231.5,68.893L209.607,47z M209.607,112L231.5,90.107L253.393,112H209.607z M253.393,127 L231.5,148.893L209.607,127H253.393z M220.893,159.5L199,181.393v-43.786L220.893,159.5z M209.607,192l21.893-21.893L253.393,192 H209.607z M253.393,207L231.5,228.893L209.607,207H253.393z M220.893,239.5L199,261.393v-43.786L220.893,239.5z M231.5,250.107 L253.393,272h-43.786L231.5,250.107z M255.673,287L231.5,316.545L207.327,287H255.673z M242.107,239.5L264,217.607v43.786 L242.107,239.5z M242.107,159.5L264,137.607v43.786L242.107,159.5z M242.107,79.5L264,57.607v43.786L242.107,79.5z M219.25,15h24.5 l12.75,17h-50L219.25,15z M184,55.513V112h-67.785L184,55.513z M184,215.513V272h-67.785L184,215.513z M149.617,416.624 l44.426-122.172l27.766,33.937L149.617,416.624z M241.19,328.389l27.766-33.937l44.426,122.172L241.19,328.389z M279,272v-56.487 L346.785,272H279z M279,112V55.513L346.785,112H279z"/></svg>',sensors:'<svg width="24" height="24" viewBox="0 0 512 512" fill="currentColor" xmlns="http://www.w3.org/2000/svg" color="currentColor"><path d="M48 32h96v96H48zm128 0h96v96h-96zm128 0h96v96h-96zM48 160h96v96H48zm128 0h96v96h-96zm128 0h96v96h-96zM48 288h96v96H48zm128 0h96v96h-96zm128 0h96v96h-96zM80 416h288v32H80z"/></svg>',diagnostics:'<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg" color="currentColor"><path d="M5.5 5C5.22386 5 5 4.77614 5 4.5C5 4.22386 5.22386 4 5.5 4C5.77614 4 6 4.22386 6 4.5C6 4.77614 5.77614 5 5.5 5Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5.5 10C5.22386 10 5 9.77614 5 9.5C5 9.22386 5.22386 9 5.5 9C5.77614 9 6 9.22386 6 9.5C6 9.77614 5.77614 10 5.5 10Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5.5 15C5.22386 15 5 14.7761 5 14.5C5 14.2239 5.22386 14 5.5 14C5.77614 14 6 14.2239 6 14.5C6 14.7761 5.77614 15 5.5 15Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 5C11.7239 5 11.5 4.77614 11.5 4.5C11.5 4.22386 11.7239 4 12 4C12.2761 4 12.5 4.22386 12.5 4.5C12.5 4.77614 12.2761 5 12 5Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 10C11.7239 10 11.5 9.77614 11.5 9.5C11.5 9.22386 11.7239 9 12 9C12.2761 9 12.5 9.22386 12.5 9.5C12.5 9.77614 12.2761 10 12 10Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 15C11.7239 15 11.5 14.7761 11.5 14.5C11.5 14.2239 11.7239 14 12 14C12.2761 14 12.5 14.2239 12.5 14.5C12.5 14.7761 12.2761 15 12 15Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 20C11.7239 20 11.5 19.7761 11.5 19.5C11.5 19.2239 11.7239 19 12 19C12.2761 19 12.5 19.2239 12.5 19.5C12.5 19.7761 12.2761 20 12 20Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M18.5 5C18.2239 5 18 4.77614 18 4.5C18 4.22386 18.2239 4 18.5 4C18.7761 4 19 4.22386 19 4.5C19 4.77614 18.7761 5 18.5 5Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M18.5 10C18.2239 10 18 9.77614 18 9.5C18 9.22386 18.2239 9 18.5 9C18.7761 9 19 9.22386 19 9.5C19 9.77614 18.7761 10 18.5 10Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M18.5 15C18.2239 15 18 14.7761 18 14.5C18 14.2239 18.2239 14 18.5 14C18.7761 14 19 14.2239 19 14.5C19 14.7761 18.7761 15 18.5 15Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>'},g=[{id:"controls",icon:f.controls,label:e==="de"?"Verbrauch":"Consumption",expandable:!0},{id:"sensors",icon:f.sensors,label:"Solar",expandable:!0},{id:"diagnostics",icon:f.diagnostics,label:e==="de"?"Nettonutzung":"Net Usage",expandable:!0}],p=[{label:e==="de"?"Fortsetzen":"Resume",data:{action:"resume"},customIcon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="currentColor" stroke-width="1.5"><path d="M6.90588 4.53682C6.50592 4.2998 6 4.58808 6 5.05299V18.947C6 19.4119 6.50592 19.7002 6.90588 19.4632L18.629 12.5162C19.0211 12.2838 19.0211 11.7162 18.629 11.4838L6.90588 4.53682Z" fill="currentColor" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',style:{background:"rgba(255, 255, 255, 0.1)",color:"rgba(255, 255, 255, 0.9)"}}];return{primary:g,expandable:[{id:"controls",renderCustom:!0,service:"button.press",items:p},{id:"sensors",renderCustom:!0,service:"button.press",items:p},{id:"diagnostics",renderCustom:!0,service:"button.press",items:p}]};case"media_player":return{primary:[{id:"play",icon:n==="playing"?mt.pause:mt.play,label:o(n==="playing"?"pause":"play"),action:n==="playing"?"media_pause":"media_play"},{id:"previous",icon:mt.skip_back,label:o("previous"),action:"media_previous_track"},{id:"next",icon:mt.skip_forward,label:o("next"),action:"media_next_track"},{id:"source",icon:mt.tv,label:o("source"),expandable:!0}],expandable:[{id:"source",service:"select_source",items:(r.source_list||[]).slice(0,8).map(v=>({label:v,data:{source:v},icon:""}))}]};case"lock":return{primary:[{id:"lock",icon:n==="locked"?mt.unlock:mt.lock,label:o(n==="locked"?"unlock":"lock"),action:n==="locked"?"unlock":"lock",data:{}}],expandable:[]};case"cover":return{primary:[{id:"open",icon:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M6 15L12 9L18 15" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>`,label:o("open"),action:"open_cover",data:{}},{id:"stop",icon:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M17 4L12 9L7 4" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M17 20L12 15L7 20" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>`,label:o("stop"),action:"stop_cover",data:{}},{id:"close",icon:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M6 9L12 15L18 9" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>`,label:o("close"),action:"close_cover",data:{}},{id:"presets",icon:mt.settings_climate,label:o("position"),expandable:!0}],expandable:[{id:"presets",service:"set_cover_position",items:[{label:"0%",data:{position:0},style:{background:"rgba(255, 255, 255, 0.1)"}},{label:"25%",data:{position:25},style:{background:"linear-gradient(to top, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.25) 25%, rgba(255, 255, 255, 0.1) 25%)"}},{label:"50%",data:{position:50},style:{background:"linear-gradient(to top, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.25) 50%, rgba(255, 255, 255, 0.1) 50%)"}},{label:"75%",data:{position:75},style:{background:"linear-gradient(to top, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.25) 75%, rgba(255, 255, 255, 0.1) 75%)"}},{label:"100%",data:{position:100},style:{background:"rgba(255, 255, 255, 0.25)"}}]}]};case"scene":return{primary:[{id:"trigger",icon:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M13 10V3L5 14H11V21L19 10H13Z" />
            </svg>`,label:o("trigger")||"Auslsen",action:"turn_on",data:{}}],expandable:[]};case"script":return{primary:[{id:"trigger",icon:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M13 10V3L5 14H11V21L19 10H13Z" />
            </svg>`,label:o("trigger")||"Auslsen",action:"turn_on",data:{}}],expandable:[]};case"automation":return{primary:[{id:"trigger",icon:`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M13 10V3L5 14H11V21L19 10H13Z" />
            </svg>`,label:o("trigger")||"Auslsen",action:"trigger",data:{},disabled:n==="off"}],expandable:[]};default:return{primary:[],expandable:[]}}},Tu=(t,e="de")=>{const i=t?.domain||"unknown",n=t?.entity?.state||t?.state,r=t?.entity?.attributes||t?.attributes||{},o=a=>ee(`controls.${a}`,e);switch(i){case"scene":case"script":case"automation":return{value:n==="on"?100:0,min:0,max:100,unit:"%",label:i==="scene"?o("scene")||"Szene":i==="script"?o("script")||"Skript":o("automation")||"Automatisierung",displayValue:n==="on"?o("active")||"Aktiv":o("inactive")||"Inaktiv",color:"#9E9E9E",showPower:!0,powerState:n==="on",interactive:!1,progressMode:!0,readOnly:!0,hideSlider:!0,showUnit:!1};case"switch":return{value:n==="on"?100:0,min:0,max:100,unit:"%",label:o("control"),displayValue:o(n==="on"?"on":"off"),color:"#9E9E9E",showPower:!0,powerState:n==="on",interactive:!1,progressMode:!0,readOnly:!0,hideSlider:!0,showUnit:!1};case"light":const a=r.brightness||0;return{value:n==="off"?0:Math.round(a/255*100),min:0,max:100,unit:"%",label:o("brightness"),displayValue:n==="off"?o("off")||"Aus":null,color:n==="off"?"#9E9E9E":"#FFD700",showPower:!0,powerState:n==="on",interactive:!0,showUnit:n!=="off",progressMode:n==="off",readOnly:n==="off"};case"climate":const c=r.current_temperature||20,d=r.temperature||20,u=r.temperature_unit||"C",h=Gw(d,u);return{value:n==="off"?0:d,min:r.min_temp||16,max:r.max_temp||30,unit:u,label:o("targetTemperature"),displayValue:n==="off"?o("off")||"Aus":null,subValue:`${o("currentTemperature")}: ${c}${u}`,showUnit:n!=="off",color:n==="off"?"#9E9E9E":h,showPower:!0,powerState:n!=="off",interactive:n!=="off",progressMode:n==="off",readOnly:n==="off",step:1};case"printer3d_device":const m=r.progress||0,f=r.current_step||"Bereit",g=r.remaining_time||"",p=r.gcode_filename||"",v=m>0&&f!=="idle"&&f!=="offline"&&f!=="unavailable"&&f!=="unknown",b=Kw(f,e);return{value:parseFloat(m)||0,min:0,max:100,unit:"%",label:v?g:"",displayValue:v?null:b,subValue:v?p:"",showUnit:v,color:"rgb(48, 209, 88)",showPower:!1,interactive:!1,progressMode:!v,readOnly:!0,step:1};case"energy_dashboard_device":const y=r.grid_import_value||0,w=r.grid_import_unit||"kWh",_=r.grid_import_sensor,k=r._display_primary_type||null,C={verbrauch:e==="de"?"Verbrauch":"Consumption",nettonutzung:e==="de"?"Nettonutzung":"Net Usage",solarerzeugung:e==="de"?"Solarerzeugung":"Solar Production",batterie:e==="de"?"Batterie":"Battery"}[k]||(e==="de"?"Netzbezug":"Grid Import");let S=e==="de"?"Kein Sensor konfiguriert":"No sensor configured";_&&(S=_.split(".").pop());const x={solarerzeugung:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>',verbrauch:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>',nettonutzung:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></svg>',batterie:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="6" width="18" height="12" rx="2" ry="2"/><line x1="23" y1="13" x2="23" y2="11"/></svg>'},B={solarerzeugung:"#FFD93D",verbrauch:"#FF6B6B",nettonutzung:"#4ECB71",batterie:"#42A5F5"},A=x[k]||null,P=B[k]||"rgb(48, 209, 88)";return{value:parseFloat(y)||0,min:0,max:50,unit:w,label:C,subValue:S,showUnit:!0,color:P,showPower:!1,centerIcon:A,showCenterIcon:A!==null,interactive:!1,progressMode:!1,readOnly:!0,step:.1};case"cover":return{value:r.current_position||0,min:0,max:100,unit:"%",label:o("position"),color:"#9C27B0",showPower:!1,interactive:!0,showUnit:!0};case"media_player":return{value:Math.round((r.volume_level||0)*100),min:0,max:100,unit:"%",label:o("volume"),color:"#FF6B35",showPower:!0,powerState:n!=="off"&&n!=="unavailable",interactive:!0,showUnit:!0};case"lock":return{value:n==="locked"?100:0,min:0,max:100,unit:"",label:o("security"),displayValue:o(n==="locked"?"locked":"unlocked"),color:n==="locked"?"#4CAF50":"#F44336",showPower:!1,interactive:!1,progressMode:!0,readOnly:!0,showUnit:!1};case"fan":return{value:r.percentage||0,min:0,max:100,unit:"%",label:o("speed"),color:"#00BCD4",showPower:!0,powerState:n==="on",interactive:!0,showUnit:!0};case"binary_sensor":return{value:n==="on"?100:0,min:0,max:100,unit:"",label:r.friendly_name||o("sensor"),displayValue:o(n==="on"?"active":"inactive"),color:n==="on"?"#4CAF50":"#9E9E9E",showPower:!1,interactive:!1,progressMode:!0,readOnly:!0,showUnit:!1};case"sensor":let L=n?parseFloat(n):0;isNaN(L)&&(L=0);const E=jw(n,r.device_class,r.unit_of_measurement,e),W=Uw(t,e);return r.device_class==="temperature"||t.entity_id?.includes("temperature")||t.entity_id?.includes("temperatur")?{value:L,min:r.min||-10,max:r.max||40,unit:r.unit_of_measurement||"C",label:W,subValue:E,displayValue:null,showUnit:!0,color:"#2196F3",showPower:!1,interactive:!1,progressMode:!0,readOnly:!0}:r.device_class==="humidity"||t.entity_id?.includes("humidity")?{value:L,min:0,max:100,unit:r.unit_of_measurement||"%",label:W,subValue:E,displayValue:`${Math.round(L)}`,showUnit:!0,color:"#00BCD4",showPower:!1,interactive:!1,progressMode:!0,readOnly:!0}:t.entity_id?.includes("solar")?{value:L,min:0,max:r.max||10,unit:r.unit_of_measurement||"kW",label:W,subValue:E,displayValue:`${L}`,showUnit:!0,color:"#FFC107",showPower:!1,interactive:!1,progressMode:!0,readOnly:!0}:{value:L,min:r.min||0,max:r.max||100,unit:r.unit_of_measurement||"",label:W,subValue:E||null,displayValue:`${L}`,showUnit:!!r.unit_of_measurement,color:"#8BC34A",showPower:!1,interactive:!1,progressMode:!0,readOnly:!0};default:return{value:0,min:0,max:100,unit:"%",label:o("control"),color:"#9E9E9E",showPower:n==="on"||n==="off",powerState:n==="on",interactive:!1,showUnit:!0}}},Yw=(t,e="C")=>{let i=parseFloat(t);return e==="F"&&(i=(i-32)*5/9),i<16?"#0288D1":i<18?"#03A9F4":i<20?"#00BCD4":i<22?"#4CAF50":i<24?"#8BC34A":i<26?"#FFC107":i<28?"#FF9800":i<30?"#FF5722":"#F44336"},Ui=320,Oe=Ui*.4375,St=Ui/2,Nt=Ui/2,$o=2*Math.PI*Oe,Eu=()=>{const t=window.innerWidth;return t<=480||t<=768?160:(t<=1024,280)},Zw=(t,e,i)=>-90+(t-e)/(i-e)*360,qw=(t,e,i)=>{let n=t+90;n<0&&(n+=360),n=n%360;const r=n/360;return e+r*(i-e)},Xw=(t,e,i,n)=>{const r=(t-e)/(i-e);return n-r*n},Jw=({isOn:t=!1,onChange:e,disabled:i=!1,size:n=280,show:r=!0})=>{if(!r)return null;const o=n<220,a=o?51:64,l=o?26:32,c=o?19:24,d=o?11:14,u=o?22:32;return s("div",{className:"power-toggle-container",style:{position:"absolute",top:"50%",left:"50%",transform:`translate(-50%, calc(-50% - ${o?38:60}px))`,pointerEvents:"all",zIndex:10},children:s(T.label,{className:`power-toggle ${i?"disabled":""}`,style:{position:"relative",width:`${a}px`,height:`${l}px`,display:"block",cursor:i?"not-allowed":"pointer"},whileHover:i?{}:{scale:1.05},whileTap:i?{}:{scale:.95},children:[s("input",{type:"checkbox",checked:t,onChange:e,disabled:i,style:{opacity:0,width:0,height:0}}),s(T.span,{className:"power-slider",style:{position:"absolute",inset:0,borderRadius:"20px",display:"flex",alignItems:"center",padding:"0 5px"},animate:{background:t?"rgba(255, 255, 255, 0.25)":"rgba(255, 255, 255, 0.1)",borderColor:t?"rgba(255, 255, 255, 0.4)":"rgba(255, 255, 255, 0.2)"},transition:{type:"spring",stiffness:300,damping:25},children:s(T.span,{className:"power-icon",style:{width:`${c}px`,height:`${c}px`,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},animate:{x:t?u:0,background:t?"white":"rgba(0, 0, 0, 0.1)"},variants:ow,whileTap:"tap",transition:{type:"spring",stiffness:400,damping:25},children:s(T.svg,{width:d,height:d,viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",animate:{stroke:t?"#333":"rgba(255, 255, 255, 1)",rotate:t?360:0},transition:{rotate:{type:"spring",stiffness:200,damping:20}},children:s("path",{d:"M12 2v10M16.2 7.8A7 7 0 1 1 7.8 7.8",strokeLinecap:"round",strokeLinejoin:"round"})})})})]})})},Qw=({value:t,animatedValue:e,displayValue:i,subValue:n,unit:r,showUnit:o=!0,label:a,size:l=280,isDragging:c=!1,valueRef:d,scrollOffset:u=0,centerIcon:h=null,showCenterIcon:m=!1})=>{const f=i&&!c?typeof i=="string"?i.charAt(0).toUpperCase()+i.slice(1):i:null,p=l<220?28:32;return s("div",{className:"value-display-container",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, calc(-50% + 10px))",pointerEvents:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:l<200?"4px":"6px",zIndex:3},children:[m&&h&&s(T.div,{className:"circular-icon",variants:js,initial:"hidden",animate:"visible",style:{width:`${p}px`,height:`${p}px`,display:"flex",alignItems:"center",justifyContent:"center",color:"rgba(255, 255, 255, 0.8)",marginBottom:l<200?"2px":"4px"},dangerouslySetInnerHTML:{__html:h}}),s("div",{className:"value-wrapper",style:{position:"relative",display:"inline-block"},children:[f?s(T.span,{className:"circular-value",ref:d,variants:Cu,initial:"hidden",animate:"visible",style:{fontSize:l<200?"clamp(26px, 12.2vw, 39px)":"clamp(38px, 18vw, 48px)",fontWeight:500,color:"white",lineHeight:1,display:"inline-block"},children:s("span",{style:{transform:`translateX(${u}px)`,display:"inline-block",whiteSpace:"nowrap"},children:[f,u<-50&&s("span",{style:{marginLeft:"50px"},children:f})]})},t):s(T.span,{className:"circular-value",variants:Cu,initial:"hidden",animate:"visible",style:{fontSize:l<200?"clamp(26px, 12.2vw, 39px)":"clamp(38px, 18vw, 48px)",fontWeight:500,color:"white",lineHeight:1,display:"inline-block"},children:e}),o&&r&&s(T.span,{className:"circular-unit",variants:js,initial:"hidden",animate:"visible",style:{fontSize:l<200?"clamp(9px, 3.7vw, 13px)":"clamp(13px, 5.5vw, 19px)",fontWeight:400,color:"rgba(255, 255, 255, 0.5)",position:"absolute",left:"100%",top:0,marginLeft:l<200?"2px":"4px",whiteSpace:"nowrap"},children:r})]}),n&&s(T.div,{className:"circular-sub-value",variants:js,initial:"hidden",animate:"visible",style:{fontSize:l<200?"clamp(10px, 4.4vw, 15px)":"clamp(13px, 5.5vw, 19px)",color:"rgba(255, 255, 255, 0.6)",lineHeight:1,whiteSpace:"nowrap",textAlign:"center"},children:n}),s(T.div,{className:"circular-label",variants:js,initial:"hidden",animate:"visible",style:{fontSize:l<200?"clamp(8px, 3.2vw, 10px)":"clamp(10px, 4vw, 13px)",color:"rgba(255, 255, 255, 0.5)",textTransform:"uppercase",letterSpacing:l<200?"0.4px":"0.5px",whiteSpace:"nowrap",textAlign:"center"},children:a})]})},ek=(t,e,i,n)=>{const[r,o]=M(t),[a,l]=M(!1),c=Gr(t,{stiffness:280,damping:28,mass:.8,restDelta:.001,restSpeed:.01}),d=Gr(0,{stiffness:100,damping:30,restDelta:.01}),u=Wi(c,n);return U(()=>{!a&&t>0&&(d.set(t),l(!0))},[a,t]),U(()=>{t!==r&&(o(t),c.set(t),a&&d.set(t))},[t]),{currentValue:r,setCurrentValue:o,springValue:c,countingValue:d,handleAngle:u,hasAnimated:a}},tk=({svgRef:t,readOnly:e,disabled:i,angleToValue:n,step:r,min:o,max:a,springValue:l,countingValue:c,setCurrentValue:d,setLastSliderValue:u,lastSliderValue:h,showPower:m,localPowerState:f,setLocalPowerState:g,onPowerToggle:p,onValueChange:v})=>{const[b,y]=M(!1),w=(B,A)=>{if(e||i||!t.current)return;const P=t.current.getBoundingClientRect(),I=B-P.left,z=A-P.top,D=Ui/P.width,L=Ui/P.height,E=I*D,W=z*L,F=E-St,K=W-Nt,$=Math.atan2(K,F)*(180/Math.PI),Q=n($),re=Math.round(Q/r)*r,he=Math.max(o,Math.min(a,re));d(he),l.set(he),c.set(he,!1),u(he>0?he:h),m&&!f&&he>0&&(g(!0),p&&p(!0)),v&&v(he)},_=B=>{e||i||(y(!0),w(B.clientX,B.clientY))},k=B=>{b&&w(B.clientX,B.clientY)},N=()=>{y(!1)},C=B=>{if(e||i)return;y(!0);const A=B.touches[0];w(A.clientX,A.clientY)},S=B=>{if(!b)return;const A=B.touches[0];w(A.clientX,A.clientY),B.preventDefault()},x=()=>{y(!1)};return U(()=>{if(b)return document.addEventListener("mousemove",k),document.addEventListener("mouseup",N),document.addEventListener("touchmove",S,{passive:!1}),document.addEventListener("touchend",x),()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",N),document.removeEventListener("touchmove",S),document.removeEventListener("touchend",x)}},[b]),{isDragging:b,handleMouseDown:_,handleTouchStart:C}},ik=(t,e,i,n)=>{const[r,o]=M(t),[a,l]=M(e>0?e:50);return{localPowerState:r,setLocalPowerState:o,lastSliderValue:a,setLastSliderValue:l,handlePowerToggle:(d,u,h,m)=>{const f=d.target.checked;o(f),f?a>0&&(m(a),u.set(a),h.set(a,!1),n&&n(a)):(m(0),u.set(0),h.set(0,!1)),i&&i(f)}}},Kr=({value:t=0,min:e=0,max:i=100,step:n=1,label:r="",displayValue:o=null,subValue:a=null,unit:l="%",showUnit:c=!1,color:d="#FFD700",size:u=null,disabled:h=!1,readOnly:m=!1,progressMode:f=!1,hideSlider:g=!1,showPower:p=!1,powerState:v=!1,centerIcon:b=null,showCenterIcon:y=!1,onValueChange:w,onPowerToggle:_,domain:k=null})=>{const[N,C]=M(!1),[S,x]=M(u||Eu()),[B,A]=M(d),[P,I]=M(0),z=te(null),D=te(null),L=te(null);Ur(0),Ur(0);const E=Me(()=>Z=>Zw(Z,e,i),[e,i]),W=Me(()=>Z=>qw(Z,e,i),[e,i]),{currentValue:F,setCurrentValue:K,springValue:G,countingValue:$,handleAngle:Q}=ek(t,e,i,E),{localPowerState:re,setLocalPowerState:he,lastSliderValue:O,setLastSliderValue:H,handlePowerToggle:X}=ik(v,t,_,w),{isDragging:me,handleMouseDown:q,handleTouchStart:ce}=tk({svgRef:z,readOnly:m,disabled:h,angleToValue:W,step:n,min:e,max:i,springValue:G,countingValue:$,setCurrentValue:K,setLastSliderValue:H,lastSliderValue:O,showPower:p,localPowerState:re,setLocalPowerState:he,onPowerToggle:_,onValueChange:w}),ie=Me(()=>()=>Xw(F,e,i,$o),[F,e,i]),J=Wi(Q,Z=>{const se=Z*Math.PI/180;return St+Oe*Math.cos(se)}),Y=Wi(Q,Z=>{const se=Z*Math.PI/180;return Nt+Oe*Math.sin(se)});U(()=>{he(v),!v&&p&&(r?.toLowerCase().includes("hellig")||r?.toLowerCase().includes("bright"))&&K(0)},[v,p,r]),U(()=>{if(k==="climate"&&(l==="C"||l==="F")){const Z=Yw(F,l);A(Z)}else A(d)},[F,k,l,d]),U(()=>{if(u)return;const Z=()=>{const se=Eu();x(se)};return Z(),window.addEventListener("resize",Z),()=>window.removeEventListener("resize",Z)},[u]),U(()=>{const Z=L.current;if(!Z||!o||o.length<=7){I(0);return}const se=Z.scrollWidth,R=Z.clientWidth;if(se>R){let j;const le=()=>{I(ye=>{const be=ye-1;return Math.abs(be)>=se+50?0:be}),j=requestAnimationFrame(le)};return j=requestAnimationFrame(le),()=>{j&&cancelAnimationFrame(j)}}},[o]);const oe=Z=>{X(Z,G,$,K)},ae=()=>{if(f)return F<=0?null:s(T.circle,{cx:St,cy:Nt,r:Oe,fill:"none",stroke:B,strokeWidth:Oe*.086,strokeDasharray:$o,initial:{strokeDashoffset:$o},animate:{strokeDashoffset:ie()},transition:{type:"spring",stiffness:100,damping:20,restDelta:.001},strokeLinecap:"round",transform:`rotate(-90 ${St} ${Nt})`});if(F>=i-.01)return s(ve,{children:[s(T.path,{d:`M ${St} ${Nt-Oe} A ${Oe} ${Oe} 0 0 1 ${St} ${Nt+Oe}`,fill:"none",stroke:B,strokeWidth:Oe*.086,strokeLinecap:"round",animate:{stroke:B},transition:{duration:.3}}),s(T.path,{d:`M ${St} ${Nt+Oe} A ${Oe} ${Oe} 0 0 1 ${St} ${Nt-Oe}`,fill:"none",stroke:B,strokeWidth:Oe*.086,strokeLinecap:"round",animate:{stroke:B},transition:{duration:.3}})]});const Z=E(F),se=Math.abs(Z+90)>180?1:0,R=St+Oe*Math.cos(Z*Math.PI/180),j=Nt+Oe*Math.sin(Z*Math.PI/180);return s(T.path,{d:`M ${St} ${Nt-Oe} A ${Oe} ${Oe} 0 ${se} 1 ${R} ${j}`,fill:"none",stroke:B,strokeWidth:Oe*.086,strokeLinecap:"round",animate:{stroke:B},transition:{stroke:{duration:.3,ease:"easeInOut"}}})},V=()=>f||g||m?null:s(T.g,{children:s(T.circle,{cx:J,cy:Y,r:Oe*.114,fill:"white",stroke:B,strokeWidth:Oe*.025,style:{cursor:me?"grabbing":"grab",pointerEvents:"all"},variants:rw,animate:me?"dragging":N?"hover":"idle",onMouseEnter:()=>!h&&!m&&C(!0),onMouseLeave:()=>C(!1),whileHover:!h&&!m?"hover":void 0})}),ne=Wi($,Z=>l==="%"||Number.isInteger(Z)?Math.round(Z):parseFloat(Z.toFixed(1)));return s(T.div,{ref:D,className:`circular-slider-container ${h?"disabled":""} ${m?"read-only":""}`,style:{position:"relative",width:`${S}px`,height:`${S}px`,margin:"0 auto 30px",display:"flex",alignItems:"center",justifyContent:"center"},variants:nw,initial:"hidden",animate:"visible",whileHover:!h&&!m?"hover":void 0,layout:!0,transition:{layout:{type:"spring",stiffness:300,damping:30}},children:[s(T.svg,{ref:z,width:"100%",height:"100%",viewBox:`0 0 ${Ui} ${Ui}`,preserveAspectRatio:"xMidYMid meet",className:"circular-slider-svg",onMouseDown:!m&&!f?q:void 0,onTouchStart:!m&&!f?ce:void 0,style:{position:"absolute",top:0,left:0,cursor:m||f?"default":me?"grabbing":"grab",pointerEvents:m||f?"none":"auto",transform:"translateZ(0)",backfaceVisibility:"hidden"},variants:sw,initial:"hidden",animate:"visible",children:[s("circle",{cx:St,cy:Nt,r:Oe,fill:"none",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:Oe*.086}),ae(),V()]}),s("div",{className:"circular-content",style:{position:"absolute",inset:0,zIndex:2,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},children:[s(Jw,{isOn:re,onChange:oe,disabled:h,size:S,show:p}),s(Qw,{value:F,animatedValue:ne,displayValue:o,subValue:a,unit:l,showUnit:c,label:r,size:S,isDragging:me,valueRef:L,scrollOffset:P,centerIcon:b,showCenterIcon:y})]}),s("style",{children:`
        @media (prefers-reduced-motion: reduce) {
          .circular-slider-container *,
          .circular-slider-container *::before,
          .circular-slider-container *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
          }
        }
      `})]})},nk=({data:t,lang:e="de"})=>{const[i,n]=M(0),[r,o]=M(null),[a,l]=M(!1),[c,d]=M(320);U(()=>{const _=()=>{const k=window.innerWidth;let N;k<=768?N=180:N=256,d(N)};return _(),window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]),U(()=>{const _=setTimeout(()=>{l(!0)},100);return()=>clearTimeout(_)},[]),U(()=>{const _=setInterval(()=>{n(k=>(k+1)%t.length)},5e3);return()=>clearInterval(_)},[t]);const u=t[i],h=_=>{o(_.touches[0].clientX)},m=_=>{if(!r)return;const k=_.changedTouches[0].clientX,N=r-k;Math.abs(N)>50&&(N>0?n(C=>(C+1)%t.length):n(C=>(C-1+t.length)%t.length)),o(null)},f=320,g=f*.4375,p=f/2,v=f/2,b=2*Math.PI*g,y=(u.value-u.min)/(u.max-u.min),w=b-y*b;return s("div",{className:`circular-slider-container solar-carousel ${a?"visible":""}`,onTouchStart:h,onTouchEnd:m,style:{width:`${c}px`,height:`${c}px`},children:[s("svg",{width:"100%",height:"100%",viewBox:`0 0 ${f} ${f}`,preserveAspectRatio:"xMidYMid meet",className:"circular-slider-svg",children:[s("circle",{cx:p,cy:v,r:g,fill:"none",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:g*.086}),s("circle",{cx:p,cy:v,r:g,fill:"none",stroke:u.color,strokeWidth:g*.086,strokeDasharray:b,strokeDashoffset:w,strokeLinecap:"round",transform:`rotate(-90 ${p} ${v})`,style:{transition:"stroke-dashoffset 0.5s ease"}})]}),s("div",{className:"circular-content",children:s("div",{className:"value-container",children:[s("div",{className:"value-wrapper",children:[s("span",{className:"circular-value",children:u.value}),s("span",{className:"circular-unit",children:u.unit})]}),u.subValue&&s("div",{className:"circular-sub-value",children:u.subValue}),s("div",{className:"circular-label",children:u.label})]})}),s("div",{className:"carousel-dots",children:t.map((_,k)=>s("div",{className:`dot ${k===i?"active":""}`,onClick:()=>n(k)},k))})]})},Du={light:(t,e,i,n)=>{if(e){const r=i&&i>0?Math.round(i/100*255):255;n("turn_on",{brightness:r}),t.attributes&&(t.attributes.brightness=r),t.entity?.attributes&&(t.entity.attributes.brightness=r)}else n("turn_off",{});t.state!==void 0&&(t.state=e?"on":"off"),t.entity?.state!==void 0&&(t.entity.state=e?"on":"off")},switch:(t,e,i,n)=>{n(e?"turn_on":"turn_off",{}),t.state!==void 0&&(t.state=e?"on":"off"),t.entity?.state!==void 0&&(t.entity.state=e?"on":"off")},climate:(t,e,i,n)=>{const r=e?"heat_cool":"off";n("set_hvac_mode",{hvac_mode:r}),t.state!==void 0&&(t.state=r),t.entity?.state!==void 0&&(t.entity.state=r)},media_player:(t,e,i,n)=>{n(e?"media_play":"media_pause",{}),t.state!==void 0&&(t.state=e?"playing":"paused"),t.entity?.state!==void 0&&(t.entity.state=e?"playing":"paused")},fan:(t,e,i,n)=>{n(e?"turn_on":"turn_off",{}),t.state!==void 0&&(t.state=e?"on":"off"),t.entity?.state!==void 0&&(t.entity.state=e?"on":"off")},vacuum:(t,e,i,n)=>{n(e?"start":"return_to_base",{}),t.state!==void 0&&(t.state=e?"cleaning":"docked"),t.entity?.state!==void 0&&(t.entity.state=e?"cleaning":"docked")},scene:(t,e,i,n)=>{e&&n("turn_on",{}),t.state!==void 0&&(t.state=e?"on":"off"),t.entity?.state!==void 0&&(t.entity.state=e?"on":"off")},script:(t,e,i,n)=>{n(e?"turn_on":"turn_off",{}),t.state!==void 0&&(t.state=e?"on":"off"),t.entity?.state!==void 0&&(t.entity.state=e?"on":"off")},automation:(t,e,i,n)=>{n(e?"turn_on":"turn_off",{}),t.state!==void 0&&(t.state=e?"on":"off"),t.entity?.state!==void 0&&(t.entity.state=e?"on":"off")},default:(t,e,i,n)=>{e?n("turn_on",{}):n("turn_off",{})}},sk=(t,e,i,n,r)=>(Du[t]||Du.default)(e,i,n,r),rk={light:(t,e,i,n,r)=>{i(e),(!t.state||t.state==="off"&&e>0)&&(n(!0),t.state&&(t.state="on"),t.entity?.state&&(t.entity.state="on"));const o=Math.round(e/100*255);t.attributes&&(t.attributes.brightness=o),t.entity?.attributes&&(t.entity.attributes.brightness=o),r("turn_on",{brightness:o})},climate:(t,e,i,n,r)=>{const o=Math.round(e);t.attributes&&(t.attributes.temperature=o),t.entity?.attributes&&(t.entity.attributes.temperature=o),r("set_temperature",{temperature:o})},cover:(t,e,i,n,r)=>{r("set_cover_position",{position:Math.round(e)})},media_player:(t,e,i,n,r)=>{r("volume_set",{volume_level:e/100})},fan:(t,e,i,n,r)=>{r("set_percentage",{percentage:Math.round(e)})}},ok=(t,e,i,n,r,o)=>{const a=rk[t];a&&a(e,i,n,r,o)},ak=(t,e,i)=>{const[n,r]=M(null),[o,a]=M(null),[l,c]=M(null);return U(()=>{const u=t?.entity_id?e?.states?.[t.entity_id]||t:null;if(!u)return;const h=u.state,f=(u.attributes||{}).brightness;i==="light"||i==="switch"||i==="fan"?(r(h==="on"),i==="light"&&h==="on"&&f&&a(Math.round(f/255*100))):i==="climate"?r(h!=="off"):i==="media_player"?r(h!=="off"&&h!=="unavailable"):i==="lock"&&c(h)},[e,t?.entity_id,i]),{localPowerState:n,setLocalPowerState:r,lastBrightness:o,setLastBrightness:a,lockState:l,setLockState:c}},Au=({control:t,index:e,expandedControl:i,onToggleExpandable:n,onServiceCall:r,disabled:o})=>{const a=t.expandable&&i===t.id,l=()=>{t.disabled||(t.action&&r(t.action,t.data),t.expandable&&n(t.id))};return s("div",{className:"control-button-wrapper",children:[s(T.button,{className:`control-button ${t.active?"active":""} ${a?"expanded":""} ${t.disabled?"disabled":""}`,"data-tooltip":t.label,onClick:l,title:t.label,style:{animationDelay:`${e*50}ms`,"--hover-scale":t.expandable?"1.05":"1.1"},disabled:t.disabled,variants:J5,initial:"initial",whileHover:"hover",whileTap:"tap",children:s("span",{className:"button-icon",dangerouslySetInnerHTML:{__html:t.icon}})}),s("span",{className:"button-label",children:t.label})]})};class et{constructor(e,i){this.element=e,this.data=i.data||[],this.lineHeight=i.lineHeight||30,this.selected=i.selected||0,this.callback=i.callback||function(){},this.scrollTimer=null,this.lastVisibleRange={start:-1,end:-1},this.init()}init(){this.element.innerHTML="",this.element.className="picker-wrapper";const e=document.createElement("div");e.className="clone-scroller";const i=document.createElement("div");i.className="picker-up";const n=document.createElement("div");n.className="picker-down";const r=document.createElement("div");r.className="picker-scroller",this.data.forEach((a,l)=>{const c=document.createElement("div");c.className="option",c.textContent=a,c.style.height=`${this.lineHeight}px`,c.style.lineHeight=`${this.lineHeight}px`,e.appendChild(c);const d=document.createElement("div");d.className="option is-hidden",d.textContent=a,d.style.transform=`rotateX(-${22.5*l}deg) translateZ(90px)`,r.appendChild(d)}),this.element.appendChild(e),this.element.appendChild(i),this.element.appendChild(n),this.element.appendChild(r),this.element.style.height=`${this.lineHeight*7}px`,this.element.style.lineHeight=`${this.lineHeight}px`,e.style.paddingTop=`${this.lineHeight*3}px`,e.style.paddingBottom=`${this.lineHeight*3}px`,r.style.paddingTop=`${this.lineHeight*3}px`,r.style.paddingBottom=`${this.lineHeight*3}px`,i.style.height=`${this.lineHeight*3}px`,n.style.height=`${this.lineHeight*3}px`,n.style.top=`${this.lineHeight*4}px`,this.cloneScroller=e,this.pickerScroller=r,this.options=Array.from(r.querySelectorAll(".option"));const o=this.selected*22.5;this.pickerScroller.style.transform=`translate3d(0, 0, -90px) rotateX(${o}deg)`,this.cloneScroller.scrollTop=this.lineHeight*this.selected,this.bindEvents(),this.updateRotation()}bindEvents(){let e=null;this.cloneScroller.addEventListener("scroll",()=>{e&&cancelAnimationFrame(e),e=requestAnimationFrame(()=>this.updateRotation()),this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>this.onScrollStop(),150)},{passive:!0})}updateRotation(){const e=this.cloneScroller.scrollTop,i=22.5/this.lineHeight*e;this.pickerScroller.style.transform=`translate3d(0, 0, -90px) rotateX(${i}deg)`;const n=Math.round(i/22.5),r=7,o=Math.max(0,n-r),a=Math.min(this.options.length-1,n+r);for(let l=0;l<this.options.length;l++)l===n?this.options[l].classList.add("is-center"):this.options[l].classList.remove("is-center");if(!(this.lastVisibleRange.start===o&&this.lastVisibleRange.end===a)){for(let l=this.lastVisibleRange.start;l<=this.lastVisibleRange.end;l++)(l<o||l>a)&&l>=0&&this.options[l].classList.add("is-hidden");for(let l=o;l<=a;l++)(l<this.lastVisibleRange.start||l>this.lastVisibleRange.end)&&this.options[l].classList.remove("is-hidden");this.lastVisibleRange={start:o,end:a}}}onScrollStop(){const e=this.cloneScroller.scrollTop,i=Math.round(e/this.lineHeight)*this.lineHeight;this.smoothScrollTo(i);const n=Math.round(i/this.lineHeight);this.callback&&this.data[n]&&this.callback(n,this.data[n])}smoothScrollTo(e){const i=this.cloneScroller.scrollTop,n=e-i;if(Math.abs(n)<1){this.cloneScroller.scrollTop=e;return}const r=250,o=performance.now(),a=l=>{const c=l-o,d=Math.min(c/r,1),u=this.easeOutQuint(d);this.cloneScroller.scrollTop=i+n*u,d<1?requestAnimationFrame(a):this.cloneScroller.scrollTop=e};requestAnimationFrame(a)}easeOutQuint(e){return 1+--e*e*e*e*e}getCurrentValue(){const e=Math.round(this.cloneScroller.scrollTop/this.lineHeight);return this.data[e]}}class rc{constructor(e,i,n,r={}){this.hoursElement=e,this.minutesElement=i,this.periodElement=n,this.callback=r.callback||function(){},this.lineHeight=r.lineHeight||30;const o=r.initialHour||"09",a=r.initialMinute||"00";this.minuteStep=r.minuteStep||5;const l=parseInt(o);l===0?(this.selectedPeriod="AM",this.selectedHour="12"):l<12?(this.selectedPeriod="AM",this.selectedHour=l.toString().padStart(2,"0")):l===12?(this.selectedPeriod="PM",this.selectedHour="12"):(this.selectedPeriod="PM",this.selectedHour=(l-12).toString().padStart(2,"0")),this.selectedMinute=a,this.init()}init(){const e=Array.from({length:12},(r,o)=>(o+1).toString().padStart(2,"0"));this.hoursPicker=new et(this.hoursElement,{data:e,lineHeight:this.lineHeight,selected:e.indexOf(this.selectedHour),callback:(r,o)=>{this.selectedHour=o,this.updateValue()}});const i=Array.from({length:60/this.minuteStep},(r,o)=>(o*this.minuteStep).toString().padStart(2,"0"));this.minutesPicker=new et(this.minutesElement,{data:i,lineHeight:this.lineHeight,selected:i.indexOf(this.selectedMinute),callback:(r,o)=>{this.selectedMinute=o,this.updateValue()}});const n=["24h","AM","PM"];this.periodPicker=new et(this.periodElement,{data:n,lineHeight:this.lineHeight,selected:n.indexOf(this.selectedPeriod),callback:(r,o)=>{this.selectedPeriod=o,this.updateHoursPicker(),this.updateValue()}}),this.updateValue()}updateHoursPicker(){let e;if(this.selectedPeriod==="24h"){e=Array.from({length:24},(n,r)=>r.toString().padStart(2,"0"));const i=parseInt(this.selectedHour);this.selectedPeriod==="AM"?this.selectedHour=i===12?"00":this.selectedHour:this.selectedPeriod==="PM"&&(this.selectedHour=i===12?"12":(i+12).toString().padStart(2,"0"))}else{e=Array.from({length:12},(n,r)=>(r+1).toString().padStart(2,"0"));const i=parseInt(this.selectedHour);i===0?this.selectedHour="12":i>12?this.selectedHour=(i-12).toString().padStart(2,"0"):i===12&&(this.selectedHour="12")}e.includes(this.selectedHour)||(this.selectedHour=e[0]),this.hoursPicker=new et(this.hoursElement,{data:e,lineHeight:this.lineHeight,selected:e.indexOf(this.selectedHour),callback:(i,n)=>{this.selectedHour=n,this.updateValue()}})}updateValue(){let e=parseInt(this.selectedHour);this.selectedPeriod==="AM"?e===12&&(e=0):this.selectedPeriod==="PM"&&e!==12&&(e+=12);const i=e.toString().padStart(2,"0"),n=`${i}:${this.selectedMinute}`;this.callback(i,this.selectedMinute,n)}getValue(){let e=parseInt(this.selectedHour);this.selectedPeriod==="AM"?e===12&&(e=0):this.selectedPeriod==="PM"&&e!==12&&(e+=12);const i=e.toString().padStart(2,"0");return{hour:i,minute:this.selectedMinute,formatted:`${i}:${this.selectedMinute}`}}}class vp{constructor(e,i,n,r={}){this.dayElement=e,this.monthElement=i,this.yearElement=n,this.callback=r.callback||function(){},this.lineHeight=r.lineHeight||30,this.lang=r.lang||"de";const o=new Date;this.selectedDay=r.initialDay||o.getDate(),this.selectedMonth=r.initialMonth||o.getMonth()+1,this.selectedYear=r.initialYear||o.getFullYear(),this.init()}init(){const e=new Date().getFullYear(),i=Array.from({length:6},(r,o)=>(e+o).toString());this.yearPicker=new et(this.yearElement,{data:i,lineHeight:this.lineHeight,selected:i.indexOf(this.selectedYear.toString()),callback:(r,o)=>{this.selectedYear=parseInt(o),this.updateDayPicker(),this.updateValue()}});const n=this.getMonthNames();this.monthPicker=new et(this.monthElement,{data:n,lineHeight:this.lineHeight,selected:this.selectedMonth-1,callback:(r,o)=>{this.selectedMonth=r+1,this.updateDayPicker(),this.updateValue()}}),this.updateDayPicker(),this.updateValue()}getMonthNames(){return this.lang==="de"?["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}getDaysInMonth(e,i){return new Date(i,e,0).getDate()}updateDayPicker(){const e=this.getDaysInMonth(this.selectedMonth,this.selectedYear),i=Array.from({length:e},(n,r)=>(r+1).toString().padStart(2,"0"));this.selectedDay>e&&(this.selectedDay=e),this.dayPicker=new et(this.dayElement,{data:i,lineHeight:this.lineHeight,selected:this.selectedDay-1,callback:(n,r)=>{this.selectedDay=parseInt(r),this.updateValue()}})}updateValue(){const e=`${this.selectedYear}-${this.selectedMonth.toString().padStart(2,"0")}-${this.selectedDay.toString().padStart(2,"0")}`,i=`${this.selectedDay.toString().padStart(2,"0")}.${this.selectedMonth.toString().padStart(2,"0")}.${this.selectedYear}`;this.callback(e,i)}setDate(e,i,n){this.selectedYear=e,this.selectedMonth=i,this.selectedDay=n,this.init()}getValue(){return{year:this.selectedYear,month:this.selectedMonth,day:this.selectedDay,formatted:`${this.selectedYear}-${this.selectedMonth.toString().padStart(2,"0")}-${this.selectedDay.toString().padStart(2,"0")}`}}}class lk{constructor(e,i){this.element=e,this.data=i.data||[],this.lineHeight=i.lineHeight||30,this.selectedDays=i.selectedDays||[],this.callback=i.callback||function(){},this.scrollTimer=null,this.lastVisibleRange={start:-1,end:-1},this.currentIndex=0,this.lastCenterIndex=-1,this.init()}init(){this.element.innerHTML="",this.element.className="picker-wrapper";const e=document.createElement("div");e.className="clone-scroller";const i=document.createElement("div");i.className="picker-up";const n=document.createElement("div");n.className="picker-down";const r=document.createElement("div");r.className="picker-scroller";const o=document.createElement("button");o.className="multi-select-button is-hidden",this.selectButton=o,this.data.forEach((a,l)=>{const c=document.createElement("div");c.className="option",c.textContent=a,c.style.height=`${this.lineHeight}px`,c.style.lineHeight=`${this.lineHeight}px`,e.appendChild(c);const d=document.createElement("div");d.className="option is-hidden",d.dataset.index=l,d.style.transform=`rotateX(-${22.5*l}deg) translateZ(90px)`;const u=document.createElement("div");u.className="multi-select-option",this.selectedDays.includes(a)&&u.classList.add("active"),u.textContent=a,d.appendChild(u),r.appendChild(d)}),this.element.appendChild(e),this.element.appendChild(i),this.element.appendChild(n),this.element.appendChild(r),this.element.appendChild(o),this.element.style.height=`${this.lineHeight*7}px`,this.element.style.lineHeight=`${this.lineHeight}px`,e.style.paddingTop=`${this.lineHeight*3}px`,e.style.paddingBottom=`${this.lineHeight*3}px`,r.style.paddingTop=`${this.lineHeight*3}px`,r.style.paddingBottom=`${this.lineHeight*3}px`,i.style.height=`${this.lineHeight*3}px`,n.style.height=`${this.lineHeight*3}px`,n.style.top=`${this.lineHeight*4}px`,this.cloneScroller=e,this.pickerScroller=r,this.options=Array.from(r.querySelectorAll(".option")),this.cloneScroller.scrollTop=0,this.bindEvents(),this.updateRotation()}bindEvents(){let e=null;this.cloneScroller.addEventListener("scroll",()=>{this.selectButton.classList.add("is-hidden"),e&&cancelAnimationFrame(e),e=requestAnimationFrame(()=>this.updateRotation()),this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>this.onScrollStop(),200)},{passive:!0}),this.selectButton.addEventListener("click",i=>{i.stopPropagation(),this.toggleCurrentDay()})}toggleCurrentDay(){const e=this.data[this.currentIndex],i=this.options[this.currentIndex].querySelector(".multi-select-option");this.selectedDays.includes(e)?(this.selectedDays=this.selectedDays.filter(n=>n!==e),i.classList.remove("active")):(this.selectedDays.push(e),i.classList.add("active")),this.updateButtonState(),this.updateValueDisplay()}updateValueDisplay(){const e=["Mo","Di","Mi","Do","Fr"],i=["Sa","So"],n=[...e,...i];let r="Keine";this.selectedDays.length===7?r="Tglich":e.every(a=>this.selectedDays.includes(a))&&!i.some(a=>this.selectedDays.includes(a))?r="Mo-Fr":i.every(a=>this.selectedDays.includes(a))&&!e.some(a=>this.selectedDays.includes(a))?r="Sa, So":this.selectedDays.length>0&&(r=this.selectedDays.sort((a,l)=>n.indexOf(a)-n.indexOf(l)).join(", "));const o=document.querySelector(".value-line-4");o&&(o.textContent=r),this.callback(this.selectedDays,r)}updateButtonState(){const e=this.data[this.currentIndex];this.selectedDays.includes(e)?(this.selectButton.textContent="Abwhlen",this.selectButton.classList.add("deselect")):(this.selectButton.textContent="Auswhlen",this.selectButton.classList.remove("deselect")),this.selectButton.classList.remove("is-hidden")}updateRotation(){const e=this.cloneScroller.scrollTop,i=22.5/this.lineHeight*e;this.pickerScroller.style.transform=`translate3d(0, 0, -90px) rotateX(${i}deg)`;const n=Math.round(i/22.5);this.currentIndex=n;const r=7,o=Math.max(0,n-r),a=Math.min(this.options.length-1,n+r);if(!(this.lastVisibleRange.start===o&&this.lastVisibleRange.end===a)){for(let l=this.lastVisibleRange.start;l<=this.lastVisibleRange.end;l++)(l<o||l>a)&&l>=0&&(this.options[l].classList.add("is-hidden"),this.options[l].classList.remove("is-center"));for(let l=o;l<=a;l++)(l<this.lastVisibleRange.start||l>this.lastVisibleRange.end)&&this.options[l].classList.remove("is-hidden"),l===n?this.options[l].classList.add("is-center"):this.options[l].classList.remove("is-center");this.lastVisibleRange={start:o,end:a}}}onScrollStop(){const e=this.cloneScroller.scrollTop,i=Math.round(e/this.lineHeight)*this.lineHeight;this.smoothScrollTo(i,()=>{this.updateButtonState()})}smoothScrollTo(e,i=()=>{}){const n=this.cloneScroller.scrollTop,r=e-n;if(Math.abs(r)<1){this.cloneScroller.scrollTop=e,i();return}const o=250,a=performance.now(),l=c=>{const d=c-a,u=Math.min(d/o,1),h=this.easeOutQuint(u);this.cloneScroller.scrollTop=n+r*h,u<1?requestAnimationFrame(l):(this.cloneScroller.scrollTop=e,i())};requestAnimationFrame(l)}easeOutQuint(e){return 1+--e*e*e*e*e}}const ck=({item:t,lang:e="de"})=>{const[i,n]=M("Auto"),[r,o]=M("Auto"),[a,l]=M("Auto"),[c,d]=M(!1);U(()=>{const g=setTimeout(()=>d(!0),50);return()=>clearTimeout(g)},[]);const u={fanSpeed:te(null),horizontal:te(null),vertical:te(null)},h=te({});U(()=>{const g=setTimeout(()=>{if(console.log(" Initializing Climate Pickers..."),u.fanSpeed.current&&!h.current.fanSpeed)try{new et(u.fanSpeed.current,{data:["Auto","1","2","3","4","5"],lineHeight:30,selected:0,callback:(p,v)=>{console.log("Fan Speed changed:",v),n(v);const b=document.querySelector(".value-line-1");b&&(b.textContent=v)}}),h.current.fanSpeed=!0,console.log(" Fan Speed Picker initialized")}catch(p){console.error(" Error initializing Fan Speed Picker:",p)}if(u.horizontal.current&&!h.current.horizontal)try{new et(u.horizontal.current,{data:["Auto","Links","2","3","4","Rechts","Split","Swing"],lineHeight:30,selected:0,callback:(p,v)=>{console.log("Horizontal changed:",v),o(v);const b=document.querySelector(".value-line-2");b&&(b.textContent=v)}}),h.current.horizontal=!0,console.log(" Horizontal Picker initialized")}catch(p){console.error(" Error initializing Horizontal Picker:",p)}if(u.vertical.current&&!h.current.vertical)try{new et(u.vertical.current,{data:["Auto","Oben","2","3","4","Unten","Swing"],lineHeight:30,selected:0,callback:(p,v)=>{console.log("Vertical changed:",v),l(v);const b=document.querySelector(".value-line-3");b&&(b.textContent=v)}}),h.current.vertical=!0,console.log(" Vertical Picker initialized")}catch(p){console.error(" Error initializing Vertical Picker:",p)}},300);return()=>clearTimeout(g)},[e]);const m=g=>{console.log(" Row clicked:",g);const p=document.getElementById(`picker-container-line-${g}`);if(!p){console.warn(" Picker container not found for line:",g);return}const v=getComputedStyle(p).display==="none";console.log(" Picker state:",v?"Opening":"Closing"),document.querySelectorAll("div.picker").forEach(b=>{getComputedStyle(b).display!=="none"&&b!==p&&f(b,!1)}),f(p,v)},f=(g,p)=>{p?(g.style.display="block",g.animate([{height:"0px",opacity:0,transform:"translateY(-3px)"},{height:"210px",opacity:1,transform:"translateY(0px)"}],{duration:150,easing:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fill:"forwards"}).onfinish=()=>{g.style.height="210px",g.style.opacity="1"}):g.animate([{height:"210px",opacity:1,transform:"translateY(0px)"},{height:"0px",opacity:0,transform:"translateY(-3px)"}],{duration:120,easing:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fill:"forwards"}).onfinish=()=>{g.style.display="none"}};return s("div",{className:`climate-picker-tab ${c?"visible":""}`,children:[s("style",{children:`
        .climate-picker-tab {
          padding: 0px;
          opacity: 0;
          transform: translateY(10px);
          transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .climate-picker-tab.visible {
          opacity: 1;
          transform: translateY(0);
        }

        /* Picker Table Container */
        .picker-table-container {
          margin-top: 0;
          margin-bottom: 20px;
          background: rgba(0, 0, 0, 0.25);
          backdrop-filter: blur(20px);
          -webkit-backdrop-filter: blur(20px);
          border: 0px solid rgba(255, 255, 255, 0.1);
          border-radius: 12px;
          overflow: hidden;
          animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideUp {
          from {
            opacity: 0;
            transform: translateY(40px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        /* UPDATED: Konsistente Table Styles mit ScheduleTab */
        table { 
          width: 100%; 
          font-size: 15px;
          border-collapse: collapse;
          font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
          letter-spacing: normal;
        }
        
        table th { 
          text-align: left; 
          font-weight: 500; /* Medium weight wie im Screenshot */
          height: 45px; 
          border-bottom: 1px solid rgba(255, 255, 255, 0.1); 
          padding: 0 16px; 
          cursor: pointer; 
          color: rgba(255, 255, 255, 0.95); /* Heller wie im Screenshot */
          letter-spacing: normal;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }
        
        table td { 
          text-align: right; 
          font-weight: 500; /* Medium weight fr value-line auch */
          color: rgba(255, 255, 255, 0.7); /* Heller wie im Screenshot */
          border-bottom: 1px solid rgba(255, 255, 255, 0.1); 
          padding: 0 16px; 
          cursor: pointer;
          letter-spacing: normal;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }
        
        /* Timer-Zeile (data-line="3") ohne Border */
        tr[data-line="3"] th,
        tr[data-line="3"] td {
          border-bottom: none !important;
        }
        table td.picker { border: none; cursor: default; padding: 0; }
        /* Picker ohne Border wenn versteckt */
        div.picker { 
          display: none; 
          overflow: hidden; 
          border-bottom: 0px solid rgba(255, 255, 255, 0.1);
        }
        /* Border nur bei sichtbaren/geffneten Pickern, aber nie beim letzten */
        div.picker[style*="block"] {
          border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* Der letzte Picker (Timer/Zeitplan) hat NIE einen Border */
        #picker-container-line-6,
        #picker-container-line-6[style*="block"] { 
          border-bottom: none !important; 
        }
        .picker-wrapper, .picker-wrapper * { box-sizing: border-box; -webkit-user-select: none; user-select: none; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        .picker-wrapper { text-align: center; position: relative; height: 210px; display: inline-block; line-height: 30px; width: 100%; font-size: 18px; perspective: 1000px; perspective-origin: center center; }
        .picker-scroller { transform: translateZ(-90px) rotateX(0deg); transform-style: preserve-3d; height: 100%; will-change: transform; }
        .picker-scroller .option { position: absolute; backface-visibility: hidden; width: 100%; color: rgba(255, 255, 255, 0.4); transform-origin: 50% 50%; transform-style: preserve-3d; opacity: 1; transition: opacity 0.2s, color 0.2s; pointer-events: auto; }
        .picker-scroller .option.is-hidden { opacity: 0; pointer-events: none; }
        .picker-scroller .option.is-center { color: rgba(255, 255, 255, 0.9); }
        .picker-up { position: absolute; top: 0; z-index: 2; background: linear-gradient(to bottom, rgba(0, 0, 0, 0.25) 0%, rgba(0, 0, 0, 0) 100%); width: 100%; height: 90px; border-bottom: 1px solid rgba(255, 255, 255, 0.3); pointer-events: none; }
        .picker-down { position: absolute; top: 120px; z-index: 2; background: linear-gradient(to top, rgba(0, 0, 0, 0.25) 0%, rgba(0, 0, 0, 0) 100%); width: 100%; height: 90px; border-top: 1px solid rgba(255, 255, 255, 0.3); pointer-events: none; }
        .clone-scroller { z-index: 5; overflow: auto; height: 100%; position: absolute; top: 0; width: 100%; padding-top: 90px; padding-bottom: 90px; scrollbar-width: none; -ms-overflow-style: none; }
        .clone-scroller::-webkit-scrollbar { display: none; }
        .clone-scroller .option { visibility: hidden; }
        .clickable-row { cursor: pointer; }
        .time-picker-container { 
          display: flex; 
          justify-content: center; 
          align-items: center; 
          width: 100%; 
          gap: 0; 
          margin: 0;
          padding: 0;
        }
        .time-picker-container > div:first-child { 
          flex: 1; 
          max-width: 50%; 
        }
        .time-picker-container > div:last-child { 
          flex: 1; 
          max-width: 50%; 
        }
        .time-picker-separator { 
          flex: 0 0 20px; 
          display: flex; 
          justify-content: center; 
          align-items: center; 
          width: 20px; 
          height: 210px;
          position: relative;
          background: linear-gradient(to bottom, 
            rgba(0, 0, 0, 0.25) 0%, 
            rgba(0, 0, 0, 0) 42.86%,
            rgba(0, 0, 0, 0) 57.14%,
            rgba(0, 0, 0, 0.25) 100%);
        }
        
        .time-picker-separator::before {
          content: '';
          position: absolute;
          top: 89px;
          left: 0;
          right: 0;
          height: 1px;
          background: rgba(255, 255, 255, 0.2);
          z-index: 2;
        }
        
        .time-picker-separator::after {
          content: '';
          position: absolute;
          top: 120px;
          left: 0;
          right: 0;
          height: 1px;
          background: rgba(255, 255, 255, 0.2);
          z-index: 2;
        }
        
        .time-picker-separator svg { 
          width: 8px; 
          height: 16px; 
          fill: rgba(255, 255, 255, 0.6); 
          transform: translateY(0px); 
          position: relative;
          z-index: 3;
        }
        
        .multi-select-option { display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; font-size: 20px; font-weight: 500; transition: color 0.3s ease, transform 0.15s ease; }
        .multi-select-option.active { color: #34c759; font-weight: 600; }
        .picker-scroller .option.is-center { z-index: 10; }
        .picker-scroller .option.is-center .multi-select-option { transform: scale(1.05); }
        .multi-select-button { position: absolute; bottom: 15px; left: 50%; transform: translateX(-50%); z-index: 15; padding: 8px 20px; font-size: 14px; font-weight: 600; border: none; border-radius: 20px; cursor: pointer; background-color: #007aff; color: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: opacity 0.2s, background-color 0.2s; }
        .multi-select-button.deselect { background-color: #ff3b30; }
        .multi-select-button.is-hidden { opacity: 0; pointer-events: none; }

        /* Picker Action Buttons */
        .picker-actions {
          display: flex;
          gap: 12px;
          margin-top: 20px;
          animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .picker-btn {
          flex: 1;
          padding: 14px;
          border-radius: 12px;
          border: none;
          font-size: 16px;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s ease;
        }

        .picker-btn.cancel {
          background: rgba(255, 255, 255, 0.1);
          color: white;
        }

        .picker-btn.confirm {
          background: linear-gradient(135deg, rgb(0, 145, 255), rgb(0, 145, 255));
          color: white;
        }

        .picker-btn.confirm.disabled {
          background: rgba(128, 128, 128, 0.3);
          color: rgba(255, 255, 255, 0.5);
          cursor: not-allowed;
          pointer-events: none;
        }

        .picker-btn:hover {
          transform: translateY(-1px);
        }

        .picker-btn:active {
          transform: scale(0.98);
        }
      `}),s("div",{className:"picker-table-container",children:s("table",{children:[s("tr",{className:"clickable-row","data-line":"1",onClick:()=>m("1"),children:[s("th",{children:ee("controls.fanSpeed",e)}),s("td",{className:"value-line-1",children:i})]}),s("tr",{children:s("td",{className:"picker",colspan:"2",children:s("div",{className:"picker",id:"picker-container-line-1",children:s("div",{id:"picker-line-1",ref:u.fanSpeed})})})}),s("tr",{className:"clickable-row","data-line":"2",onClick:()=>m("2"),children:[s("th",{children:ee("controls.horizontalOscillation",e)}),s("td",{className:"value-line-2",children:r})]}),s("tr",{children:s("td",{className:"picker",colspan:"2",children:s("div",{className:"picker",id:"picker-container-line-2",children:s("div",{id:"picker-line-2",ref:u.horizontal})})})}),s("tr",{className:"clickable-row","data-line":"3",onClick:()=>m("3"),children:[s("th",{children:ee("controls.verticalOscillation",e)}),s("td",{className:"value-line-3",children:a})]}),s("tr",{children:s("td",{className:"picker",colspan:"2",children:s("div",{className:"picker",id:"picker-container-line-3",children:s("div",{id:"picker-line-3",ref:u.vertical})})})})]})}),s("div",{className:"picker-actions",children:s("button",{className:"picker-btn confirm",onClick:()=>{console.log("Climate settings:",{fanSpeed:i,horizontal:r,vertical:a})},children:ee("controls.apply",e)})})]})},dk=({entity:t,hass:e,lang:i="de"})=>{const[n,r]=M({}),o=te(null),[a,l]=M(!1);U(()=>{const u=async()=>{if(!t||!e)return;const m=await t.executeAction("getPrinterData",{hass:e});m&&r(m)};u();const h=setInterval(u,5e3);return()=>clearInterval(h)},[t,e]);const c=(u,h)=>{if(!h||h==="unavailable")return i==="de"?"Nicht verfgbar":"Not available";const m=String(h).toLowerCase();return m==="idle"?i==="de"?"Leerlauf":"Idle":m==="on"?i==="de"?"An":"On":m==="off"?i==="de"?"Aus":"Off":u==="nozzleType"?{hardened_steel:i==="de"?"Gehrteter Stahl":"Hardened Steel",stainless_steel:i==="de"?"Edelstahl":"Stainless Steel",brass:i==="de"?"Messing":"Brass"}[m]||h:u==="speedProfile"&&{silent:i==="de"?"Leise":"Silent",standard:"Standard",sport:"Sport",ludicrous:"Ludicrous"}[m]||h},d=[{key:"currentLayer",label:i==="de"?"Aktuelle Schicht":"Current layer",value:n.currentLayer},{key:"currentStep",label:i==="de"?"Aktueller Arbeitsschritt":"Current step",value:n.currentStep},{key:"progress",label:i==="de"?"Druckfortschritt":"Print progress",value:n.progress?`${n.progress}%`:null},{key:"speedProfile",label:i==="de"?"Geschwindigkeitsprofil":"Speed profile",value:n.speedProfile},{key:"printStatus",label:i==="de"?"Druckstatus":"Print status",value:n.printStatus},{key:"printType",label:i==="de"?"Drucktyp":"Print type",value:n.printType},{key:"nozzleSize",label:i==="de"?"Dsengre":"Nozzle size",value:n.nozzleSize},{key:"nozzleType",label:i==="de"?"Dsentyp":"Nozzle type",value:n.nozzleType},{key:"bedTemp",label:i==="de"?"Druckbetttemperatur":"Bed temperature",value:n.bedTemp?`${n.bedTemp}C`:null},{key:"nozzleTemp",label:i==="de"?"Temperatur der Dse":"Nozzle temperature",value:n.nozzleTemp?`${n.nozzleTemp}C`:null},{key:"targetBed",label:i==="de"?"Zieltemperatur Druckbett":"Target bed temperature",value:n.targetBed?`${n.targetBed}C`:null},{key:"targetNozzle",label:i==="de"?"Zieltemperatur Dse":"Target nozzle temperature",value:n.targetNozzle?`${n.targetNozzle}C`:null},{key:"remainingTime",label:i==="de"?"Verbleibende Zeit":"Remaining time",value:n.remainingTime},{key:"startTime",label:i==="de"?"Startzeit":"Start time",value:n.startTime},{key:"endTime",label:i==="de"?"Voraussichtliche Fertigstellung":"Estimated completion",value:n.endTime},{key:"totalLayers",label:i==="de"?"Gesamtschichten":"Total layers",value:n.totalLayers},{key:"fanSpeed",label:i==="de"?"Druckkopflfter":"Cooling fan speed",value:n.fanSpeed?`${n.fanSpeed}%`:null},{key:"heatbreakFanSpeed",label:i==="de"?"Hotend-Lfter":"Heatbreak fan speed",value:n.heatbreakFanSpeed?`${n.heatbreakFanSpeed}%`:null}];return s("div",{className:"printer-sensors-wrapper",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{position:"relative"},children:[s("div",{ref:o,className:"ios-settings-view printer-sensors-scroll",style:{paddingTop:"0"},children:s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:i==="de"?"SENSOREN":"SENSORS"}),s("div",{className:"ios-card",children:d.map((u,h)=>{const m=c(u.key,u.value),f=!u.value||u.value==="unavailable";return s("div",{children:[h>0&&s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:u.label})})}),s("div",{className:"ios-item-right",children:s("div",{className:"ios-item-value",style:{color:f?"rgba(255,255,255,0.4)":"rgba(255,255,255,0.6)"},children:m})})]})]},u.key)})})]})}),s(Pe,{scrollContainerRef:o,isHovered:a})]})},uk=({entity:t,hass:e,lang:i="de"})=>{const[n,r]=M({}),o=te(null),[a,l]=M(!1);U(()=>{const u=async()=>{if(!t||!e)return;const m=await t.executeAction("getPrinterData",{hass:e});m&&r(m)};u();const h=setInterval(u,5e3);return()=>clearInterval(h)},[t,e]);const c=u=>{if(!u||u==="unavailable")return i==="de"?"Nicht verfgbar":"Not available";const h=String(u).toLowerCase();return h==="on"?i==="de"?"An":"On":h==="off"?i==="de"?"Aus":"Off":u},d=[{key:"online",label:"Online",value:n.online},{key:"printError",label:i==="de"?"Druckfehler":"Print error",value:n.printError},{key:"hmsError",label:i==="de"?"HMS-Fehler":"HMS error",value:n.hmsError},{key:"firmwareStatus",label:i==="de"?"Firmware Status":"Firmware status",value:n.firmwareStatus},{key:"lanMode",label:i==="de"?"Entwickler LAN-Modus":"Developer LAN mode",value:n.lanMode},{key:"mqttMode",label:i==="de"?"MQTT-Verbindungsmodus":"MQTT connection mode",value:n.mqttMode},{key:"mqttEncryption",label:i==="de"?"MQTT-Verschlsselung":"MQTT encryption",value:n.mqttEncryption},{key:"ipAddress",label:i==="de"?"IP-Adresse":"IP address",value:n.ipAddress},{key:"wifiSignal",label:i==="de"?"Wi-Fi-Signalqualitt":"Wi-Fi signal quality",value:n.wifiSignal?`${n.wifiSignal} dBm`:null},{key:"sdCard",label:i==="de"?"SD-Kartenstatus":"SD card status",value:n.sdCard},{key:"totalUsage",label:i==="de"?"Gesamtnutzung":"Total usage",value:n.totalUsage?`${n.totalUsage} h`:null},{key:"timelapse",label:i==="de"?"Zeitraffer-Aufnahme":"Timelapse recording",value:n.timelapse},{key:"extruderFilament",label:i==="de"?"Extruder Filament Status":"Extruder filament status",value:n.extruderFilament},{key:"serialNumber",label:i==="de"?"Seriennummer":"Serial number",value:t?.attributes?.serial}];return s("div",{className:"printer-sensors-wrapper",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{position:"relative"},children:[s("div",{ref:o,className:"ios-settings-view printer-sensors-scroll",style:{paddingTop:"0"},children:s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:i==="de"?"DIAGNOSE":"DIAGNOSTICS"}),s("div",{className:"ios-card",children:d.map((u,h)=>{const m=c(u.value),f=!u.value||u.value==="unavailable";return s("div",{children:[h>0&&s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:u.label})})}),s("div",{className:"ios-item-right",children:s("div",{className:"ios-item-value",style:{color:f?"rgba(255,255,255,0.4)":"rgba(255,255,255,0.6)"},children:m})})]})]},u.key)})})]})}),s(Pe,{scrollContainerRef:o,isHovered:a})]})},hk=({entity:t,hass:e,lang:i="de"})=>{const[n,r]=M({}),o=te(null),[a,l]=M(!1);U(()=>{const g=async()=>{if(!t||!e)return;const v=await t.executeAction("getPrinterData",{hass:e});v&&r(v)};g();const p=setInterval(g,5e3);return()=>clearInterval(p)},[t,e]);const c=async(g,p,v,b={})=>{if(!(!e||!v))try{await e.callService(g,p,{entity_id:v,...b}),setTimeout(async()=>{const y=await t.executeAction("getPrinterData",{hass:e});y&&r(y)},500)}catch(y){console.error("Service call failed:",y)}},d=(g,p,v)=>{if(!v)return;const b=v.entity_id.split(".")[0];c(b,p==="on"||p===!0?"turn_off":"turn_on",v.entity_id)},u=g=>{g&&c("button","press",g.entity_id)},h=(g,p)=>{g&&c("number","set_value",g.entity_id,{value:parseFloat(p)})},m=[{key:"cameraEnabled",type:"switch",label:i==="de"?"Kamera aktivieren":"Enable camera"},{key:"imageCamera",type:"switch",label:i==="de"?"Bildsensorkamera verwenden":"Use image sensor camera"},{key:"alertTone",type:"switch",label:i==="de"?"Aufforderungston zulassen":"Allow prompt sound"},{key:"chamberLight",type:"switch",label:i==="de"?"Druckraumbeleuchtung":"Chamber light"},{key:"targetNozzle",type:"range",label:i==="de"?"Zieltemperatur Dse":"Target nozzle temp",unit:"C",min:0,max:320},{key:"targetBed",type:"range",label:i==="de"?"Zieltemperatur Druckbett":"Target bed temp",unit:"C",min:0,max:120}],f=g=>{const p=n[g.key],v=n[g.key+"_entity"];if(g.type==="switch"){const b=p==="on"||p===!0,y=p&&p!=="unavailable";return s("div",{className:`ios-toggle ${b?"active":""} ${y?"":"disabled"}`,onClick:()=>y&&d(g.key,p,v),style:{width:"51px",height:"31px",borderRadius:"15.5px",background:b?"rgb(48, 209, 88)":"rgba(120, 120, 128, 0.32)",position:"relative",cursor:y?"pointer":"not-allowed",transition:"background 0.2s"},children:s("div",{style:{width:"27px",height:"27px",borderRadius:"50%",background:"white",position:"absolute",top:"2px",left:b?"22px":"2px",transition:"left 0.2s",boxShadow:"0 3px 8px rgba(0,0,0,0.15), 0 3px 1px rgba(0,0,0,0.06)"}})})}if(g.type==="range"){const b=parseFloat(p)||g.min,y=p!=null&&p!=="unavailable";return{value:s("span",{className:"range-value-display",style:{color:"rgba(255,255,255,0.9)",fontSize:"17px",fontWeight:"500",textAlign:"right"},children:[y?b:"--",g.unit]}),slider:s("input",{type:"range",value:y?b:g.min,min:g.min,max:g.max,disabled:!y,onChange:w=>h(v,w.target.value),className:"range-slider-input",style:{width:"100%",height:"4px",borderRadius:"2px",background:`linear-gradient(to right, rgb(48, 209, 88) 0%, rgb(48, 209, 88) ${(b-g.min)/(g.max-g.min)*100}%, rgba(255,255,255,0.2) ${(b-g.min)/(g.max-g.min)*100}%, rgba(255,255,255,0.2) 100%)`,outline:"none",cursor:y?"pointer":"not-allowed",WebkitAppearance:"none",appearance:"none"}})}}if(g.type==="number"){const b=parseFloat(p)||0,y=p!=null&&p!=="unavailable";return s("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[s("input",{type:"number",value:y?b:"",min:g.min,max:g.max,disabled:!y,onChange:w=>h(v,w.target.value),placeholder:y?"0":i==="de"?"Nicht verfgbar":"Not available",style:{width:"70px",padding:"6px 10px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",color:y?"white":"rgba(255,255,255,0.4)",fontSize:"15px",textAlign:"center"}}),y&&s("span",{style:{color:"rgba(255,255,255,0.6)",fontSize:"15px"},children:g.unit})]})}if(g.type==="button"){const b=v!=null;return s("button",{onClick:()=>u(v),disabled:!b,style:{padding:"6px 16px",background:b?"rgba(255,255,255,0.15)":"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",color:b?"rgb(48, 209, 88)":"rgba(255,255,255,0.3)",fontSize:"14px",fontWeight:"500",cursor:b?"pointer":"not-allowed",transition:"all 0.2s"},onMouseEnter:y=>{b&&(y.target.style.background="rgba(255,255,255,0.25)")},onMouseLeave:y=>{b&&(y.target.style.background="rgba(255,255,255,0.15)")},children:g.buttonLabel||g.label})}return null};return s("div",{className:"printer-sensors-wrapper",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{position:"relative"},children:[s("div",{ref:o,className:"ios-settings-view printer-sensors-scroll",style:{paddingTop:"0"},children:s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:i==="de"?"STEUERUNG":"CONTROLS"}),s("div",{className:"ios-card",children:m.map((g,p)=>s("div",{children:[p>0&&s("div",{className:"ios-divider"}),s("div",{className:"ios-item",style:g.type==="range"?{flexDirection:"column",alignItems:"stretch",gap:"6px"}:{},children:g.type==="range"?s(ve,{children:[s("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s("div",{className:"ios-item-label range-label",children:g.label}),f(g).value]}),f(g).slider]}):s(ve,{children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:g.label})})}),s("div",{className:"ios-item-right",children:f(g)})]})})]},g.key))})]})}),s(Pe,{scrollContainerRef:o,isHovered:a})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ds(t){return t+.5|0}const ai=(t,e,i)=>Math.max(Math.min(t,i),e);function zn(t){return ai(Ds(t*2.55),0,255)}function ui(t){return ai(Ds(t*255),0,255)}function Zt(t){return ai(Ds(t/2.55)/100,0,1)}function Fu(t){return ai(Ds(t*100),0,100)}const kt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ga=[..."0123456789ABCDEF"],mk=t=>Ga[t&15],fk=t=>Ga[(t&240)>>4]+Ga[t&15],Ys=t=>(t&240)>>4===(t&15),pk=t=>Ys(t.r)&&Ys(t.g)&&Ys(t.b)&&Ys(t.a);function gk(t){var e=t.length,i;return t[0]==="#"&&(e===4||e===5?i={r:255&kt[t[1]]*17,g:255&kt[t[2]]*17,b:255&kt[t[3]]*17,a:e===5?kt[t[4]]*17:255}:(e===7||e===9)&&(i={r:kt[t[1]]<<4|kt[t[2]],g:kt[t[3]]<<4|kt[t[4]],b:kt[t[5]]<<4|kt[t[6]],a:e===9?kt[t[7]]<<4|kt[t[8]]:255})),i}const vk=(t,e)=>t<255?e(t):"";function yk(t){var e=pk(t)?mk:fk;return t?"#"+e(t.r)+e(t.g)+e(t.b)+vk(t.a,e):void 0}const bk=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function yp(t,e,i){const n=e*Math.min(i,1-i),r=(o,a=(o+t/30)%12)=>i-n*Math.max(Math.min(a-3,9-a,1),-1);return[r(0),r(8),r(4)]}function wk(t,e,i){const n=(r,o=(r+t/60)%6)=>i-i*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function kk(t,e,i){const n=yp(t,1,.5);let r;for(e+i>1&&(r=1/(e+i),e*=r,i*=r),r=0;r<3;r++)n[r]*=1-e-i,n[r]+=e;return n}function _k(t,e,i,n,r){return t===r?(e-i)/n+(e<i?6:0):e===r?(i-t)/n+2:(t-e)/n+4}function oc(t){const i=t.r/255,n=t.g/255,r=t.b/255,o=Math.max(i,n,r),a=Math.min(i,n,r),l=(o+a)/2;let c,d,u;return o!==a&&(u=o-a,d=l>.5?u/(2-o-a):u/(o+a),c=_k(i,n,r,u,o),c=c*60+.5),[c|0,d||0,l]}function ac(t,e,i,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,n)).map(ui)}function lc(t,e,i){return ac(yp,t,e,i)}function xk(t,e,i){return ac(kk,t,e,i)}function Ck(t,e,i){return ac(wk,t,e,i)}function bp(t){return(t%360+360)%360}function Sk(t){const e=bk.exec(t);let i=255,n;if(!e)return;e[5]!==n&&(i=e[6]?zn(+e[5]):ui(+e[5]));const r=bp(+e[2]),o=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?n=xk(r,o,a):e[1]==="hsv"?n=Ck(r,o,a):n=lc(r,o,a),{r:n[0],g:n[1],b:n[2],a:i}}function Nk(t,e){var i=oc(t);i[0]=bp(i[0]+e),i=lc(i),t.r=i[0],t.g=i[1],t.b=i[2]}function Lk(t){if(!t)return;const e=oc(t),i=e[0],n=Fu(e[1]),r=Fu(e[2]);return t.a<255?`hsla(${i}, ${n}%, ${r}%, ${Zt(t.a)})`:`hsl(${i}, ${n}%, ${r}%)`}const Pu={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Iu={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Mk(){const t={},e=Object.keys(Iu),i=Object.keys(Pu);let n,r,o,a,l;for(n=0;n<e.length;n++){for(a=l=e[n],r=0;r<i.length;r++)o=i[r],l=l.replace(o,Pu[o]);o=parseInt(Iu[a],16),t[l]=[o>>16&255,o>>8&255,o&255]}return t}let Zs;function Tk(t){Zs||(Zs=Mk(),Zs.transparent=[0,0,0,0]);const e=Zs[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Ek=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Dk(t){const e=Ek.exec(t);let i=255,n,r,o;if(e){if(e[7]!==n){const a=+e[7];i=e[8]?zn(a):ai(a*255,0,255)}return n=+e[1],r=+e[3],o=+e[5],n=255&(e[2]?zn(n):ai(n,0,255)),r=255&(e[4]?zn(r):ai(r,0,255)),o=255&(e[6]?zn(o):ai(o,0,255)),{r:n,g:r,b:o,a:i}}}function Ak(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Zt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Ho=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ji=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Fk(t,e,i){const n=Ji(Zt(t.r)),r=Ji(Zt(t.g)),o=Ji(Zt(t.b));return{r:ui(Ho(n+i*(Ji(Zt(e.r))-n))),g:ui(Ho(r+i*(Ji(Zt(e.g))-r))),b:ui(Ho(o+i*(Ji(Zt(e.b))-o))),a:t.a+i*(e.a-t.a)}}function qs(t,e,i){if(t){let n=oc(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*i,e===0?360:1)),n=lc(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function wp(t,e){return t&&Object.assign(e||{},t)}function Ru(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ui(t[3]))):(e=wp(t,{r:0,g:0,b:0,a:1}),e.a=ui(e.a)),e}function Pk(t){return t.charAt(0)==="r"?Dk(t):Sk(t)}class ms{constructor(e){if(e instanceof ms)return e;const i=typeof e;let n;i==="object"?n=Ru(e):i==="string"&&(n=gk(e)||Tk(e)||Pk(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=wp(this._rgb);return e&&(e.a=Zt(e.a)),e}set rgb(e){this._rgb=Ru(e)}rgbString(){return this._valid?Ak(this._rgb):void 0}hexString(){return this._valid?yk(this._rgb):void 0}hslString(){return this._valid?Lk(this._rgb):void 0}mix(e,i){if(e){const n=this.rgb,r=e.rgb;let o;const a=i===o?.5:i,l=2*a-1,c=n.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;o=1-d,n.r=255&d*n.r+o*r.r+.5,n.g=255&d*n.g+o*r.g+.5,n.b=255&d*n.b+o*r.b+.5,n.a=a*n.a+(1-a)*r.a,this.rgb=n}return this}interpolate(e,i){return e&&(this._rgb=Fk(this._rgb,e._rgb,i)),this}clone(){return new ms(this.rgb)}alpha(e){return this._rgb.a=ui(e),this}clearer(e){const i=this._rgb;return i.a*=1-e,this}greyscale(){const e=this._rgb,i=Ds(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=i,this}opaquer(e){const i=this._rgb;return i.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return qs(this._rgb,2,e),this}darken(e){return qs(this._rgb,2,-e),this}saturate(e){return qs(this._rgb,1,e),this}desaturate(e){return qs(this._rgb,1,-e),this}rotate(e){return Nk(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function jt(){}const Ik=(()=>{let t=0;return()=>t++})();function Te(t){return t==null}function Ue(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function De(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ze(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function yt(t,e){return Ze(t)?t:e}function xe(t,e){return typeof t>"u"?e:t}const Rk=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,kp=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ve(t,e,i){if(t&&typeof t.call=="function")return t.apply(i,e)}function Be(t,e,i,n){let r,o,a;if(Ue(t))for(o=t.length,r=0;r<o;r++)e.call(i,t[r],r);else if(De(t))for(a=Object.keys(t),o=a.length,r=0;r<o;r++)e.call(i,t[a[r]],a[r])}function Yr(t,e){let i,n,r,o;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(r=t[i],o=e[i],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function Zr(t){if(Ue(t))return t.map(Zr);if(De(t)){const e=Object.create(null),i=Object.keys(t),n=i.length;let r=0;for(;r<n;++r)e[i[r]]=Zr(t[i[r]]);return e}return t}function _p(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Bk(t,e,i,n){if(!_p(t))return;const r=e[t],o=i[t];De(r)&&De(o)?fs(r,o,n):e[t]=Zr(o)}function fs(t,e,i){const n=Ue(e)?e:[e],r=n.length;if(!De(t))return t;i=i||{};const o=i.merger||Bk;let a;for(let l=0;l<r;++l){if(a=n[l],!De(a))continue;const c=Object.keys(a);for(let d=0,u=c.length;d<u;++d)o(c[d],t,a,i)}return t}function es(t,e){return fs(t,e,{merger:zk})}function zk(t,e,i){if(!_p(t))return;const n=e[t],r=i[t];De(n)&&De(r)?es(n,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Zr(r))}const Bu={"":t=>t,x:t=>t.x,y:t=>t.y};function Vk(t){const e=t.split("."),i=[];let n="";for(const r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(i.push(n),n="");return i}function Wk(t){const e=Vk(t);return i=>{for(const n of e){if(n==="")break;i=i&&i[n]}return i}}function fi(t,e){return(Bu[e]||(Bu[e]=Wk(e)))(t)}function cc(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ps=t=>typeof t<"u",pi=t=>typeof t=="function",zu=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};function Ok(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ie=Math.PI,je=2*Ie,$k=je+Ie,qr=Number.POSITIVE_INFINITY,Hk=Ie/180,Je=Ie/2,_i=Ie/4,Vu=Ie*2/3,li=Math.log10,Ht=Math.sign;function ts(t,e,i){return Math.abs(t-e)<i}function Wu(t){const e=Math.round(t);t=ts(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(li(t))),n=t/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function jk(t){const e=[],i=Math.sqrt(t);let n;for(n=1;n<i;n++)t%n===0&&(e.push(n),e.push(t/n));return i===(i|0)&&e.push(i),e.sort((r,o)=>r-o).pop(),e}function Uk(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function fn(t){return!Uk(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Gk(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}function xp(t,e,i){let n,r,o;for(n=0,r=t.length;n<r;n++)o=t[n][i],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Tt(t){return t*(Ie/180)}function dc(t){return t*(180/Ie)}function Ou(t){if(!Ze(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function Cp(t,e){const i=e.x-t.x,n=e.y-t.y,r=Math.sqrt(i*i+n*n);let o=Math.atan2(n,i);return o<-.5*Ie&&(o+=je),{angle:o,distance:r}}function Ka(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Kk(t,e){return(t-e+$k)%je-Ie}function ct(t){return(t%je+je)%je}function gs(t,e,i,n){const r=ct(t),o=ct(e),a=ct(i),l=ct(o-r),c=ct(a-r),d=ct(r-o),u=ct(r-a);return r===o||r===a||n&&o===a||l>c&&d<u}function ot(t,e,i){return Math.max(e,Math.min(i,t))}function Yk(t){return ot(t,-32768,32767)}function qt(t,e,i,n=1e-6){return t>=Math.min(e,i)-n&&t<=Math.max(e,i)+n}function uc(t,e,i){i=i||(a=>t[a]<e);let n=t.length-1,r=0,o;for(;n-r>1;)o=r+n>>1,i(o)?r=o:n=o;return{lo:r,hi:n}}const Xt=(t,e,i,n)=>uc(t,i,n?r=>{const o=t[r][e];return o<i||o===i&&t[r+1][e]===i}:r=>t[r][e]<i),Zk=(t,e,i)=>uc(t,i,n=>t[n][e]>=i);function qk(t,e,i){let n=0,r=t.length;for(;n<r&&t[n]<e;)n++;for(;r>n&&t[r-1]>i;)r--;return n>0||r<t.length?t.slice(n,r):t}const Sp=["push","pop","shift","splice","unshift"];function Xk(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Sp.forEach(i=>{const n="_onData"+cc(i),r=t[i];Object.defineProperty(t,i,{configurable:!0,enumerable:!1,value(...o){const a=r.apply(this,o);return t._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...o)}),a}})})}function $u(t,e){const i=t._chartjs;if(!i)return;const n=i.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(Sp.forEach(o=>{delete t[o]}),delete t._chartjs)}function Np(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Lp=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function Mp(t,e){let i=[],n=!1;return function(...r){i=r,n||(n=!0,Lp.call(window,()=>{n=!1,t.apply(e,i)}))}}function Jk(t,e){let i;return function(...n){return e?(clearTimeout(i),i=setTimeout(t,e,n)):t.apply(this,n),e}}const hc=t=>t==="start"?"left":t==="end"?"right":"center",lt=(t,e,i)=>t==="start"?e:t==="end"?i:(e+i)/2,Qk=(t,e,i,n)=>t===(n?"left":"right")?i:t==="center"?(e+i)/2:e;function Tp(t,e,i){const n=e.length;let r=0,o=n;if(t._sorted){const{iScale:a,vScale:l,_parsed:c}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=a.axis,{min:h,max:m,minDefined:f,maxDefined:g}=a.getUserBounds();if(f){if(r=Math.min(Xt(c,u,h).lo,i?n:Xt(e,u,a.getPixelForValue(h)).lo),d){const p=c.slice(0,r+1).reverse().findIndex(v=>!Te(v[l.axis]));r-=Math.max(0,p)}r=ot(r,0,n-1)}if(g){let p=Math.max(Xt(c,a.axis,m,!0).hi+1,i?0:Xt(e,u,a.getPixelForValue(m),!0).hi+1);if(d){const v=c.slice(p-1).findIndex(b=>!Te(b[l.axis]));p+=Math.max(0,v)}o=ot(p,r,n)-r}else o=n-r}return{start:r,count:o}}function Ep(t){const{xScale:e,yScale:i,_scaleRanges:n}=t,r={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!n)return t._scaleRanges=r,!0;const o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,r),o}const Xs=t=>t===0||t===1,Hu=(t,e,i)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*je/i)),ju=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*je/i)+1,is={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Je)+1,easeOutSine:t=>Math.sin(t*Je),easeInOutSine:t=>-.5*(Math.cos(Ie*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Xs(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Xs(t)?t:Hu(t,.075,.3),easeOutElastic:t=>Xs(t)?t:ju(t,.075,.3),easeInOutElastic(t){return Xs(t)?t:t<.5?.5*Hu(t*2,.1125,.45):.5+.5*ju(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-is.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?is.easeInBounce(t*2)*.5:is.easeOutBounce(t*2-1)*.5+.5};function mc(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Uu(t){return mc(t)?t:new ms(t)}function jo(t){return mc(t)?t:new ms(t).saturate(.5).darken(.1).hexString()}const e_=["x","y","borderWidth","radius","tension"],t_=["color","borderColor","backgroundColor"];function i_(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:t_},numbers:{type:"number",properties:e_}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function n_(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Gu=new Map;function s_(t,e){e=e||{};const i=t+JSON.stringify(e);let n=Gu.get(i);return n||(n=new Intl.NumberFormat(t,e),Gu.set(i,n)),n}function As(t,e,i){return s_(e,i).format(t)}const Dp={values(t){return Ue(t)?t:""+t},numeric(t,e,i){if(t===0)return"0";const n=this.chart.options.locale;let r,o=t;if(i.length>1){const d=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),o=r_(t,i)}const a=li(Math.abs(o)),l=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),As(t,n,c)},logarithmic(t,e,i){if(t===0)return"0";const n=i[e].significand||t/Math.pow(10,Math.floor(li(t)));return[1,2,3,5,10,15].includes(n)||e>.8*i.length?Dp.numeric.call(this,t,e,i):""}};function r_(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t)),i}var mo={formatters:Dp};function o_(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,i)=>i.lineWidth,tickColor:(e,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:mo.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Gi=Object.create(null),Ya=Object.create(null);function ns(t,e){if(!e)return t;const i=e.split(".");for(let n=0,r=i.length;n<r;++n){const o=i[n];t=t[o]||(t[o]=Object.create(null))}return t}function Uo(t,e,i){return typeof e=="string"?fs(ns(t,e),i):fs(ns(t,""),e)}class a_{constructor(e,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>jo(r.backgroundColor),this.hoverBorderColor=(n,r)=>jo(r.borderColor),this.hoverColor=(n,r)=>jo(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(i)}set(e,i){return Uo(this,e,i)}get(e){return ns(this,e)}describe(e,i){return Uo(Ya,e,i)}override(e,i){return Uo(Gi,e,i)}route(e,i,n,r){const o=ns(this,e),a=ns(this,n),l="_"+i;Object.defineProperties(o,{[l]:{value:o[i],writable:!0},[i]:{enumerable:!0,get(){const c=this[l],d=a[r];return De(c)?Object.assign({},d,c):xe(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(i=>i(this))}}var Ge=new a_({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[i_,n_,o_]);function l_(t){return!t||Te(t.size)||Te(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Xr(t,e,i,n,r){let o=e[r];return o||(o=e[r]=t.measureText(r).width,i.push(r)),o>n&&(n=o),n}function c_(t,e,i,n){n=n||{};let r=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},o=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let a=0;const l=i.length;let c,d,u,h,m;for(c=0;c<l;c++)if(h=i[c],h!=null&&!Ue(h))a=Xr(t,r,o,a,h);else if(Ue(h))for(d=0,u=h.length;d<u;d++)m=h[d],m!=null&&!Ue(m)&&(a=Xr(t,r,o,a,m));t.restore();const f=o.length/2;if(f>i.length){for(c=0;c<f;c++)delete r[o[c]];o.splice(0,f)}return a}function xi(t,e,i){const n=t.currentDevicePixelRatio,r=i!==0?Math.max(i/2,.5):0;return Math.round((e-r)*n)/n+r}function Ku(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Za(t,e,i,n){Ap(t,e,i,n,null)}function Ap(t,e,i,n,r){let o,a,l,c,d,u,h,m;const f=e.pointStyle,g=e.rotation,p=e.radius;let v=(g||0)*Hk;if(f&&typeof f=="object"&&(o=f.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(i,n),t.rotate(v),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(p)||p<=0)){switch(t.beginPath(),f){default:r?t.ellipse(i,n,r/2,p,0,0,je):t.arc(i,n,p,0,je),t.closePath();break;case"triangle":u=r?r/2:p,t.moveTo(i+Math.sin(v)*u,n-Math.cos(v)*p),v+=Vu,t.lineTo(i+Math.sin(v)*u,n-Math.cos(v)*p),v+=Vu,t.lineTo(i+Math.sin(v)*u,n-Math.cos(v)*p),t.closePath();break;case"rectRounded":d=p*.516,c=p-d,a=Math.cos(v+_i)*c,h=Math.cos(v+_i)*(r?r/2-d:c),l=Math.sin(v+_i)*c,m=Math.sin(v+_i)*(r?r/2-d:c),t.arc(i-h,n-l,d,v-Ie,v-Je),t.arc(i+m,n-a,d,v-Je,v),t.arc(i+h,n+l,d,v,v+Je),t.arc(i-m,n+a,d,v+Je,v+Ie),t.closePath();break;case"rect":if(!g){c=Math.SQRT1_2*p,u=r?r/2:c,t.rect(i-u,n-c,2*u,2*c);break}v+=_i;case"rectRot":h=Math.cos(v)*(r?r/2:p),a=Math.cos(v)*p,l=Math.sin(v)*p,m=Math.sin(v)*(r?r/2:p),t.moveTo(i-h,n-l),t.lineTo(i+m,n-a),t.lineTo(i+h,n+l),t.lineTo(i-m,n+a),t.closePath();break;case"crossRot":v+=_i;case"cross":h=Math.cos(v)*(r?r/2:p),a=Math.cos(v)*p,l=Math.sin(v)*p,m=Math.sin(v)*(r?r/2:p),t.moveTo(i-h,n-l),t.lineTo(i+h,n+l),t.moveTo(i+m,n-a),t.lineTo(i-m,n+a);break;case"star":h=Math.cos(v)*(r?r/2:p),a=Math.cos(v)*p,l=Math.sin(v)*p,m=Math.sin(v)*(r?r/2:p),t.moveTo(i-h,n-l),t.lineTo(i+h,n+l),t.moveTo(i+m,n-a),t.lineTo(i-m,n+a),v+=_i,h=Math.cos(v)*(r?r/2:p),a=Math.cos(v)*p,l=Math.sin(v)*p,m=Math.sin(v)*(r?r/2:p),t.moveTo(i-h,n-l),t.lineTo(i+h,n+l),t.moveTo(i+m,n-a),t.lineTo(i-m,n+a);break;case"line":a=r?r/2:Math.cos(v)*p,l=Math.sin(v)*p,t.moveTo(i-a,n-l),t.lineTo(i+a,n+l);break;case"dash":t.moveTo(i,n),t.lineTo(i+Math.cos(v)*(r?r/2:p),n+Math.sin(v)*p);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Jt(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function fo(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function po(t){t.restore()}function d_(t,e,i,n,r){if(!e)return t.lineTo(i.x,i.y);if(r==="middle"){const o=(e.x+i.x)/2;t.lineTo(o,e.y),t.lineTo(o,i.y)}else r==="after"!=!!n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function u_(t,e,i,n){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function h_(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Te(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function m_(t,e,i,n,r){if(r.strikethrough||r.underline){const o=t.measureText(n),a=e-o.actualBoundingBoxLeft,l=e+o.actualBoundingBoxRight,c=i-o.actualBoundingBoxAscent,d=i+o.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(a,u),t.lineTo(l,u),t.stroke()}}function f_(t,e){const i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}function Ki(t,e,i,n,r,o={}){const a=Ue(e)?e:[e],l=o.strokeWidth>0&&o.strokeColor!=="";let c,d;for(t.save(),t.font=r.string,h_(t,o),c=0;c<a.length;++c)d=a[c],o.backdrop&&f_(t,o.backdrop),l&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),Te(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(d,i,n,o.maxWidth)),t.fillText(d,i,n,o.maxWidth),m_(t,i,n,d,o),n+=Number(r.lineHeight);t.restore()}function vs(t,e){const{x:i,y:n,w:r,h:o,radius:a}=e;t.arc(i+a.topLeft,n+a.topLeft,a.topLeft,1.5*Ie,Ie,!0),t.lineTo(i,n+o-a.bottomLeft),t.arc(i+a.bottomLeft,n+o-a.bottomLeft,a.bottomLeft,Ie,Je,!0),t.lineTo(i+r-a.bottomRight,n+o),t.arc(i+r-a.bottomRight,n+o-a.bottomRight,a.bottomRight,Je,0,!0),t.lineTo(i+r,n+a.topRight),t.arc(i+r-a.topRight,n+a.topRight,a.topRight,0,-Je,!0),t.lineTo(i+a.topLeft,n)}const p_=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,g_=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function v_(t,e){const i=(""+t).match(p_);if(!i||i[1]==="normal")return e*1.2;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100;break}return e*t}const y_=t=>+t||0;function fc(t,e){const i={},n=De(e),r=n?Object.keys(e):e,o=De(t)?n?a=>xe(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of r)i[a]=y_(o(a));return i}function Fp(t){return fc(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Oi(t){return fc(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ut(t){const e=Fp(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function it(t,e){t=t||{},e=e||Ge.font;let i=xe(t.size,e.size);typeof i=="string"&&(i=parseInt(i,10));let n=xe(t.style,e.style);n&&!(""+n).match(g_)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:xe(t.family,e.family),lineHeight:v_(xe(t.lineHeight,e.lineHeight),i),size:i,style:n,weight:xe(t.weight,e.weight),string:""};return r.string=l_(r),r}function Vn(t,e,i,n){let r,o,a;for(r=0,o=t.length;r<o;++r)if(a=t[r],a!==void 0&&a!==void 0)return a}function b_(t,e,i){const{min:n,max:r}=t,o=kp(e,(r-n)/2),a=(l,c)=>i&&l===0?0:l+c;return{min:a(n,-Math.abs(o)),max:a(r,o)}}function vi(t,e){return Object.assign(Object.create(t),e)}function pc(t,e=[""],i,n,r=()=>t[0]){const o=i||t;typeof n>"u"&&(n=Bp("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:n,_getTarget:r,override:l=>pc([l,...t],e,o,n)};return new Proxy(a,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return Ip(l,c,()=>L_(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return Zu(l).includes(c)},ownKeys(l){return Zu(l)},set(l,c,d){const u=l._storage||(l._storage=r());return l[c]=u[c]=d,delete l._keys,!0}})}function pn(t,e,i,n){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:Pp(t,n),setContext:o=>pn(t,o,i,n),override:o=>pn(t.override(o),e,i,n)};return new Proxy(r,{deleteProperty(o,a){return delete o[a],delete t[a],!0},get(o,a,l){return Ip(o,a,()=>k_(o,a,l))},getOwnPropertyDescriptor(o,a){return o._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(o,a,l){return t[a]=l,delete o[a],!0}})}function Pp(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:i,indexable:n,isScriptable:pi(i)?i:()=>i,isIndexable:pi(n)?n:()=>n}}const w_=(t,e)=>t?t+cc(e):e,gc=(t,e)=>De(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Ip(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=i();return t[e]=n,n}function k_(t,e,i){const{_proxy:n,_context:r,_subProxy:o,_descriptors:a}=t;let l=n[e];return pi(l)&&a.isScriptable(e)&&(l=__(e,l,t,i)),Ue(l)&&l.length&&(l=x_(e,l,t,a.isIndexable)),gc(e,l)&&(l=pn(l,r,o&&o[e],a)),l}function __(t,e,i,n){const{_proxy:r,_context:o,_subProxy:a,_stack:l}=i;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(o,a||n);return l.delete(t),gc(t,c)&&(c=vc(r._scopes,r,t,c)),c}function x_(t,e,i,n){const{_proxy:r,_context:o,_subProxy:a,_descriptors:l}=i;if(typeof o.index<"u"&&n(t))return e[o.index%e.length];if(De(e[0])){const c=e,d=r._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=vc(d,r,t,u);e.push(pn(h,o,a&&a[t],l))}}return e}function Rp(t,e,i){return pi(t)?t(e,i):t}const C_=(t,e)=>t===!0?e:typeof t=="string"?fi(e,t):void 0;function S_(t,e,i,n,r){for(const o of e){const a=C_(i,o);if(a){t.add(a);const l=Rp(a._fallback,i,r);if(typeof l<"u"&&l!==i&&l!==n)return l}else if(a===!1&&typeof n<"u"&&i!==n)return null}return!1}function vc(t,e,i,n){const r=e._rootScopes,o=Rp(e._fallback,i,n),a=[...t,...r],l=new Set;l.add(n);let c=Yu(l,a,i,o||i,n);return c===null||typeof o<"u"&&o!==i&&(c=Yu(l,a,o,c,n),c===null)?!1:pc(Array.from(l),[""],r,o,()=>N_(e,i,n))}function Yu(t,e,i,n,r){for(;i;)i=S_(t,e,i,n,r);return i}function N_(t,e,i){const n=t._getTarget();e in n||(n[e]={});const r=n[e];return Ue(r)&&De(i)?i:r||{}}function L_(t,e,i,n){let r;for(const o of e)if(r=Bp(w_(o,t),i),typeof r<"u")return gc(t,r)?vc(i,n,t,r):r}function Bp(t,e){for(const i of e){if(!i)continue;const n=i[t];if(typeof n<"u")return n}}function Zu(t){let e=t._keys;return e||(e=t._keys=M_(t._scopes)),e}function M_(t){const e=new Set;for(const i of t)for(const n of Object.keys(i).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}function zp(t,e,i,n){const{iScale:r}=t,{key:o="r"}=this._parsing,a=new Array(n);let l,c,d,u;for(l=0,c=n;l<c;++l)d=l+i,u=e[d],a[l]={r:r.parse(fi(u,o),d)};return a}const T_=Number.EPSILON||1e-14,gn=(t,e)=>e<t.length&&!t[e].skip&&t[e],Vp=t=>t==="x"?"y":"x";function E_(t,e,i,n){const r=t.skip?e:t,o=e,a=i.skip?e:i,l=Ka(o,r),c=Ka(a,o);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=n*d,m=n*u;return{previous:{x:o.x-h*(a.x-r.x),y:o.y-h*(a.y-r.y)},next:{x:o.x+m*(a.x-r.x),y:o.y+m*(a.y-r.y)}}}function D_(t,e,i){const n=t.length;let r,o,a,l,c,d=gn(t,0);for(let u=0;u<n-1;++u)if(c=d,d=gn(t,u+1),!(!c||!d)){if(ts(e[u],0,T_)){i[u]=i[u+1]=0;continue}r=i[u]/e[u],o=i[u+1]/e[u],l=Math.pow(r,2)+Math.pow(o,2),!(l<=9)&&(a=3/Math.sqrt(l),i[u]=r*a*e[u],i[u+1]=o*a*e[u])}}function A_(t,e,i="x"){const n=Vp(i),r=t.length;let o,a,l,c=gn(t,0);for(let d=0;d<r;++d){if(a=l,l=c,c=gn(t,d+1),!l)continue;const u=l[i],h=l[n];a&&(o=(u-a[i])/3,l[`cp1${i}`]=u-o,l[`cp1${n}`]=h-o*e[d]),c&&(o=(c[i]-u)/3,l[`cp2${i}`]=u+o,l[`cp2${n}`]=h+o*e[d])}}function F_(t,e="x"){const i=Vp(e),n=t.length,r=Array(n).fill(0),o=Array(n);let a,l,c,d=gn(t,0);for(a=0;a<n;++a)if(l=c,c=d,d=gn(t,a+1),!!c){if(d){const u=d[e]-c[e];r[a]=u!==0?(d[i]-c[i])/u:0}o[a]=l?d?Ht(r[a-1])!==Ht(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}D_(t,r,o),A_(t,o,e)}function Js(t,e,i){return Math.max(Math.min(t,i),e)}function P_(t,e){let i,n,r,o,a,l=Jt(t[0],e);for(i=0,n=t.length;i<n;++i)a=o,o=l,l=i<n-1&&Jt(t[i+1],e),o&&(r=t[i],a&&(r.cp1x=Js(r.cp1x,e.left,e.right),r.cp1y=Js(r.cp1y,e.top,e.bottom)),l&&(r.cp2x=Js(r.cp2x,e.left,e.right),r.cp2y=Js(r.cp2y,e.top,e.bottom)))}function I_(t,e,i,n,r){let o,a,l,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")F_(t,r);else{let d=n?t[t.length-1]:t[0];for(o=0,a=t.length;o<a;++o)l=t[o],c=E_(d,l,t[Math.min(o+1,a-(n?0:1))%a],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&P_(t,i)}function yc(){return typeof window<"u"&&typeof document<"u"}function bc(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Jr(t,e,i){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[i])):n=t,n}const go=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function R_(t,e){return go(t).getPropertyValue(e)}const B_=["top","right","bottom","left"];function $i(t,e,i){const n={};i=i?"-"+i:"";for(let r=0;r<4;r++){const o=B_[r];n[o]=parseFloat(t[e+"-"+o+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const z_=(t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot);function V_(t,e){const i=t.touches,n=i&&i.length?i[0]:t,{offsetX:r,offsetY:o}=n;let a=!1,l,c;if(z_(r,o,t.target))l=r,c=o;else{const d=e.getBoundingClientRect();l=n.clientX-d.left,c=n.clientY-d.top,a=!0}return{x:l,y:c,box:a}}function Ei(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:n}=e,r=go(i),o=r.boxSizing==="border-box",a=$i(r,"padding"),l=$i(r,"border","width"),{x:c,y:d,box:u}=V_(t,i),h=a.left+(u&&l.left),m=a.top+(u&&l.top);let{width:f,height:g}=e;return o&&(f-=a.width+l.width,g-=a.height+l.height),{x:Math.round((c-h)/f*i.width/n),y:Math.round((d-m)/g*i.height/n)}}function W_(t,e,i){let n,r;if(e===void 0||i===void 0){const o=t&&bc(t);if(!o)e=t.clientWidth,i=t.clientHeight;else{const a=o.getBoundingClientRect(),l=go(o),c=$i(l,"border","width"),d=$i(l,"padding");e=a.width-d.width-c.width,i=a.height-d.height-c.height,n=Jr(l.maxWidth,o,"clientWidth"),r=Jr(l.maxHeight,o,"clientHeight")}}return{width:e,height:i,maxWidth:n||qr,maxHeight:r||qr}}const Qs=t=>Math.round(t*10)/10;function O_(t,e,i,n){const r=go(t),o=$i(r,"margin"),a=Jr(r.maxWidth,t,"clientWidth")||qr,l=Jr(r.maxHeight,t,"clientHeight")||qr,c=W_(t,e,i);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const m=$i(r,"border","width"),f=$i(r,"padding");d-=f.width+m.width,u-=f.height+m.height}return d=Math.max(0,d-o.width),u=Math.max(0,n?d/n:u-o.height),d=Qs(Math.min(d,a,c.maxWidth)),u=Qs(Math.min(u,l,c.maxHeight)),d&&!u&&(u=Qs(d/2)),(e!==void 0||i!==void 0)&&n&&c.height&&u>c.height&&(u=c.height,d=Qs(Math.floor(u*n))),{width:d,height:u}}function qu(t,e,i){const n=e||1,r=Math.floor(t.height*n),o=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(i||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||a.height!==r||a.width!==o?(t.currentDevicePixelRatio=n,a.height=r,a.width=o,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const $_=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};yc()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function Xu(t,e){const i=R_(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Di(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function H_(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:n==="middle"?i<.5?t.y:e.y:n==="after"?i<1?t.y:e.y:i>0?e.y:t.y}}function j_(t,e,i,n){const r={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},a=Di(t,r,i),l=Di(r,o,i),c=Di(o,e,i),d=Di(a,l,i),u=Di(l,c,i);return Di(d,u,i)}const U_=function(t,e){return{x(i){return t+t+e-i},setWidth(i){e=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,n){return i-n},leftForLtr(i,n){return i-n}}},G_=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function un(t,e,i){return t?U_(e,i):G_()}function Wp(t,e){let i,n;(e==="ltr"||e==="rtl")&&(i=t.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=n)}function Op(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function $p(t){return t==="angle"?{between:gs,compare:Kk,normalize:ct}:{between:qt,compare:(e,i)=>e-i,normalize:e=>e}}function Ju({start:t,end:e,count:i,loop:n,style:r}){return{start:t%i,end:e%i,loop:n&&(e-t+1)%i===0,style:r}}function K_(t,e,i){const{property:n,start:r,end:o}=i,{between:a,normalize:l}=$p(n),c=e.length;let{start:d,end:u,loop:h}=t,m,f;if(h){for(d+=c,u+=c,m=0,f=c;m<f&&a(l(e[d%c][n]),r,o);++m)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:t.style}}function Hp(t,e,i){if(!i)return[t];const{property:n,start:r,end:o}=i,a=e.length,{compare:l,between:c,normalize:d}=$p(n),{start:u,end:h,loop:m,style:f}=K_(t,e,i),g=[];let p=!1,v=null,b,y,w;const _=()=>c(r,w,b)&&l(r,w)!==0,k=()=>l(o,b)===0||c(o,w,b),N=()=>p||_(),C=()=>!p||k();for(let S=u,x=u;S<=h;++S)y=e[S%a],!y.skip&&(b=d(y[n]),b!==w&&(p=c(b,r,o),v===null&&N()&&(v=l(b,r)===0?S:x),v!==null&&C()&&(g.push(Ju({start:v,end:S,loop:m,count:a,style:f})),v=null),x=S,w=b));return v!==null&&g.push(Ju({start:v,end:h,loop:m,count:a,style:f})),g}function jp(t,e){const i=[],n=t.segments;for(let r=0;r<n.length;r++){const o=Hp(n[r],t.points,e);o.length&&i.push(...o)}return i}function Y_(t,e,i,n){let r=0,o=e-1;if(i&&!n)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,i&&(o+=r);o>r&&t[o%e].skip;)o--;return o%=e,{start:r,end:o}}function Z_(t,e,i,n){const r=t.length,o=[];let a=e,l=t[e],c;for(c=e+1;c<=i;++c){const d=t[c%r];d.skip||d.stop?l.skip||(n=!1,o.push({start:e%r,end:(c-1)%r,loop:n}),e=a=d.stop?c:null):(a=c,l.skip&&(e=c)),l=d}return a!==null&&o.push({start:e%r,end:a%r,loop:n}),o}function q_(t,e){const i=t.points,n=t.options.spanGaps,r=i.length;if(!r)return[];const o=!!t._loop,{start:a,end:l}=Y_(i,r,o,n);if(n===!0)return Qu(t,[{start:a,end:l,loop:o}],i,e);const c=l<a?l+r:l,d=!!t._fullLoop&&a===0&&l===r-1;return Qu(t,Z_(i,a,c,d),i,e)}function Qu(t,e,i,n){return!n||!n.setContext||!i?e:X_(t,e,i,n)}function X_(t,e,i,n){const r=t._chart.getContext(),o=eh(t.options),{_datasetIndex:a,options:{spanGaps:l}}=t,c=i.length,d=[];let u=o,h=e[0].start,m=h;function f(g,p,v,b){const y=l?-1:1;if(g!==p){for(g+=c;i[g%c].skip;)g-=y;for(;i[p%c].skip;)p+=y;g%c!==p%c&&(d.push({start:g%c,end:p%c,loop:v,style:b}),u=b,h=p%c)}}for(const g of e){h=l?h:g.start;let p=i[h%c],v;for(m=h+1;m<=g.end;m++){const b=i[m%c];v=eh(n.setContext(vi(r,{type:"segment",p0:p,p1:b,p0DataIndex:(m-1)%c,p1DataIndex:m%c,datasetIndex:a}))),J_(v,u)&&f(h,m-1,g.loop,u),p=b,u=v}h<m-1&&f(h,m-1,g.loop,u)}return d}function eh(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function J_(t,e){if(!e)return!1;const i=[],n=function(r,o){return mc(o)?(i.includes(o)||i.push(o),i.indexOf(o)):o};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function er(t,e,i){return t.options.clip?t[i]:e[i]}function Q_(t,e){const{xScale:i,yScale:n}=t;return i&&n?{left:er(i,e,"left"),right:er(i,e,"right"),top:er(n,e,"top"),bottom:er(n,e,"bottom")}:e}function Up(t,e){const i=e._clip;if(i.disabled)return!1;const n=Q_(e,t.chartArea);return{left:i.left===!1?0:n.left-(i.left===!0?0:i.left),right:i.right===!1?t.width:n.right+(i.right===!0?0:i.right),top:i.top===!1?0:n.top-(i.top===!0?0:i.top),bottom:i.bottom===!1?t.height:n.bottom+(i.bottom===!0?0:i.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class ex{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,i,n,r){const o=i.listeners[r],a=i.duration;o.forEach(l=>l({chart:e,initial:i.initial,numSteps:a,currentStep:Math.min(n-i.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Lp.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let i=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const o=n.items;let a=o.length-1,l=!1,c;for(;a>=0;--a)c=o[a],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),l=!0):(o[a]=o[o.length-1],o.pop());l&&(r.draw(),this._notify(r,n,e,"progress")),o.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),i+=o.length}),this._lastDate=e,i===0&&(this._running=!1)}_getAnims(e){const i=this._charts;let n=i.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(e,n)),n}listen(e,i,n){this._getAnims(e).listeners[i].push(n)}add(e,i){!i||!i.length||this._getAnims(e).items.push(...i)}has(e){return this._getAnims(e).items.length>0}start(e){const i=this._charts.get(e);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const i=this._charts.get(e);return!(!i||!i.running||!i.items.length)}stop(e){const i=this._charts.get(e);if(!i||!i.items.length)return;const n=i.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();i.items=[],this._notify(e,i,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Gt=new ex;const th="transparent",tx={boolean(t,e,i){return i>.5?e:t},color(t,e,i){const n=Uu(t||th),r=n.valid&&Uu(e||th);return r&&r.valid?r.mix(n,i).hexString():e},number(t,e,i){return t+(e-t)*i}};class ix{constructor(e,i,n,r){const o=i[n];r=Vn([e.to,r,o,e.from]);const a=Vn([e.from,o,r]);this._active=!0,this._fn=e.fn||tx[e.type||typeof a],this._easing=is[e.easing]||is.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=i,this._prop=n,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(e,i,n){if(this._active){this._notify(!1);const r=this._target[this._prop],o=n-this._start,a=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Vn([e.to,i,r,e.from]),this._from=Vn([e.from,r,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const i=e-this._start,n=this._duration,r=this._prop,o=this._from,a=this._loop,l=this._to;let c;if(this._active=o!==l&&(a||i<n),!this._active){this._target[r]=l,this._notify(!0);return}if(i<0){this._target[r]=o;return}c=i/n%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(o,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((i,n)=>{e.push({res:i,rej:n})})}_notify(e){const i=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][i]()}}class Gp{constructor(e,i){this._chart=e,this._properties=new Map,this.configure(i)}configure(e){if(!De(e))return;const i=Object.keys(Ge.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const o=e[r];if(!De(o))return;const a={};for(const l of i)a[l]=o[l];(Ue(o.properties)&&o.properties||[r]).forEach(l=>{(l===r||!n.has(l))&&n.set(l,a)})})}_animateOptions(e,i){const n=i.options,r=sx(e,n);if(!r)return[];const o=this._createAnimations(r,n);return n.$shared&&nx(e.options.$animations,n).then(()=>{e.options=n},()=>{}),o}_createAnimations(e,i){const n=this._properties,r=[],o=e.$animations||(e.$animations={}),a=Object.keys(i),l=Date.now();let c;for(c=a.length-1;c>=0;--c){const d=a[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(e,i));continue}const u=i[d];let h=o[d];const m=n.get(d);if(h)if(m&&h.active()){h.update(m,u,l);continue}else h.cancel();if(!m||!m.duration){e[d]=u;continue}o[d]=h=new ix(m,e,d,u),r.push(h)}return r}update(e,i){if(this._properties.size===0){Object.assign(e,i);return}const n=this._createAnimations(e,i);if(n.length)return Gt.add(this._chart,n),!0}}function nx(t,e){const i=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const o=t[n[r]];o&&o.active()&&i.push(o.wait())}return Promise.all(i)}function sx(t,e){if(!e)return;let i=t.options;if(!i){t.options=e;return}return i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function ih(t,e){const i=t&&t.options||{},n=i.reverse,r=i.min===void 0?e:0,o=i.max===void 0?e:0;return{start:n?o:r,end:n?r:o}}function rx(t,e,i){if(i===!1)return!1;const n=ih(t,i),r=ih(e,i);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function ox(t){let e,i,n,r;return De(t)?(e=t.top,i=t.right,n=t.bottom,r=t.left):e=i=n=r=t,{top:e,right:i,bottom:n,left:r,disabled:t===!1}}function Kp(t,e){const i=[],n=t._getSortedDatasetMetas(e);let r,o;for(r=0,o=n.length;r<o;++r)i.push(n[r].index);return i}function nh(t,e,i,n={}){const r=t.keys,o=n.mode==="single";let a,l,c,d;if(e===null)return;let u=!1;for(a=0,l=r.length;a<l;++a){if(c=+r[a],c===i){if(u=!0,n.all)continue;break}d=t.values[c],Ze(d)&&(o||e===0||Ht(e)===Ht(d))&&(e+=d)}return!u&&!n.all?0:e}function ax(t,e){const{iScale:i,vScale:n}=e,r=i.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",a=Object.keys(t),l=new Array(a.length);let c,d,u;for(c=0,d=a.length;c<d;++c)u=a[c],l[c]={[r]:u,[o]:t[u]};return l}function Go(t,e){const i=t&&t.options.stacked;return i||i===void 0&&e.stack!==void 0}function lx(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}function cx(t){const{min:e,max:i,minDefined:n,maxDefined:r}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?i:Number.POSITIVE_INFINITY}}function dx(t,e,i){const n=t[e]||(t[e]={});return n[i]||(n[i]={})}function sh(t,e,i,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const o=t[r.index];if(i&&o>0||!i&&o<0)return r.index}return null}function rh(t,e){const{chart:i,_cachedMeta:n}=t,r=i._stacks||(i._stacks={}),{iScale:o,vScale:a,index:l}=n,c=o.axis,d=a.axis,u=lx(o,a,n),h=e.length;let m;for(let f=0;f<h;++f){const g=e[f],{[c]:p,[d]:v}=g,b=g._stacks||(g._stacks={});m=b[d]=dx(r,u,p),m[l]=v,m._top=sh(m,a,!0,n.type),m._bottom=sh(m,a,!1,n.type);const y=m._visualValues||(m._visualValues={});y[l]=v}}function Ko(t,e){const i=t.scales;return Object.keys(i).filter(n=>i[n].axis===e).shift()}function ux(t,e){return vi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function hx(t,e,i){return vi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}function Sn(t,e){const i=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const r of e){const o=r._stacks;if(!o||o[n]===void 0||o[n][i]===void 0)return;delete o[n][i],o[n]._visualValues!==void 0&&o[n]._visualValues[i]!==void 0&&delete o[n]._visualValues[i]}}}const Yo=t=>t==="reset"||t==="none",oh=(t,e)=>e?t:Object.assign({},t),mx=(t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:Kp(i,!0),values:null};class Dt{constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Go(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Sn(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,i=this._cachedMeta,n=this.getDataset(),r=(h,m,f,g)=>h==="x"?m:h==="r"?g:f,o=i.xAxisID=xe(n.xAxisID,Ko(e,"x")),a=i.yAxisID=xe(n.yAxisID,Ko(e,"y")),l=i.rAxisID=xe(n.rAxisID,Ko(e,"r")),c=i.indexAxis,d=i.iAxisID=r(c,o,a,l),u=i.vAxisID=r(c,a,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(d),i.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&$u(this._data,this),e._stacked&&Sn(e)}_dataCheck(){const e=this.getDataset(),i=e.data||(e.data=[]),n=this._data;if(De(i)){const r=this._cachedMeta;this._data=ax(i,r)}else if(n!==i){if(n){$u(n,this);const r=this._cachedMeta;Sn(r),r._parsed=[]}i&&Object.isExtensible(i)&&Xk(i,this),this._syncList=[],this._data=i}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const i=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const o=i._stacked;i._stacked=Go(i.vScale,i),i.stack!==n.stack&&(r=!0,Sn(i),i.stack=n.stack),this._resyncElements(e),(r||o!==i._stacked)&&(rh(this,i._parsed),i._stacked=Go(i.vScale,i))}configure(){const e=this.chart.config,i=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){const{_cachedMeta:n,_data:r}=this,{iScale:o,_stacked:a}=n,l=o.axis;let c=e===0&&i===r.length?!0:n._sorted,d=e>0&&n._parsed[e-1],u,h,m;if(this._parsing===!1)n._parsed=r,n._sorted=!0,m=r;else{Ue(r[e])?m=this.parseArrayData(n,r,e,i):De(r[e])?m=this.parseObjectData(n,r,e,i):m=this.parsePrimitiveData(n,r,e,i);const f=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<i;++u)n._parsed[u+e]=h=m[u],c&&(f()&&(c=!1),d=h);n._sorted=c}a&&rh(this,m)}parsePrimitiveData(e,i,n,r){const{iScale:o,vScale:a}=e,l=o.axis,c=a.axis,d=o.getLabels(),u=o===a,h=new Array(r);let m,f,g;for(m=0,f=r;m<f;++m)g=m+n,h[m]={[l]:u||o.parse(d[g],g),[c]:a.parse(i[g],g)};return h}parseArrayData(e,i,n,r){const{xScale:o,yScale:a}=e,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=i[u],l[c]={x:o.parse(h[0],u),y:a.parse(h[1],u)};return l}parseObjectData(e,i,n,r){const{xScale:o,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,h,m,f;for(u=0,h=r;u<h;++u)m=u+n,f=i[m],d[u]={x:o.parse(fi(f,l),m),y:a.parse(fi(f,c),m)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,n){const r=this.chart,o=this._cachedMeta,a=i[e.axis],l={keys:Kp(r,!0),values:i._stacks[e.axis]._visualValues};return nh(l,a,o.index,{mode:n})}updateRangeFromParsed(e,i,n,r){const o=n[i.axis];let a=o===null?NaN:o;const l=r&&n._stacks[i.axis];r&&l&&(r.values=l,a=nh(r,o,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,i){const n=this._cachedMeta,r=n._parsed,o=n._sorted&&e===n.iScale,a=r.length,l=this._getOtherScale(e),c=mx(i,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=cx(l);let m,f;function g(){f=r[m];const p=f[l.axis];return!Ze(f[e.axis])||u>p||h<p}for(m=0;m<a&&!(!g()&&(this.updateRangeFromParsed(d,e,f,c),o));++m);if(o){for(m=a-1;m>=0;--m)if(!g()){this.updateRangeFromParsed(d,e,f,c);break}}return d}getAllParsedValues(e){const i=this._cachedMeta._parsed,n=[];let r,o,a;for(r=0,o=i.length;r<o;++r)a=i[r][e.axis],Ze(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const i=this._cachedMeta,n=i.iScale,r=i.vScale,o=this.getParsed(e);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:r?""+r.getLabelForValue(o[r.axis]):""}}_update(e){const i=this._cachedMeta;this.update(e||"default"),i._clip=ox(xe(this.options.clip,rx(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,i=this.chart,n=this._cachedMeta,r=n.data||[],o=i.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,o,l,c),u=l;u<l+c;++u){const h=r[u];h.hidden||(h.active&&d?a.push(h):h.draw(e,o))}for(u=0;u<a.length;++u)a[u].draw(e,o)}getStyle(e,i){const n=i?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,i,n){const r=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];o=a.$context||(a.$context=hx(this.getContext(),e,a)),o.parsed=this.getParsed(e),o.raw=r.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=ux(this.chart.getContext(),this.index)),o.dataset=r,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=n,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",n){const r=i==="active",o=this._cachedDataOpts,a=e+"-"+i,l=o[a],c=this.enableOptionSharing&&ps(n);if(l)return oh(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],m=d.getOptionScopes(this.getDataset(),u),f=Object.keys(Ge.elements[e]),g=()=>this.getContext(n,r,i),p=d.resolveNamedOptions(m,f,g,h);return p.$shared&&(p.$shared=c,o[a]=Object.freeze(oh(p,c))),p}_resolveAnimations(e,i,n){const r=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,l=o[a];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,i),m=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(m,this.getContext(e,n,i))}const d=new Gp(r,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||Yo(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){const n=this.resolveDataElementOptions(e,i),r=this._sharedOptions,o=this.getSharedOptions(n),a=this.includeOptions(i,o)||o!==r;return this.updateSharedOptions(o,i,n),{sharedOptions:o,includeOptions:a}}updateElement(e,i,n,r){Yo(r)?Object.assign(e,n):this._resolveAnimations(i,r).update(e,n)}updateSharedOptions(e,i,n){e&&!Yo(i)&&this._resolveAnimations(void 0,i).update(e,n)}_setStyle(e,i,n,r){e.active=r;const o=this.getStyle(i,r);this._resolveAnimations(i,n,r).update(e,{options:!r&&this.getSharedOptions(o)||o})}removeHoverStyle(e,i,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,i,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const i=this._data,n=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=n.length,o=i.length,a=Math.min(o,r);a&&this.parse(0,a),o>r?this._insertElements(r,o-r,e):o<r&&this._removeElements(o,r-o)}_insertElements(e,i,n=!0){const r=this._cachedMeta,o=r.data,a=e+i;let l;const c=d=>{for(d.length+=i,l=d.length-1;l>=a;l--)d[l]=d[l-i]};for(c(o),l=e;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,i),n&&this.updateElements(o,e,i,"reset")}updateElements(e,i,n,r){}_removeElements(e,i){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,i);n._stacked&&Sn(n,r)}n.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[i,n,r]=e;this[i](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ue(Dt,"defaults",{}),ue(Dt,"datasetElementType",null),ue(Dt,"dataElementType",null);function fx(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let n=[];for(let r=0,o=i.length;r<o;r++)n=n.concat(i[r].controller.getAllParsedValues(t));t._cache.$bar=Np(n.sort((r,o)=>r-o))}return t._cache.$bar}function px(t){const e=t.iScale,i=fx(e,t.type);let n=e._length,r,o,a,l;const c=()=>{a===32767||a===-32768||(ps(l)&&(n=Math.min(n,Math.abs(a-l)||n)),l=a)};for(r=0,o=i.length;r<o;++r)a=e.getPixelForValue(i[r]),c();for(l=void 0,r=0,o=e.ticks.length;r<o;++r)a=e.getPixelForTick(r),c();return n}function gx(t,e,i,n){const r=i.barThickness;let o,a;return Te(r)?(o=e.min*i.categoryPercentage,a=i.barPercentage):(o=r*n,a=1),{chunk:o/n,ratio:a,start:e.pixels[t]-o/2}}function vx(t,e,i,n){const r=e.pixels,o=r[t];let a=t>0?r[t-1]:null,l=t<r.length-1?r[t+1]:null;const c=i.categoryPercentage;a===null&&(a=o-(l===null?e.end-e.start:l-o)),l===null&&(l=o+o-a);const d=o-(o-Math.min(a,l))/2*c;return{chunk:Math.abs(l-a)/2*c/n,ratio:i.barPercentage,start:d}}function yx(t,e,i,n){const r=i.parse(t[0],n),o=i.parse(t[1],n),a=Math.min(r,o),l=Math.max(r,o);let c=a,d=l;Math.abs(a)>Math.abs(l)&&(c=l,d=a),e[i.axis]=d,e._custom={barStart:c,barEnd:d,start:r,end:o,min:a,max:l}}function Yp(t,e,i,n){return Ue(t)?yx(t,e,i,n):e[i.axis]=i.parse(t,n),e}function ah(t,e,i,n){const r=t.iScale,o=t.vScale,a=r.getLabels(),l=r===o,c=[];let d,u,h,m;for(d=i,u=i+n;d<u;++d)m=e[d],h={},h[r.axis]=l||r.parse(a[d],d),c.push(Yp(m,h,o,d));return c}function Zo(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function bx(t,e,i){return t!==0?Ht(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}function wx(t){let e,i,n,r,o;return t.horizontal?(e=t.base>t.x,i="left",n="right"):(e=t.base<t.y,i="bottom",n="top"),e?(r="end",o="start"):(r="start",o="end"),{start:i,end:n,reverse:e,top:r,bottom:o}}function kx(t,e,i,n){let r=e.borderSkipped;const o={};if(!r){t.borderSkipped=o;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:l,reverse:c,top:d,bottom:u}=wx(t);r==="middle"&&i&&(t.enableBorderRadius=!0,(i._top||0)===n?r=d:(i._bottom||0)===n?r=u:(o[lh(u,a,l,c)]=!0,r=d)),o[lh(r,a,l,c)]=!0,t.borderSkipped=o}function lh(t,e,i,n){return n?(t=_x(t,e,i),t=ch(t,i,e)):t=ch(t,e,i),t}function _x(t,e,i){return t===e?i:t===i?e:t}function ch(t,e,i){return t==="start"?e:t==="end"?i:t}function xx(t,{inflateAmount:e},i){t.inflateAmount=e==="auto"?i===1?.33:0:e}class Mr extends Dt{parsePrimitiveData(e,i,n,r){return ah(e,i,n,r)}parseArrayData(e,i,n,r){return ah(e,i,n,r)}parseObjectData(e,i,n,r){const{iScale:o,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=o.axis==="x"?l:c,u=a.axis==="x"?l:c,h=[];let m,f,g,p;for(m=n,f=n+r;m<f;++m)p=i[m],g={},g[o.axis]=o.parse(fi(p,d),m),h.push(Yp(fi(p,u),g,a,m));return h}updateRangeFromParsed(e,i,n,r){super.updateRangeFromParsed(e,i,n,r);const o=n._custom;o&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const i=this._cachedMeta,{iScale:n,vScale:r}=i,o=this.getParsed(e),a=o._custom,l=Zo(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(o[r.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,n,r){const o=r==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:m}=this._getSharedOptions(i,r);for(let f=i;f<i+n;f++){const g=this.getParsed(f),p=o||Te(g[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(f),v=this._calculateBarIndexPixels(f,u),b=(g._stacks||{})[l.axis],y={horizontal:d,base:p.base,enableBorderRadius:!b||Zo(g._custom)||a===b._top||a===b._bottom,x:d?p.head:v.center,y:d?v.center:p.head,height:d?v.size:Math.abs(p.size),width:d?Math.abs(p.size):v.size};m&&(y.options=h||this.resolveDataElementOptions(f,e[f].active?"active":r));const w=y.options||e[f].options;kx(y,w,b,a),xx(y,w,u.ratio),this.updateElement(e[f],f,y,r)}}_getStacks(e,i){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),o=n.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(i),c=l&&l[n.axis],d=u=>{const h=u._parsed.find(f=>f[n.axis]===c),m=h&&h[u.vScale.axis];if(Te(m)||isNaN(m))return!0};for(const u of r)if(!(i!==void 0&&d(u))&&((o===!1||a.indexOf(u.stack)===-1||o===void 0&&u.stack===void 0)&&a.push(u.stack),u.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,i=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===i).shift()}_getAxis(){const e={},i=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[xe(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,i)]=!0;return Object.keys(e)}_getStackIndex(e,i,n){const r=this._getStacks(e,n),o=i!==void 0?r.indexOf(i):-1;return o===-1?r.length-1:o}_getRuler(){const e=this.options,i=this._cachedMeta,n=i.iScale,r=[];let o,a;for(o=0,a=i.data.length;o<a;++o)r.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));const l=e.barThickness;return{min:l||px(i),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:i,_stacked:n,index:r},options:{base:o,minBarLength:a}}=this,l=o||0,c=this.getParsed(e),d=c._custom,u=Zo(d);let h=c[i.axis],m=0,f=n?this.applyStack(i,c,n):h,g,p;f!==h&&(m=f-h,f=h),u&&(h=d.barStart,f=d.barEnd-d.barStart,h!==0&&Ht(h)!==Ht(d.barEnd)&&(m=0),m+=h);const v=!Te(o)&&!u?o:m;let b=i.getPixelForValue(v);if(this.chart.getDataVisibility(e)?g=i.getPixelForValue(m+f):g=b,p=g-b,Math.abs(p)<a){p=bx(p,i,l)*a,h===l&&(b-=p/2);const y=i.getPixelForDecimal(0),w=i.getPixelForDecimal(1),_=Math.min(y,w),k=Math.max(y,w);b=Math.max(Math.min(b,k),_),g=b+p,n&&!u&&(c._stacks[i.axis]._visualValues[r]=i.getValueForPixel(g)-i.getValueForPixel(b))}if(b===i.getPixelForValue(l)){const y=Ht(p)*i.getLineWidthForValue(l)/2;b+=y,p-=y}return{size:p,base:b,head:g,center:g+p/2}}_calculateBarIndexPixels(e,i){const n=i.scale,r=this.options,o=r.skipNull,a=xe(r.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(i.grouped){const u=o?this._getStackCount(e):i.stackCount,h=r.barThickness==="flex"?vx(e,i,r,u*d):gx(e,i,r,u*d),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(xe(m,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+f;l=h.start+h.chunk*g+h.chunk/2,c=Math.min(a,h.chunk*h.ratio)}else l=n.getPixelForValue(this.getParsed(e)[n.axis],e),c=Math.min(a,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,i=e.vScale,n=e.data,r=n.length;let o=0;for(;o<r;++o)this.getParsed(o)[i.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}}ue(Mr,"id","bar"),ue(Mr,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ue(Mr,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Tr extends Dt{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,n,r){const o=super.parsePrimitiveData(e,i,n,r);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+n).radius;return o}parseArrayData(e,i,n,r){const o=super.parseArrayData(e,i,n,r);for(let a=0;a<o.length;a++){const l=i[n+a];o[a]._custom=xe(l[2],this.resolveDataElementOptions(a+n).radius)}return o}parseObjectData(e,i,n,r){const o=super.parseObjectData(e,i,n,r);for(let a=0;a<o.length;a++){const l=i[n+a];o[a]._custom=xe(l&&l.r&&+l.r,this.resolveDataElementOptions(a+n).radius)}return o}getMaxOverflow(){const e=this._cachedMeta.data;let i=0;for(let n=e.length-1;n>=0;--n)i=Math.max(i,e[n].size(this.resolveDataElementOptions(n))/2);return i>0&&i}getLabelAndValue(e){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:o}=i,a=this.getParsed(e),l=r.getLabelForValue(a.x),c=o.getLabelForValue(a.y),d=a._custom;return{label:n[e]||"",value:"("+l+", "+c+(d?", "+d:"")+")"}}update(e){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,n,r){const o=r==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(i,r),u=a.axis,h=l.axis;for(let m=i;m<i+n;m++){const f=e[m],g=!o&&this.getParsed(m),p={},v=p[u]=o?a.getPixelForDecimal(.5):a.getPixelForValue(g[u]),b=p[h]=o?l.getBasePixel():l.getPixelForValue(g[h]);p.skip=isNaN(v)||isNaN(b),d&&(p.options=c||this.resolveDataElementOptions(m,f.active?"active":r),o&&(p.options.radius=0)),this.updateElement(f,m,p,r)}}resolveDataElementOptions(e,i){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,i);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const o=r.radius;return i!=="active"&&(r.radius=0),r.radius+=xe(n&&n._custom,o),r}}ue(Tr,"id","bubble"),ue(Tr,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),ue(Tr,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Cx(t,e,i){let n=1,r=1,o=0,a=0;if(e<je){const l=t,c=l+e,d=Math.cos(l),u=Math.sin(l),h=Math.cos(c),m=Math.sin(c),f=(w,_,k)=>gs(w,l,c,!0)?1:Math.max(_,_*i,k,k*i),g=(w,_,k)=>gs(w,l,c,!0)?-1:Math.min(_,_*i,k,k*i),p=f(0,d,h),v=f(Je,u,m),b=g(Ie,d,h),y=g(Ie+Je,u,m);n=(p-b)/2,r=(v-y)/2,o=-(p+b)/2,a=-(v+y)/2}return{ratioX:n,ratioY:r,offsetX:o,offsetY:a}}class Ri extends Dt{constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){const n=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=n;else{let o=c=>+n[c];if(De(n[e])){const{key:c="value"}=this._parsing;o=d=>+fi(n[d],c)}let a,l;for(a=e,l=e+i;a<l;++a)r._parsed[a]=o(a)}}_getRotation(){return Tt(this.options.rotation-90)}_getCircumference(){return Tt(this.options.circumference)}_getRotationExtents(){let e=je,i=-je;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,o=r._getRotation(),a=r._getCircumference();e=Math.min(e,o),i=Math.max(i,o+a)}return{rotation:e,circumference:i-e}}update(e){const i=this.chart,{chartArea:n}=i,r=this._cachedMeta,o=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(n.width,n.height)-a)/2,0),c=Math.min(Rk(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:m,ratioY:f,offsetX:g,offsetY:p}=Cx(h,u,c),v=(n.width-a)/m,b=(n.height-a)/f,y=Math.max(Math.min(v,b)/2,0),w=kp(this.options.radius,y),_=Math.max(w*c,0),k=(w-_)/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=p*w,r.total=this.calculateTotal(),this.outerRadius=w-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*d,0),this.updateElements(o,0,o.length,e)}_circumference(e,i){const n=this.options,r=this._cachedMeta,o=this._getCircumference();return i&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*o/je)}updateElements(e,i,n,r){const o=r==="reset",a=this.chart,l=a.chartArea,d=a.options.animation,u=(l.left+l.right)/2,h=(l.top+l.bottom)/2,m=o&&d.animateScale,f=m?0:this.innerRadius,g=m?0:this.outerRadius,{sharedOptions:p,includeOptions:v}=this._getSharedOptions(i,r);let b=this._getRotation(),y;for(y=0;y<i;++y)b+=this._circumference(y,o);for(y=i;y<i+n;++y){const w=this._circumference(y,o),_=e[y],k={x:u+this.offsetX,y:h+this.offsetY,startAngle:b,endAngle:b+w,circumference:w,outerRadius:g,innerRadius:f};v&&(k.options=p||this.resolveDataElementOptions(y,_.active?"active":r)),b+=w,this.updateElement(_,y,k,r)}}calculateTotal(){const e=this._cachedMeta,i=e.data;let n=0,r;for(r=0;r<i.length;r++){const o=e._parsed[r];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(r)&&!i[r].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(e){const i=this._cachedMeta.total;return i>0&&!isNaN(e)?je*(Math.abs(e)/i):0}getLabelAndValue(e){const i=this._cachedMeta,n=this.chart,r=n.data.labels||[],o=As(i._parsed[e],n.options.locale);return{label:r[e]||"",value:o}}getMaxBorderWidth(e){let i=0;const n=this.chart;let r,o,a,l,c;if(!e){for(r=0,o=n.data.datasets.length;r<o;++r)if(n.isDatasetVisible(r)){a=n.getDatasetMeta(r),e=a.data,l=a.controller;break}}if(!e)return 0;for(r=0,o=e.length;r<o;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let n=0,r=e.length;n<r;++n){const o=this.resolveDataElementOptions(n);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(i+=this._getRingWeight(n));return i}_getRingWeight(e){return Math.max(xe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ue(Ri,"id","doughnut"),ue(Ri,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ue(Ri,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ue(Ri,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return i.labels.map((o,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}}});class Er extends Dt{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const i=this._cachedMeta,{dataset:n,data:r=[],_dataset:o}=i,a=this.chart._animationsDisabled;let{start:l,count:c}=Tp(i,r,a);this._drawStart=l,this._drawCount=c,Ep(i)&&(l=0,c=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=r;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:d},e),this.updateElements(r,l,c,e)}updateElements(e,i,n,r){const o=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(i,r),m=a.axis,f=l.axis,{spanGaps:g,segment:p}=this.options,v=fn(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||o||r==="none",y=i+n,w=e.length;let _=i>0&&this.getParsed(i-1);for(let k=0;k<w;++k){const N=e[k],C=b?N:{};if(k<i||k>=y){C.skip=!0;continue}const S=this.getParsed(k),x=Te(S[f]),B=C[m]=a.getPixelForValue(S[m],k),A=C[f]=o||x?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,S,c):S[f],k);C.skip=isNaN(B)||isNaN(A)||x,C.stop=k>0&&Math.abs(S[m]-_[m])>v,p&&(C.parsed=S,C.raw=d.data[k]),h&&(C.options=u||this.resolveDataElementOptions(k,N.active?"active":r)),b||this.updateElement(N,k,C,r),_=S}}getMaxOverflow(){const e=this._cachedMeta,i=e.dataset,n=i.options&&i.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,o,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ue(Er,"id","line"),ue(Er,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ue(Er,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ss extends Dt{constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const i=this._cachedMeta,n=this.chart,r=n.data.labels||[],o=As(i._parsed[e].r,n.options.locale);return{label:r[e]||"",value:o}}parseObjectData(e,i,n,r){return zp.bind(this)(e,i,n,r)}update(e){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){const e=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,r)=>{const o=this.getParsed(r).r;!isNaN(o)&&this.chart.getDataVisibility(r)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){const e=this.chart,i=e.chartArea,n=e.options,r=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(r/2,0),a=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),l=(o-a)/e.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,i,n,r){const o=r==="reset",a=this.chart,c=a.options.animation,d=this._cachedMeta.rScale,u=d.xCenter,h=d.yCenter,m=d.getIndexAngle(0)-.5*Ie;let f=m,g;const p=360/this.countVisibleElements();for(g=0;g<i;++g)f+=this._computeAngle(g,r,p);for(g=i;g<i+n;g++){const v=e[g];let b=f,y=f+this._computeAngle(g,r,p),w=a.getDataVisibility(g)?d.getDistanceFromCenterForValue(this.getParsed(g).r):0;f=y,o&&(c.animateScale&&(w=0),c.animateRotate&&(b=y=m));const _={x:u,y:h,innerRadius:0,outerRadius:w,startAngle:b,endAngle:y,options:this.resolveDataElementOptions(g,v.active?"active":r)};this.updateElement(v,g,_,r)}}countVisibleElements(){const e=this._cachedMeta;let i=0;return e.data.forEach((n,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&i++}),i}_computeAngle(e,i,n){return this.chart.getDataVisibility(e)?Tt(this.resolveDataElementOptions(e,i).angle||n):0}}ue(ss,"id","polarArea"),ue(ss,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),ue(ss,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const i=e.data;if(i.labels.length&&i.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return i.labels.map((o,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:r,lineWidth:c.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,n){n.chart.toggleDataVisibility(i.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class qa extends Ri{}ue(qa,"id","pie"),ue(qa,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Dr extends Dt{getLabelAndValue(e){const i=this._cachedMeta.vScale,n=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(n[i.axis])}}parseObjectData(e,i,n,r){return zp.bind(this)(e,i,n,r)}update(e){const i=this._cachedMeta,n=i.dataset,r=i.data||[],o=i.iScale.getLabels();if(n.points=r,e!=="resize"){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);const l={_loop:!0,_fullLoop:o.length===r.length,options:a};this.updateElement(n,void 0,l,e)}this.updateElements(r,0,r.length,e)}updateElements(e,i,n,r){const o=this._cachedMeta.rScale,a=r==="reset";for(let l=i;l<i+n;l++){const c=e[l],d=this.resolveDataElementOptions(l,c.active?"active":r),u=o.getPointPositionForValue(l,this.getParsed(l).r),h=a?o.xCenter:u.x,m=a?o.yCenter:u.y,f={x:h,y:m,angle:u.angle,skip:isNaN(h)||isNaN(m),options:d};this.updateElement(c,l,f,r)}}}ue(Dr,"id","radar"),ue(Dr,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),ue(Dr,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Ar extends Dt{getLabelAndValue(e){const i=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:o}=i,a=this.getParsed(e),l=r.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:n[e]||"",value:"("+l+", "+c+")"}}update(e){const i=this._cachedMeta,{data:n=[]}=i,r=this.chart._animationsDisabled;let{start:o,count:a}=Tp(i,n,r);if(this._drawStart=o,this._drawCount=a,Ep(i)&&(o=0,a=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=n;const d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(l,void 0,{animated:!r,options:d},e)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(n,o,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,i,n,r){const o=r==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,u=this.resolveDataElementOptions(i,r),h=this.getSharedOptions(u),m=this.includeOptions(r,h),f=a.axis,g=l.axis,{spanGaps:p,segment:v}=this.options,b=fn(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||r==="none";let w=i>0&&this.getParsed(i-1);for(let _=i;_<i+n;++_){const k=e[_],N=this.getParsed(_),C=y?k:{},S=Te(N[g]),x=C[f]=a.getPixelForValue(N[f],_),B=C[g]=o||S?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,N,c):N[g],_);C.skip=isNaN(x)||isNaN(B)||S,C.stop=_>0&&Math.abs(N[f]-w[f])>b,v&&(C.parsed=N,C.raw=d.data[_]),m&&(C.options=h||this.resolveDataElementOptions(_,k.active?"active":r)),y||this.updateElement(k,_,C,r),w=N}this.updateSharedOptions(h,r,u)}getMaxOverflow(){const e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!i.length)return r;const o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,o,a)/2}}ue(Ar,"id","scatter"),ue(Ar,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),ue(Ar,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Sx=Object.freeze({__proto__:null,BarController:Mr,BubbleController:Tr,DoughnutController:Ri,LineController:Er,PieController:qa,PolarAreaController:ss,RadarController:Dr,ScatterController:Ar});function Ci(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class wc{constructor(e){ue(this,"options");this.options=e||{}}static override(e){Object.assign(wc.prototype,e)}init(){}formats(){return Ci()}parse(){return Ci()}format(){return Ci()}add(){return Ci()}diff(){return Ci()}startOf(){return Ci()}endOf(){return Ci()}}var Nx={_date:wc};function Lx(t,e,i,n){const{controller:r,data:o,_sorted:a}=t,l=r._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&a&&o.length){const d=l._reversePixels?Zk:Xt;if(n){if(r._sharedOptions){const u=o[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const m=d(o,e,i-h),f=d(o,e,i+h);return{lo:m.lo,hi:f.hi}}}}else{const u=d(o,e,i);if(c){const{vScale:h}=r._cachedMeta,{_parsed:m}=t,f=m.slice(0,u.lo+1).reverse().findIndex(p=>!Te(p[h.axis]));u.lo-=Math.max(0,f);const g=m.slice(u.hi).findIndex(p=>!Te(p[h.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:o.length-1}}function Fs(t,e,i,n,r){const o=t.getSortedVisibleDatasetMetas(),a=i[e];for(let l=0,c=o.length;l<c;++l){const{index:d,data:u}=o[l],{lo:h,hi:m}=Lx(o[l],e,a,r);for(let f=h;f<=m;++f){const g=u[f];g.skip||n(g,d,f)}}}function Mx(t){const e=t.indexOf("x")!==-1,i=t.indexOf("y")!==-1;return function(n,r){const o=e?Math.abs(n.x-r.x):0,a=i?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(a,2))}}function qo(t,e,i,n,r){const o=[];return!r&&!t.isPointInArea(e)||Fs(t,i,e,function(l,c,d){!r&&!Jt(l,t.chartArea,0)||l.inRange(e.x,e.y,n)&&o.push({element:l,datasetIndex:c,index:d})},!0),o}function Tx(t,e,i,n){let r=[];function o(a,l,c){const{startAngle:d,endAngle:u}=a.getProps(["startAngle","endAngle"],n),{angle:h}=Cp(a,{x:e.x,y:e.y});gs(h,d,u)&&r.push({element:a,datasetIndex:l,index:c})}return Fs(t,i,e,o),r}function Ex(t,e,i,n,r,o){let a=[];const l=Mx(i);let c=Number.POSITIVE_INFINITY;function d(u,h,m){const f=u.inRange(e.x,e.y,r);if(n&&!f)return;const g=u.getCenterPoint(r);if(!(!!o||t.isPointInArea(g))&&!f)return;const v=l(e,g);v<c?(a=[{element:u,datasetIndex:h,index:m}],c=v):v===c&&a.push({element:u,datasetIndex:h,index:m})}return Fs(t,i,e,d),a}function Xo(t,e,i,n,r,o){return!o&&!t.isPointInArea(e)?[]:i==="r"&&!n?Tx(t,e,i,r):Ex(t,e,i,n,r,o)}function dh(t,e,i,n,r){const o=[],a=i==="x"?"inXRange":"inYRange";let l=!1;return Fs(t,i,e,(c,d,u)=>{c[a]&&c[a](e[i],r)&&(o.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,r))}),n&&!l?[]:o}var Dx={evaluateInteractionItems:Fs,modes:{index(t,e,i,n){const r=Ei(e,t),o=i.axis||"x",a=i.includeInvisible||!1,l=i.intersect?qo(t,r,o,n,a):Xo(t,r,o,!1,n,a),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,i,n){const r=Ei(e,t),o=i.axis||"xy",a=i.includeInvisible||!1;let l=i.intersect?qo(t,r,o,n,a):Xo(t,r,o,!1,n,a);if(l.length>0){const c=l[0].datasetIndex,d=t.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(t,e,i,n){const r=Ei(e,t),o=i.axis||"xy",a=i.includeInvisible||!1;return qo(t,r,o,n,a)},nearest(t,e,i,n){const r=Ei(e,t),o=i.axis||"xy",a=i.includeInvisible||!1;return Xo(t,r,o,i.intersect,n,a)},x(t,e,i,n){const r=Ei(e,t);return dh(t,r,"x",i.intersect,n)},y(t,e,i,n){const r=Ei(e,t);return dh(t,r,"y",i.intersect,n)}}};const Zp=["left","top","right","bottom"];function Nn(t,e){return t.filter(i=>i.pos===e)}function uh(t,e){return t.filter(i=>Zp.indexOf(i.pos)===-1&&i.box.axis===e)}function Ln(t,e){return t.sort((i,n)=>{const r=e?n:i,o=e?i:n;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function Ax(t){const e=[];let i,n,r,o,a,l;for(i=0,n=(t||[]).length;i<n;++i)r=t[i],{position:o,options:{stack:a,stackWeight:l=1}}=r,e.push({index:i,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&o+a,stackWeight:l});return e}function Fx(t){const e={};for(const i of t){const{stack:n,pos:r,stackWeight:o}=i;if(!n||!Zp.includes(r))continue;const a=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=o}return e}function Px(t,e){const i=Fx(t),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let o,a,l;for(o=0,a=t.length;o<a;++o){l=t[o];const{fullSize:c}=l.box,d=i[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*n:c&&e.availableWidth,l.height=r):(l.width=n,l.height=u?u*r:c&&e.availableHeight)}return i}function Ix(t){const e=Ax(t),i=Ln(e.filter(d=>d.box.fullSize),!0),n=Ln(Nn(e,"left"),!0),r=Ln(Nn(e,"right")),o=Ln(Nn(e,"top"),!0),a=Ln(Nn(e,"bottom")),l=uh(e,"x"),c=uh(e,"y");return{fullSize:i,leftAndTop:n.concat(o),rightAndBottom:r.concat(c).concat(a).concat(l),chartArea:Nn(e,"chartArea"),vertical:n.concat(r).concat(c),horizontal:o.concat(a).concat(l)}}function hh(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function qp(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Rx(t,e,i,n){const{pos:r,box:o}=i,a=t.maxPadding;if(!De(r)){i.size&&(t[r]-=i.size);const h=n[i.stack]||{size:0,count:1};h.size=Math.max(h.size,i.horizontal?o.height:o.width),i.size=h.size/h.count,t[r]+=i.size}o.getPadding&&qp(a,o.getPadding());const l=Math.max(0,e.outerWidth-hh(a,t,"left","right")),c=Math.max(0,e.outerHeight-hh(a,t,"top","bottom")),d=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,i.horizontal?{same:d,other:u}:{same:u,other:d}}function Bx(t){const e=t.maxPadding;function i(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}function zx(t,e){const i=e.maxPadding;function n(r){const o={left:0,top:0,right:0,bottom:0};return r.forEach(a=>{o[a]=Math.max(e[a],i[a])}),o}return n(t?["left","right"]:["top","bottom"])}function Wn(t,e,i,n){const r=[];let o,a,l,c,d,u;for(o=0,a=t.length,d=0;o<a;++o){l=t[o],c=l.box,c.update(l.width||e.w,l.height||e.h,zx(l.horizontal,e));const{same:h,other:m}=Rx(e,i,l,n);d|=h&&r.length,u=u||m,c.fullSize||r.push(l)}return d&&Wn(r,e,i,n)||u}function tr(t,e,i,n,r){t.top=i,t.left=e,t.right=e+n,t.bottom=i+r,t.width=n,t.height=r}function mh(t,e,i,n){const r=i.padding;let{x:o,y:a}=e;for(const l of t){const c=l.box,d=n[l.stack]||{placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=e.w*u,m=d.size||c.height;ps(d.start)&&(a=d.start),c.fullSize?tr(c,r.left,a,i.outerWidth-r.right-r.left,m):tr(c,e.left+d.placed,a,h,m),d.start=a,d.placed+=h,a=c.bottom}else{const h=e.h*u,m=d.size||c.width;ps(d.start)&&(o=d.start),c.fullSize?tr(c,o,r.top,m,i.outerHeight-r.bottom-r.top):tr(c,o,e.top+d.placed,m,h),d.start=o,d.placed+=h,o=c.right}}e.x=o,e.y=a}var dt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(i){e.draw(i)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;i!==-1&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,n){if(!t)return;const r=ut(t.options.layout.padding),o=Math.max(e-r.width,0),a=Math.max(i-r.height,0),l=Ix(t.boxes),c=l.vertical,d=l.horizontal;Be(t.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const u=c.reduce((p,v)=>v.box.options&&v.box.options.display===!1?p:p+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:i,padding:r,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/u,hBoxMaxHeight:a/2}),m=Object.assign({},r);qp(m,ut(n));const f=Object.assign({maxPadding:m,w:o,h:a,x:r.left,y:r.top},r),g=Px(c.concat(d),h);Wn(l.fullSize,f,h,g),Wn(c,f,h,g),Wn(d,f,h,g)&&Wn(c,f,h,g),Bx(f),mh(l.leftAndTop,f,h,g),f.x+=f.w,f.y+=f.h,mh(l.rightAndBottom,f,h,g),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Be(l.chartArea,p=>{const v=p.box;Object.assign(v,t.chartArea),v.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Xp{acquireContext(e,i){}releaseContext(e){return!1}addEventListener(e,i,n){}removeEventListener(e,i,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,i,n,r){return i=Math.max(0,i||e.width),n=n||e.height,{width:i,height:Math.max(0,r?Math.floor(i/r):n)}}isAttached(e){return!0}updateConfig(e){}}class Vx extends Xp{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Fr="$chartjs",Wx={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},fh=t=>t===null||t==="";function Ox(t,e){const i=t.style,n=t.getAttribute("height"),r=t.getAttribute("width");if(t[Fr]={initial:{height:n,width:r,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",fh(r)){const o=Xu(t,"width");o!==void 0&&(t.width=o)}if(fh(n))if(t.style.height==="")t.height=t.width/(e||2);else{const o=Xu(t,"height");o!==void 0&&(t.height=o)}return t}const Jp=$_?{passive:!0}:!1;function $x(t,e,i){t&&t.addEventListener(e,i,Jp)}function Hx(t,e,i){t&&t.canvas&&t.canvas.removeEventListener(e,i,Jp)}function jx(t,e){const i=Wx[t.type]||t.type,{x:n,y:r}=Ei(t,e);return{type:i,chart:e,native:t,x:n!==void 0?n:null,y:r!==void 0?r:null}}function Qr(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function Ux(t,e,i){const n=t.canvas,r=new MutationObserver(o=>{let a=!1;for(const l of o)a=a||Qr(l.addedNodes,n),a=a&&!Qr(l.removedNodes,n);a&&i()});return r.observe(document,{childList:!0,subtree:!0}),r}function Gx(t,e,i){const n=t.canvas,r=new MutationObserver(o=>{let a=!1;for(const l of o)a=a||Qr(l.removedNodes,n),a=a&&!Qr(l.addedNodes,n);a&&i()});return r.observe(document,{childList:!0,subtree:!0}),r}const ys=new Map;let ph=0;function Qp(){const t=window.devicePixelRatio;t!==ph&&(ph=t,ys.forEach((e,i)=>{i.currentDevicePixelRatio!==t&&e()}))}function Kx(t,e){ys.size||window.addEventListener("resize",Qp),ys.set(t,e)}function Yx(t){ys.delete(t),ys.size||window.removeEventListener("resize",Qp)}function Zx(t,e,i){const n=t.canvas,r=n&&bc(n);if(!r)return;const o=Mp((l,c)=>{const d=r.clientWidth;i(l,c),d<r.clientWidth&&i()},window),a=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||o(d,u)});return a.observe(r),Kx(t,o),a}function Jo(t,e,i){i&&i.disconnect(),e==="resize"&&Yx(t)}function qx(t,e,i){const n=t.canvas,r=Mp(o=>{t.ctx!==null&&i(jx(o,t))},t);return $x(n,e,r),r}class Xx extends Xp{acquireContext(e,i){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(Ox(e,i),n):null}releaseContext(e){const i=e.canvas;if(!i[Fr])return!1;const n=i[Fr].initial;["height","width"].forEach(o=>{const a=n[o];Te(a)?i.removeAttribute(o):i.setAttribute(o,a)});const r=n.style||{};return Object.keys(r).forEach(o=>{i.style[o]=r[o]}),i.width=i.width,delete i[Fr],!0}addEventListener(e,i,n){this.removeEventListener(e,i);const r=e.$proxies||(e.$proxies={}),a={attach:Ux,detach:Gx,resize:Zx}[i]||qx;r[i]=a(e,i,n)}removeEventListener(e,i){const n=e.$proxies||(e.$proxies={}),r=n[i];if(!r)return;({attach:Jo,detach:Jo,resize:Jo}[i]||Hx)(e,i,r),n[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,i,n,r){return O_(e,i,n,r)}isAttached(e){const i=e&&bc(e);return!!(i&&i.isConnected)}}function Jx(t){return!yc()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Vx:Xx}var kr;let si=(kr=class{constructor(){ue(this,"x");ue(this,"y");ue(this,"active",!1);ue(this,"options");ue(this,"$animations")}tooltipPosition(e){const{x:i,y:n}=this.getProps(["x","y"],e);return{x:i,y:n}}hasValue(){return fn(this.x)&&fn(this.y)}getProps(e,i){const n=this.$animations;if(!i||!n)return this;const r={};return e.forEach(o=>{r[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),r}},ue(kr,"defaults",{}),ue(kr,"defaultRoutes"),kr);function Qx(t,e){const i=t.options.ticks,n=e4(t),r=Math.min(i.maxTicksLimit||n,n),o=i.major.enabled?i4(e):[],a=o.length,l=o[0],c=o[a-1],d=[];if(a>r)return n4(e,d,o,a/r),d;const u=t4(o,e,r);if(a>0){let h,m;const f=a>1?Math.round((c-l)/(a-1)):null;for(ir(e,d,u,Te(f)?0:l-f,l),h=0,m=a-1;h<m;h++)ir(e,d,u,o[h],o[h+1]);return ir(e,d,u,c,Te(f)?e.length:c+f),d}return ir(e,d,u),d}function e4(t){const e=t.options.offset,i=t._tickSize(),n=t._length/i+(e?0:1),r=t._maxLength/i;return Math.floor(Math.min(n,r))}function t4(t,e,i){const n=s4(t),r=e.length/i;if(!n)return Math.max(r,1);const o=jk(n);for(let a=0,l=o.length-1;a<l;a++){const c=o[a];if(c>r)return c}return Math.max(r,1)}function i4(t){const e=[];let i,n;for(i=0,n=t.length;i<n;i++)t[i].major&&e.push(i);return e}function n4(t,e,i,n){let r=0,o=i[0],a;for(n=Math.ceil(n),a=0;a<t.length;a++)a===o&&(e.push(t[a]),r++,o=i[r*n])}function ir(t,e,i,n,r){const o=xe(n,0),a=Math.min(xe(r,t.length),t.length);let l=0,c,d,u;for(i=Math.ceil(i),r&&(c=r-n,i=c/Math.floor(c/i)),u=o;u<0;)l++,u=Math.round(o+l*i);for(d=Math.max(o,0);d<a;d++)d===u&&(e.push(t[d]),l++,u=Math.round(o+l*i))}function s4(t){const e=t.length;let i,n;if(e<2)return!1;for(n=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==n)return!1;return n}const r4=t=>t==="left"?"right":t==="right"?"left":t,gh=(t,e,i)=>e==="top"||e==="left"?t[e]+i:t[e]-i,vh=(t,e)=>Math.min(e||t,t);function yh(t,e){const i=[],n=t.length/e,r=t.length;let o=0;for(;o<r;o+=n)i.push(t[Math.floor(o)]);return i}function o4(t,e,i){const n=t.ticks.length,r=Math.min(e,n-1),o=t._startPixel,a=t._endPixel,l=1e-6;let c=t.getPixelForTick(r),d;if(!(i&&(n===1?d=Math.max(c-o,a-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(r-1))/2,c+=r<e?d:-d,c<o-l||c>a+l)))return c}function a4(t,e){Be(t,i=>{const n=i.gc,r=n.length/2;let o;if(r>e){for(o=0;o<r;++o)delete i.data[n[o]];n.splice(0,r)}})}function Mn(t){return t.drawTicks?t.tickLength:0}function bh(t,e){if(!t.display)return 0;const i=it(t.font,e),n=ut(t.padding);return(Ue(t.text)?t.text.length:1)*i.lineHeight+n.height}function l4(t,e){return vi(t,{scale:e,type:"scale"})}function c4(t,e,i){return vi(t,{tick:i,index:e,type:"tick"})}function d4(t,e,i){let n=hc(t);return(i&&e!=="right"||!i&&e==="right")&&(n=r4(n)),n}function u4(t,e,i,n){const{top:r,left:o,bottom:a,right:l,chart:c}=t,{chartArea:d,scales:u}=c;let h=0,m,f,g;const p=a-r,v=l-o;if(t.isHorizontal()){if(f=lt(n,o,l),De(i)){const b=Object.keys(i)[0],y=i[b];g=u[b].getPixelForValue(y)+p-e}else i==="center"?g=(d.bottom+d.top)/2+p-e:g=gh(t,i,e);m=l-o}else{if(De(i)){const b=Object.keys(i)[0],y=i[b];f=u[b].getPixelForValue(y)-v+e}else i==="center"?f=(d.left+d.right)/2-v+e:f=gh(t,i,e);g=lt(n,a,r),h=i==="left"?-Je:Je}return{titleX:f,titleY:g,maxWidth:m,rotation:h}}class Zi extends si{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,i){return e}getUserBounds(){let{_userMin:e,_userMax:i,_suggestedMin:n,_suggestedMax:r}=this;return e=yt(e,Number.POSITIVE_INFINITY),i=yt(i,Number.NEGATIVE_INFINITY),n=yt(n,Number.POSITIVE_INFINITY),r=yt(r,Number.NEGATIVE_INFINITY),{min:yt(e,n),max:yt(i,r),minDefined:Ze(e),maxDefined:Ze(i)}}getMinMax(e){let{min:i,max:n,minDefined:r,maxDefined:o}=this.getUserBounds(),a;if(r&&o)return{min:i,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)a=l[c].controller.getMinMax(this,e),r||(i=Math.min(i,a.min)),o||(n=Math.max(n,a.max));return i=o&&i>n?n:i,n=r&&i>n?i:n,{min:yt(i,yt(n,i)),max:yt(n,yt(i,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ve(this.options.beforeUpdate,[this])}update(e,i,n){const{beginAtZero:r,grace:o,ticks:a}=this.options,l=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=i,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=b_(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?yh(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=Qx(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,i,n;this.isHorizontal()?(i=this.left,n=this.right):(i=this.top,n=this.bottom,e=!e),this._startPixel=i,this._endPixel=n,this._reversePixels=e,this._length=n-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ve(this.options.afterUpdate,[this])}beforeSetDimensions(){Ve(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ve(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ve(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ve(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const i=this.options.ticks;let n,r,o;for(n=0,r=e.length;n<r;n++)o=e[n],o.label=Ve(i.callback,[o.value,n,e],this)}afterTickToLabelConversion(){Ve(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ve(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,i=e.ticks,n=vh(this.ticks.length,e.ticks.maxTicksLimit),r=i.minRotation||0,o=i.maxRotation;let a=r,l,c,d;if(!this._isVisible()||!i.display||r>=o||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,m=u.highest.height,f=ot(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/n:f/(n-1),h+6>l&&(l=f/(n-(e.offset?.5:1)),c=this.maxHeight-Mn(e.grid)-i.padding-bh(e.title,this.chart.options.font),d=Math.sqrt(h*h+m*m),a=dc(Math.min(Math.asin(ot((u.highest.height+6)/l,-1,1)),Math.asin(ot(c/d,-1,1))-Math.asin(ot(m/d,-1,1)))),a=Math.max(r,Math.min(o,a))),this.labelRotation=a}afterCalculateLabelRotation(){Ve(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ve(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:i,options:{ticks:n,title:r,grid:o}}=this,a=this._isVisible(),l=this.isHorizontal();if(a){const c=bh(r,i.options.font);if(l?(e.width=this.maxWidth,e.height=Mn(o)+c):(e.height=this.maxHeight,e.width=Mn(o)+c),n.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:m}=this._getLabelSizes(),f=n.padding*2,g=Tt(this.labelRotation),p=Math.cos(g),v=Math.sin(g);if(l){const b=n.mirror?0:v*h.width+p*m.height;e.height=Math.min(this.maxHeight,e.height+b+f)}else{const b=n.mirror?0:p*h.width+v*m.height;e.width=Math.min(this.maxWidth,e.width+b+f)}this._calculatePadding(d,u,v,p)}}this._handleMargins(),l?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,i,n,r){const{ticks:{align:o,padding:a},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,f=0;c?d?(m=r*e.width,f=n*i.height):(m=n*e.height,f=r*i.width):o==="start"?f=i.width:o==="end"?m=e.width:o!=="inner"&&(m=e.width/2,f=i.width/2),this.paddingLeft=Math.max((m-u+a)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+a)*this.width/(this.width-h),0)}else{let u=i.height/2,h=e.height/2;o==="start"?(u=0,h=e.height):o==="end"&&(u=i.height,h=0),this.paddingTop=u+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ve(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:i}=this.options;return i==="top"||i==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let i,n;for(i=0,n=e.length;i<n;i++)Te(e[i].label)&&(e.splice(i,1),n--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const i=this.options.ticks.sampleSize;let n=this.ticks;i<n.length&&(n=yh(n,i)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,i,n){const{ctx:r,_longestTextCache:o}=this,a=[],l=[],c=Math.floor(i/vh(i,n));let d=0,u=0,h,m,f,g,p,v,b,y,w,_,k;for(h=0;h<i;h+=c){if(g=e[h].label,p=this._resolveTickFontOptions(h),r.font=v=p.string,b=o[v]=o[v]||{data:{},gc:[]},y=p.lineHeight,w=_=0,!Te(g)&&!Ue(g))w=Xr(r,b.data,b.gc,w,g),_=y;else if(Ue(g))for(m=0,f=g.length;m<f;++m)k=g[m],!Te(k)&&!Ue(k)&&(w=Xr(r,b.data,b.gc,w,k),_+=y);a.push(w),l.push(_),d=Math.max(w,d),u=Math.max(_,u)}a4(o,i);const N=a.indexOf(d),C=l.indexOf(u),S=x=>({width:a[x]||0,height:l[x]||0});return{first:S(0),last:S(i-1),widest:S(N),highest:S(C),widths:a,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,i){return NaN}getValueForPixel(e){}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const i=this._startPixel+e*this._length;return Yk(this._alignToPixels?xi(this.chart,i,0):i)}getDecimalForPixel(e){const i=(e-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:i}=this;return e<0&&i<0?i:e>0&&i>0?e:0}getContext(e){const i=this.ticks||[];if(e>=0&&e<i.length){const n=i[e];return n.$context||(n.$context=c4(this.getContext(),e,n))}return this.$context||(this.$context=l4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,i=Tt(this.labelRotation),n=Math.abs(Math.cos(i)),r=Math.abs(Math.sin(i)),o=this._getLabelSizes(),a=e.autoSkipPadding||0,l=o?o.widest.width+a:0,c=o?o.highest.height+a:0;return this.isHorizontal()?c*n>l*r?l/n:c/r:c*r<l*n?c/n:l/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const i=this.axis,n=this.chart,r=this.options,{grid:o,position:a,border:l}=r,c=o.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),m=Mn(o),f=[],g=l.setContext(this.getContext()),p=g.display?g.width:0,v=p/2,b=function(L){return xi(n,L,p)};let y,w,_,k,N,C,S,x,B,A,P,I;if(a==="top")y=b(this.bottom),C=this.bottom-m,x=y-v,A=b(e.top)+v,I=e.bottom;else if(a==="bottom")y=b(this.top),A=e.top,I=b(e.bottom)-v,C=y+v,x=this.top+m;else if(a==="left")y=b(this.right),N=this.right-m,S=y-v,B=b(e.left)+v,P=e.right;else if(a==="right")y=b(this.left),B=e.left,P=b(e.right)-v,N=y+v,S=this.left+m;else if(i==="x"){if(a==="center")y=b((e.top+e.bottom)/2+.5);else if(De(a)){const L=Object.keys(a)[0],E=a[L];y=b(this.chart.scales[L].getPixelForValue(E))}A=e.top,I=e.bottom,C=y+v,x=C+m}else if(i==="y"){if(a==="center")y=b((e.left+e.right)/2);else if(De(a)){const L=Object.keys(a)[0],E=a[L];y=b(this.chart.scales[L].getPixelForValue(E))}N=y-v,S=N-m,B=e.left,P=e.right}const z=xe(r.ticks.maxTicksLimit,h),D=Math.max(1,Math.ceil(h/z));for(w=0;w<h;w+=D){const L=this.getContext(w),E=o.setContext(L),W=l.setContext(L),F=E.lineWidth,K=E.color,G=W.dash||[],$=W.dashOffset,Q=E.tickWidth,re=E.tickColor,he=E.tickBorderDash||[],O=E.tickBorderDashOffset;_=o4(this,w,c),_!==void 0&&(k=xi(n,_,F),d?N=S=B=P=k:C=x=A=I=k,f.push({tx1:N,ty1:C,tx2:S,ty2:x,x1:B,y1:A,x2:P,y2:I,width:F,color:K,borderDash:G,borderDashOffset:$,tickWidth:Q,tickColor:re,tickBorderDash:he,tickBorderDashOffset:O}))}return this._ticksLength=h,this._borderValue=y,f}_computeLabelItems(e){const i=this.axis,n=this.options,{position:r,ticks:o}=n,a=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=o,m=Mn(n.grid),f=m+u,g=h?-u:f,p=-Tt(this.labelRotation),v=[];let b,y,w,_,k,N,C,S,x,B,A,P,I="middle";if(r==="top")N=this.bottom-g,C=this._getXAxisLabelAlignment();else if(r==="bottom")N=this.top+g,C=this._getXAxisLabelAlignment();else if(r==="left"){const D=this._getYAxisLabelAlignment(m);C=D.textAlign,k=D.x}else if(r==="right"){const D=this._getYAxisLabelAlignment(m);C=D.textAlign,k=D.x}else if(i==="x"){if(r==="center")N=(e.top+e.bottom)/2+f;else if(De(r)){const D=Object.keys(r)[0],L=r[D];N=this.chart.scales[D].getPixelForValue(L)+f}C=this._getXAxisLabelAlignment()}else if(i==="y"){if(r==="center")k=(e.left+e.right)/2-f;else if(De(r)){const D=Object.keys(r)[0],L=r[D];k=this.chart.scales[D].getPixelForValue(L)}C=this._getYAxisLabelAlignment(m).textAlign}i==="y"&&(c==="start"?I="top":c==="end"&&(I="bottom"));const z=this._getLabelSizes();for(b=0,y=l.length;b<y;++b){w=l[b],_=w.label;const D=o.setContext(this.getContext(b));S=this.getPixelForTick(b)+o.labelOffset,x=this._resolveTickFontOptions(b),B=x.lineHeight,A=Ue(_)?_.length:1;const L=A/2,E=D.color,W=D.textStrokeColor,F=D.textStrokeWidth;let K=C;a?(k=S,C==="inner"&&(b===y-1?K=this.options.reverse?"left":"right":b===0?K=this.options.reverse?"right":"left":K="center"),r==="top"?d==="near"||p!==0?P=-A*B+B/2:d==="center"?P=-z.highest.height/2-L*B+B:P=-z.highest.height+B/2:d==="near"||p!==0?P=B/2:d==="center"?P=z.highest.height/2-L*B:P=z.highest.height-A*B,h&&(P*=-1),p!==0&&!D.showLabelBackdrop&&(k+=B/2*Math.sin(p))):(N=S,P=(1-A)*B/2);let G;if(D.showLabelBackdrop){const $=ut(D.backdropPadding),Q=z.heights[b],re=z.widths[b];let he=P-$.top,O=0-$.left;switch(I){case"middle":he-=Q/2;break;case"bottom":he-=Q;break}switch(C){case"center":O-=re/2;break;case"right":O-=re;break;case"inner":b===y-1?O-=re:b>0&&(O-=re/2);break}G={left:O,top:he,width:re+$.width,height:Q+$.height,color:D.backdropColor}}v.push({label:_,font:x,textOffset:P,options:{rotation:p,color:E,strokeColor:W,strokeWidth:F,textAlign:K,textBaseline:I,translation:[k,N],backdrop:G}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:i}=this.options;if(-Tt(this.labelRotation))return e==="top"?"left":"right";let r="center";return i.align==="start"?r="left":i.align==="end"?r="right":i.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:i,ticks:{crossAlign:n,mirror:r,padding:o}}=this.options,a=this._getLabelSizes(),l=e+o,c=a.widest.width;let d,u;return i==="left"?r?(u=this.right+o,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u=this.left)):i==="right"?r?(u=this.left+o,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:i},left:n,top:r,width:o,height:a}=this;i&&(e.save(),e.fillStyle=i,e.fillRect(n,r,o,a),e.restore())}getLineWidthForValue(e){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const r=this.ticks.findIndex(o=>o.value===e);return r>=0?i.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const i=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,a;const l=(c,d,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(i.display)for(o=0,a=r.length;o<a;++o){const c=r[o];i.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),i.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:i,options:{border:n,grid:r}}=this,o=n.setContext(this.getContext()),a=n.display?o.width:0;if(!a)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,m;this.isHorizontal()?(d=xi(e,this.left,a)-a/2,u=xi(e,this.right,l)+l/2,h=m=c):(h=xi(e,this.top,a)-a/2,m=xi(e,this.bottom,l)+l/2,d=u=c),i.save(),i.lineWidth=o.width,i.strokeStyle=o.color,i.beginPath(),i.moveTo(d,h),i.lineTo(u,m),i.stroke(),i.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&fo(n,r);const o=this.getLabelItems(e);for(const a of o){const l=a.options,c=a.font,d=a.label,u=a.textOffset;Ki(n,d,0,u,c,l)}r&&po(n)}drawTitle(){const{ctx:e,options:{position:i,title:n,reverse:r}}=this;if(!n.display)return;const o=it(n.font),a=ut(n.padding),l=n.align;let c=o.lineHeight/2;i==="bottom"||i==="center"||De(i)?(c+=a.bottom,Ue(n.text)&&(c+=o.lineHeight*(n.text.length-1))):c+=a.top;const{titleX:d,titleY:u,maxWidth:h,rotation:m}=u4(this,c,i,l);Ki(e,n.text,0,0,o,{color:n.color,maxWidth:h,rotation:m,textAlign:d4(l,i,r),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,i=e.ticks&&e.ticks.z||0,n=xe(e.grid&&e.grid.z,-1),r=xe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Zi.prototype.draw?[{z:i,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:i,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const i=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let o,a;for(o=0,a=i.length;o<a;++o){const l=i[o];l[n]===this.id&&(!e||l.type===e)&&r.push(l)}return r}_resolveTickFontOptions(e){const i=this.options.ticks.setContext(this.getContext(e));return it(i.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class nr{constructor(e,i,n){this.type=e,this.scope=i,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const i=Object.getPrototypeOf(e);let n;f4(i)&&(n=this.register(i));const r=this.items,o=e.id,a=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in r||(r[o]=e,h4(e,a,n),this.override&&Ge.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const i=this.items,n=e.id,r=this.scope;n in i&&delete i[n],r&&n in Ge[r]&&(delete Ge[r][n],this.override&&delete Gi[n])}}function h4(t,e,i){const n=fs(Object.create(null),[i?Ge.get(i):{},Ge.get(e),t.defaults]);Ge.set(e,n),t.defaultRoutes&&m4(e,t.defaultRoutes),t.descriptors&&Ge.describe(e,t.descriptors)}function m4(t,e){Object.keys(e).forEach(i=>{const n=i.split("."),r=n.pop(),o=[t].concat(n).join("."),a=e[i].split("."),l=a.pop(),c=a.join(".");Ge.route(o,r,c,l)})}function f4(t){return"id"in t&&"defaults"in t}class p4{constructor(){this.controllers=new nr(Dt,"datasets",!0),this.elements=new nr(si,"elements"),this.plugins=new nr(Object,"plugins"),this.scales=new nr(Zi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,i,n){[...i].forEach(r=>{const o=n||this._getRegistryForType(r);n||o.isForType(r)||o===this.plugins&&r.id?this._exec(e,o,r):Be(r,a=>{const l=n||this._getRegistryForType(a);this._exec(e,l,a)})})}_exec(e,i,n){const r=cc(e);Ve(n["before"+r],[],n),i[e](n),Ve(n["after"+r],[],n)}_getRegistryForType(e){for(let i=0;i<this._typedRegistries.length;i++){const n=this._typedRegistries[i];if(n.isForType(e))return n}return this.plugins}_get(e,i,n){const r=i.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var Bt=new p4;class g4{constructor(){this._init=[]}notify(e,i,n,r){i==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const o=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(o,e,i,n);return i==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,i,n,r){r=r||{};for(const o of e){const a=o.plugin,l=a[n],c=[i,r,o.options];if(Ve(l,c,a)===!1&&r.cancelable)return!1}return!0}invalidate(){Te(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),i}_createDescriptors(e,i){const n=e&&e.config,r=xe(n.options&&n.options.plugins,{}),o=v4(n);return r===!1&&!i?[]:b4(e,o,r,i)}_notifyStateChanges(e){const i=this._oldCache||[],n=this._cache,r=(o,a)=>o.filter(l=>!a.some(c=>l.plugin.id===c.plugin.id));this._notify(r(i,n),e,"stop"),this._notify(r(n,i),e,"start")}}function v4(t){const e={},i=[],n=Object.keys(Bt.plugins.items);for(let o=0;o<n.length;o++)i.push(Bt.getPlugin(n[o]));const r=t.plugins||[];for(let o=0;o<r.length;o++){const a=r[o];i.indexOf(a)===-1&&(i.push(a),e[a.id]=!0)}return{plugins:i,localIds:e}}function y4(t,e){return!e&&t===!1?null:t===!0?{}:t}function b4(t,{plugins:e,localIds:i},n,r){const o=[],a=t.getContext();for(const l of e){const c=l.id,d=y4(n[c],r);d!==null&&o.push({plugin:l,options:w4(t.config,{plugin:l,local:i[c]},d,a)})}return o}function w4(t,{plugin:e,local:i},n,r){const o=t.pluginScopeKeys(e),a=t.getOptionScopes(n,o);return i&&e.defaults&&a.push(e.defaults),t.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Xa(t,e){const i=Ge.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function k4(t,e){let i=t;return t==="_index_"?i=e:t==="_value_"&&(i=e==="x"?"y":"x"),i}function _4(t,e){return t===e?"_index_":"_value_"}function wh(t){if(t==="x"||t==="y"||t==="r")return t}function x4(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Ja(t,...e){if(wh(t))return t;for(const i of e){const n=i.axis||x4(i.position)||t.length>1&&wh(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function kh(t,e,i){if(i[e+"AxisID"]===t)return{axis:e}}function C4(t,e){if(e.data&&e.data.datasets){const i=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(i.length)return kh(t,"x",i[0])||kh(t,"y",i[0])}return{}}function S4(t,e){const i=Gi[t.type]||{scales:{}},n=e.scales||{},r=Xa(t.type,e),o=Object.create(null);return Object.keys(n).forEach(a=>{const l=n[a];if(!De(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=Ja(a,l,C4(a,t),Ge.scales[l.type]),d=_4(c,r),u=i.scales||{};o[a]=es(Object.create(null),[{axis:c},l,u[c],u[d]])}),t.data.datasets.forEach(a=>{const l=a.type||t.type,c=a.indexAxis||Xa(l,e),u=(Gi[l]||{}).scales||{};Object.keys(u).forEach(h=>{const m=k4(h,c),f=a[m+"AxisID"]||m;o[f]=o[f]||Object.create(null),es(o[f],[{axis:m},n[f],u[h]])})}),Object.keys(o).forEach(a=>{const l=o[a];es(l,[Ge.scales[l.type],Ge.scale])}),o}function eg(t){const e=t.options||(t.options={});e.plugins=xe(e.plugins,{}),e.scales=S4(t,e)}function tg(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function N4(t){return t=t||{},t.data=tg(t.data),eg(t),t}const _h=new Map,ig=new Set;function sr(t,e){let i=_h.get(t);return i||(i=e(),_h.set(t,i),ig.add(i)),i}const Tn=(t,e,i)=>{const n=fi(e,i);n!==void 0&&t.add(n)};let L4=class{constructor(e){this._config=N4(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=tg(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),eg(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return sr(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,i){return sr(`${e}.transition.${i}`,()=>[[`datasets.${e}.transitions.${i}`,`transitions.${i}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,i){return sr(`${e}-${i}`,()=>[[`datasets.${e}.elements.${i}`,`datasets.${e}`,`elements.${i}`,""]])}pluginScopeKeys(e){const i=e.id,n=this.type;return sr(`${n}-plugin-${i}`,()=>[[`plugins.${i}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,i){const n=this._scopeCache;let r=n.get(e);return(!r||i)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,i,n){const{options:r,type:o}=this,a=this._cachedScopes(e,n),l=a.get(i);if(l)return l;const c=new Set;i.forEach(u=>{e&&(c.add(e),u.forEach(h=>Tn(c,e,h))),u.forEach(h=>Tn(c,r,h)),u.forEach(h=>Tn(c,Gi[o]||{},h)),u.forEach(h=>Tn(c,Ge,h)),u.forEach(h=>Tn(c,Ya,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),ig.has(i)&&a.set(i,d),d}chartOptionScopes(){const{options:e,type:i}=this;return[e,Gi[i]||{},Ge.datasets[i]||{},{type:i},Ge,Ya]}resolveNamedOptions(e,i,n,r=[""]){const o={$shared:!0},{resolver:a,subPrefixes:l}=xh(this._resolverCache,e,r);let c=a;if(T4(a,i)){o.$shared=!1,n=pi(n)?n():n;const d=this.createResolver(e,n,l);c=pn(a,n,d)}for(const d of i)o[d]=c[d];return o}createResolver(e,i,n=[""],r){const{resolver:o}=xh(this._resolverCache,e,n);return De(i)?pn(o,i,void 0,r):o}};function xh(t,e,i){let n=t.get(e);n||(n=new Map,t.set(e,n));const r=i.join();let o=n.get(r);return o||(o={resolver:pc(e,i),subPrefixes:i.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,o)),o}const M4=t=>De(t)&&Object.getOwnPropertyNames(t).some(e=>pi(t[e]));function T4(t,e){const{isScriptable:i,isIndexable:n}=Pp(t);for(const r of e){const o=i(r),a=n(r),l=(a||o)&&t[r];if(o&&(pi(l)||M4(l))||a&&Ue(l))return!0}return!1}var E4="4.5.0";const D4=["top","bottom","left","right","chartArea"];function Ch(t,e){return t==="top"||t==="bottom"||D4.indexOf(t)===-1&&e==="x"}function Sh(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}function Nh(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),Ve(i&&i.onComplete,[t],e)}function A4(t){const e=t.chart,i=e.options.animation;Ve(i&&i.onProgress,[t],e)}function ng(t){return yc()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Pr={},Lh=t=>{const e=ng(t);return Object.values(Pr).filter(i=>i.canvas===e).pop()};function F4(t,e,i){const n=Object.keys(t);for(const r of n){const o=+r;if(o>=e){const a=t[r];delete t[r],(i>0||o>e)&&(t[o+i]=a)}}}function P4(t,e,i,n){return!i||t.type==="mouseout"?null:n?e:t}class Mt{static register(...e){Bt.add(...e),Mh()}static unregister(...e){Bt.remove(...e),Mh()}constructor(e,i){const n=this.config=new L4(i),r=ng(e),o=Lh(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Jx(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,a.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=Ik(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new g4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Jk(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],Pr[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Gt.listen(this,"complete",Nh),Gt.listen(this,"progress",A4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:i},width:n,height:r,_aspectRatio:o}=this;return Te(e)?i&&o?o:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Bt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():qu(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ku(this.canvas,this.ctx),this}stop(){return Gt.stop(this),this}resize(e,i){Gt.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){const n=this.options,r=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,i,o),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,qu(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Ve(n.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};Be(i,(n,r)=>{n.id=r})}buildOrUpdateScales(){const e=this.options,i=e.scales,n=this.scales,r=Object.keys(n).reduce((a,l)=>(a[l]=!1,a),{});let o=[];i&&(o=o.concat(Object.keys(i).map(a=>{const l=i[a],c=Ja(a,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),Be(o,a=>{const l=a.options,c=l.id,d=Ja(c,l),u=xe(l.type,a.dtype);(l.position===void 0||Ch(l.position,d)!==Ch(a.dposition))&&(l.position=a.dposition),r[c]=!0;let h=null;if(c in n&&n[c].type===u)h=n[c];else{const m=Bt.getScale(u);h=new m({id:c,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(l,e)}),Be(r,(a,l)=>{a||delete n[l]}),Be(n,a=>{dt.configure(this,a,a.options),dt.addBox(this,a)})}_updateMetasets(){const e=this._metasets,i=this.data.datasets.length,n=e.length;if(e.sort((r,o)=>r.index-o.index),n>i){for(let r=i;r<n;++r)this._destroyDatasetMeta(r);e.splice(i,n-i)}this._sortedMetasets=e.slice(0).sort(Sh("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((n,r)=>{i.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],i=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=i.length;n<r;n++){const o=i[n];let a=this.getDatasetMeta(n);const l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=l,a.indexAxis=o.indexAxis||Xa(l,this.options),a.order=o.order||0,a.index=n,a.label=""+o.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{const c=Bt.getController(l),{datasetElementType:d,dataElementType:u}=Ge.datasets[l];Object.assign(c,{dataElementType:Bt.getElement(u),datasetElementType:d&&Bt.getElement(d)}),a.controller=new c(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){Be(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const i=this.config;i.update();const n=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),m=!r&&o.indexOf(h)===-1;h.buildOrUpdateElements(m),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||Be(o,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Sh("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Be(this.scales,e=>{dt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,i=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!zu(i,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:o}of i){const a=n==="_removeElements"?-o:o;F4(e,r,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const i=this.data.datasets.length,n=o=>new Set(e.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),r=n(0);for(let o=1;o<i;o++)if(!zu(r,n(o)))return;return Array.from(r).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;dt.update(this,this.width,this.height,e);const i=this.chartArea,n=i.width<=0||i.height<=0;this._layers=[],Be(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,o)=>{r._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let i=0,n=this.data.datasets.length;i<n;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,n=this.data.datasets.length;i<n;++i)this._updateDataset(i,pi(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(i),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Gt.has(this)?this.attached&&!Gt.running(this)&&Gt.start(this):(this.draw(),Nh({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const i=this._sortedMetasets,n=[];let r,o;for(r=0,o=i.length;r<o;++r){const a=i[r];(!e||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const i=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=Up(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&fo(i,r),e.controller.draw(),r&&po(i),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Jt(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,n,r){const o=Dx.modes[i];return typeof o=="function"?o(this,e,n,r):[]}getDatasetMeta(e){const i=this.data.datasets[e],n=this._metasets;let r=n.filter(o=>o&&o._dataset===i).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=vi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const i=this.data.datasets[e];if(!i)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!i.hidden}setDatasetVisibility(e,i){const n=this.getDatasetMeta(e);n.hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,n){const r=n?"show":"hide",o=this.getDatasetMeta(e),a=o.controller._resolveAnimations(void 0,r);ps(i)?(o.data[i].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(o,{visible:n}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){const i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),Gt.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ku(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Pr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,i=this.platform,n=(o,a)=>{i.addEventListener(this,o,a),e[o]=a},r=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};Be(this.options.events,o=>n(o,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,i=this.platform,n=(c,d)=>{i.addEventListener(this,c,d),e[c]=d},r=(c,d)=>{e[c]&&(i.removeEventListener(this,c,d),delete e[c])},o=(c,d)=>{this.canvas&&this.resize(c,d)};let a;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",o),n("detach",a)};a=()=>{this.attached=!1,r("resize",o),this._stop(),this._resize(0,0),n("attach",l)},i.isAttached(this.canvas)?l():a()}unbindEvents(){Be(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},Be(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,n){const r=n?"set":"remove";let o,a,l,c;for(i==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];const d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const i=this._active||[],n=e.map(({datasetIndex:o,index:a})=>{const l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!Yr(n,i)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,i))}notifyPlugins(e,i,n){return this._plugins.notify(this,e,i,n)}isPluginEnabled(e){return this._plugins._cache.filter(i=>i.plugin.id===e).length===1}_updateHoverStyles(e,i,n){const r=this.options.hover,o=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),a=o(i,e),l=n?e:o(e,i);a.length&&this.updateHoverStyle(a,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,i){const n={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},r=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const o=this._handleEvent(e,i,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(o||n.changed)&&this.render(),this}_handleEvent(e,i,n){const{_active:r=[],options:o}=this,a=i,l=this._getActiveElements(e,r,n,a),c=Ok(e),d=P4(e,this._lastEvent,n,c);n&&(this._lastEvent=null,Ve(o.onHover,[e,l,this],this),c&&Ve(o.onClick,[e,l,this],this));const u=!Yr(l,r);return(u||i)&&(this._active=l,this._updateHoverStyles(l,r,i)),this._lastEvent=d,u}_getActiveElements(e,i,n,r){if(e.type==="mouseout")return[];if(!n)return i;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,r)}}ue(Mt,"defaults",Ge),ue(Mt,"instances",Pr),ue(Mt,"overrides",Gi),ue(Mt,"registry",Bt),ue(Mt,"version",E4),ue(Mt,"getChart",Lh);function Mh(){return Be(Mt.instances,t=>t._plugins.invalidate())}function I4(t,e,i){const{startAngle:n,x:r,y:o,outerRadius:a,innerRadius:l,options:c}=e,{borderWidth:d,borderJoinStyle:u}=c,h=Math.min(d/a,ct(n-i));if(t.beginPath(),t.arc(r,o,a-d/2,n+h/2,i-h/2),l>0){const m=Math.min(d/l,ct(n-i));t.arc(r,o,l+d/2,i-m/2,n+m/2,!0)}else{const m=Math.min(d/2,a*ct(n-i));if(u==="round")t.arc(r,o,m,i-Ie/2,n+Ie/2,!0);else if(u==="bevel"){const f=2*m*m,g=-f*Math.cos(i+Ie/2)+r,p=-f*Math.sin(i+Ie/2)+o,v=f*Math.cos(n+Ie/2)+r,b=f*Math.sin(n+Ie/2)+o;t.lineTo(g,p),t.lineTo(v,b)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function R4(t,e,i){const{startAngle:n,pixelMargin:r,x:o,y:a,outerRadius:l,innerRadius:c}=e;let d=r/l;t.beginPath(),t.arc(o,a,l,n-d,i+d),c>r?(d=r/c,t.arc(o,a,c,i+d,n-d,!0)):t.arc(o,a,r,i+Je,n-Je),t.closePath(),t.clip()}function B4(t){return fc(t,["outerStart","outerEnd","innerStart","innerEnd"])}function z4(t,e,i,n){const r=B4(t.options.borderRadius),o=(i-e)/2,a=Math.min(o,n*e/2),l=c=>{const d=(i-Math.min(o,c))*n/2;return ot(c,0,Math.min(o,d))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:ot(r.innerStart,0,a),innerEnd:ot(r.innerEnd,0,a)}}function Qi(t,e,i,n){return{x:i+t*Math.cos(e),y:n+t*Math.sin(e)}}function eo(t,e,i,n,r,o){const{x:a,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=e,h=Math.max(e.outerRadius+n+i-d,0),m=u>0?u+n+i+d:0;let f=0;const g=r-c;if(n){const D=u>0?u-n:0,L=h>0?h-n:0,E=(D+L)/2,W=E!==0?g*E/(E+n):g;f=(g-W)/2}const p=Math.max(.001,g*h-i/Ie)/h,v=(g-p)/2,b=c+v+f,y=r-v-f,{outerStart:w,outerEnd:_,innerStart:k,innerEnd:N}=z4(e,m,h,y-b),C=h-w,S=h-_,x=b+w/C,B=y-_/S,A=m+k,P=m+N,I=b+k/A,z=y-N/P;if(t.beginPath(),o){const D=(x+B)/2;if(t.arc(a,l,h,x,D),t.arc(a,l,h,D,B),_>0){const F=Qi(S,B,a,l);t.arc(F.x,F.y,_,B,y+Je)}const L=Qi(P,y,a,l);if(t.lineTo(L.x,L.y),N>0){const F=Qi(P,z,a,l);t.arc(F.x,F.y,N,y+Je,z+Math.PI)}const E=(y-N/m+(b+k/m))/2;if(t.arc(a,l,m,y-N/m,E,!0),t.arc(a,l,m,E,b+k/m,!0),k>0){const F=Qi(A,I,a,l);t.arc(F.x,F.y,k,I+Math.PI,b-Je)}const W=Qi(C,b,a,l);if(t.lineTo(W.x,W.y),w>0){const F=Qi(C,x,a,l);t.arc(F.x,F.y,w,b-Je,x)}}else{t.moveTo(a,l);const D=Math.cos(x)*h+a,L=Math.sin(x)*h+l;t.lineTo(D,L);const E=Math.cos(B)*h+a,W=Math.sin(B)*h+l;t.lineTo(E,W)}t.closePath()}function V4(t,e,i,n,r){const{fullCircles:o,startAngle:a,circumference:l}=e;let c=e.endAngle;if(o){eo(t,e,i,n,c,r);for(let d=0;d<o;++d)t.fill();isNaN(l)||(c=a+(l%je||je))}return eo(t,e,i,n,c,r),t.fill(),c}function W4(t,e,i,n,r){const{fullCircles:o,startAngle:a,circumference:l,options:c}=e,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:m,borderRadius:f}=c,g=c.borderAlign==="inner";if(!d)return;t.setLineDash(h||[]),t.lineDashOffset=m,g?(t.lineWidth=d*2,t.lineJoin=u||"round"):(t.lineWidth=d,t.lineJoin=u||"bevel");let p=e.endAngle;if(o){eo(t,e,i,n,p,r);for(let v=0;v<o;++v)t.stroke();isNaN(l)||(p=a+(l%je||je))}g&&R4(t,e,p),c.selfJoin&&p-a>=Ie&&f===0&&u!=="miter"&&I4(t,e,p),o||(eo(t,e,i,n,p,r),t.stroke())}class On extends si{constructor(i){super();ue(this,"circumference");ue(this,"endAngle");ue(this,"fullCircles");ue(this,"innerRadius");ue(this,"outerRadius");ue(this,"pixelMargin");ue(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,i&&Object.assign(this,i)}inRange(i,n,r){const o=this.getProps(["x","y"],r),{angle:a,distance:l}=Cp(o,{x:i,y:n}),{startAngle:c,endAngle:d,innerRadius:u,outerRadius:h,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,g=xe(m,d-c),p=gs(a,c,d)&&c!==d,v=g>=je||p,b=qt(l,u+f,h+f);return v&&b}getCenterPoint(i){const{x:n,y:r,startAngle:o,endAngle:a,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],i),{offset:d,spacing:u}=this.options,h=(o+a)/2,m=(l+c+u+d)/2;return{x:n+Math.cos(h)*m,y:r+Math.sin(h)*m}}tooltipPosition(i){return this.getCenterPoint(i)}draw(i){const{options:n,circumference:r}=this,o=(n.offset||0)/4,a=(n.spacing||0)/2,l=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=r>je?Math.floor(r/je):0,r===0||this.innerRadius<0||this.outerRadius<0)return;i.save();const c=(this.startAngle+this.endAngle)/2;i.translate(Math.cos(c)*o,Math.sin(c)*o);const d=1-Math.sin(Math.min(Ie,r||0)),u=o*d;i.fillStyle=n.backgroundColor,i.strokeStyle=n.borderColor,V4(i,this,u,a,l),W4(i,this,u,a,l),i.restore()}}ue(On,"id","arc"),ue(On,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),ue(On,"defaultRoutes",{backgroundColor:"backgroundColor"}),ue(On,"descriptors",{_scriptable:!0,_indexable:i=>i!=="borderDash"});function sg(t,e,i=e){t.lineCap=xe(i.borderCapStyle,e.borderCapStyle),t.setLineDash(xe(i.borderDash,e.borderDash)),t.lineDashOffset=xe(i.borderDashOffset,e.borderDashOffset),t.lineJoin=xe(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=xe(i.borderWidth,e.borderWidth),t.strokeStyle=xe(i.borderColor,e.borderColor)}function O4(t,e,i){t.lineTo(i.x,i.y)}function $4(t){return t.stepped?d_:t.tension||t.cubicInterpolationMode==="monotone"?u_:O4}function rg(t,e,i={}){const n=t.length,{start:r=0,end:o=n-1}=i,{start:a,end:l}=e,c=Math.max(r,a),d=Math.min(o,l),u=r<a&&o<a||r>l&&o>l;return{count:n,start:c,loop:e.loop,ilen:d<c&&!u?n+d-c:d-c}}function H4(t,e,i,n){const{points:r,options:o}=e,{count:a,start:l,loop:c,ilen:d}=rg(r,i,n),u=$4(o);let{move:h=!0,reverse:m}=n||{},f,g,p;for(f=0;f<=d;++f)g=r[(l+(m?d-f:f))%a],!g.skip&&(h?(t.moveTo(g.x,g.y),h=!1):u(t,p,g,m,o.stepped),p=g);return c&&(g=r[(l+(m?d:0))%a],u(t,p,g,m,o.stepped)),!!c}function j4(t,e,i,n){const r=e.points,{count:o,start:a,ilen:l}=rg(r,i,n),{move:c=!0,reverse:d}=n||{};let u=0,h=0,m,f,g,p,v,b;const y=_=>(a+(d?l-_:_))%o,w=()=>{p!==v&&(t.lineTo(u,v),t.lineTo(u,p),t.lineTo(u,b))};for(c&&(f=r[y(0)],t.moveTo(f.x,f.y)),m=0;m<=l;++m){if(f=r[y(m)],f.skip)continue;const _=f.x,k=f.y,N=_|0;N===g?(k<p?p=k:k>v&&(v=k),u=(h*u+_)/++h):(w(),t.lineTo(_,k),g=N,h=0,p=v=k),b=k}w()}function Qa(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!i?j4:H4}function U4(t){return t.stepped?H_:t.tension||t.cubicInterpolationMode==="monotone"?j_:Di}function G4(t,e,i,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,i,n)&&r.closePath()),sg(t,e.options),t.stroke(r)}function K4(t,e,i,n){const{segments:r,options:o}=e,a=Qa(e);for(const l of r)sg(t,o,l.style),t.beginPath(),a(t,e,l,{start:i,end:i+n-1})&&t.closePath(),t.stroke()}const Y4=typeof Path2D=="function";function Z4(t,e,i,n){Y4&&!e.options.segment?G4(t,e,i,n):K4(t,e,i,n)}class ci extends si{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;I_(this._points,n,e,r,i),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=q_(this,this.options.segment))}first(){const e=this.segments,i=this.points;return e.length&&i[e[0].start]}last(){const e=this.segments,i=this.points,n=e.length;return n&&i[e[n-1].end]}interpolate(e,i){const n=this.options,r=e[i],o=this.points,a=jp(this,{property:i,start:r,end:r});if(!a.length)return;const l=[],c=U4(n);let d,u;for(d=0,u=a.length;d<u;++d){const{start:h,end:m}=a[d],f=o[h],g=o[m];if(f===g){l.push(f);continue}const p=Math.abs((r-f[i])/(g[i]-f[i])),v=c(f,g,p,n.stepped);v[i]=e[i],l.push(v)}return l.length===1?l[0]:l}pathSegment(e,i,n){return Qa(this)(e,this,i,n)}path(e,i,n){const r=this.segments,o=Qa(this);let a=this._loop;i=i||0,n=n||this.points.length-i;for(const l of r)a&=o(e,this,l,{start:i,end:i+n-1});return!!a}draw(e,i,n,r){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),Z4(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ue(ci,"id","line"),ue(ci,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ue(ci,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ue(ci,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Th(t,e,i,n){const r=t.options,{[i]:o}=t.getProps([i],n);return Math.abs(e-o)<r.radius+r.hitRadius}class Ir extends si{constructor(i){super();ue(this,"parsed");ue(this,"skip");ue(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,i&&Object.assign(this,i)}inRange(i,n,r){const o=this.options,{x:a,y:l}=this.getProps(["x","y"],r);return Math.pow(i-a,2)+Math.pow(n-l,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(i,n){return Th(this,i,"x",n)}inYRange(i,n){return Th(this,i,"y",n)}getCenterPoint(i){const{x:n,y:r}=this.getProps(["x","y"],i);return{x:n,y:r}}size(i){i=i||this.options||{};let n=i.radius||0;n=Math.max(n,n&&i.hoverRadius||0);const r=n&&i.borderWidth||0;return(n+r)*2}draw(i,n){const r=this.options;this.skip||r.radius<.1||!Jt(this,n,this.size(r)/2)||(i.strokeStyle=r.borderColor,i.lineWidth=r.borderWidth,i.fillStyle=r.backgroundColor,Za(i,r,this.x,this.y))}getRange(){const i=this.options||{};return i.radius+i.hitRadius}}ue(Ir,"id","point"),ue(Ir,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ue(Ir,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function og(t,e){const{x:i,y:n,base:r,width:o,height:a}=t.getProps(["x","y","base","width","height"],e);let l,c,d,u,h;return t.horizontal?(h=a/2,l=Math.min(i,r),c=Math.max(i,r),d=n-h,u=n+h):(h=o/2,l=i-h,c=i+h,d=Math.min(n,r),u=Math.max(n,r)),{left:l,top:d,right:c,bottom:u}}function di(t,e,i,n){return t?0:ot(e,i,n)}function q4(t,e,i){const n=t.options.borderWidth,r=t.borderSkipped,o=Fp(n);return{t:di(r.top,o.top,0,i),r:di(r.right,o.right,0,e),b:di(r.bottom,o.bottom,0,i),l:di(r.left,o.left,0,e)}}function X4(t,e,i){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,o=Oi(r),a=Math.min(e,i),l=t.borderSkipped,c=n||De(r);return{topLeft:di(!c||l.top||l.left,o.topLeft,0,a),topRight:di(!c||l.top||l.right,o.topRight,0,a),bottomLeft:di(!c||l.bottom||l.left,o.bottomLeft,0,a),bottomRight:di(!c||l.bottom||l.right,o.bottomRight,0,a)}}function J4(t){const e=og(t),i=e.right-e.left,n=e.bottom-e.top,r=q4(t,i/2,n/2),o=X4(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n,radius:o},inner:{x:e.left+r.l,y:e.top+r.t,w:i-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function Qo(t,e,i,n){const r=e===null,o=i===null,l=t&&!(r&&o)&&og(t,n);return l&&(r||qt(e,l.left,l.right))&&(o||qt(i,l.top,l.bottom))}function Q4(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function e9(t,e){t.rect(e.x,e.y,e.w,e.h)}function ea(t,e,i={}){const n=t.x!==i.x?-e:0,r=t.y!==i.y?-e:0,o=(t.x+t.w!==i.x+i.w?e:0)-n,a=(t.y+t.h!==i.y+i.h?e:0)-r;return{x:t.x+n,y:t.y+r,w:t.w+o,h:t.h+a,radius:t.radius}}class Rr extends si{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:i,options:{borderColor:n,backgroundColor:r}}=this,{inner:o,outer:a}=J4(this),l=Q4(a.radius)?vs:e9;e.save(),(a.w!==o.w||a.h!==o.h)&&(e.beginPath(),l(e,ea(a,i,o)),e.clip(),l(e,ea(o,-i,a)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),l(e,ea(o,i)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,i,n){return Qo(this,e,i,n)}inXRange(e,i){return Qo(this,e,null,i)}inYRange(e,i){return Qo(this,null,e,i)}getCenterPoint(e){const{x:i,y:n,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(i+r)/2:i,y:o?n:(n+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ue(Rr,"id","bar"),ue(Rr,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ue(Rr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var t9=Object.freeze({__proto__:null,ArcElement:On,BarElement:Rr,LineElement:ci,PointElement:Ir});const el=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Eh=el.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function ag(t){return el[t%el.length]}function lg(t){return Eh[t%Eh.length]}function i9(t,e){return t.borderColor=ag(e),t.backgroundColor=lg(e),++e}function n9(t,e){return t.backgroundColor=t.data.map(()=>ag(e++)),e}function s9(t,e){return t.backgroundColor=t.data.map(()=>lg(e++)),e}function r9(t){let e=0;return(i,n)=>{const r=t.getDatasetMeta(n).controller;r instanceof Ri?e=n9(i,e):r instanceof ss?e=s9(i,e):r&&(e=i9(i,e))}}function Dh(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function o9(t){return t&&(t.borderColor||t.backgroundColor)}function a9(){return Ge.borderColor!=="rgba(0,0,0,0.1)"||Ge.backgroundColor!=="rgba(0,0,0,0.1)"}var l9={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,i){if(!i.enabled)return;const{data:{datasets:n},options:r}=t.config,{elements:o}=r,a=Dh(n)||o9(r)||o&&Dh(o)||a9();if(!i.forceOverride&&a)return;const l=r9(t);n.forEach(l)}};function c9(t,e,i,n,r){const o=r.samples||n;if(o>=i)return t.slice(e,e+i);const a=[],l=(i-2)/(o-2);let c=0;const d=e+i-1;let u=e,h,m,f,g,p;for(a[c++]=t[u],h=0;h<o-2;h++){let v=0,b=0,y;const w=Math.floor((h+1)*l)+1+e,_=Math.min(Math.floor((h+2)*l)+1,i)+e,k=_-w;for(y=w;y<_;y++)v+=t[y].x,b+=t[y].y;v/=k,b/=k;const N=Math.floor(h*l)+1+e,C=Math.min(Math.floor((h+1)*l)+1,i)+e,{x:S,y:x}=t[u];for(f=g=-1,y=N;y<C;y++)g=.5*Math.abs((S-v)*(t[y].y-x)-(S-t[y].x)*(b-x)),g>f&&(f=g,m=t[y],p=y);a[c++]=m,u=p}return a[c++]=t[d],a}function d9(t,e,i,n){let r=0,o=0,a,l,c,d,u,h,m,f,g,p;const v=[],b=e+i-1,y=t[e].x,_=t[b].x-y;for(a=e;a<e+i;++a){l=t[a],c=(l.x-y)/_*n,d=l.y;const k=c|0;if(k===u)d<g?(g=d,h=a):d>p&&(p=d,m=a),r=(o*r+l.x)/++o;else{const N=a-1;if(!Te(h)&&!Te(m)){const C=Math.min(h,m),S=Math.max(h,m);C!==f&&C!==N&&v.push({...t[C],x:r}),S!==f&&S!==N&&v.push({...t[S],x:r})}a>0&&N!==f&&v.push(t[N]),v.push(l),u=k,o=0,g=p=d,h=m=f=a}}return v}function cg(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Ah(t){t.data.datasets.forEach(e=>{cg(e)})}function u9(t,e){const i=e.length;let n=0,r;const{iScale:o}=t,{min:a,max:l,minDefined:c,maxDefined:d}=o.getUserBounds();return c&&(n=ot(Xt(e,o.axis,a).lo,0,i-1)),d?r=ot(Xt(e,o.axis,l).hi+1,n,i)-n:r=i-n,{start:n,count:r}}var h9={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled){Ah(t);return}const n=t.width;t.data.datasets.forEach((r,o)=>{const{_data:a,indexAxis:l}=r,c=t.getDatasetMeta(o),d=a||r.data;if(Vn([l,t.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const u=t.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:h,count:m}=u9(c,d);const f=i.threshold||4*n;if(m<=f){cg(r);return}Te(a)&&(r._data=d,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(p){this._data=p}}));let g;switch(i.algorithm){case"lttb":g=c9(d,h,m,n,i);break;case"min-max":g=d9(d,h,m,n);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}r._decimated=g})},destroy(t){Ah(t)}};function m9(t,e,i){const n=t.segments,r=t.points,o=e.points,a=[];for(const l of n){let{start:c,end:d}=l;d=vo(c,d,r);const u=tl(i,r[c],r[d],l.loop);if(!e.segments){a.push({source:l,target:u,start:r[c],end:r[d]});continue}const h=jp(e,u);for(const m of h){const f=tl(i,o[m.start],o[m.end],m.loop),g=Hp(l,r,f);for(const p of g)a.push({source:p,target:m,start:{[i]:Fh(u,f,"start",Math.max)},end:{[i]:Fh(u,f,"end",Math.min)}})}}return a}function tl(t,e,i,n){if(n)return;let r=e[t],o=i[t];return t==="angle"&&(r=ct(r),o=ct(o)),{property:t,start:r,end:o}}function f9(t,e){const{x:i=null,y:n=null}=t||{},r=e.points,o=[];return e.segments.forEach(({start:a,end:l})=>{l=vo(a,l,r);const c=r[a],d=r[l];n!==null?(o.push({x:c.x,y:n}),o.push({x:d.x,y:n})):i!==null&&(o.push({x:i,y:c.y}),o.push({x:i,y:d.y}))}),o}function vo(t,e,i){for(;e>t;e--){const n=i[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function Fh(t,e,i,n){return t&&e?n(t[i],e[i]):t?t[i]:e?e[i]:0}function dg(t,e){let i=[],n=!1;return Ue(t)?(n=!0,i=t):i=f9(t,e),i.length?new ci({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function Ph(t){return t&&t.fill!==!1}function p9(t,e,i){let r=t[e].fill;const o=[e];let a;if(!i)return r;for(;r!==!1&&o.indexOf(r)===-1;){if(!Ze(r))return r;if(a=t[r],!a)return!1;if(a.visible)return r;o.push(r),r=a.fill}return!1}function g9(t,e,i){const n=w9(t);if(De(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return Ze(r)&&Math.floor(r)===r?v9(n[0],e,r,i):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function v9(t,e,i,n){return(t==="-"||t==="+")&&(i=e+i),i===e||i<0||i>=n?!1:i}function y9(t,e){let i=null;return t==="start"?i=e.bottom:t==="end"?i=e.top:De(t)?i=e.getPixelForValue(t.value):e.getBasePixel&&(i=e.getBasePixel()),i}function b9(t,e,i){let n;return t==="start"?n=i:t==="end"?n=e.options.reverse?e.min:e.max:De(t)?n=t.value:n=e.getBaseValue(),n}function w9(t){const e=t.options,i=e.fill;let n=xe(i&&i.target,i);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function k9(t){const{scale:e,index:i,line:n}=t,r=[],o=n.segments,a=n.points,l=_9(e,i);l.push(dg({x:null,y:e.bottom},n));for(let c=0;c<o.length;c++){const d=o[c];for(let u=d.start;u<=d.end;u++)x9(r,a[u],l)}return new ci({points:r,options:{}})}function _9(t,e){const i=[],n=t.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const o=n[r];if(o.index===e)break;o.hidden||i.unshift(o.dataset)}return i}function x9(t,e,i){const n=[];for(let r=0;r<i.length;r++){const o=i[r],{first:a,last:l,point:c}=C9(o,e,"x");if(!(!c||a&&l)){if(a)n.unshift(c);else if(t.push(c),!l)break}}t.push(...n)}function C9(t,e,i){const n=t.interpolate(e,i);if(!n)return{};const r=n[i],o=t.segments,a=t.points;let l=!1,c=!1;for(let d=0;d<o.length;d++){const u=o[d],h=a[u.start][i],m=a[u.end][i];if(qt(r,h,m)){l=r===h,c=r===m;break}}return{first:l,last:c,point:n}}class ug{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,i,n){const{x:r,y:o,radius:a}=this;return i=i||{start:0,end:je},e.arc(r,o,a,i.end,i.start,!0),!n.bounds}interpolate(e){const{x:i,y:n,radius:r}=this,o=e.angle;return{x:i+Math.cos(o)*r,y:n+Math.sin(o)*r,angle:o}}}function S9(t){const{chart:e,fill:i,line:n}=t;if(Ze(i))return N9(e,i);if(i==="stack")return k9(t);if(i==="shape")return!0;const r=L9(t);return r instanceof ug?r:dg(r,n)}function N9(t,e){const i=t.getDatasetMeta(e);return i&&t.isDatasetVisible(e)?i.dataset:null}function L9(t){return(t.scale||{}).getPointPositionForValue?T9(t):M9(t)}function M9(t){const{scale:e={},fill:i}=t,n=y9(i,e);if(Ze(n)){const r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function T9(t){const{scale:e,fill:i}=t,n=e.options,r=e.getLabels().length,o=n.reverse?e.max:e.min,a=b9(i,e,o),l=[];if(n.grid.circular){const c=e.getPointPositionForValue(0,o);return new ug({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(a)})}for(let c=0;c<r;++c)l.push(e.getPointPositionForValue(c,a));return l}function ta(t,e,i){const n=S9(e),{chart:r,index:o,line:a,scale:l,axis:c}=e,d=a.options,u=d.fill,h=d.backgroundColor,{above:m=h,below:f=h}=u||{},g=r.getDatasetMeta(o),p=Up(r,g);n&&a.points.length&&(fo(t,i),E9(t,{line:a,target:n,above:m,below:f,area:i,scale:l,axis:c,clip:p}),po(t))}function E9(t,e){const{line:i,target:n,above:r,below:o,area:a,scale:l,clip:c}=e,d=i._loop?"angle":e.axis;t.save();let u=o;o!==r&&(d==="x"?(Ih(t,n,a.top),ia(t,{line:i,target:n,color:r,scale:l,property:d,clip:c}),t.restore(),t.save(),Ih(t,n,a.bottom)):d==="y"&&(Rh(t,n,a.left),ia(t,{line:i,target:n,color:o,scale:l,property:d,clip:c}),t.restore(),t.save(),Rh(t,n,a.right),u=r)),ia(t,{line:i,target:n,color:u,scale:l,property:d,clip:c}),t.restore()}function Ih(t,e,i){const{segments:n,points:r}=e;let o=!0,a=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[vo(c,d,r)];o?(t.moveTo(u.x,u.y),o=!1):(t.lineTo(u.x,i),t.lineTo(u.x,u.y)),a=!!e.pathSegment(t,l,{move:a}),a?t.closePath():t.lineTo(h.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function Rh(t,e,i){const{segments:n,points:r}=e;let o=!0,a=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[vo(c,d,r)];o?(t.moveTo(u.x,u.y),o=!1):(t.lineTo(i,u.y),t.lineTo(u.x,u.y)),a=!!e.pathSegment(t,l,{move:a}),a?t.closePath():t.lineTo(i,h.y)}t.lineTo(i,e.first().y),t.closePath(),t.clip()}function ia(t,e){const{line:i,target:n,property:r,color:o,scale:a,clip:l}=e,c=m9(i,n,r);for(const{source:d,target:u,start:h,end:m}of c){const{style:{backgroundColor:f=o}={}}=d,g=n!==!0;t.save(),t.fillStyle=f,D9(t,a,l,g&&tl(r,h,m)),t.beginPath();const p=!!i.pathSegment(t,d);let v;if(g){p?t.closePath():Bh(t,n,m,r);const b=!!n.pathSegment(t,u,{move:p,reverse:!0});v=p&&b,v||Bh(t,n,h,r)}t.closePath(),t.fill(v?"evenodd":"nonzero"),t.restore()}}function D9(t,e,i,n){const r=e.chart.chartArea,{property:o,start:a,end:l}=n||{};if(o==="x"||o==="y"){let c,d,u,h;o==="x"?(c=a,d=r.top,u=l,h=r.bottom):(c=r.left,d=a,u=r.right,h=l),t.beginPath(),i&&(c=Math.max(c,i.left),u=Math.min(u,i.right),d=Math.max(d,i.top),h=Math.min(h,i.bottom)),t.rect(c,d,u-c,h-d),t.clip()}}function Bh(t,e,i,n){const r=e.interpolate(i,n);r&&t.lineTo(r.x,r.y)}var A9={id:"filler",afterDatasetsUpdate(t,e,i){const n=(t.data.datasets||[]).length,r=[];let o,a,l,c;for(a=0;a<n;++a)o=t.getDatasetMeta(a),l=o.dataset,c=null,l&&l.options&&l instanceof ci&&(c={visible:t.isDatasetVisible(a),index:a,fill:g9(l,a,n),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:l}),o.$filler=c,r.push(c);for(a=0;a<n;++a)c=r[a],!(!c||c.fill===!1)&&(c.fill=p9(r,a,i.propagate))},beforeDraw(t,e,i){const n=i.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let a=r.length-1;a>=0;--a){const l=r[a].$filler;l&&(l.line.updateControlPoints(o,l.axis),n&&l.fill&&ta(t.ctx,l,o))}},beforeDatasetsDraw(t,e,i){if(i.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const o=n[r].$filler;Ph(o)&&ta(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,e,i){const n=e.meta.$filler;!Ph(n)||i.drawTime!=="beforeDatasetDraw"||ta(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const zh=(t,e)=>{let{boxHeight:i=e,boxWidth:n=e}=t;return t.usePointStyle&&(i=Math.min(i,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:i,itemHeight:Math.max(e,i)}},F9=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Vh extends si{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i,n){this.maxWidth=e,this.maxHeight=i,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let i=Ve(e.generateLabels,[this.chart],this)||[];e.filter&&(i=i.filter(n=>e.filter(n,this.chart.data))),e.sort&&(i=i.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:e,ctx:i}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,r=it(n.font),o=r.size,a=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=zh(n,o);let d,u;i.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(a,o,l,c)+10):(u=this.maxHeight,d=this._fitCols(a,r,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,i,n,r){const{ctx:o,maxWidth:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+l;let h=e;o.textAlign="left",o.textBaseline="middle";let m=-1,f=-u;return this.legendItems.forEach((g,p)=>{const v=n+i/2+o.measureText(g.text).width;(p===0||d[d.length-1]+v+2*l>a)&&(h+=u,d[d.length-(p>0?0:1)]=0,f+=u,m++),c[p]={left:0,top:f,row:m,width:v,height:r},d[d.length-1]+=v+l}),h}_fitCols(e,i,n,r){const{ctx:o,maxHeight:a,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=a-e;let h=l,m=0,f=0,g=0,p=0;return this.legendItems.forEach((v,b)=>{const{itemWidth:y,itemHeight:w}=P9(n,i,o,v,r);b>0&&f+w+2*l>u&&(h+=m+l,d.push({width:m,height:f}),g+=m+l,p++,m=f=0),c[b]={left:g,top:f,col:p,width:y,height:w},m=Math.max(m,y),f+=w+l}),h+=m,d.push({width:m,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:n,labels:{padding:r},rtl:o}}=this,a=un(o,this.left,this.width);if(this.isHorizontal()){let l=0,c=lt(n,this.left+r,this.right-this.lineWidths[l]);for(const d of i)l!==d.row&&(l=d.row,c=lt(n,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+e+r,d.left=a.leftForLtr(a.x(c),d.width),c+=d.width+r}else{let l=0,c=lt(n,this.top+e+r,this.bottom-this.columnSizes[l].height);for(const d of i)d.col!==l&&(l=d.col,c=lt(n,this.top+e+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=a.leftForLtr(a.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;fo(e,this),this._draw(),po(e)}}_draw(){const{options:e,columnSizes:i,lineWidths:n,ctx:r}=this,{align:o,labels:a}=e,l=Ge.color,c=un(e.rtl,this.left,this.width),d=it(a.font),{padding:u}=a,h=d.size,m=h/2;let f;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:g,boxHeight:p,itemHeight:v}=zh(a,h),b=function(N,C,S){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;r.save();const x=xe(S.lineWidth,1);if(r.fillStyle=xe(S.fillStyle,l),r.lineCap=xe(S.lineCap,"butt"),r.lineDashOffset=xe(S.lineDashOffset,0),r.lineJoin=xe(S.lineJoin,"miter"),r.lineWidth=x,r.strokeStyle=xe(S.strokeStyle,l),r.setLineDash(xe(S.lineDash,[])),a.usePointStyle){const B={radius:p*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:x},A=c.xPlus(N,g/2),P=C+m;Ap(r,B,A,P,a.pointStyleWidth&&g)}else{const B=C+Math.max((h-p)/2,0),A=c.leftForLtr(N,g),P=Oi(S.borderRadius);r.beginPath(),Object.values(P).some(I=>I!==0)?vs(r,{x:A,y:B,w:g,h:p,radius:P}):r.rect(A,B,g,p),r.fill(),x!==0&&r.stroke()}r.restore()},y=function(N,C,S){Ki(r,S.text,N,C+v/2,d,{strikethrough:S.hidden,textAlign:c.textAlign(S.textAlign)})},w=this.isHorizontal(),_=this._computeTitleHeight();w?f={x:lt(o,this.left+u,this.right-n[0]),y:this.top+u+_,line:0}:f={x:this.left+u,y:lt(o,this.top+_+u,this.bottom-i[0].height),line:0},Wp(this.ctx,e.textDirection);const k=v+u;this.legendItems.forEach((N,C)=>{r.strokeStyle=N.fontColor,r.fillStyle=N.fontColor;const S=r.measureText(N.text).width,x=c.textAlign(N.textAlign||(N.textAlign=a.textAlign)),B=g+m+S;let A=f.x,P=f.y;c.setWidth(this.width),w?C>0&&A+B+u>this.right&&(P=f.y+=k,f.line++,A=f.x=lt(o,this.left+u,this.right-n[f.line])):C>0&&P+k>this.bottom&&(A=f.x=A+i[f.line].width+u,f.line++,P=f.y=lt(o,this.top+_+u,this.bottom-i[f.line].height));const I=c.x(A);if(b(I,P,N),A=Qk(x,A+g+m,w?A+B:this.right,e.rtl),y(c.x(A),P,N),w)f.x+=B+u;else if(typeof N.text!="string"){const z=d.lineHeight;f.y+=hg(N,z)+u}else f.y+=k}),Op(this.ctx,e.textDirection)}drawTitle(){const e=this.options,i=e.title,n=it(i.font),r=ut(i.padding);if(!i.display)return;const o=un(e.rtl,this.left,this.width),a=this.ctx,l=i.position,c=n.size/2,d=r.top+c;let u,h=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+d,h=lt(e.align,h,this.right-m);else{const g=this.columnSizes.reduce((p,v)=>Math.max(p,v.height),0);u=d+lt(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=lt(l,h,h+m);a.textAlign=o.textAlign(hc(l)),a.textBaseline="middle",a.strokeStyle=i.color,a.fillStyle=i.color,a.font=n.string,Ki(a,i.text,f,u,n)}_computeTitleHeight(){const e=this.options.title,i=it(e.font),n=ut(e.padding);return e.display?i.lineHeight+n.height:0}_getLegendItemAt(e,i){let n,r,o;if(qt(e,this.left,this.right)&&qt(i,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(r=o[n],qt(e,r.left,r.left+r.width)&&qt(i,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){const i=this.options;if(!B9(e.type,i))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,o=F9(r,n);r&&!o&&Ve(i.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!o&&Ve(i.onHover,[e,n,this],this)}else n&&Ve(i.onClick,[e,n,this],this)}}function P9(t,e,i,n,r){const o=I9(n,t,e,i),a=R9(r,n,e.lineHeight);return{itemWidth:o,itemHeight:a}}function I9(t,e,i,n){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((o,a)=>o.length>a.length?o:a)),e+i.size/2+n.measureText(r).width}function R9(t,e,i){let n=t;return typeof e.text!="string"&&(n=hg(e,i)),n}function hg(t,e){const i=t.text?t.text.length:0;return e*i}function B9(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var z9={id:"legend",_element:Vh,start(t,e,i){const n=t.legend=new Vh({ctx:t.ctx,options:i,chart:t});dt.configure(t,n,i),dt.addBox(t,n)},stop(t){dt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const n=t.legend;dt.configure(t,n,i),n.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const n=e.datasetIndex,r=i.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:n,textAlign:r,color:o,useBorderRadius:a,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(i?0:void 0),u=ut(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:o,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:a&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class kc extends si{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=i;const r=Ue(n.text)?n.text.length:1;this._padding=ut(n.padding);const o=r*it(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:i,left:n,bottom:r,right:o,options:a}=this,l=a.align;let c=0,d,u,h;return this.isHorizontal()?(u=lt(l,n,o),h=i+e,d=o-n):(a.position==="left"?(u=n+e,h=lt(l,r,i),c=Ie*-.5):(u=o-e,h=lt(l,i,r),c=Ie*.5),d=r-i),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const e=this.ctx,i=this.options;if(!i.display)return;const n=it(i.font),o=n.lineHeight/2+this._padding.top,{titleX:a,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(o);Ki(e,i.text,0,0,n,{color:i.color,maxWidth:c,rotation:d,textAlign:hc(i.align),textBaseline:"middle",translation:[a,l]})}}function V9(t,e){const i=new kc({ctx:t.ctx,options:e,chart:t});dt.configure(t,i,e),dt.addBox(t,i),t.titleBlock=i}var W9={id:"title",_element:kc,start(t,e,i){V9(t,i)},stop(t){const e=t.titleBlock;dt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const n=t.titleBlock;dt.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const rr=new WeakMap;var O9={id:"subtitle",start(t,e,i){const n=new kc({ctx:t.ctx,options:i,chart:t});dt.configure(t,n,i),dt.addBox(t,n),rr.set(t,n)},stop(t){dt.removeBox(t,rr.get(t)),rr.delete(t)},beforeUpdate(t,e,i){const n=rr.get(t);dt.configure(t,n,i),n.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const $n={average(t){if(!t.length)return!1;let e,i,n=new Set,r=0,o=0;for(e=0,i=t.length;e<i;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();n.add(c.x),r+=c.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((l,c)=>l+c)/n.size,y:r/o}},nearest(t,e){if(!t.length)return!1;let i=e.x,n=e.y,r=Number.POSITIVE_INFINITY,o,a,l;for(o=0,a=t.length;o<a;++o){const c=t[o].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=Ka(e,d);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();i=c.x,n=c.y}return{x:i,y:n}}};function It(t,e){return e&&(Ue(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Kt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function $9(t,e){const{element:i,datasetIndex:n,index:r}=e,o=t.getDatasetMeta(n).controller,{label:a,value:l}=o.getLabelAndValue(r);return{chart:t,label:a,parsed:o.getParsed(r),raw:t.data.datasets[n].data[r],formattedValue:l,dataset:o.getDataset(),dataIndex:r,datasetIndex:n,element:i}}function Wh(t,e){const i=t.chart.ctx,{body:n,footer:r,title:o}=t,{boxWidth:a,boxHeight:l}=e,c=it(e.bodyFont),d=it(e.titleFont),u=it(e.footerFont),h=o.length,m=r.length,f=n.length,g=ut(e.padding);let p=g.height,v=0,b=n.reduce((_,k)=>_+k.before.length+k.lines.length+k.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,h&&(p+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),b){const _=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;p+=f*_+(b-f)*c.lineHeight+(b-1)*e.bodySpacing}m&&(p+=e.footerMarginTop+m*u.lineHeight+(m-1)*e.footerSpacing);let y=0;const w=function(_){v=Math.max(v,i.measureText(_).width+y)};return i.save(),i.font=d.string,Be(t.title,w),i.font=c.string,Be(t.beforeBody.concat(t.afterBody),w),y=e.displayColors?a+2+e.boxPadding:0,Be(n,_=>{Be(_.before,w),Be(_.lines,w),Be(_.after,w)}),y=0,i.font=u.string,Be(t.footer,w),i.restore(),v+=g.width,{width:v,height:p}}function H9(t,e){const{y:i,height:n}=e;return i<n/2?"top":i>t.height-n/2?"bottom":"center"}function j9(t,e,i,n){const{x:r,width:o}=n,a=i.caretSize+i.caretPadding;if(t==="left"&&r+o+a>e.width||t==="right"&&r-o-a<0)return!0}function U9(t,e,i,n){const{x:r,width:o}=i,{width:a,chartArea:{left:l,right:c}}=t;let d="center";return n==="center"?d=r<=(l+c)/2?"left":"right":r<=o/2?d="left":r>=a-o/2&&(d="right"),j9(d,t,e,i)&&(d="center"),d}function Oh(t,e,i){const n=i.yAlign||e.yAlign||H9(t,i);return{xAlign:i.xAlign||e.xAlign||U9(t,e,i,n),yAlign:n}}function G9(t,e){let{x:i,width:n}=t;return e==="right"?i-=n:e==="center"&&(i-=n/2),i}function K9(t,e,i){let{y:n,height:r}=t;return e==="top"?n+=i:e==="bottom"?n-=r+i:n-=r/2,n}function $h(t,e,i,n){const{caretSize:r,caretPadding:o,cornerRadius:a}=t,{xAlign:l,yAlign:c}=i,d=r+o,{topLeft:u,topRight:h,bottomLeft:m,bottomRight:f}=Oi(a);let g=G9(e,l);const p=K9(e,c,d);return c==="center"?l==="left"?g+=d:l==="right"&&(g-=d):l==="left"?g-=Math.max(u,m)+r:l==="right"&&(g+=Math.max(h,f)+r),{x:ot(g,0,n.width-e.width),y:ot(p,0,n.height-e.height)}}function or(t,e,i){const n=ut(i.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Hh(t){return It([],Kt(t))}function Y9(t,e,i){return vi(t,{tooltip:e,tooltipItems:i,type:"tooltip"})}function jh(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}const mg={beforeTitle:jt,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,n=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return i[e.dataIndex]}return""},afterTitle:jt,beforeBody:jt,beforeLabel:jt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return Te(i)||(e+=i),e},labelColor(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const i=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:jt,afterBody:jt,beforeFooter:jt,footer:jt,afterFooter:jt};function ft(t,e,i,n){const r=t[e].call(i,n);return typeof r>"u"?mg[e].call(i,n):r}class il extends si{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const i=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&i.options.animation&&n.animations,o=new Gp(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=Y9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){const{callbacks:n}=i,r=ft(n,"beforeTitle",this,e),o=ft(n,"title",this,e),a=ft(n,"afterTitle",this,e);let l=[];return l=It(l,Kt(r)),l=It(l,Kt(o)),l=It(l,Kt(a)),l}getBeforeBody(e,i){return Hh(ft(i.callbacks,"beforeBody",this,e))}getBody(e,i){const{callbacks:n}=i,r=[];return Be(e,o=>{const a={before:[],lines:[],after:[]},l=jh(n,o);It(a.before,Kt(ft(l,"beforeLabel",this,o))),It(a.lines,ft(l,"label",this,o)),It(a.after,Kt(ft(l,"afterLabel",this,o))),r.push(a)}),r}getAfterBody(e,i){return Hh(ft(i.callbacks,"afterBody",this,e))}getFooter(e,i){const{callbacks:n}=i,r=ft(n,"beforeFooter",this,e),o=ft(n,"footer",this,e),a=ft(n,"afterFooter",this,e);let l=[];return l=It(l,Kt(r)),l=It(l,Kt(o)),l=It(l,Kt(a)),l}_createItems(e){const i=this._active,n=this.chart.data,r=[],o=[],a=[];let l=[],c,d;for(c=0,d=i.length;c<d;++c)l.push($9(this.chart,i[c]));return e.filter&&(l=l.filter((u,h,m)=>e.filter(u,h,m,n))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,n))),Be(l,u=>{const h=jh(e.callbacks,u);r.push(ft(h,"labelColor",this,u)),o.push(ft(h,"labelPointStyle",this,u)),a.push(ft(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(e,i){const n=this.options.setContext(this.getContext()),r=this._active;let o,a=[];if(!r.length)this.opacity!==0&&(o={opacity:0});else{const l=$n[n.position].call(this,r,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const c=this._size=Wh(this,n),d=Object.assign({},l,c),u=Oh(this.chart,n,d),h=$h(n,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,n,r){const o=this.getCaretPosition(e,n,r);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(e,i,n){const{xAlign:r,yAlign:o}=this,{caretSize:a,cornerRadius:l}=n,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=Oi(l),{x:m,y:f}=e,{width:g,height:p}=i;let v,b,y,w,_,k;return o==="center"?(_=f+p/2,r==="left"?(v=m,b=v-a,w=_+a,k=_-a):(v=m+g,b=v+a,w=_-a,k=_+a),y=v):(r==="left"?b=m+Math.max(c,u)+a:r==="right"?b=m+g-Math.max(d,h)-a:b=this.caretX,o==="top"?(w=f,_=w-a,v=b-a,y=b+a):(w=f+p,_=w+a,v=b+a,y=b-a),k=w),{x1:v,x2:b,x3:y,y1:w,y2:_,y3:k}}drawTitle(e,i,n){const r=this.title,o=r.length;let a,l,c;if(o){const d=un(n.rtl,this.x,this.width);for(e.x=or(this,n.titleAlign,n),i.textAlign=d.textAlign(n.titleAlign),i.textBaseline="middle",a=it(n.titleFont),l=n.titleSpacing,i.fillStyle=n.titleColor,i.font=a.string,c=0;c<o;++c)i.fillText(r[c],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===o&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,i,n,r,o){const a=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:d}=o,u=it(o.bodyFont),h=or(this,"left",o),m=r.x(h),f=c<u.lineHeight?(u.lineHeight-c)/2:0,g=i.y+f;if(o.usePointStyle){const p={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},v=r.leftForLtr(m,d)+d/2,b=g+c/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,Za(e,p,v,b),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,Za(e,p,v,b)}else{e.lineWidth=De(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const p=r.leftForLtr(m,d),v=r.leftForLtr(r.xPlus(m,1),d-2),b=Oi(a.borderRadius);Object.values(b).some(y=>y!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,vs(e,{x:p,y:g,w:d,h:c,radius:b}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),vs(e,{x:v,y:g+1,w:d-2,h:c-2,radius:b}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(p,g,d,c),e.strokeRect(p,g,d,c),e.fillStyle=a.backgroundColor,e.fillRect(v,g+1,d-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,i,n){const{body:r}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=n,h=it(n.bodyFont);let m=h.lineHeight,f=0;const g=un(n.rtl,this.x,this.width),p=function(S){i.fillText(S,g.x(e.x+f),e.y+m/2),e.y+=m+o},v=g.textAlign(a);let b,y,w,_,k,N,C;for(i.textAlign=a,i.textBaseline="middle",i.font=h.string,e.x=or(this,v,n),i.fillStyle=n.bodyColor,Be(this.beforeBody,p),f=l&&v!=="right"?a==="center"?d/2+u:d+2+u:0,_=0,N=r.length;_<N;++_){for(b=r[_],y=this.labelTextColors[_],i.fillStyle=y,Be(b.before,p),w=b.lines,l&&w.length&&(this._drawColorBox(i,e,_,g,n),m=Math.max(h.lineHeight,c)),k=0,C=w.length;k<C;++k)p(w[k]),m=h.lineHeight;Be(b.after,p)}f=0,m=h.lineHeight,Be(this.afterBody,p),e.y-=o}drawFooter(e,i,n){const r=this.footer,o=r.length;let a,l;if(o){const c=un(n.rtl,this.x,this.width);for(e.x=or(this,n.footerAlign,n),e.y+=n.footerMarginTop,i.textAlign=c.textAlign(n.footerAlign),i.textBaseline="middle",a=it(n.footerFont),i.fillStyle=n.footerColor,i.font=a.string,l=0;l<o;++l)i.fillText(r[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,i,n,r){const{xAlign:o,yAlign:a}=this,{x:l,y:c}=e,{width:d,height:u}=n,{topLeft:h,topRight:m,bottomLeft:f,bottomRight:g}=Oi(r.cornerRadius);i.fillStyle=r.backgroundColor,i.strokeStyle=r.borderColor,i.lineWidth=r.borderWidth,i.beginPath(),i.moveTo(l+h,c),a==="top"&&this.drawCaret(e,i,n,r),i.lineTo(l+d-m,c),i.quadraticCurveTo(l+d,c,l+d,c+m),a==="center"&&o==="right"&&this.drawCaret(e,i,n,r),i.lineTo(l+d,c+u-g),i.quadraticCurveTo(l+d,c+u,l+d-g,c+u),a==="bottom"&&this.drawCaret(e,i,n,r),i.lineTo(l+f,c+u),i.quadraticCurveTo(l,c+u,l,c+u-f),a==="center"&&o==="left"&&this.drawCaret(e,i,n,r),i.lineTo(l,c+h),i.quadraticCurveTo(l,c,l+h,c),i.closePath(),i.fill(),r.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){const i=this.chart,n=this.$animations,r=n&&n.x,o=n&&n.y;if(r||o){const a=$n[e.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=Wh(this,e),c=Object.assign({},a,this._size),d=Oh(i,e,c),u=$h(e,c,d,i);(r._to!==u.x||o._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const i=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(i);const r={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=ut(i.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(o,e,r,i),Wp(e,i.textDirection),o.y+=a.top,this.drawTitle(o,e,i),this.drawBody(o,e,i),this.drawFooter(o,e,i),Op(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){const n=this._active,r=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),o=!Yr(n,r),a=this._positionChanged(r,i);(o||a)&&(this._active=r,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,n=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,o=this._active||[],a=this._getActiveElements(e,o,i,n),l=this._positionChanged(a,e),c=i||!Yr(a,o)||l;return c&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),c}_getActiveElements(e,i,n,r){const o=this.options;if(e.type==="mouseout")return[];if(!r)return i.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,o.mode,o,n);return o.reverse&&a.reverse(),a}_positionChanged(e,i){const{caretX:n,caretY:r,options:o}=this,a=$n[o.position].call(this,e,i);return a!==!1&&(n!==a.x||r!==a.y)}}ue(il,"positioners",$n);var Z9={id:"tooltip",_element:il,positioners:$n,afterInit(t,e,i){i&&(t.tooltip=new il({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:mg},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},q9=Object.freeze({__proto__:null,Colors:l9,Decimation:h9,Filler:A9,Legend:z9,SubTitle:O9,Title:W9,Tooltip:Z9});const X9=(t,e,i,n)=>(typeof e=="string"?(i=t.push(e)-1,n.unshift({index:i,label:e})):isNaN(e)&&(i=null),i);function J9(t,e,i,n){const r=t.indexOf(e);if(r===-1)return X9(t,e,i,n);const o=t.lastIndexOf(e);return r!==o?i:r}const Q9=(t,e)=>t===null?null:ot(Math.round(t),0,e);function Uh(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class nl extends Zi{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const i=this._addedLabels;if(i.length){const n=this.getLabels();for(const{index:r,label:o}of i)n[r]===o&&n.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(Te(e))return null;const n=this.getLabels();return i=isFinite(i)&&n[i]===e?i:J9(n,e,xe(i,e),this._addedLabels),Q9(i,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),i||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,i=this.max,n=this.options.offset,r=[];let o=this.getLabels();o=e===0&&i===o.length-1?o:o.slice(e,i+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=i;a++)r.push({value:a});return r}getLabelForValue(e){return Uh.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ue(nl,"id","category"),ue(nl,"defaults",{ticks:{callback:Uh}});function e3(t,e){const i=[],{bounds:r,step:o,min:a,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:m}=t,f=o||1,g=u-1,{min:p,max:v}=e,b=!Te(a),y=!Te(l),w=!Te(d),_=(v-p)/(h+1);let k=Wu((v-p)/g/f)*f,N,C,S,x;if(k<1e-14&&!b&&!y)return[{value:p},{value:v}];x=Math.ceil(v/k)-Math.floor(p/k),x>g&&(k=Wu(x*k/g/f)*f),Te(c)||(N=Math.pow(10,c),k=Math.ceil(k*N)/N),r==="ticks"?(C=Math.floor(p/k)*k,S=Math.ceil(v/k)*k):(C=p,S=v),b&&y&&o&&Gk((l-a)/o,k/1e3)?(x=Math.round(Math.min((l-a)/k,u)),k=(l-a)/x,C=a,S=l):w?(C=b?a:C,S=y?l:S,x=d-1,k=(S-C)/x):(x=(S-C)/k,ts(x,Math.round(x),k/1e3)?x=Math.round(x):x=Math.ceil(x));const B=Math.max(Ou(k),Ou(C));N=Math.pow(10,Te(c)?B:c),C=Math.round(C*N)/N,S=Math.round(S*N)/N;let A=0;for(b&&(m&&C!==a?(i.push({value:a}),C<a&&A++,ts(Math.round((C+A*k)*N)/N,a,Gh(a,_,t))&&A++):C<a&&A++);A<x;++A){const P=Math.round((C+A*k)*N)/N;if(y&&P>l)break;i.push({value:P})}return y&&m&&S!==l?i.length&&ts(i[i.length-1].value,l,Gh(l,_,t))?i[i.length-1].value=l:i.push({value:l}):(!y||S===l)&&i.push({value:S}),i}function Gh(t,e,{horizontal:i,minRotation:n}){const r=Tt(n),o=(i?Math.sin(r):Math.cos(r))||.001,a=.75*e*(""+t).length;return Math.min(e/o,a)}class to extends Zi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,i){return Te(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:i,maxDefined:n}=this.getUserBounds();let{min:r,max:o}=this;const a=c=>r=i?r:c,l=c=>o=n?o:c;if(e){const c=Ht(r),d=Ht(o);c<0&&d<0?l(0):c>0&&d>0&&a(0)}if(r===o){let c=o===0?1:Math.abs(o*.05);l(o+c),e||a(r-c)}this.min=r,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:i,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),i=i||11),i&&(r=Math.min(i,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,i=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},o=this._range||this,a=e3(r,o);return e.bounds==="ticks"&&xp(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let i=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-i)/Math.max(e.length-1,1)/2;i-=r,n+=r}this._startValue=i,this._endValue=n,this._valueRange=n-i}getLabelForValue(e){return As(e,this.chart.options.locale,this.options.ticks.format)}}class sl extends to{determineDataLimits(){const{min:e,max:i}=this.getMinMax(!0);this.min=Ze(e)?e:0,this.max=Ze(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),i=e?this.width:this.height,n=Tt(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,o.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ue(sl,"id","linear"),ue(sl,"defaults",{ticks:{callback:mo.formatters.numeric}});const bs=t=>Math.floor(li(t)),Si=(t,e)=>Math.pow(10,bs(t)+e);function Kh(t){return t/Math.pow(10,bs(t))===1}function Yh(t,e,i){const n=Math.pow(10,i),r=Math.floor(t/n);return Math.ceil(e/n)-r}function t3(t,e){const i=e-t;let n=bs(i);for(;Yh(t,e,n)>10;)n++;for(;Yh(t,e,n)<10;)n--;return Math.min(n,bs(t))}function i3(t,{min:e,max:i}){e=yt(t.min,e);const n=[],r=bs(e);let o=t3(e,i),a=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=r>o?Math.pow(10,r):0,d=Math.round((e-c)*a)/a,u=Math.floor((e-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,o)),m=yt(t.min,Math.round((c+u+h*Math.pow(10,o))*a)/a);for(;m<i;)n.push({value:m,major:Kh(m),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,a=o>=0?1:a),m=Math.round((c+u+h*Math.pow(10,o))*a)/a;const f=yt(t.max,m);return n.push({value:f,major:Kh(f),significand:h}),n}class rl extends Zi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,i){const n=to.prototype.parse.apply(this,[e,i]);if(n===0){this._zero=!0;return}return Ze(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:i}=this.getMinMax(!0);this.min=Ze(e)?Math.max(0,e):null,this.max=Ze(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ze(this._userMin)&&(this.min=e===Si(this.min,0)?Si(this.min,-1):Si(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let n=this.min,r=this.max;const o=l=>n=e?n:l,a=l=>r=i?r:l;n===r&&(n<=0?(o(1),a(10)):(o(Si(n,-1)),a(Si(r,1)))),n<=0&&o(Si(r,-1)),r<=0&&a(Si(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,i={min:this._userMin,max:this._userMax},n=i3(i,this);return e.bounds==="ticks"&&xp(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":As(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=li(e),this._valueRange=li(this.max)-li(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(li(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const i=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+i*this._valueRange)}}ue(rl,"id","logarithmic"),ue(rl,"defaults",{ticks:{callback:mo.formatters.logarithmic,major:{enabled:!0}}});function ol(t){const e=t.ticks;if(e.display&&t.display){const i=ut(e.backdropPadding);return xe(e.font&&e.font.size,Ge.font.size)+i.height}return 0}function n3(t,e,i){return i=Ue(i)?i:[i],{w:c_(t,e.string,i),h:i.length*e.lineHeight}}function Zh(t,e,i,n,r){return t===n||t===r?{start:e-i/2,end:e+i/2}:t<n||t>r?{start:e-i,end:e}:{start:e,end:e+i}}function s3(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),n=[],r=[],o=t._pointLabels.length,a=t.options.pointLabels,l=a.centerPointLabels?Ie/o:0;for(let c=0;c<o;c++){const d=a.setContext(t.getPointLabelContext(c));r[c]=d.padding;const u=t.getPointPosition(c,t.drawingArea+r[c],l),h=it(d.font),m=n3(t.ctx,h,t._pointLabels[c]);n[c]=m;const f=ct(t.getIndexAngle(c)+l),g=Math.round(dc(f)),p=Zh(g,u.x,m.w,0,180),v=Zh(g,u.y,m.h,90,270);r3(i,e,f,p,v)}t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=l3(t,n,r)}function r3(t,e,i,n,r){const o=Math.abs(Math.sin(i)),a=Math.abs(Math.cos(i));let l=0,c=0;n.start<e.l?(l=(e.l-n.start)/o,t.l=Math.min(t.l,e.l-l)):n.end>e.r&&(l=(n.end-e.r)/o,t.r=Math.max(t.r,e.r+l)),r.start<e.t?(c=(e.t-r.start)/a,t.t=Math.min(t.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/a,t.b=Math.max(t.b,e.b+c))}function o3(t,e,i){const n=t.drawingArea,{extra:r,additionalAngle:o,padding:a,size:l}=i,c=t.getPointPosition(e,n+r+a,o),d=Math.round(dc(ct(c.angle+Je))),u=u3(c.y,l.h,d),h=c3(d),m=d3(c.x,l.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:m,top:u,right:m+l.w,bottom:u+l.h}}function a3(t,e){if(!e)return!0;const{left:i,top:n,right:r,bottom:o}=t;return!(Jt({x:i,y:n},e)||Jt({x:i,y:o},e)||Jt({x:r,y:n},e)||Jt({x:r,y:o},e))}function l3(t,e,i){const n=[],r=t._pointLabels.length,o=t.options,{centerPointLabels:a,display:l}=o.pointLabels,c={extra:ol(o)/2,additionalAngle:a?Ie/r:0};let d;for(let u=0;u<r;u++){c.padding=i[u],c.size=e[u];const h=o3(t,u,c);n.push(h),l==="auto"&&(h.visible=a3(h,d),h.visible&&(d=h))}return n}function c3(t){return t===0||t===180?"center":t<180?"left":"right"}function d3(t,e,i){return i==="right"?t-=e:i==="center"&&(t-=e/2),t}function u3(t,e,i){return i===90||i===270?t-=e/2:(i>270||i<90)&&(t-=e),t}function h3(t,e,i){const{left:n,top:r,right:o,bottom:a}=i,{backdropColor:l}=e;if(!Te(l)){const c=Oi(e.borderRadius),d=ut(e.backdropPadding);t.fillStyle=l;const u=n-d.left,h=r-d.top,m=o-n+d.width,f=a-r+d.height;Object.values(c).some(g=>g!==0)?(t.beginPath(),vs(t,{x:u,y:h,w:m,h:f,radius:c}),t.fill()):t.fillRect(u,h,m,f)}}function m3(t,e){const{ctx:i,options:{pointLabels:n}}=t;for(let r=e-1;r>=0;r--){const o=t._pointLabelItems[r];if(!o.visible)continue;const a=n.setContext(t.getPointLabelContext(r));h3(i,a,o);const l=it(a.font),{x:c,y:d,textAlign:u}=o;Ki(i,t._pointLabels[r],c,d+l.lineHeight/2,l,{color:a.color,textAlign:u,textBaseline:"middle"})}}function fg(t,e,i,n){const{ctx:r}=t;if(i)r.arc(t.xCenter,t.yCenter,e,0,je);else{let o=t.getPointPosition(0,e);r.moveTo(o.x,o.y);for(let a=1;a<n;a++)o=t.getPointPosition(a,e),r.lineTo(o.x,o.y)}}function f3(t,e,i,n,r){const o=t.ctx,a=e.circular,{color:l,lineWidth:c}=e;!a&&!n||!l||!c||i<0||(o.save(),o.strokeStyle=l,o.lineWidth=c,o.setLineDash(r.dash||[]),o.lineDashOffset=r.dashOffset,o.beginPath(),fg(t,i,a,n),o.closePath(),o.stroke(),o.restore())}function p3(t,e,i){return vi(t,{label:i,index:e,type:"pointLabel"})}class Hn extends to{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=ut(ol(this.options)/2),i=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+i/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(i,n)/2)}determineDataLimits(){const{min:e,max:i}=this.getMinMax(!1);this.min=Ze(e)&&!isNaN(e)?e:0,this.max=Ze(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ol(this.options))}generateTickLabels(e){to.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((i,n)=>{const r=Ve(this.options.pointLabels.callback,[i,n],this);return r||r===0?r:""}).filter((i,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?s3(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,i,n,r){this.xCenter+=Math.floor((e-i)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,i,n,r))}getIndexAngle(e){const i=je/(this._pointLabels.length||1),n=this.options.startAngle||0;return ct(e*i+Tt(n))}getDistanceFromCenterForValue(e){if(Te(e))return NaN;const i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*i:(e-this.min)*i}getValueForDistanceFromCenter(e){if(Te(e))return NaN;const i=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(e){const i=this._pointLabels||[];if(e>=0&&e<i.length){const n=i[e];return p3(this.getContext(),e,n)}}getPointPosition(e,i,n=0){const r=this.getIndexAngle(e)-Je+n;return{x:Math.cos(r)*i+this.xCenter,y:Math.sin(r)*i+this.yCenter,angle:r}}getPointPositionForValue(e,i){return this.getPointPosition(e,this.getDistanceFromCenterForValue(i))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:i,top:n,right:r,bottom:o}=this._pointLabelItems[e];return{left:i,top:n,right:r,bottom:o}}drawBackground(){const{backgroundColor:e,grid:{circular:i}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),fg(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,i=this.options,{angleLines:n,grid:r,border:o}=i,a=this._pointLabels.length;let l,c,d;if(i.pointLabels.display&&m3(this,a),r.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const m=this.getContext(h),f=r.setContext(m),g=o.setContext(m);f3(this,f,c,a,g)}}),n.display){for(e.save(),l=a-1;l>=0;l--){const u=n.setContext(this.getPointLabelContext(l)),{color:h,lineWidth:m}=u;!m||!h||(e.lineWidth=m,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(i.reverse?this.min:this.max),d=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,i=this.options,n=i.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let o,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!i.reverse)return;const d=n.setContext(this.getContext(c)),u=it(d.font);if(o=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,a=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const h=ut(d.backdropPadding);e.fillRect(-a/2-h.left,-o-u.size/2-h.top,a+h.width,u.size+h.height)}Ki(e,l.label,0,-o,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}ue(Hn,"id","radialLinear"),ue(Hn,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:mo.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ue(Hn,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ue(Hn,"descriptors",{angleLines:{_fallback:"grid"}});const yo={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},gt=Object.keys(yo);function qh(t,e){return t-e}function Xh(t,e){if(Te(e))return null;const i=t._adapter,{parser:n,round:r,isoWeekday:o}=t._parseOpts;let a=e;return typeof n=="function"&&(a=n(a)),Ze(a)||(a=typeof n=="string"?i.parse(a,n):i.parse(a)),a===null?null:(r&&(a=r==="week"&&(fn(o)||o===!0)?i.startOf(a,"isoWeek",o):i.startOf(a,r)),+a)}function Jh(t,e,i,n){const r=gt.length;for(let o=gt.indexOf(t);o<r-1;++o){const a=yo[gt[o]],l=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((i-e)/(l*a.size))<=n)return gt[o]}return gt[r-1]}function g3(t,e,i,n,r){for(let o=gt.length-1;o>=gt.indexOf(i);o--){const a=gt[o];if(yo[a].common&&t._adapter.diff(r,n,a)>=e-1)return a}return gt[i?gt.indexOf(i):0]}function v3(t){for(let e=gt.indexOf(t)+1,i=gt.length;e<i;++e)if(yo[gt[e]].common)return gt[e]}function Qh(t,e,i){if(!i)t[e]=!0;else if(i.length){const{lo:n,hi:r}=uc(i,e),o=i[n]>=e?i[n]:i[r];t[o]=!0}}function y3(t,e,i,n){const r=t._adapter,o=+r.startOf(e[0].value,n),a=e[e.length-1].value;let l,c;for(l=o;l<=a;l=+r.add(l,1,n))c=i[l],c>=0&&(e[c].major=!0);return e}function e0(t,e,i){const n=[],r={},o=e.length;let a,l;for(a=0;a<o;++a)l=e[a],r[l]=a,n.push({value:l,major:!1});return o===0||!i?n:y3(t,n,r,i)}class ws extends Zi{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){const n=e.time||(e.time={}),r=this._adapter=new Nx._date(e.adapters.date);r.init(i),es(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return e===void 0?null:Xh(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,i=this._adapter,n=e.time.unit||"day";let{min:r,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(d){!a&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Ze(r)&&!isNaN(r)?r:+i.startOf(Date.now(),n),o=Ze(o)&&!isNaN(o)?o:+i.endOf(Date.now(),n)+1,this.min=Math.min(r,o-1),this.max=Math.max(r+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],n=e[e.length-1]),{min:i,max:n}}buildTicks(){const e=this.options,i=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const o=this.min,a=this.max,l=qk(r,o,a);return this._unit=i.unit||(n.autoSkip?Jh(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):g3(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:v3(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),e0(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i=0,n=0,r,o;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?i=1-r:i=(this.getDecimalForValue(e[1])-r)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?n=o:n=(o-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;i=ot(i,0,a),n=ot(n,0,a),this._offsets={start:i,end:n,factor:1/(i+1+n)}}_generate(){const e=this._adapter,i=this.min,n=this.max,r=this.options,o=r.time,a=o.unit||Jh(o.minUnit,i,n,this._getLabelCapacity(i)),l=xe(r.ticks.stepSize,1),c=a==="week"?o.isoWeekday:!1,d=fn(c)||c===!0,u={};let h=i,m,f;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":a),e.diff(n,i,a)>1e5*l)throw new Error(i+" and "+n+" are too far apart with stepSize of "+l+" "+a);const g=r.ticks.source==="data"&&this.getDataTimestamps();for(m=h,f=0;m<n;m=+e.add(m,l,a),f++)Qh(u,m,g);return(m===n||r.bounds==="ticks"||f===1)&&Qh(u,m,g),Object.keys(u).sort(qh).map(p=>+p)}getLabelForValue(e){const i=this._adapter,n=this.options.time;return n.tooltipFormat?i.format(e,n.tooltipFormat):i.format(e,n.displayFormats.datetime)}format(e,i){const r=this.options.time.displayFormats,o=this._unit,a=i||r[o];return this._adapter.format(e,a)}_tickFormatFunction(e,i,n,r){const o=this.options,a=o.ticks.callback;if(a)return Ve(a,[e,i,n],this);const l=o.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],m=n[i],f=d&&h&&m&&m.major;return this._adapter.format(e,r||(f?h:u))}generateTickLabels(e){let i,n,r;for(i=0,n=e.length;i<n;++i)r=e[i],r.label=this._tickFormatFunction(r.value,i,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const i=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(e){const i=this._offsets,n=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const i=this.options.ticks,n=this.ctx.measureText(e).width,r=Tt(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(r),a=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*o+l*a,h:n*a+l*o}}_getLabelCapacity(e){const i=this.options.time,n=i.displayFormats,r=n[i.unit]||n.millisecond,o=this._tickFormatFunction(e,0,e0(this,[e],this._majorUnit),r),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],i,n;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(i=0,n=r.length;i<n;++i)e=e.concat(r[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let i,n;if(e.length)return e;const r=this.getLabels();for(i=0,n=r.length;i<n;++i)e.push(Xh(this,r[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Np(e.sort(qh))}}ue(ws,"id","time"),ue(ws,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ar(t,e,i){let n=0,r=t.length-1,o,a,l,c;i?(e>=t[n].pos&&e<=t[r].pos&&({lo:n,hi:r}=Xt(t,"pos",e)),{pos:o,time:l}=t[n],{pos:a,time:c}=t[r]):(e>=t[n].time&&e<=t[r].time&&({lo:n,hi:r}=Xt(t,"time",e)),{time:o,pos:l}=t[n],{time:a,pos:c}=t[r]);const d=a-o;return d?l+(c-l)*(e-o)/d:l}class al extends ws{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(e);this._minPos=ar(i,this.min),this._tableRange=ar(i,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:i,max:n}=this,r=[],o=[];let a,l,c,d,u;for(a=0,l=e.length;a<l;++a)d=e[a],d>=i&&d<=n&&r.push(d);if(r.length<2)return[{time:i,pos:0},{time:n,pos:1}];for(a=0,l=r.length;a<l;++a)u=r[a+1],c=r[a-1],d=r[a],Math.round((u+c)/2)!==d&&o.push({time:d,pos:a/(l-1)});return o}_generate(){const e=this.min,i=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(i)||n.length===1)&&n.push(i),n.sort((r,o)=>r-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const i=this.getDataTimestamps(),n=this.getLabelTimestamps();return i.length&&n.length?e=this.normalize(i.concat(n)):e=i.length?i:n,e=this._cache.all=e,e}getDecimalForValue(e){return(ar(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const i=this._offsets,n=this.getDecimalForPixel(e)/i.factor-i.end;return ar(this._table,n*this._tableRange+this._minPos,!0)}}ue(al,"id","timeseries"),ue(al,"defaults",ws.defaults);var b3=Object.freeze({__proto__:null,CategoryScale:nl,LinearScale:sl,LogarithmicScale:rl,RadialLinearScale:Hn,TimeScale:ws,TimeSeriesScale:al});const w3=[Sx,t9,q9,b3];Mt.register(...w3);const ks={HOUR_24:{key:"24h",label:"24 Stunden",hours:24,labelEn:"24 Hours",labelDe:"24 Stunden"},DAYS_7:{key:"7d",label:"7 Tage",hours:168,labelEn:"7 Days",labelDe:"7 Tage"},DAYS_30:{key:"30d",label:"30 Tage",hours:720,labelEn:"30 Days",labelDe:"30 Tage"}},k3=ks.DAYS_7.key,pg={HOUR_IN_MS:36e5},_3={DEFAULT_DATA_POINTS:50},_c=t=>{const e=Object.values(ks).find(i=>i.key===t);return e?e.hours:ks.DAYS_7.hours},x3=async(t,e,i="7d")=>{if(!t||!e)return console.warn("fetchEntityHistory: hass oder entityId fehlt"),[];try{const n=_c(i),r=new Date,a=new Date(r.getTime()-n*pg.HOUR_IN_MS).toISOString(),l=r.toISOString();console.log(` Lade History fr ${e} (${i}):`,{startTime:a,endTime:l,hours:n});let c=[];try{if(t.callWS&&typeof t.callWS=="function"){console.log(" Verwende WebSocket API");const d=await t.callWS({type:"history/history_during_period",start_time:a,end_time:l,entity_ids:[e],minimal_response:!1,no_attributes:!1});c=d&&d[0]?d[0]:[],console.log(` WebSocket: ${c.length} Events empfangen`)}}catch(d){console.warn(" WebSocket API fehlgeschlagen:",d.message)}if(c.length===0&&t.callApi){console.log(" Fallback auf REST API");try{const d=`history/period/${a}?filter_entity_id=${e}&end_time=${l}`,u=await t.callApi("GET",d);c=u&&u[0]?u[0]:[],console.log(` REST API: ${c.length} Events empfangen`)}catch(d){console.warn(" REST API fehlgeschlagen:",d.message)}}return c.length===0&&console.warn(` Keine History-Daten fr ${e} gefunden`),c}catch(n){return console.error(" Fehler beim Laden der History:",n),[]}},C3=(t,e="7d")=>{if(!t||!t.entity_id)return console.warn("generateMockHistory: item oder entity_id fehlt"),[];const i=_c(e),n=new Date,r=Math.min(i,_3.DEFAULT_DATA_POINTS),o=i*pg.HOUR_IN_MS/r,a=[];for(let l=0;l<r;l++){const c=new Date(n.getTime()-(r-l)*o),d=c.getHours();let u="off",h={friendly_name:t.name||t.entity_id};switch(t.domain){case"light":case"switch":u=(d>=18||d<=7)&&Math.random()>.3?"on":"off",u==="on"&&t.domain==="light"&&(h.brightness=Math.floor(Math.random()*255));break;case"climate":const m=20+Math.sin(d/24*Math.PI*2)*3;u=Math.random()>.5?"heating":"idle",h.current_temperature=Math.round(m*10)/10,h.temperature=21;break;case"sensor":u=String(Math.round(Math.random()*100)),h.unit_of_measurement="%";break;case"binary_sensor":u=Math.random()>.7?"on":"off";break;case"cover":const f=Math.random();u=f>.7?"open":f>.3?"closed":"opening",(u==="open"||u==="closed")&&(h.current_position=u==="open"?100:0);break;default:u=Math.random()>.5?"on":"off"}a.push({entity_id:t.entity_id,state:u,attributes:h,last_changed:c.toISOString(),last_updated:c.toISOString()})}return console.log(` Mock-History generiert fr ${t.entity_id}: ${a.length} Events`),a},S3=(t,e,i,n)=>{if(!t||t.length===0)return console.warn("transformToHistoryObject: Keine Events vorhanden"),null;console.log(` Transformiere ${t.length} Events fr ${e}`);const r=M3(t,i),o=T3(t),a=N3(t,i),l=[];return console.log(" Transformation abgeschlossen:",{chartPoints:r.length,events:a.length,stats:o}),{chartData:r,stats:o,events:a,patterns:l}},N3=(t,e)=>{const i=[],n=t.slice(-50).reverse();for(let r=0;r<n.length;r++){const o=n[r],a=r<n.length-1?n[r+1]:null;let l=null;if(a){const d=new Date(a.last_changed)-new Date(o.last_changed);l=Math.abs(Math.round(d/6e4))}const c=L3(o,e);i.push({timestamp:o.last_changed,newState:o.state,oldState:a?a.state:null,description:c,duration:l,attributes:o.attributes})}return i},L3=(t,e)=>{switch(e){case"light":return t.state==="on"?t.attributes?.brightness?`Licht eingeschaltet (${Math.round(t.attributes.brightness/255*100)}%)`:"Licht eingeschaltet":"Licht ausgeschaltet";case"switch":return t.state==="on"?"Schalter aktiviert":"Schalter deaktiviert";case"climate":return t.attributes?.current_temperature?`${t.state} (${t.attributes.current_temperature}C)`:t.state==="heating"?"Heizung aktiv":"Heizung inaktiv";case"binary_sensor":return t.state==="on"?"Sensor ausgelst":"Sensor zurckgesetzt";case"cover":return t.state==="open"?"Geffnet":t.state==="closed"?"Geschlossen":t.state==="opening"?"Wird geffnet":t.state==="closing"?"Wird geschlossen":t.state;case"sensor":const i=t.attributes?.unit_of_measurement||"";return`Wert: ${t.state}${i}`;default:return t.state==="on"?"Eingeschaltet":"Ausgeschaltet"}},M3=(t,e)=>{const i=[],n=t.length>100?Math.floor(t.length/100):1;for(let r=0;r<t.length;r+=n){const o=t[r],a=new Date(o.last_changed),l=E3(o,e);i.push({time:a.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}),usage:Math.round(l),timestamp:o.last_changed})}return i},T3=(t,e,i)=>{if(t.length===0)return{totalChanges:0,avgDuration:0,onPercentage:0,offPercentage:0};let n=0,r=0,o=0;for(let d=1;d<t.length;d++){const u=t[d-1],h=t[d];u.state!==h.state&&n++;const m=new Date(h.last_changed)-new Date(u.last_changed);o+=m,(u.state==="on"||u.state==="heating"||u.state==="open")&&(r+=m)}const a=n>0?Math.round(o/n/6e4):0,l=o>0?Math.round(r/o*100):0,c=100-l;return{totalChanges:n,avgDuration:a,onPercentage:l,offPercentage:c}},E3=(t,e)=>{switch(e){case"light":case"switch":return t.state==="on"?t.attributes?.brightness?t.attributes.brightness/255*100:100:0;case"sensor":const i=parseFloat(t.state);return isNaN(i)?0:Math.min(100,Math.abs(i));case"climate":return t.state==="heating"?75:t.state==="cooling"?50:0;case"binary_sensor":return t.state==="on"?100:0;case"cover":return t.attributes&&typeof t.attributes.current_position=="number"?t.attributes.current_position:t.state==="open"?100:0;default:return t.state==="on"?100:0}},t0={DAY:{key:"day",label:"D",labelDe:"T",hours:24},WEEK:{key:"week",label:"W",labelDe:"W",hours:168},MONTH:{key:"month",label:"M",labelDe:"M",hours:720},YEAR:{key:"year",label:"Y",labelDe:"J",hours:8760}},Br=({item:t,hass:e,lang:i="de",viewType:n="consumption"})=>{const[r,o]=M(t0.DAY.key),[a,l]=M(!1),[c,d]=M(null),[u,h]=M(null),[m,f]=M(null),g=n==="solar",p=n==="netusage",v=te(null),b=te(null),y=Gr(0,{stiffness:100,damping:30,restDelta:.01}),w=Wi(y,S=>S.toFixed(2)),_=(S,x)=>!S||!x?{value:"0.00",unit:x||""}:x==="Wh"?{value:(S/1e3).toFixed(2),unit:"kWh"}:x==="kWh"&&S>1e3?{value:(S/1e3).toFixed(2),unit:"kWh"}:x==="W"&&S>=1e3?{value:(S/1e3).toFixed(2),unit:"kW"}:{value:S.toFixed(2),unit:x},k=te(e);U(()=>{k.current=e},[e]);const N=Me(()=>{const S=new Date;if(u?.periodLabel&&r!=="day"){if(r==="week"&&u.periodLabel.includes("KW")){const x=S.getFullYear();return`${u.periodLabel} ${x}`}return r==="month"?`${u.periodLabel} ${S.getFullYear()}`:u.periodLabel}return i==="de"?S.toLocaleDateString("de-DE",{day:"numeric",month:"long",year:"numeric"}):S.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})},[i,r,u?.periodLabel]),C=Me(()=>({consumption:t?.attributes?.consumption_sensor,gridImport:t?.attributes?.grid_import_sensor,gridExport:t?.attributes?.grid_export_total_sensor,solar:t?.attributes?.solar_sensor,pvTotal:t?.attributes?.pv_total_sensor,batteryDischarged:t?.attributes?.battery_discharged_sensor,batteryCharged:t?.attributes?.battery_charged_sensor,kwh:t?.attributes?.kwh_sensor}),[t?.attributes?.consumption_sensor,t?.attributes?.grid_import_sensor,t?.attributes?.grid_export_total_sensor,t?.attributes?.solar_sensor,t?.attributes?.pv_total_sensor,t?.attributes?.battery_discharged_sensor,t?.attributes?.battery_charged_sensor,t?.attributes?.kwh_sensor]);return U(()=>{if(!t||!r||!t.actions)return;(async()=>{const x=k.current;if(x)try{const B=await t.actions.getCurrentPeriodConsumption({hass:x,periodType:r}),A=async(O,H=!1)=>{if(!O)return{value:0,unit:"kWh"};try{const X=new Date;let me=new Date;switch(r){case"day":me.setHours(0,0,0,0);break;case"week":const ce=me.getDay(),ie=me.getDate()-ce+(ce===0?-6:1);me=new Date(me.setDate(ie)),me.setHours(0,0,0,0);break;case"month":me=new Date(me.getFullYear(),me.getMonth(),1),me.setHours(0,0,0,0);break;case"year":me=new Date(me.getFullYear(),0,1),me.setHours(0,0,0,0);break}const q=await x.callWS({type:"recorder/statistics_during_period",start_time:me.toISOString(),end_time:X.toISOString(),statistic_ids:[O],period:"hour"});if(q?.[O]?.length>0){const ce=q[O],ie=ce[0],J=ce[ce.length-1],oe=(await x.callWS({type:"recorder/get_statistics_metadata",statistic_ids:[O]}))?.[O]?.unit_of_measurement||"kWh";if(J.state!==void 0&&ie.state!==void 0){const ae=J.state-ie.state;return{value:Math.max(0,ae),unit:oe}}}return{value:0,unit:"kWh"}}catch(X){return console.error(`Failed to get period energy for ${O}:`,X),{value:0,unit:"kWh"}}},[P,I,z,D,L]=await Promise.all([A(C.kwh),A(C.pvTotal),A(C.gridExport),A(C.batteryDischarged),A(C.batteryCharged)]),E=(O,H)=>H==="Wh"||H==="kWh"&&O>1e3?O/1e3:O,W=(O,H)=>H==="Wh"||H==="kWh"&&O>1e3||H==="kWh"&&O>=10?O/1e3:O,F=E(B.consumption||0,B.unit||"kWh"),K=W(I.value,I.unit),G=W(z.value,z.unit),$=W(D.value,D.unit),Q=W(L.value,L.unit),re=Math.max(0,K-G),he=Math.max(0,$-Q);if(p){const O=t?.attributes?.feed_in_tariff_sensor,H=t?.attributes?.purchase_tariff_sensor;let X=.08,me=.3;if(O&&e?.states?.[O]){const se=parseFloat(e.states[O].state);isNaN(se)||(X=se)}if(H&&e?.states?.[H]){const se=parseFloat(e.states[H].state);isNaN(se)||(me=se)}const q=G*X,ce=F*me,ie=K,J=re,Y=Q,oe=G,ae=F+re+he;f({grid:{value:G,percentage:0,unit:"kWh"},solar:{value:q,percentage:0,unit:""},battery:{value:ce,percentage:0,unit:""},totalToday:{value:F,unit:"kWh"},totalProduction:ie,productionToHouse:J,productionToBattery:Y,productionToGrid:oe,totalConsumption:ae,consumptionFromSolar:re,consumptionFromBattery:he,consumptionFromGrid:F})}else if(g){const O=K,H=O>0?G/O*100:0,X=O>0?re/O*100:0,me=O>0?Q/O*100:0;f({grid:{value:G,percentage:Math.round(H),unit:"kWh"},solar:{value:re,percentage:Math.round(X),unit:"kWh"},battery:{value:Q,percentage:Math.round(me),unit:"kWh"},totalToday:{value:O,unit:"kWh"}})}else{const O=F+re+he,H=O>0?F/O*100:0,X=O>0?re/O*100:0,me=O>0?he/O*100:0;f({grid:{value:F,percentage:Math.round(H),unit:"kWh"},solar:{value:re,percentage:Math.round(X),unit:"kWh"},battery:{value:he,percentage:Math.round(me),unit:"kWh"},totalToday:{value:O,unit:"kWh"}})}}catch(B){console.error("Failed to fetch period consumption:",B),f({totalToday:{value:0,unit:"kWh"}})}})()},[r,g,p]),U(()=>{m?.totalToday?.value!==void 0&&y.set(m.totalToday.value)},[m?.totalToday?.value]),U(()=>{if(!t||!r||!t.actions)return;(async()=>{const x=k.current;if(!x){l(!1),d(null),h(null);return}l(!0);try{const B=g?t.attributes?.pv_total_sensor:t.attributes?.kwh_sensor,A=await t.actions.getChartData({hass:x,periodType:r,sensorId:B});if(!A||!A.dataPoints||A.dataPoints.length===0){d(null),h(null),l(!1);return}d(A.dataPoints),h({periodType:A.periodType,periodLabel:A.periodLabel,chartType:A.chartType,unit:A.unit})}catch(B){console.error(" Failed to load chart data:",B),d(null),h(null)}finally{l(!1)}})()},[r,g,t?.attributes?.pv_total_sensor,t?.attributes?.kwh_sensor]),U(()=>{if(b.current&&!(!p&&(!c||c.length===0))){v.current&&v.current.destroy();try{const S=b.current.getContext("2d"),x=u?.unit||"kWh";if(p){if(!m)return;const I=m?.totalProduction||0,z=m?.productionToHouse||0,D=m?.productionToBattery||0,L=m?.productionToGrid||0,E=m?.totalConsumption||0,W=m?.consumptionFromSolar||0,F=m?.consumptionFromBattery||0,K=m?.consumptionFromGrid||0;console.log(" Creating Production/Consumption Chart:",{production:{totalProduction:I,productionToHouse:z,productionToBattery:D,productionToGrid:L},consumption:{totalConsumption:E,consumptionFromSolar:W,consumptionFromBattery:F,consumptionFromGrid:K}}),v.current=new Mt(S,{type:"doughnut",data:{datasets:[{label:i==="de"?"Erzeugung":"Production",data:[z,D,L],backgroundColor:["rgba(48, 209, 88, 0.8)","rgba(255, 159, 10, 0.8)","rgba(255, 204, 0, 0.8)"],borderColor:["rgb(48, 209, 88)","rgb(255, 159, 10)","rgb(255, 204, 0)"],borderWidth:2,weight:1},{label:i==="de"?"Verbrauch":"Consumption",data:[W,F,K],backgroundColor:["rgba(64, 200, 224, 0.8)","rgba(255, 55, 95, 0.8)","rgba(175, 82, 222, 0.8)"],borderColor:["rgb(64, 200, 224)","rgb(255, 55, 95)","rgb(175, 82, 222)"],borderWidth:2,weight:1}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{delay:200,duration:400,easing:"easeInOutQuart"},plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"rgba(255, 255, 255, 0.9)",bodyColor:"rgba(255, 255, 255, 0.9)",borderColor:"rgba(255, 255, 255, 0.2)",borderWidth:1,padding:12,cornerRadius:8,callbacks:{label:function(G){const $=G.datasetIndex,Q=G.parsed||0,re=G.dataset.data.reduce((X,me)=>X+me,0),he=re>0?(Q/re*100).toFixed(1):0;let O="",H="";return $===0?(O=i==="de"?"Erzeugung":"Production",H=(i==="de"?["Hausnetz","Batterie (Laden)","Netz (Einspeisung)"]:["House","Battery (Charge)","Grid (Export)"])[G.dataIndex]):(O=i==="de"?"Verbrauch":"Consumption",H=(i==="de"?["Solar","Batterie (Entladen)","Netz (Bezug)"]:["Solar","Battery (Discharge)","Grid (Import)"])[G.dataIndex]),`${O} - ${H}: ${Q.toFixed(2)} kWh (${he}%)`}}}},cutout:"50%"}});return}const B={id:"verticalLineOnHover",afterDraw:I=>{if(I.tooltip?._active?.length){const z=I.tooltip._active[0],D=I.ctx,L=z.element.x,E=I.scales.y.top,W=I.scales.y.bottom;D.save(),D.beginPath(),D.moveTo(L,E),D.lineTo(L,W),D.lineWidth=1,D.strokeStyle="rgba(255, 255, 255, 0.3)",D.stroke(),D.restore()}}},A=u?.chartType||(r==="day"?"line":"bar"),P=()=>{if(r!=="week")return r==="day"?"rgba(0, 145, 255, 0.15)":"rgba(0, 145, 255, 0.7)";const I=new Date,z=I.getDay(),D=z===0?-6:1-z,L=new Date(I);return L.setDate(I.getDate()+D),L.setHours(0,0,0,0),c.map(E=>{const W=new Date(E.timestamp);return W.setHours(0,0,0,0),W>=L?"rgba(0, 145, 255, 0.7)":"rgba(0, 145, 255, 0.35)"})};v.current=new Mt(S,{type:A,data:{labels:c.map(I=>I.time),datasets:[{label:"Consumption",data:c.map(I=>I.value),borderColor:"rgb(0, 145, 255)",backgroundColor:P(),borderWidth:r==="day"?2:1,fill:r==="day",tension:.4,pointRadius:r==="day"?0:void 0,pointHoverRadius:r==="day"?6:void 0,pointHoverBackgroundColor:"rgb(0, 145, 255)",barPercentage:.7,categoryPercentage:.8}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{delay:200,duration:400,easing:"easeInOutQuart"},interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!1},tooltip:{enabled:!0,mode:"index",intersect:!1,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",padding:12,displayColors:!1,callbacks:{title:function(I){const z=I[0].label;if(r==="day"){const D=z.split(":")[0],L=(parseInt(D)+1).toString().padStart(2,"0");return`${D}:00-${L}:00`}if(r==="month"){const D=parseInt(z),L=N.split(" "),E=L[0],W=L[1],K={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"}[E]||"01";return`${D.toString().padStart(2,"0")}.${K}.${W}`}return z},label:function(I){return`${I.parsed.y.toFixed(2)} ${x}`}}}},scales:{x:{display:!0,grid:{display:!1,drawBorder:!1},ticks:{color:"rgba(255, 255, 255, 0.5)",maxRotation:0,autoSkipPadding:20,font:{size:11}}},y:{display:!0,grid:{color:"rgba(255, 255, 255, 0.05)",borderDash:[3,3],drawBorder:!1},ticks:{color:"rgba(255, 255, 255, 0.5)",font:{size:11},callback:function(I){return I.toFixed(2)+" "+x}}}}},plugins:[B]})}catch(S){console.error(" Chart.js creation error:",S)}return()=>{v.current&&v.current.destroy()}}},[c,r,p,m]),s("div",{className:"energy-charts-view",children:[s("div",{className:"energy-header",children:[s("div",{className:"energy-date-container",children:[s(Ce,{mode:"wait",children:s(T.div,{className:"energy-date",initial:{opacity:0,filter:"blur(8px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(8px)"},transition:{duration:.3,ease:"easeInOut"},children:N},N)}),s("div",{className:"energy-total-value",children:[s(T.span,{style:{display:"inline-block"},children:w}),s("sup",{children:m?.totalToday?.unit||"kWh"})]})]}),s("div",{className:"energy-time-tabs",children:Object.values(t0).map(S=>s("button",{className:`time-tab ${r===S.key?"active":""}`,onClick:()=>o(S.key),children:i==="de"?S.labelDe:S.label},S.key))})]}),s("div",{className:"energy-summary",children:s("div",{className:"energy-stats-inline",children:[s("div",{className:"energy-stat-item","data-source":"grid",children:[s("div",{className:"stat-value",children:(()=>{const S=_(m?.grid?.value,m?.grid?.unit);return s(ve,{children:[S.value,s("sup",{children:S.unit})]})})()}),s("div",{className:"stat-label",children:[s("svg",{width:"14px",height:"14px",viewBox:"0 0 463 463",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"4px"},title:i==="de"?"Netz":"Grid",children:s("path",{d:"M367.5,159c4.142,0,7.5-3.357,7.5-7.5v-32c0-0.278-0.018-0.552-0.047-0.822c-0.004-0.037-0.012-0.074-0.017-0.111 c-0.039-0.313-0.1-0.619-0.176-0.919c-0.015-0.061-0.03-0.121-0.046-0.181c-0.093-0.332-0.206-0.656-0.342-0.967 c-0.013-0.03-0.029-0.058-0.042-0.087c-0.132-0.291-0.282-0.57-0.448-0.839c-0.031-0.051-0.06-0.103-0.093-0.153 c-0.183-0.281-0.384-0.549-0.602-0.802c-0.044-0.052-0.092-0.101-0.138-0.152c-0.225-0.248-0.462-0.483-0.718-0.699 c-0.011-0.009-0.019-0.02-0.03-0.029l-0.026-0.022c-0.003-0.002-0.006-0.005-0.008-0.007l-95.292-79.41L253.5,3 c-1.417-1.889-3.639-3-6-3h-32c-2.361,0-4.583,1.111-6,3l-23.474,31.299l-95.292,79.41c-0.003,0.002-0.006,0.005-0.008,0.007 l-0.026,0.022c-0.011,0.009-0.019,0.02-0.03,0.029c-0.256,0.216-0.493,0.452-0.718,0.699c-0.046,0.051-0.093,0.1-0.138,0.152 c-0.218,0.253-0.419,0.521-0.602,0.802c-0.033,0.05-0.062,0.102-0.093,0.153c-0.166,0.269-0.317,0.548-0.448,0.839 c-0.013,0.029-0.029,0.057-0.042,0.087c-0.136,0.312-0.248,0.635-0.342,0.967c-0.017,0.06-0.031,0.12-0.046,0.181 c-0.076,0.3-0.137,0.606-0.176,0.919c-0.005,0.037-0.013,0.074-0.017,0.111C88.018,118.948,88,119.222,88,119.5v32 c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5V127h81v68.987l-93.267,77.722c-0.003,0.002-0.006,0.005-0.008,0.007l-0.026,0.022 c-0.011,0.009-0.019,0.02-0.03,0.029c-0.256,0.216-0.493,0.452-0.718,0.699c-0.046,0.051-0.093,0.1-0.138,0.152 c-0.218,0.253-0.419,0.521-0.602,0.802c-0.033,0.05-0.062,0.102-0.093,0.153c-0.166,0.269-0.317,0.548-0.448,0.839 c-0.013,0.029-0.029,0.057-0.042,0.087c-0.136,0.312-0.248,0.635-0.342,0.967c-0.017,0.06-0.031,0.12-0.046,0.181 c-0.076,0.3-0.137,0.606-0.176,0.919c-0.005,0.037-0.013,0.074-0.017,0.111C88.018,278.948,88,279.222,88,279.5v32 c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5V287h77.792l-58.545,161H111.5c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5h40 c4.142,0,7.5-3.357,7.5-7.5s-3.358-7.5-7.5-7.5h-8.173L231.5,340.233L319.673,448H319.5c-4.142,0-7.5,3.357-7.5,7.5 s3.358,7.5,7.5,7.5h40c4.142,0,7.5-3.357,7.5-7.5s-3.358-7.5-7.5-7.5h-18.747l-58.545-161H360v24.5c0,4.143,3.358,7.5,7.5,7.5 s7.5-3.357,7.5-7.5v-32c0-0.278-0.018-0.552-0.047-0.822c-0.004-0.037-0.012-0.074-0.017-0.111c-0.039-0.313-0.1-0.619-0.176-0.919 c-0.015-0.061-0.03-0.121-0.046-0.181c-0.093-0.332-0.206-0.656-0.342-0.967c-0.013-0.03-0.029-0.058-0.042-0.087 c-0.132-0.291-0.282-0.57-0.448-0.839c-0.031-0.051-0.06-0.103-0.093-0.153c-0.183-0.281-0.384-0.549-0.602-0.802 c-0.044-0.052-0.092-0.101-0.138-0.152c-0.225-0.248-0.462-0.483-0.718-0.699c-0.011-0.009-0.019-0.02-0.03-0.029l-0.026-0.022 c-0.003-0.002-0.006-0.005-0.008-0.007L279,195.987V127h81v24.5C360,155.643,363.358,159,367.5,159z M220.893,79.5L199,101.393 V57.607L220.893,79.5z M209.607,47h43.786L231.5,68.893L209.607,47z M209.607,112L231.5,90.107L253.393,112H209.607z M253.393,127 L231.5,148.893L209.607,127H253.393z M220.893,159.5L199,181.393v-43.786L220.893,159.5z M209.607,192l21.893-21.893L253.393,192 H209.607z M253.393,207L231.5,228.893L209.607,207H253.393z M220.893,239.5L199,261.393v-43.786L220.893,239.5z M231.5,250.107 L253.393,272h-43.786L231.5,250.107z M255.673,287L231.5,316.545L207.327,287H255.673z M242.107,239.5L264,217.607v43.786 L242.107,239.5z M242.107,159.5L264,137.607v43.786L242.107,159.5z M242.107,79.5L264,57.607v43.786L242.107,79.5z M219.25,15h24.5 l12.75,17h-50L219.25,15z M184,55.513V112h-67.785L184,55.513z M184,215.513V272h-67.785L184,215.513z M149.617,416.624 l44.426-122.172l27.766,33.937L149.617,416.624z M241.19,328.389l27.766-33.937l44.426,122.172L241.19,328.389z M279,272v-56.487 L346.785,272H279z M279,112V55.513L346.785,112H279z"})}),s("span",{children:i==="de"?"Netz":"Grid"}),s("span",{className:"stat-percent",children:[" ",m?.grid?.percentage||0,"%"]})]})]}),s("div",{className:"stat-divider"}),s("div",{className:"energy-stat-item","data-source":"solar",children:[s("div",{className:"stat-value",children:(()=>{const S=_(m?.solar?.value,m?.solar?.unit);return s(ve,{children:[S.value,s("sup",{children:S.unit})]})})()}),s("div",{className:"stat-label",children:[p?s("svg",{width:"14px",height:"14px","stroke-width":"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"currentColor",style:{marginRight:"4px"},title:i==="de"?"Ertrag":"Revenue",children:[s("path",{d:"M16.5 21H18.6688C19.8945 21 20.8319 19.9074 20.6455 18.6959L19.2609 9.69589C19.1108 8.72022 18.2713 8 17.2842 8H6.71584C5.7287 8 4.8892 8.72022 4.73909 9.69589L3.35448 18.6959C3.16809 19.9074 4.10545 21 5.33122 21H7.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M12 12V19M12 19L15 16M12 19L9 16",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M14 5C14 3.89543 13.1046 3 12 3C10.8954 3 10 3.89543 10 5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]}):g?s("svg",{width:"14px",height:"14px",viewBox:"0 0 24 24","stroke-width":"1.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"currentColor",style:{marginRight:"4px"},title:i==="de"?"Haus":"Home",children:[s("path",{d:"M2 8L11.7317 3.13416C11.9006 3.04971 12.0994 3.0497 12.2683 3.13416L22 8",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M20 11V19C20 20.1046 19.1046 21 18 21H6C4.89543 21 4 20.1046 4 19V11",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]}):s("svg",{width:"14px",height:"14px",viewBox:"0 0 512 512",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"4px"},title:"Solar",children:s("path",{d:"M48 32h96v96H48zm128 0h96v96h-96zm128 0h96v96h-96zM48 160h96v96H48zm128 0h96v96h-96zm128 0h96v96h-96zM48 288h96v96H48zm128 0h96v96h-96zm128 0h96v96h-96zM80 416h288v32H80z"})}),s("span",{children:p?i==="de"?"Ertrag":"Revenue":g?i==="de"?"Haus":"Home":"Solar"}),!p&&s("span",{className:"stat-percent",children:[" ",m?.solar?.percentage||0,"%"]})]})]}),s("div",{className:"stat-divider"}),s("div",{className:"energy-stat-item","data-source":"battery",children:[s("div",{className:"stat-value",children:(()=>{const S=_(m?.battery?.value,m?.battery?.unit);return s(ve,{children:[S.value,s("sup",{children:S.unit})]})})()}),s("div",{className:"stat-label",children:[p?s("svg",{width:"14px",height:"14px","stroke-width":"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"currentColor",style:{marginRight:"4px"},title:i==="de"?"Kosten":"Costs",children:[s("path",{d:"M16.5 21H18.6688C19.8945 21 20.8319 19.9074 20.6455 18.6959L19.2609 9.69589C19.1108 8.72022 18.2713 8 17.2842 8H6.71584C5.7287 8 4.8892 8.72022 4.73909 9.69589L3.35448 18.6959C3.16809 19.9074 4.10545 21 5.33122 21H7.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M12 19V12M12 12L15 15M12 12L9 15",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M14 5C14 3.89543 13.1046 3 12 3C10.8954 3 10 3.89543 10 5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]}):s("svg",{width:"14px",height:"14px","stroke-width":"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{marginRight:"4px"},title:i==="de"?"Batterie":"Battery",children:[s("path",{d:"M14 13H16L18 13",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M6 13H8M10 13H8M8 13V11M8 13V15",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M6 7H2.6C2.26863 7 2 7.26863 2 7.6V18.4C2 18.7314 2.26863 19 2.6 19H21.4C21.7314 19 22 18.7314 22 18.4V7.6C22 7.26863 21.7314 7 21.4 7H18M6 7V5H8V7M6 7H8M8 7H16M16 7V5H18V7M16 7H18",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),s("span",{children:p?i==="de"?"Kosten":"Costs":i==="de"?"Batterie":"Battery"}),!p&&s("span",{className:"stat-percent",children:[" ",m?.battery?.percentage||0,"%"]})]})]})]})}),s("div",{className:"energy-sources-bar",style:{padding:"0 16px"},children:s("div",{className:"energy-progress-bar",children:[s("div",{className:"progress-segment solar",style:{width:`${m?.solar?.percentage||0}%`}}),s("div",{className:"progress-segment battery",style:{width:`${m?.battery?.percentage||0}%`}}),s("div",{className:"progress-segment grid",style:{width:`${m?.grid?.percentage||0}%`}})]})}),s("div",{className:"energy-chart-container",children:[a&&s("div",{className:"loading-container",children:s("div",{className:"loading-spinner"})}),!a&&(!c||c.length===0)&&s("div",{className:"no-data-message",children:s("p",{children:i==="de"?"Keine Daten verfgbar":"No data available"})}),s("canvas",{ref:b,style:{display:c&&c.length>0&&!a?"block":"none",width:"100%",height:"100%"}})]})]})},i0=({group:t,expandedControl:e,activePreset:i,onPresetSelect:n,onServiceCall:r,item:o,lang:a,hass:l})=>{if(e!==t.id)return null;const c=te(null),[d,u]=M(!1);return s(Ce,{mode:"wait",children:s(T.div,{className:`control-presets visible ${t.grouped?"grouped":""}`,variants:iw,initial:"hidden",animate:"visible",exit:"hidden",children:t.renderCustom&&t.id==="settings"&&o?.domain==="climate"?s(ck,{item:o,lang:a}):t.renderCustom&&t.id==="controls"&&o?.domain==="energy_dashboard_device"?s(Br,{item:o,hass:l,lang:a,viewType:"consumption"}):t.renderCustom&&t.id==="sensors"&&o?.domain==="energy_dashboard_device"?s(Br,{item:o,hass:l,lang:a,viewType:"solar"}):t.renderCustom&&t.id==="diagnostics"&&o?.domain==="energy_dashboard_device"?s(Br,{item:o,hass:l,lang:a,viewType:"netusage"}):t.renderCustom&&t.id==="sensors"&&o?.domain==="printer3d_device"?s(dk,{entity:o,hass:l,lang:a}):t.renderCustom&&t.id==="diagnostics"&&o?.domain==="printer3d_device"?s(uk,{entity:o,hass:l,lang:a}):t.renderCustom&&t.id==="misc"&&o?.domain==="printer3d_device"?s(hk,{entity:o,hass:l,lang:a}):s("div",{className:"presets-scroll-container",ref:t.grouped?c:null,onMouseEnter:()=>t.grouped&&u(!0),onMouseLeave:()=>t.grouped&&u(!1),style:t.grouped?{position:"relative"}:{},children:[t.grouped?s(ve,{children:t.items.map((h,m)=>h.type==="header"?s("div",{className:"preset-header",children:h.label},`header-${m}`):s(T.button,{className:`preset-button ${i===`${t.id}-${m}`?"active":""}`,variants:bu,initial:"initial",whileHover:"hover",whileTap:"tap","data-tooltip":h.label,onClick:()=>{n(`${t.id}-${m}`),r(h.service,h.data)},style:{...h.style,animationDelay:`${m*30}ms`},title:h.label,children:h.icon?s("span",{style:{fontSize:"32px"},children:h.icon}):s("span",{className:"preset-text",children:h.label})},m))}):t.items.map((h,m)=>s(T.button,{className:`preset-button ${i===`${t.id}-${m}`?"active":""}`,"data-tooltip":h.label,variants:bu,initial:"initial",whileHover:"hover",whileTap:"tap",onClick:()=>{n(`${t.id}-${m}`),r(t.service,h.data)},style:{...h.style,animationDelay:`${m*30}ms`},title:h.label,children:h.icon?s("span",{style:{fontSize:"32px"},children:h.icon}):h.customIcon?s("span",{className:"preset-icon",dangerouslySetInnerHTML:{__html:h.customIcon}}):s(ve,{children:s("span",{className:"preset-text",children:h.label})})},m)),t.grouped&&s(Pe,{scrollContainerRef:c,isHovered:d})]})})})},io=({item:t,onServiceCall:e,lang:i="de",hass:n,slideShowKey:r,expandedControl:o,setExpandedControl:a})=>{const[l,c]=M(null),d=o!==void 0?o:l,u=a||c,[h,m]=M(null),[f,g]=M(!1),[p,v]=M(!1),[b,y]=M(!1),[w,_]=M(!1),{localPowerState:k,setLocalPowerState:N,lastBrightness:C,setLastBrightness:S,lockState:x,setLockState:B}=ak(t,n,t?.domain);U(()=>{d===null&&(y(!1),_(!1))},[d]);const A=te(null),P=te(null),I=te(null),[z,D]=M(!1),L=Y=>ee(`controls.${Y}`,i);U(()=>{const Y=requestAnimationFrame(()=>{const oe=setTimeout(()=>{g(!0)},50);return()=>clearTimeout(oe)});return()=>cancelAnimationFrame(Y)},[]),U(()=>{const Y=window.matchMedia("(max-width: 768px)");v(Y.matches);const oe=ae=>v(ae.matches);return Y.addEventListener("change",oe),()=>Y.removeEventListener("change",oe)},[]);const E=Me(()=>{if(t?.domain==="lock"&&x){const Y={...t,state:x,entity:t.entity?{...t.entity,state:x}:void 0};return Ua(Y,i)}return Ua(t,i)},[t,i,x]),[W,F]=M(null),[K,G]=M(null),[$,Q]=M(null),[re,he]=M(null);U(()=>{if(t?.domain!=="energy_dashboard_device"||!n?.connection)return;const Y=t?.attributes?.kwh_sensor;if(!Y)return;(async()=>{try{const ae=new Date,V=new Date(ae.setHours(0,0,0,0)),ne=new Date(V.getTime()+36e5),se=(await n.connection.sendMessagePromise({type:"recorder/statistics_during_period",start_time:V.toISOString(),end_time:ne.toISOString(),statistic_ids:[Y],period:"hour",types:["state","sum"]}))[Y];if(se&&se.length>0){const R=se[0],j=R?.state??R?.sum??0;he(j),console.log(" Midnight Statistics:",{state:R?.state,sum:R?.sum,used:j,timestamp:R?.start})}}catch(ae){console.error("Failed to get midnight value:",ae)}})()},[t?.domain,t?.attributes?.kwh_sensor,n?.connection]),U(()=>{if(t?.domain!=="energy_dashboard_device"||!n?.states)return;const Y=t?.attributes?._display_primary||t?.attributes?.grid_import_sensor;if(Y){const ae=n.states[Y];if(ae&&ae.state!=="unavailable"&&ae.state!=="unknown"){const V=parseFloat(ae.state);isNaN(V)||(F(V),G(ae.attributes?.unit_of_measurement||"W"))}}const oe=t?.attributes?._display_secondary||t?.attributes?.kwh_sensor;if(oe){const ae=n.states[oe];if(ae&&ae.state!=="unavailable"&&ae.state!=="unknown"){const V=parseFloat(ae.state);isNaN(V)||Q(V)}}},[n?.states,t?.domain,t?.attributes?.grid_import_sensor,t?.attributes?.kwh_sensor,t?.attributes?._display_primary,t?.attributes?._display_secondary]);const O=Me(()=>{if(t?.domain==="lock"&&x){const oe={...t,state:x,entity:t.entity?{...t.entity,state:x}:void 0};return Tu(oe,i)}const Y=Tu(t,i);if(k!==null&&Y.showPower&&(Y.powerState=k),t?.domain==="light"&&!k&&C!==null?Y.value=0:t?.domain==="light"&&k&&C!==null&&(Y.value=C),t?.domain==="energy_dashboard_device"){W!==null&&(Y.value=W,Y.unit=K||"W");const oe=t?.attributes?._display_primary_type;if(oe==="nettonutzung"&&$!==null&&re!==null){const ae=$-re,V=t?.attributes?._display_secondary||t?.attributes?.kwh_sensor,Z=(n?.states?.[V]?.attributes?.unit_of_measurement||"Wh")==="Wh"?ae/1e3:ae,se=i==="de"?"Heute":"Today";Y.subValue=`${se}: ${Z.toFixed(2)} kWh`}if(oe==="solarerzeugung"){const ae=t?.attributes?._display_secondary||t?.attributes?.pv_daily_sensor;if(ae){const V=n?.states?.[ae];if(V&&V.state!=="unavailable"&&V.state!=="unknown"){const ne=parseFloat(V.state);if(!isNaN(ne)){const se=(V.attributes?.unit_of_measurement||"kWh")==="Wh"?(ne/1e3).toFixed(2):ne.toFixed(2),R=i==="de"?"Heute":"Today";Y.subValue=`${R}: ${se} kWh`}}}}if(oe==="verbrauch"){const ae=t?.attributes?._display_secondary||t?.attributes?.grid_return_sensor;if(ae){const V=n?.states?.[ae];if(V&&V.state!=="unavailable"&&V.state!=="unknown"){const ne=parseFloat(V.state);if(!isNaN(ne)){const Z=V.attributes?.unit_of_measurement||"W",se=i==="de"?"Einspeisung":"Grid Return";Y.subValue=`${se}: ${ne.toFixed(1)} ${Z}`}}}}if(oe==="batterie"){const ae=t?.attributes?._display_secondary||t?.attributes?.battery_charged_sensor;if(ae){const V=n?.states?.[ae];if(V&&V.state!=="unavailable"&&V.state!=="unknown"){const ne=parseFloat(V.state);if(!isNaN(ne)){const se=(V.attributes?.unit_of_measurement||"kWh")==="Wh"?(ne/1e3).toFixed(2):ne.toFixed(2),R=i==="de"?"Geladen":"Charged";Y.subValue=`${R}: ${se} kWh`}}}}}return Y},[t,i,k,C,x,W,K,$,re,n?.states]),H=(Y,oe={})=>{const ae=t?.domain||"light",ne={entity_id:t?.entity_id||t?.id,...oe},Z=nc(ae,Y,ne);if(ae==="light"&&Y==="turn_on"&&Object.keys(oe).length===0&&(Z.brightness=255),ae==="lock"){const se=Y==="lock"?"locked":"unlocked";t.state!==void 0&&(t.state=se),t.entity?.state!==void 0&&(t.entity.state=se),B(se)}e&&e(ae,Y,Z)},X=Y=>{ok(t?.domain,t,Y,S,N,H)},me=Y=>{N(Y),sk(t?.domain,t,Y,C,H)},q=Y=>{d===Y?(u(null),_(!1),y(!1)):(u(Y),_(!0),y(!0))},ie=t?.entity_id?.includes("solar")?[{value:5.2,min:0,max:10,unit:"kW",label:L("production"),color:"#FFC107"},{value:2.8,min:0,max:10,unit:"kW",label:L("consumption"),color:"#4CAF50"},{value:85,min:0,max:100,unit:"%",label:L("battery"),color:"#2196F3"}]:null;return t?.domain==="energy_dashboard_device"?s("div",{className:`controls-tab ${f?"visible":""} ${p?"compact-mode":""}`,onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),style:{position:"relative"},children:[s(Ce,{mode:"wait",children:!b&&s(T.div,{ref:A,className:"slider-wrapper",variants:p?_u:ku,initial:"visible",animate:"visible",exit:"hidden",children:Hi(Kr,{...O,onValueChange:O.interactive?X:void 0,onPowerToggle:O.showPower?me:void 0,domain:t?.domain,key:t?.entity_id})},"slider-wrapper")}),E.primary&&E.primary.length>0&&s(T.div,{ref:P,className:"device-control-buttons energy-dashboard-buttons",variants:xu,initial:"normal",animate:w?"movedUp":"normal",children:s("div",{className:"control-row primary",children:E.primary.map((Y,oe)=>s(Au,{control:Y,index:oe,expandedControl:d,onToggleExpandable:q,onServiceCall:H},oe))})}),s("div",{className:"energy-expandable-container",ref:I,children:E.expandable&&E.expandable.length>0&&E.expandable.map(Y=>s(i0,{group:Y,expandedControl:d,activePreset:h,onPresetSelect:m,onServiceCall:H,item:t,lang:i,hass:n},Y.id))}),s(Pe,{scrollContainerRef:I,isHovered:z})]}):s("div",{className:`controls-tab ${f?"visible":""} ${p?"compact-mode":""}`,children:s("div",{className:"device-control-design",children:[s(Ce,{mode:"wait",children:!b&&s(T.div,{ref:A,className:"slider-wrapper",variants:p?_u:ku,initial:"visible",animate:"visible",exit:"hidden",children:ie?s(nk,{data:ie,lang:i}):s(Ce,{mode:"wait",initial:!1,children:s(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.4,ease:[.4,0,.2,1]},style:{width:"100%",height:"100%"},children:Hi(Kr,{...O,onValueChange:O.interactive?X:void 0,onPowerToggle:O.showPower?me:void 0,domain:t?.domain,key:t?.entity_id})},r!==void 0?r:t?.entity_id)})},"slider-wrapper")}),E.primary&&E.primary.length>0&&s(T.div,{ref:P,className:"device-control-buttons",variants:xu,initial:"normal",animate:w?"movedUp":"normal",children:[s("div",{className:"control-row primary",children:E.primary.map((Y,oe)=>s(Au,{control:Y,index:oe,expandedControl:d,onToggleExpandable:q,onServiceCall:H},oe))}),E.expandable&&E.expandable.length>0&&E.expandable.map(Y=>s(i0,{group:Y,expandedControl:d,activePreset:h,onPresetSelect:m,onServiceCall:H,item:t,lang:i,hass:n},Y.id))]})]})})},lr={yellow:"rgb(255, 214, 0)"};function D3({data:t,height:e="200px"}){const i=te(null),n=te(null);return U(()=>{if(!i.current||!t||t.length===0){console.log(" UsageTimelineChart: Canvas or data not ready");return}console.log(" UsageTimelineChart: Creating chart with",t.length,"points"),n.current&&n.current.destroy();try{const r=i.current.getContext("2d");n.current=new Mt(r,{type:"line",data:{labels:t.map(o=>o.time),datasets:[{label:"Usage",data:t.map(o=>o.usage),borderColor:lr.yellow,backgroundColor:"transparent",borderWidth:3,tension:.4,pointRadius:2,pointBackgroundColor:lr.yellow,pointBorderColor:lr.yellow,pointHoverRadius:6,pointHoverBackgroundColor:lr.yellow}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",padding:12,displayColors:!1}},scales:{x:{display:!0,grid:{display:!1},ticks:{color:"rgba(255, 255, 255, 0.5)",maxRotation:0,autoSkipPadding:20}},y:{display:!0,grid:{color:"rgba(255, 255, 255, 0.05)",borderDash:[3,3]},ticks:{color:"rgba(255, 255, 255, 0.5)"}}}}}),console.log(" UsageTimelineChart created successfully")}catch(r){console.error(" UsageTimelineChart error:",r)}return()=>{n.current&&n.current.destroy()}},[t]),s("div",{style:{width:"100%",height:e,position:"relative"},children:s("canvas",{ref:i})})}const n0={collapsed:{height:0,opacity:0,transition:{height:{duration:.4,ease:[.16,1,.3,1]},opacity:{duration:.3,ease:"easeOut"}}},expanded:{height:"auto",opacity:1,transition:{height:{duration:.4,ease:[.16,1,.3,1]},opacity:{duration:.3,delay:.1,ease:"easeIn"}}}},s0={collapsed:{rotate:0,transition:{duration:.3,ease:[.34,1.56,.64,1]}},expanded:{rotate:45,transition:{duration:.3,ease:[.34,1.56,.64,1]}}},r0={idle:{backgroundColor:"rgba(255, 255, 255, 0)",transition:{duration:.2}},hover:{backgroundColor:"rgba(255, 255, 255, 0)",transition:{duration:.2}},tap:{scale:1,transition:{duration:.1}}},A3=(t,e)=>{const i=new Date(t);return _c(e)<=24?i.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}):i.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})},o0=t=>{if(t<60)return`${Math.round(t)} Min`;const e=Math.floor(t/60),i=Math.round(t%60);return i>0?`${e}h ${i}m`:`${e}h`},a0=({item:t,onDataRequest:e,lang:i="de"})=>{console.log(" HistoryTab Component Rendered!",{item:t});const{hass:n}=At(),r=!n,o=te(n);U(()=>{o.current=n},[n]);const[a,l]=M(k3),[c,d]=M(!0),[u,h]=M(!1),[m,f]=M(!1),[g,p]=M(!1),[v,b]=M(null),[y,w]=M({x:0,width:0}),_=te(null),k=Object.values(ks).map(C=>C.key);if(U(()=>{const C=()=>{if(_.current){const S=k.indexOf(a),x=_.current.querySelectorAll(".time-range-button");if(x[S]){const B=x[S],A=_.current.getBoundingClientRect(),P=B.getBoundingClientRect(),I=P.left-A.left,z=P.width;w({x:Math.round(I),width:Math.round(z)})}}};return setTimeout(C,50),window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C)}},[a,k]),U(()=>{const C=setTimeout(()=>f(!0),100);return()=>clearTimeout(C)},[]),U(()=>{if(console.log(" HistoryTab useEffect luft!",{item:t,timeRange:a,hass:n,isDevelopment:r}),!t||!t.entity_id){console.warn("HistoryTab: No item or entity_id provided");return}(async()=>{p(!0);try{let S;if(r?(console.log(" Development-Modus: Generiere Mock-Daten fr",t.entity_id),S=C3(t,a)):(console.log(" Production-Modus: Lade echte HA-Daten fr",t.entity_id),S=await x3(o.current,t.entity_id,a)),S&&S.length>0){const x=S3(S,t.entity_id,t.domain);console.log(" History-Daten geladen:",{events:x.events.length,stats:x.stats,patterns:x.patterns.length,chartPoints:x.chartData.length}),console.log(" Chart-Daten:",{chartData:x.chartData,dataLength:x.chartData.length,firstPoint:x.chartData[0],lastPoint:x.chartData[x.chartData.length-1]}),console.log(" CHART DEBUG:",{chartDataExists:!!x.chartData,chartLength:x.chartData?.length,firstPoint:x.chartData?.[0],lastPoint:x.chartData?.[x.chartData.length-1],allPoints:x.chartData}),b(x)}else console.warn(" Keine History-Daten gefunden"),b(null)}catch(S){console.error(" Fehler beim Laden der History:",S),b(null)}finally{p(!1)}})()},[t?.entity_id,a,r]),!t)return s("div",{className:"history-tab-container",children:s("div",{className:"no-data-message",children:[s("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s("path",{d:"M3 12h18m-9-9v18"})}),s("p",{children:i==="de"?"Kein Gert ausgewhlt":"No device selected"})]})});const N=v?.stats||{totalChanges:0,avgDuration:0,onPercentage:0};return s("div",{className:`history-tab ${m?"visible":""}`,children:[s("div",{ref:_,className:"time-range-selector",children:[s(T.div,{className:"time-range-slider",animate:{x:y.x,width:y.width,scaleX:[1,1.12,.96,1.03,1],scaleY:[1,.94,1.06,.99,1]},transition:{x:{type:"spring",stiffness:280,damping:22,mass:1.5},width:{type:"spring",stiffness:280,damping:22,mass:1.5},scaleX:{duration:.6,times:[0,.2,.5,.8,1],ease:[.34,1.56,.64,1]},scaleY:{duration:.6,times:[0,.2,.5,.8,1],ease:[.34,1.56,.64,1]}}}),Object.values(ks).map(C=>{const S=a===C.key;return s(T.button,{className:`time-range-button ${S?"active":""}`,onClick:()=>l(C.key),whileHover:S?{}:{scale:1.04},whileTap:S?{}:{scale:.96},transition:{duration:.2},children:C.label},C.key)})]}),s("div",{className:"accordion-section",children:[s(T.div,{className:"accordion-header",onClick:()=>d(!c),variants:r0,initial:"idle",whileHover:"hover",whileTap:"tap",children:[s("div",{className:"accordion-title",children:[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s("path",{d:"M3 12h18M3 6h18M3 18h18M7 12v6M12 6v12M17 8v8"})}),s("span",{children:i==="de"?"Nutzungsdiagramme":"Usage Charts"})]}),s(T.svg,{className:"accordion-icon",width:"24",height:"24",strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",variants:s0,animate:c?"expanded":"collapsed",children:s("path",{d:"M6 12H12M18 12H12M12 12V6M12 12V18",strokeLinecap:"round",strokeLinejoin:"round"})})]}),s(Ce,{initial:!1,children:c&&s(T.div,{className:"accordion-content",variants:n0,initial:"collapsed",animate:"expanded",exit:"collapsed",children:g?s("div",{className:"loading-container",children:s("div",{className:"loading-spinner"})}):v?s(ve,{children:s("div",{className:"chart-wrapper",children:s("div",{className:"chart-container",children:s(D3,{data:v.chartData,height:"220px"},`usage-${a}`)})})}):s("div",{className:"no-data-message",children:[s("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s("path",{d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s("p",{children:i==="de"?"Keine Daten verfgbar":"No data available"})]})})})]}),s("div",{className:"accordion-section",children:[s(T.div,{className:"accordion-header",onClick:()=>h(!u),variants:r0,initial:"idle",whileHover:"hover",whileTap:"tap",children:[s("div",{className:"accordion-title",children:[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s("span",{children:[i==="de"?"Letzte Ereignisse":"Recent Events"," (",v?.events?.length||0,")"]})]}),s(T.svg,{className:"accordion-icon",width:"24",height:"24",strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",variants:s0,animate:u?"expanded":"collapsed",children:s("path",{d:"M6 12H12M18 12H12M12 12V6M12 12V18",strokeLinecap:"round",strokeLinejoin:"round"})})]}),s(Ce,{initial:!1,children:u&&s(T.div,{className:"accordion-content",variants:n0,initial:"collapsed",animate:"expanded",exit:"collapsed",children:s("div",{className:"text-events-list",children:v?.events&&v.events.length>0?v.events.map((C,S)=>s(T.div,{className:"event-item",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:S*.03},whileHover:{scale:1.02,backgroundColor:"rgba(0, 0, 0, 0.4)"},children:[s("span",{className:"event-time",children:A3(C.timestamp,a)}),s("span",{className:"event-description",children:C.description}),s("span",{className:`event-value ${C.newState==="on"?"event-state-on":"event-state-off"}`,children:[C.newState==="on"?i==="de"?" AN":" ON":i==="de"?" AUS":" OFF",C.duration&&s("span",{style:{marginLeft:"8px",fontSize:"12px",opacity:.7},children:["(",o0(C.duration),")"]})]})]},S)):s("div",{className:"no-data-message",style:{height:"200px"},children:s("p",{children:i==="de"?"Keine Ereignisse aufgezeichnet":"No events recorded"})})})})})]}),s("div",{className:"stats-grid",children:[s("div",{className:"stat-card",children:[s("span",{className:"stat-label",children:i==="de"?"nderungen":"Changes"}),s("span",{className:"stat-value",children:[N.totalChanges,s("span",{className:"stat-unit",children:"x"})]})]}),s("div",{className:"stat-card",children:[s("span",{className:"stat-label",children:i==="de"?" Dauer":"Avg Duration"}),s("span",{className:"stat-value",children:o0(N.avgDuration)})]}),s("div",{className:"stat-card",children:[s("span",{className:"stat-label",children:i==="de"?"Aktiv":"Active Time"}),s("span",{className:"stat-value",children:[Math.round(N.onPercentage),s("span",{className:"stat-unit",children:"%"})]})]})]})]})},F3=({item:t,lang:e="de",onSettingsChange:i,initialSettings:n={}})=>{const[r,o]=M(n.temperature||null),[a,l]=M(n.hvac_mode||null),[c,d]=M(n.fan_mode||null),[u,h]=M(n.swing_mode||null),[m,f]=M(n.preset_mode||"none"),[g,p]=M(!1),b=(t?.entity||t)?.attributes||{},y={temperature:te(null),hvacMode:te(null),fanMode:te(null),swingMode:te(null),presetMode:te(null)},w=te({}),_=te(null);U(()=>{const F=setTimeout(()=>p(!0),50);return()=>clearTimeout(F)},[]),U(()=>()=>{_.current&&(_.current.querySelectorAll("div.climate-picker").forEach(K=>{K.style.display="none",K.style.height="0px",K.style.opacity="0"}),console.log(" Climate Picker beim Unmount geschlossen"))},[]),U(()=>{console.log(" ClimateScheduleSettings: initialSettings updated",n),n&&Object.keys(n).length>0?(n.temperature!==void 0&&o(n.temperature),n.hvac_mode!==void 0&&l(n.hvac_mode),n.fan_mode!==void 0&&d(n.fan_mode),n.swing_mode!==void 0&&h(n.swing_mode),n.preset_mode!==void 0&&f(n.preset_mode)):(o(null),l(null),d(null),h(null),f("none"))},[n]);const k=b.hvac_modes||["heat","cool","off"],N=b.fan_modes||null,C=b.swing_modes||null,S=b.preset_modes||null,x=b.min_temp||16,B=b.max_temp||30,A=b.temperature_unit||"C",P=F=>({off:ee("climate.off",e),heat:ee("climate.heat",e),cool:ee("climate.cool",e),auto:ee("climate.auto",e),dry:ee("climate.dry",e),fan_only:ee("climate.fanOnly",e),heat_cool:ee("climate.heatCool",e)})[F]||F,I=F=>({auto:ee("climate.auto",e),low:ee("climate.low",e),medium:ee("climate.medium",e),high:ee("climate.high",e),quiet:ee("climate.quiet",e),turbo:ee("climate.turbo",e)})[F]||F,z=F=>({off:ee("climate.off",e),vertical:ee("climate.vertical",e),horizontal:ee("climate.horizontal",e),both:ee("climate.both",e)})[F]||F,D=F=>({none:ee("climate.none",e),away:ee("climate.away",e),home:ee("climate.home",e),eco:ee("climate.eco",e),boost:ee("climate.boost",e),comfort:ee("climate.comfort",e),sleep:ee("climate.sleep",e)})[F]||F,L=()=>{const F=[];for(let K=x;K<=B;K++)F.push(`${K}${A}`);return F};U(()=>{setTimeout(()=>{if(y.temperature.current&&!w.current.temperature){const F=L(),K=Math.max(0,r-x);new et(y.temperature.current,{data:F,lineHeight:30,selected:K,callback:(G,$)=>{const Q=parseInt($);o(Q),i&&i({temperature:Q})}}),w.current.temperature=!0}if(y.hvacMode.current&&!w.current.hvacMode){const F=k.map(P),K=k.indexOf(a);new et(y.hvacMode.current,{data:F,lineHeight:30,selected:Math.max(0,K),callback:(G,$)=>{const Q=k[G];l(Q),i&&i({hvac_mode:Q})}}),w.current.hvacMode=!0}if(N&&y.fanMode.current&&!w.current.fanMode){const F=N.map(I),K=N.indexOf(c);new et(y.fanMode.current,{data:F,lineHeight:30,selected:Math.max(0,K),callback:(G,$)=>{const Q=N[G];d(Q),i&&i({fan_mode:Q})}}),w.current.fanMode=!0}if(C&&y.swingMode.current&&!w.current.swingMode){const F=C.map(z),K=C.indexOf(u);new et(y.swingMode.current,{data:F,lineHeight:30,selected:Math.max(0,K),callback:(G,$)=>{const Q=C[G];h(Q),i&&i({swing_mode:Q})}}),w.current.swingMode=!0}if(S&&y.presetMode.current&&!w.current.presetMode){const F=S.map(D),K=S.indexOf(m);new et(y.presetMode.current,{data:F,lineHeight:30,selected:Math.max(0,K),callback:(G,$)=>{const Q=S[G];f(Q),i&&i({preset_mode:Q})}}),w.current.presetMode=!0}},100)},[e]);const E=F=>{if(!_.current){console.error(" containerRef nicht verfgbar");return}const K=_.current.querySelector(`#climate-picker-container-line-${F}`);if(!K){console.error(" Climate Picker nicht gefunden:",F);return}const G=getComputedStyle(K).display==="none";console.log(" Climate Picker Toggle:",F,G?"FFNEN":"SCHLIESSEN"),_.current.querySelectorAll("div.climate-picker").forEach(Q=>{getComputedStyle(Q).display!=="none"&&Q!==K&&(console.log(" Schliee anderen Climate Picker"),W(Q,!1))}),W(K,G)},W=(F,K)=>{K?(F.style.display="block",F.animate([{height:"0px",opacity:0,transform:"translateY(-3px)"},{height:"210px",opacity:1,transform:"translateY(0px)"}],{duration:150,easing:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fill:"forwards"}).onfinish=()=>{F.style.height="210px",F.style.opacity="1"}):F.animate([{height:"210px",opacity:1,transform:"translateY(0px)"},{height:"0px",opacity:0,transform:"translateY(-3px)"}],{duration:120,easing:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fill:"forwards"}).onfinish=()=>{F.style.display="none",F.style.height="0px",F.style.opacity="0"}};return U(()=>{if(!_.current)return;let F=0;const K=10,G=()=>{const Q=_.current?.querySelectorAll(".climate-settings-table .clickable-row");Q&&Q.length>0?(console.log(" Climate rows gefunden, registriere Listener:",Q.length),Q.forEach(re=>{const he=re.getAttribute("data-line");if(he){re._clickHandler&&re.removeEventListener("click",re._clickHandler);const O=()=>{console.log(` Row ${he} geklickt`),E(he)};re.addEventListener("click",O),re._clickHandler=O}})):(F++,F<K?(console.log(` Versuch ${F}/${K}: Rows noch nicht da, warte...`),setTimeout(G,200)):console.error(" Climate rows nicht gefunden nach 10 Versuchen!"))},$=setTimeout(G,100);return()=>{clearTimeout($),_.current&&_.current.querySelectorAll(".climate-settings-table .clickable-row").forEach(re=>{re._clickHandler&&(re.removeEventListener("click",re._clickHandler),delete re._clickHandler,console.log(" Event-Listener entfernt von Row:",re.getAttribute("data-line")))})}},[g]),s("div",{ref:_,className:`climate-schedule-settings ${g?"visible":""}`,children:[s("style",{children:`
        .climate-schedule-settings {
          opacity: 0;
          transform: translateY(10px);
          transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
          position: relative;
          z-index: 10;
        }

        .climate-schedule-settings.visible {
          opacity: 1;
          transform: translateY(0);
        }

        /* Reuse existing picker styles from ScheduleTab */
        .climate-settings-table {
          margin-top: 0;
          margin-bottom: 0;
          background: transparent;
          border-radius: 0;
          overflow: visible;
          position: relative;
          z-index: 10;
        }

        .climate-settings-table table { 
          width: 100%; 
          font-size: 15px;
          border-collapse: collapse;
          font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
          letter-spacing: normal;
        }
        
        .climate-settings-table table th { 
          text-align: left; 
          font-weight: 500;
          height: 45px; 
          border-bottom: 1px solid rgba(255, 255, 255, 0.1); 
          padding: 0 16px; 
          cursor: pointer; 
          color: rgba(255, 255, 255, 0.95);
          letter-spacing: normal;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }
        
        .climate-settings-table table td { 
          text-align: right; 
          font-weight: 500;
          color: rgba(255, 255, 255, 0.7);
          border-bottom: 1px solid rgba(255, 255, 255, 0.1); 
          padding: 0 16px; 
          cursor: pointer;
          letter-spacing: normal;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
        }

        /* Last row without border */
        .climate-settings-table tr[data-line]:last-of-type th,
        .climate-settings-table tr[data-line]:last-of-type td {
          border-bottom: none !important;
        }

        .climate-settings-table table td.picker { 
          border: none; 
          cursor: default; 
          padding: 0; 
        }

        div.climate-picker { 
          display: none; 
          overflow: hidden; 
          border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Last picker without border */
        .climate-settings-table tr:last-child td.picker div.climate-picker {
          border-bottom: none !important;
        }

        .clickable-row { 
          cursor: pointer;
          position: relative;
          z-index: 10;
        }

        .picker-wrapper, .picker-wrapper * { 
          box-sizing: border-box; 
          -webkit-user-select: none; 
          user-select: none; 
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
        }

        .picker-wrapper { 
          text-align: center; 
          position: relative; 
          height: 210px; 
          display: inline-block; 
          line-height: 30px; 
          width: 100%; 
          font-size: 18px; 
          perspective: 1000px; 
          perspective-origin: center center; 
        }

        .picker-scroller { 
          transform: translateZ(-90px) rotateX(0deg); 
          transform-style: preserve-3d; 
          height: 100%; 
          will-change: transform; 
        }

        .picker-scroller .option { 
          position: absolute; 
          backface-visibility: hidden; 
          width: 100%; 
          color: rgba(255, 255, 255, 0.4); 
          transform-origin: 50% 50%; 
          transform-style: preserve-3d; 
          opacity: 1; 
          transition: opacity 0.2s, color 0.2s; 
          pointer-events: auto; 
        }

        .picker-scroller .option.is-hidden { 
          opacity: 0; 
          pointer-events: none; 
        }

        .picker-scroller .option.is-center { 
          color: rgba(255, 255, 255, 0.9); 
        }

        .picker-up { 
          position: absolute; 
          top: 0; 
          z-index: 2; 
          background: linear-gradient(to bottom, rgba(0, 0, 0, 0.25) 0%, rgba(0, 0, 0, 0) 100%); 
          width: 100%; 
          height: 90px; 
          border-bottom: 1px solid rgba(255, 255, 255, 0.3); 
          pointer-events: none; 
        }

        .picker-down { 
          position: absolute; 
          top: 120px; 
          z-index: 2; 
          background: linear-gradient(to top, rgba(0, 0, 0, 0.25) 0%, rgba(0, 0, 0, 0) 100%); 
          width: 100%; 
          height: 90px; 
          border-top: 1px solid rgba(255, 255, 255, 0.3); 
          pointer-events: none; 
        }

        .clone-scroller { 
          z-index: 5; 
          overflow: auto; 
          height: 100%; 
          position: absolute; 
          top: 0; 
          width: 100%; 
          padding-top: 90px; 
          padding-bottom: 90px; 
          scrollbar-width: none; 
          -ms-overflow-style: none; 
        }

        .clone-scroller::-webkit-scrollbar { 
          display: none; 
        }

        .clone-scroller .option { 
          visibility: hidden; 
        }
      `}),s("div",{className:"climate-settings-table",children:s("table",{children:s("tbody",{children:[s("tr",{className:"clickable-row","data-line":"1",children:[s("th",{children:ee("climate.temperature",e)}),s("td",{className:"value-line-1",children:r!==null?`${r}${A}`:ee("common.pleaseSelect",e)})]}),s("tr",{children:s("td",{className:"picker",colspan:"2",children:s("div",{className:"climate-picker",id:"climate-picker-container-line-1",children:s("div",{id:"climate-picker-line-1",ref:y.temperature})})})}),s("tr",{className:"clickable-row","data-line":"2",children:[s("th",{children:ee("climate.hvacMode",e)}),s("td",{className:"value-line-2",children:a!==null?P(a):ee("common.pleaseSelect",e)})]}),s("tr",{children:s("td",{className:"picker",colspan:"2",children:s("div",{className:"climate-picker",id:"climate-picker-container-line-2",children:s("div",{id:"climate-picker-line-2",ref:y.hvacMode})})})}),N&&s(ve,{children:[s("tr",{className:"clickable-row","data-line":"3",children:[s("th",{children:ee("climate.fanMode",e)}),s("td",{className:"value-line-3",children:c!==null?I(c):ee("common.pleaseSelect",e)})]}),s("tr",{children:s("td",{className:"picker",colspan:"2",children:s("div",{className:"climate-picker",id:"climate-picker-container-line-3",children:s("div",{id:"climate-picker-line-3",ref:y.fanMode})})})})]}),C&&s(ve,{children:[s("tr",{className:"clickable-row","data-line":"4",children:[s("th",{children:ee("climate.swingMode",e)}),s("td",{className:"value-line-4",children:u!==null?z(u):ee("common.pleaseSelect",e)})]}),s("tr",{children:s("td",{className:"picker",colspan:"2",children:s("div",{className:"climate-picker",id:"climate-picker-container-line-4",children:s("div",{id:"climate-picker-line-4",ref:y.swingMode})})})})]}),S&&s(ve,{children:[s("tr",{className:"clickable-row","data-line":"5",children:[s("th",{children:ee("climate.presetMode",e)}),s("td",{className:"value-line-5",children:D(m)})]}),s("tr",{children:s("td",{className:"picker",colspan:"2",children:s("div",{className:"climate-picker",id:"climate-picker-container-line-5",children:s("div",{id:"climate-picker-line-5",ref:y.presetMode})})})})]})]})})})]})},P3=({activeTab:t,onTabChange:e,showPicker:i=!1,t:n})=>{const[r,o]=M({x:0,width:0}),a=te(null);return U(()=>{const l=()=>{if(a.current){const d=["all","timer","schedule"].indexOf(t),u=a.current.querySelectorAll(".filter-tab");if(u[d]){const h=u[d],m=a.current.getBoundingClientRect(),f=h.getBoundingClientRect(),g=f.left-m.left,p=f.width;o({x:Math.round(g),width:Math.round(p)})}}};return setTimeout(l,50),window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}},[t]),s("div",{ref:a,className:`scheduler-filter ${i?"hidden":""}`,children:[s(T.div,{className:"scheduler-filter-slider",animate:{x:r.x,width:r.width,scaleX:[1,1.12,.96,1.03,1],scaleY:[1,.94,1.06,.99,1]},transition:{x:{type:"spring",stiffness:280,damping:22,mass:1.5},width:{type:"spring",stiffness:280,damping:22,mass:1.5},scaleX:{duration:.6,times:[0,.2,.5,.8,1],ease:[.34,1.56,.64,1]},scaleY:{duration:.6,times:[0,.2,.5,.8,1],ease:[.34,1.56,.64,1]}}}),["all","timer","schedule"].map(l=>{const c=t===l;return s(T.button,{className:`filter-tab ${c?"active":""}`,onClick:()=>e(l),whileHover:c?{}:{scale:1.04},whileTap:c?{}:{scale:.96},transition:{duration:.2},children:n(l==="all"?"all":l==="timer"?"timer":"schedules")},l)})]})},I3=({item:t,index:e,onItemClick:i,onDelete:n,t:r})=>{const o=c=>c?.type==="timer"||c==="timer"?s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s("path",{d:"M12 12C15.866 12 19 8.86599 19 5H5C5 8.86599 8.13401 12 12 12ZM12 12C15.866 12 19 15.134 19 19H5C5 15.134 8.13401 12 12 12Z",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M5 2L12 2L19 2",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M5 22H12L19 22",strokeLinecap:"round",strokeLinejoin:"round"})]}):s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s("path",{d:"M9 2L15 2",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 10L12 14",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 22C16.4183 22 20 18.4183 20 14C20 9.58172 16.4183 6 12 6C7.58172 6 4 9.58172 4 14C4 18.4183 7.58172 22 12 22Z",strokeLinecap:"round",strokeLinejoin:"round"})]}),a=c=>{if(c.type==="timer")return`${r("atTime")} ${c.time} - ${r("remaining")} ${c.remaining} ${r("minutes")}`;if(c.days){const u=Array.isArray(c.days)?c.days.join(", "):c.days;return`${r("atTime")} ${c.time} - ${u}`}return`${r("atTime")} ${c.time}`},l=c=>{c.stopPropagation(),n(t)};return s(T.div,{className:"scheduler-item",onClick:()=>i(t),whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:e*.05},children:[s("div",{className:"item-icon",children:o(t)}),s("div",{className:"item-content",children:[s("div",{className:"item-name",children:[s("span",{children:t.action}),s("span",{className:`item-type ${t.type}`,children:t.type==="timer"?r("timer"):r("scheduleMode")})]}),s("div",{className:"item-time",children:a(t)})]}),s("div",{className:"item-actions",children:s("button",{className:"item-delete",onClick:l,children:s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"1.5",fill:"none",children:[s("path",{d:"M20 9L18.005 20.3463C17.8369 21.3026 17.0062 22 16.0353 22H7.96474C6.99379 22 6.1631 21.3026 5.99496 20.3463L4 9",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M21 6L15.375 6M3 6L8.625 6M8.625 6V4C8.625 2.89543 9.52043 2 10.625 2H13.375C14.4796 2 15.375 2.89543 15.375 4V6M8.625 6L15.375 6",strokeLinecap:"round",strokeLinejoin:"round"})]})})})]},t.id)},R3=({items:t,isLoading:e,activeTab:i,showPicker:n,onItemClick:r,onDelete:o,t:a})=>s("div",{className:`scheduler-items ${n?"hidden":""}`,children:e?s("div",{className:"scheduler-loading",children:s("div",{className:"loading-text",children:"Lade Scheduler..."})}):t.length===0?s("div",{className:"empty-state",children:[s("div",{className:"empty-icon",children:i==="timer"?"":i==="schedule"?"":""}),s("div",{children:a(i==="timer"?"noTimers":i==="schedule"?"noSchedules":"noEntries")})]}):t.map((l,c)=>s(I3,{item:l,index:c,onItemClick:r,onDelete:o,t:a},l.id))}),B3=({onClick:t,t:e})=>s("div",{className:"add-button-container",children:s(T.button,{className:"control-button",onClick:t,whileHover:{scale:1.04},whileTap:{scale:.96},transition:{duration:.2},children:[s("div",{className:"button-icon",children:s("svg",{width:"24",height:"24",strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",children:s("path",{d:"M6 12H12M18 12H12M12 12V6M12 12V18",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),s("span",{className:"button-text",children:e("add")})]})}),z3=({showPicker:t,schedulerValue:e,daysValue:i,editingItem:n,onCancel:r,onConfirm:o,t:a})=>{if(!t)return null;const l=e===a("timerMode")&&i===a("noDays"),c=!l&&i===a("noDays");return s("div",{className:"picker-actions",children:[s("button",{className:"picker-btn cancel",onClick:r,children:a("cancel")}),s("button",{className:`picker-btn confirm ${c?"disabled":""}`,onClick:async()=>{if(!c)try{await o(l,n)}catch(d){console.error(" Fehler:",d),alert(n?`Fehler beim Aktualisieren: ${d.message}`:`Fehler beim Erstellen: ${d.message}`)}},children:a(n?"save":"confirm")})]})},V3=({showPicker:t,editingItem:e,actionValue:i,showCoverSettings:n,coverPosition:r,schedulerValue:o,timeFormatValue:a,daysValue:l,repeatValue:c,timeValue:d,showClimateSettings:u,climateSettings:h,pickerKey:m,item:f,lang:g,pickerRefs:p,onRowClick:v,onClimateSettingsChange:b,t:y})=>t?s("div",{className:`picker-table-container ${e?"editing":""}`,children:s("table",{children:s("tbody",{children:[s("tr",{className:"clickable-row","data-line":"1",onClick:()=>v("1"),children:[s("th",{children:y("action")}),s("td",{className:"value-line-1",children:i})]}),s("tr",{children:s("td",{className:"picker",colspan:"2",children:s("div",{className:"picker",id:"picker-container-line-1",children:s("div",{id:"picker-line-1",ref:p.action})})})}),n&&s(ve,{children:[s("tr",{className:"clickable-row","data-line":"2",onClick:()=>v("2"),children:[s("th",{children:y("position")}),s("td",{className:"value-line-2",children:[r,"%"]})]}),s("tr",{children:s("td",{className:"picker",colspan:"2",children:s("div",{className:"picker",id:"picker-container-line-2",children:s("div",{id:"picker-line-2",ref:p.position})})})})]}),s("tr",{className:"clickable-row","data-line":"3",onClick:()=>v("3"),children:[s("th",{children:y("scheduler")}),s("td",{className:"value-line-3",children:o})]}),s("tr",{children:s("td",{className:"picker",colspan:"2",children:s("div",{className:"picker",id:"picker-container-line-3",children:s("div",{id:"picker-line-3",ref:p.scheduler})})})}),s("tr",{className:"clickable-row schedule-option","data-line":"4",style:{display:o===y("timerMode")?"none":"table-row"},onClick:()=>v("4"),children:[s("th",{children:y("timeFormat")}),s("td",{className:"value-line-4",children:a})]}),s("tr",{className:"schedule-option",style:{display:o===y("timerMode")?"none":"table-row"},children:s("td",{className:"picker",colspan:"2",children:s("div",{className:"picker",id:"picker-container-line-4",children:s("div",{id:"picker-line-4",ref:p.timeFormat})})})}),s("tr",{className:"clickable-row schedule-option","data-line":"5",style:{display:o===y("timerMode")?"none":"table-row"},onClick:()=>v("5"),children:[s("th",{children:y("days")}),s("td",{className:"value-line-5",children:l})]}),s("tr",{className:"schedule-option",style:{display:o===y("timerMode")?"none":"table-row"},children:s("td",{className:"picker",colspan:"2",children:s("div",{className:"picker",id:"picker-container-line-5",children:s("div",{id:"picker-line-5",ref:p.days})})})}),s("tr",{className:"clickable-row schedule-option","data-line":"6",style:{display:o===y("timerMode")?"none":"table-row"},onClick:()=>v("6"),children:[s("th",{children:y("repeat")}),s("td",{className:"value-line-6",children:c})]}),s("tr",{className:"schedule-option",style:{display:o===y("timerMode")?"none":"table-row"},children:s("td",{className:"picker",colspan:"2",children:s("div",{className:"picker",id:"picker-container-line-6",children:s("div",{id:"picker-line-6",ref:p.repeat})})})}),s("tr",{className:"clickable-row","data-line":"7",onClick:()=>v("7"),children:[s("th",{id:"time-label",children:o===y("timerMode")?y("timerMode"):y("scheduleMode")}),s("td",{className:"value-line-7",children:d})]}),s("tr",{children:s("td",{className:"picker",colspan:"2",children:s("div",{className:"picker",id:"picker-container-line-7",children:s("div",{className:"time-picker-container",children:[s("div",{id:"picker-line-6-hours",ref:p.hoursRef}),s("div",{className:"time-picker-separator",children:s("svg",{viewBox:"0 0 10 20",xmlns:"http://www.w3.org/2000/svg",children:[s("circle",{cx:"5",cy:"5",r:"2.5"}),s("circle",{cx:"5",cy:"15",r:"2.5"})]})}),s("div",{id:"picker-line-6-minutes",ref:p.minutesRef})]})})})}),u&&s("tr",{children:s("td",{colspan:"2",style:{padding:0,border:"none"},children:s(F3,{item:f,lang:g,initialSettings:h,onSettingsChange:b},m)})})]})})}):null,W3=t=>{const{hass:e}=At(),i=!e,n=te(e);U(()=>{n.current=e},[e]);const[r,o]=M([]),[a,l]=M([]),[c,d]=M(!0),[u,h]=M(0),m=Ee(async()=>{if(!t||!t.entity_id){console.warn("useScheduleData: No item or entity_id provided");return}d(!0);try{let p;if(i?(console.log(" Development-Modus: Generiere Mock-Schedules fr",t.entity_id),p=Bw(t)):(console.log(" Production-Modus: Lade echte HA-Schedules fr",t.entity_id),p=await Iw(n.current,t.entity_id)),p&&p.length>0){const v=zw(p,t.entity_id,t.domain);console.log(" Schedule-Daten geladen:",{schedules:v.activeSchedules.length,timers:v.activeTimers.length,stats:v.stats}),l(v.activeSchedules),o(v.activeTimers)}else console.warn(" Keine Schedules gefunden fr",t.entity_id),l([]),o([]);d(!1)}catch(p){console.error(" Fehler beim Laden der Schedules:",p),l([]),o([]),d(!1)}},[t?.entity_id,i]);U(()=>{console.log(" useScheduleData: Loading data...",{item:t,hass:e,isDevelopment:i}),m()},[m,u]),U(()=>{if(r.length===0)return;const p=setInterval(()=>{console.log(" Auto-Update: Lade Timer neu"),m()},6e4);return()=>clearInterval(p)},[r.length,m]);const f=Ee(async p=>{if(p.type==="timer"?o(v=>v.filter(b=>b.id!==p.id)):l(v=>v.filter(b=>b.id!==p.id)),!i&&n.current)try{await Vw(n.current,p.id),setTimeout(()=>m(),500)}catch(v){console.error(" Fehler beim Lschen:",v)}},[i,m]),g=Ee(()=>{h(p=>p+1)},[]);return{timers:r,schedules:a,isLoading:c,refresh:g,deleteItem:f,setTimers:o,setSchedules:l}},O3=(t,e)=>{switch(e.type){case"SET_ACTION":return{...t,actionValue:e.payload};case"SET_SCHEDULER":return{...t,schedulerValue:e.payload};case"SET_TIME_FORMAT":return{...t,timeFormatValue:e.payload};case"SET_DAYS":return{...t,daysValue:e.payload};case"SET_REPEAT":return{...t,repeatValue:e.payload};case"SET_TIME":return{...t,timeValue:e.payload};case"SET_EDITING_ITEM":return{...t,editingItem:e.payload};case"SET_CLIMATE_SETTINGS":return{...t,climateSettings:e.payload,showClimateSettings:Object.keys(e.payload).length>0};case"SET_COVER_POSITION":return{...t,coverPosition:e.payload};case"SET_SHOW_CLIMATE_SETTINGS":return{...t,showClimateSettings:e.payload};case"SET_SHOW_COVER_SETTINGS":return{...t,showCoverSettings:e.payload};case"INCREMENT_PICKER_KEY":return{...t,pickerKey:t.pickerKey+1};case"RESET_FORM":const i=e.payload?.isCover,n=e.payload?.isClimate,r=e.payload?.t;return{...t,actionValue:r(i?"open":"turnOn"),schedulerValue:r("timerMode"),timeFormatValue:r("format24h"),daysValue:r("noDays"),repeatValue:r("once"),timeValue:"00:00",editingItem:null,climateSettings:{},coverPosition:50,showClimateSettings:n,showCoverSettings:!1,pickerKey:t.pickerKey+1};case"LOAD_EDIT_DATA":return{...t,editingItem:e.payload.item,actionValue:e.payload.actionValue,schedulerValue:e.payload.schedulerValue,timeValue:e.payload.timeValue,daysValue:e.payload.daysValue,climateSettings:e.payload.climateSettings||{},showClimateSettings:e.payload.showClimateSettings||!1,coverPosition:e.payload.coverPosition||50,showCoverSettings:e.payload.showCoverSettings||!1};default:return t}},$3=(t="de",e)=>{const i=Ee(l=>ee(`schedule.${l}`,t),[t]),n={actionValue:e?.domain==="cover"?i("open"):i("turnOn"),schedulerValue:i("timerMode"),timeFormatValue:i("format24h"),daysValue:i("noDays"),repeatValue:i("once"),timeValue:"00:00",editingItem:null,showClimateSettings:e?.domain==="climate",climateSettings:{},showCoverSettings:!1,coverPosition:50,pickerKey:0},[r,o]=pm(O3,n),a={setAction:Ee(l=>{o({type:"SET_ACTION",payload:l})},[]),setScheduler:Ee(l=>{o({type:"SET_SCHEDULER",payload:l})},[]),setTimeFormat:Ee(l=>{o({type:"SET_TIME_FORMAT",payload:l})},[]),setDays:Ee(l=>{o({type:"SET_DAYS",payload:l})},[]),setRepeat:Ee(l=>{o({type:"SET_REPEAT",payload:l})},[]),setTime:Ee(l=>{o({type:"SET_TIME",payload:l})},[]),setEditingItem:Ee(l=>{o({type:"SET_EDITING_ITEM",payload:l})},[]),setClimateSettings:Ee(l=>{o({type:"SET_CLIMATE_SETTINGS",payload:l})},[]),setCoverPosition:Ee(l=>{o({type:"SET_COVER_POSITION",payload:l})},[]),setShowClimateSettings:Ee(l=>{o({type:"SET_SHOW_CLIMATE_SETTINGS",payload:l})},[]),setShowCoverSettings:Ee(l=>{o({type:"SET_SHOW_COVER_SETTINGS",payload:l})},[]),incrementPickerKey:Ee(()=>{o({type:"INCREMENT_PICKER_KEY"})},[]),resetForm:Ee(()=>{o({type:"RESET_FORM",payload:{isCover:e?.domain==="cover",isClimate:e?.domain==="climate",t:i}})},[e?.domain,i]),loadEditData:Ee(l=>{o({type:"LOAD_EDIT_DATA",payload:l})},[])};return{...r,...a}},l0=t=>{const[e,i]=t.split(":").map(h=>parseInt(h)),n=e*60+i,r=new Date,o=new Date(r.getTime()+n*6e4),a=o.getHours().toString().padStart(2,"0"),l=o.getMinutes().toString().padStart(2,"0"),c=`${a}:${l}`,u=["sun","mon","tue","wed","thu","fri","sat"][o.getDay()];return{timeString:c,weekday:u,debug:{now:`${r.getHours()}:${r.getMinutes()}`,countdown:`${e}h ${i}min`,target:c,weekday:u}}},c0=(t,e,i)=>t===e("noDays")?[]:t===e("daily")?["daily"]:t===e("weekdays")?["mon","tue","wed","thu","fri"]:t===e("weekend")?["sat","sun"]:t.split(", ").map(n=>({[e("monday")]:"mon",[e("tuesday")]:"tue",[e("wednesday")]:"wed",[e("thursday")]:"thu",[e("friday")]:"fri",[e("saturday")]:"sat",[e("sunday")]:"sun"})[n]||n.toLowerCase().slice(0,3)),H3=(t,e,i,n,r)=>{if(!t.current)return null;let o,a;return i?(o=[n("open"),n("close"),n("setPosition")],a=e===n("open")?0:e===n("close")?1:e===n("setPosition")?2:0):(o=[n("turnOn"),n("turnOff")],a=e===n("turnOn")?0:1),new et(t.current,{data:o,lineHeight:30,selected:a,callback:(l,c)=>r(c)})},j3=(t,e,i)=>{if(!t.current)return null;const n=["0%","10%","20%","30%","40%","50%","60%","70%","80%","90%","100%"],r=n.indexOf(`${e}%`);return new et(t.current,{data:n,lineHeight:30,selected:r>=0?r:5,callback:(o,a)=>{const l=parseInt(a);i(l)}})},U3=(t,e,i,n,r)=>{if(!t.current)return null;const o=e===i("timerMode")?0:1;return new et(t.current,{data:[i("timerMode"),i("scheduleMode")],lineHeight:30,selected:o,callback:(a,l)=>{n(l),r(l===i("timerMode")?"Timer":"Schedule")}})},G3=(t,e,i,n)=>t.current?new et(t.current,{data:[e("formatAM"),e("formatPM"),e("format24h")],lineHeight:30,selected:2,callback:(r,o)=>{if(i(o),n.current){const a=o===e("format24h")?"24h":o===e("formatAM")?"AM":"PM";n.current.setHourMode(a)}}}):null,K3=(t,e,i,n)=>{if(!t.current)return null;const r=new lk(t.current,{data:e,lineHeight:30,selectedDays:[],callback:(o,a)=>{let l=i("noDays");o.length===7?l=i("daily"):o.length===5&&o.every(c=>e.slice(0,5).includes(c))?l=i("weekdays"):o.length===2&&o.every(c=>e.slice(5,7).includes(c))?l=i("weekend"):o.length>0&&(l=o.join(", ")),n(l)}});return r.updateButtonState=function(){const o=this.data[this.currentIndex];this.selectedDays.includes(o)?(this.selectButton.textContent=i("deselectDay"),this.selectButton.classList.add("deselect")):(this.selectButton.textContent=i("selectDay"),this.selectButton.classList.remove("deselect")),this.selectButton.classList.remove("is-hidden")},r},Y3=(t,e,i)=>t.current?new et(t.current,{data:[e("regular"),e("once")],lineHeight:30,selected:1,callback:(n,r)=>i(r)}):null,Z3=(t,e,i,n)=>{if(!t.current||!e.current)return null;const[r,o]=i?i.split(":"):["00","00"];return new rc(t.current,e.current,{minuteStep:5,initialHour:r||"00",initialMinute:o||"00",lineHeight:30,hourMode:"24h",callback:(a,l,c)=>n(c)})},cr=(t,e,i,n,r)=>{if(t?.domain==="climate"&&e===r("turnOn")&&Object.keys(i).length>0)return{service:"climate.set_temperature",entity_id:t.entity_id,service_data:i};if(t?.domain==="cover"){if(e===r("open"))return{service:"cover.open_cover",entity_id:t.entity_id};if(e===r("close"))return{service:"cover.close_cover",entity_id:t.entity_id};if(e===r("setPosition"))return{service:"cover.set_cover_position",entity_id:t.entity_id,service_data:{position:n}}}return{service:e===r("turnOn")?`${t.domain}.turn_on`:`${t.domain}.turn_off`,entity_id:t.entity_id}},q3=(t,e,i,n,r,o)=>{e==="open_cover"?i(o("open")):e==="close_cover"?i(o("close")):e==="set_cover_position"&&(i(o("setPosition")),t.serviceData?.position!==void 0?(console.log(" Lade Cover-Position:",t.serviceData.position),n(t.serviceData.position)):n(50),r(!0))},X3=(t,e,i,n,r,o)=>{i(o(e==="set_temperature"?"turnOn":"turnOff")),t.serviceData&&Object.keys(t.serviceData).length>0?(console.log(" Lade Climate-Settings:",t.serviceData),n(t.serviceData),r(!0)):(n({}),r(!1))},J3=(t,e,i)=>{e(i(t==="turn_on"?"turnOn":"turnOff"))},Q3=(t,e,i,n,r)=>{e(r("timerMode"));const o=Math.floor(t.remaining/60),a=t.remaining%60,l=`${o.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`;i(l),n(r("noDays"))},eC=(t,e,i,n,r,o)=>{if(e(o("scheduleMode")),i(t.time),t.days)n(t.days);else if(t.daysRaw){const a=r();t.daysRaw.length===7?n(o("daily")):t.daysRaw.length===5&&t.daysRaw.every(l=>a.slice(0,5).includes(l))?n(o("weekdays")):t.daysRaw.length===2&&t.daysRaw.every(l=>a.slice(5,7).includes(l))?n(o("weekend")):t.daysRaw.length>0?n(t.daysRaw.join(", ")):n(o("noDays"))}else n(o("noDays"))},tC=(t,e)=>({heat:ee("ui.climate.heat",e),cool:ee("ui.climate.cool",e),auto:ee("ui.climate.auto",e),dry:ee("ui.climate.dry",e),fan_only:ee("ui.climate.fanOnly",e),off:ee("ui.climate.off",e)})[t]||t,iC=(t,e,i,n,r,o)=>{const a=t?.area||t?.name||t?.friendly_name||t?.attributes?.friendly_name||t?.entity_id?.split(".")[1]?.replace(/_/g," ")||"Gert";if(t?.domain==="climate"&&Object.keys(i).length>0){const l=tC(i.hvac_mode,r),c=i.temperature;return`${a} / ${l} / ${c}C`}else return t?.domain==="cover"&&e===o("setPosition")?`${a} / ${o("position")} ${n}%`:`${a} / ${e}`},nC=({item:t,onTimerCreate:e,onScheduleCreate:i,lang:n="de"})=>{const{hass:r}=At(),o=!r,{timers:a,schedules:l,isLoading:c,refresh:d,deleteItem:u}=W3(t),{actionValue:h,schedulerValue:m,timeFormatValue:f,daysValue:g,repeatValue:p,timeValue:v,editingItem:b,showClimateSettings:y,climateSettings:w,showCoverSettings:_,coverPosition:k,pickerKey:N,setAction:C,setScheduler:S,setTimeFormat:x,setDays:B,setRepeat:A,setTime:P,setEditingItem:I,setClimateSettings:z,setCoverPosition:D,setShowClimateSettings:L,setShowCoverSettings:E,resetForm:W}=$3(n,t);console.log(" SCHEDULETAB RENDERED ",{item:t,hass:r,isDevelopment:o});const F=te(r);U(()=>{F.current=r},[r]);const[K,G]=M("all"),[$,Q]=M(null),[re,he]=M(!1),[O,H]=M(!1),X=de=>ee(`schedule.${de}`,n),me=()=>[X("monday"),X("tuesday"),X("wednesday"),X("thursday"),X("friday"),X("saturday"),X("sunday")];U(()=>{const de=setTimeout(()=>H(!0),50);return()=>clearTimeout(de)},[]),U(()=>{const de=t?.domain==="climate",pe=h===X("turnOn");L(de&&pe),pe||z({})},[h,t?.domain]),U(()=>{const de=t?.domain==="cover",pe=h===X("setPosition");E(de&&pe),pe||D(50)},[h,t?.domain]);const q=()=>{W(),Q(null),he(!1),console.log(" Alle Picker-States zurckgesetzt + Picker neu gemountet")},ce={action:te(null),position:te(null),scheduler:te(null),timeFormat:te(null),days:te(null),repeat:te(null),hoursRef:te(null),minutesRef:te(null)},ie=te({}),J=te(null),Y=te(null),oe=()=>K==="all"?[...a,...l]:K==="timer"?a:l;U(()=>{if(!re){ie.current={};return}const de=()=>{Object.keys(ce).forEach(Le=>{ce[Le].current?._pickerInstance&&(ce[Le].current._pickerInstance=null)}),J.current&&(J.current=null)},pe=setTimeout(()=>{const Le=me(),Fe=t?.domain==="cover";if(!ie.current.action){const Ae=H3(ce.action,h,Fe,X,C);Ae&&(ce.action.current._pickerInstance=Ae,ie.current.action=!0)}if(!ie.current.position&&_){const Ae=j3(ce.position,k,D);Ae&&(ce.position.current._pickerInstance=Ae,ie.current.position=!0)}if(!ie.current.scheduler){const Ae=U3(ce.scheduler,m,X,S,ae);Ae&&(ce.scheduler.current._pickerInstance=Ae,ie.current.scheduler=!0)}if(!ie.current.timeFormat){const Ae=G3(ce.timeFormat,X,x,J);Ae&&(ce.timeFormat.current._pickerInstance=Ae,ie.current.timeFormat=!0)}if(!ie.current.days){const Ae=K3(ce.days,Le,X,B);Ae&&(ce.days.current._pickerInstance=Ae,ie.current.days=!0)}if(!ie.current.repeat){const Ae=Y3(ce.repeat,X,A);Ae&&(ce.repeat.current._pickerInstance=Ae,ie.current.repeat=!0)}if(!ie.current.time){const Ae=Z3(ce.hoursRef,ce.minutesRef,v,P);Ae&&(J.current=Ae,ie.current.time=!0)}},100);return()=>{clearTimeout(pe),de()}},[re,n,h,m,v]);const ae=de=>{if(!Y.current)return;const pe=de==="Timer";Y.current.querySelectorAll(".schedule-option").forEach(Ae=>{Ae.style.display=pe?"none":"table-row"});const Fe=Y.current.querySelector("#time-label");Fe&&(Fe.textContent=X(pe?"timerMode":"scheduleMode")),pe&&J.current&&(J.current.selectedHour="00",J.current.selectedMinute="00",J.current.hourMode="24h",J.current.reinitHours(),J.current.updateValue())},V=de=>{if(!Y.current)return;const pe=Y.current.querySelector(`#picker-container-line-${de}`);if(!pe)return;const Le=getComputedStyle(pe).display==="none";Y.current.querySelectorAll("div.picker").forEach(Ae=>{getComputedStyle(Ae).display!=="none"&&Ae!==pe&&ne(Ae,!1)}),ne(pe,Le)},ne=(de,pe)=>{pe?(de.style.display="block",de.animate([{height:"0px",opacity:0,transform:"translateY(-3px)"},{height:"210px",opacity:1,transform:"translateY(0px)"}],{duration:150,easing:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fill:"forwards"}).onfinish=()=>{de.style.height="210px",de.style.opacity="1"}):de.animate([{height:"210px",opacity:1,transform:"translateY(0px)"},{height:"0px",opacity:0,transform:"translateY(-3px)"}],{duration:120,easing:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fill:"forwards"}).onfinish=()=>{de.style.display="none"}},Z=de=>{console.log(" Edit Item:",de.id),I(de);const pe=de.actionRaw?.includes(".")?de.actionRaw.split(".")[1]:de.action;de.domain==="cover"?q3(de,pe,C,D,E,X):de.domain==="climate"?X3(de,pe,C,z,L,X):J3(pe,C,X),de.type==="timer"?Q3(de,S,P,B,X):eC(de,S,P,B,me,X),setTimeout(()=>{ie.current.time=!1,he(!0),setTimeout(()=>{if(J.current&&de.time){const[Le,Fe]=de.time.split(":");console.log(" Setze Zeit:",{hour:Le,minute:Fe}),J.current.setTime(Le,Fe)}},250)},100)},se=de=>{u(de)},R=async(de,pe)=>{pe?(console.log(" UPDATE Item:",pe.id),de?await le():await be()):(I(null),de?await j():await ye()),q(),setTimeout(()=>d(),1e3)},j=async()=>{console.log(" Erstelle Timer...");const{timeString:de,weekday:pe,debug:Le}=l0(v);console.log(" Timer-Berechnung:",Le);const Fe=cr(t,h,w,k,X),bi=`Timer - ${t?.name||t?.friendly_name||t?.entity_id?.split(".")[1]?.replace(/_/g," ")||"Gert"} - ${de}`;await F.current.callService("scheduler","add",{weekdays:[pe],timeslots:[{start:de,actions:[Fe]}],name:bi,repeat_type:"single"}),console.log(" Timer erfolgreich erstellt!")},le=async()=>{console.log(" Update Timer...");const{timeString:de,weekday:pe,debug:Le}=l0(v);console.log(" Timer-Berechnung:",Le);const Fe=cr(t,h,w,k,X);await F.current.callService("scheduler","edit",{entity_id:b.id,weekdays:[pe],timeslots:[{start:de,actions:[Fe]}],name:iC(t,h,w,k,n,X),repeat_type:"single"}),console.log(" Timer aktualisiert!")},ye=async()=>{console.log(" Erstelle Schedule..."),me();const de=c0(g,X),pe=cr(t,h,w,k,X),Le=t?.name||t?.friendly_name||t?.entity_id?.split(".")[1]?.replace(/_/g," ")||"Gert",Fe=de.map(bi=>bi.toUpperCase()).join(","),Ae=`Zeitplan - ${Le} - ${Fe} - ${v}`;console.log(" Schedule-Daten:",{weekdays:de,time:v,name:Ae,action:pe}),await F.current.callService("scheduler","add",{weekdays:de,timeslots:[{start:v,actions:[pe]}],name:Ae,repeat_type:p===X("once")?"single":"repeat"}),console.log(" Schedule erfolgreich erstellt!")},be=async()=>{console.log(" Update Schedule..."),me();const de=c0(g,X),pe=cr(t,h,w,k,X),Fe=`${t?.name||t?.friendly_name||t?.entity_id?.split(".")[1]?.replace(/_/g," ")||"Gert"} - ${v}`;await F.current.callService("scheduler","edit",{entity_id:b.id,weekdays:de,timeslots:[{start:v,actions:[pe]}],name:Fe,repeat_type:"repeat"}),console.log(" Schedule aktualisiert!")};return s("div",{ref:Y,className:`scheduler-tab ${O?"visible":""}`,children:[s(P3,{activeTab:K,onTabChange:G,showPicker:re,t:X}),s(R3,{items:oe(),isLoading:c,activeTab:K,showPicker:re,onItemClick:Z,onDelete:se,t:X}),!b&&!re&&s(B3,{onClick:()=>he(!0),t:X}),s(V3,{showPicker:re,editingItem:b,actionValue:h,showCoverSettings:_,coverPosition:k,schedulerValue:m,timeFormatValue:f,daysValue:g,repeatValue:p,timeValue:v,showClimateSettings:y,climateSettings:w,pickerKey:N,item:t,lang:n,pickerRefs:ce,onRowClick:V,onClimateSettingsChange:de=>{z({...w,...de})},t:X}),s(z3,{showPicker:re,schedulerValue:m,daysValue:g,editingItem:b,onCancel:q,onConfirm:R,t:X})]})},sC={wohnzimmer:["wohnzimmer","living room","salon","living"],schlafzimmer:["schlafzimmer","bedroom","chambre","schlaf"],kche:["kche","kitchen","cuisine","kueche"],bad:["bad","bathroom","bain","badezimmer","bath"],bro:["bro","office","bureau","arbeitszimmer","buero"],flur:["flur","hallway","corridor","gang","hall"],garage:["garage"],garten:["garten","garden","jardin"],terrasse:["terrasse","terrace","patio"],keller:["keller","basement","cave","cellar"],kinderzimmer:["kinderzimmer","kids room","children","nursery"],esszimmer:["esszimmer","dining room","dining","essen"]},rC={"":["film","movie","kino","cinema","video"],"":["party","feier","celebration","fest"],"":["nacht","night","schlaf","sleep","evening"],"":["morgen","morning","aufwach","wake","sunrise"],"":["romantik","romantic","romance","love"],"":["arbeit","work","office","bro","buero"],"":["entspan","relax","chill","ruhe","cozy"],"":["essen","dinner","lunch","mahlzeit","meal"],"":["licht","light","lampe","lamp","beleuchtung"],"":["rollo","blind","shade","jalousie","curtain"],"":["heizung","heating","klima","climate","temperatur"],"":["media","tv","fernseh","television","entertainment"],"":["sonnenaufgang","sunrise","dawn","morgen"],"":["sonnenuntergang","sunset","dusk","abend"],"":["haus","home","zuhause","house"],"":["sicher","security","lock","alarm","secure"],"":["auto","car","vehicle","garage","fahrzeug"],"":["pflanze","plant","garten","garden","green"],"":["benachrichtigung","notification","alert","reminder"],"":["energie","energy","power","strom"],"":["musik","music","audio","sound"],"":["farbe","color","rgb","ambiance"],"":["feuer","fire","warm","heat"],"":["kalt","cold","cool","khlen"]},oC={scene:"",script:"",automation:""},En={SAME_AREA:50,ENTITY_INVOLVED:30,SAME_DOMAIN:20,GLOBAL_ACTION_PENALTY:-20,BASE_SCORE:50},Bi={SUCCESS:"success",ERROR:"error",WARNING:"warning",INFO:"info"},gg="Kein Raum",aC="",lC=(t,e,i)=>({id:t.entity_id,name:t.attributes.friendly_name||t.entity_id.split(".")[1],type:t.domain,area:vg(t,i),state:t.state,icon:dC(t),entities:t.attributes.entity_id||[],last_triggered:t.attributes.last_triggered,relevance:cC(t,e,i)}),cC=(t,e,i)=>{let n=En.BASE_SCORE;const r=vg(t,i),o=e.attributes?.area_id||e.area;return r&&o&&r===o&&(n+=En.SAME_AREA),t.attributes.entity_id?.includes(e.entity_id)&&(n+=En.ENTITY_INVOLVED),(t.attributes.entity_id?.map(l=>l.split(".")[0])||[]).includes(e.domain)&&(n+=En.SAME_DOMAIN),(r==="Haus"||!r||r===gg)&&(n+=En.GLOBAL_ACTION_PENALTY),Math.min(100,Math.max(0,n))},vg=(t,e=[])=>{if(t.attributes?.area_id)return t.attributes.area_id;if(t.area)return t.area;const i=(t.attributes?.friendly_name||"").toLowerCase();for(const[n,r]of Object.entries(sC))if(r.some(o=>i.includes(o)))return n.charAt(0).toUpperCase()+n.slice(1);if(t.attributes?.entity_id?.length>0){const n=t.attributes.entity_id[0],r=e.find(o=>o.entity_id===n);if(r?.attributes?.area_id)return r.attributes.area_id;if(r?.area)return r.area}return gg},dC=t=>{if(t.attributes?.icon)return t.attributes.icon;const e=(t.attributes?.friendly_name||"").toLowerCase();for(const[i,n]of Object.entries(rC))if(n.some(r=>e.includes(r)))return i;return oC[t.domain]||aC},uC=(t,e=[])=>e.some(i=>{try{return new RegExp("^"+i.replace(/\*/g,".*")+"$").test(t)}catch(n){return console.warn(`Invalid exclusion pattern: ${i}`,n),!1}}),hC=(t,e,i=0)=>t.filter(n=>n.relevance>=i).sort((n,r)=>{if(r.relevance!==n.relevance)return r.relevance-n.relevance;const o={scene:0,script:1,automation:2};return o[n.type]!==o[r.type]?o[n.type]-o[r.type]:n.name.localeCompare(r.name)}),yg=(t,e=Bi.INFO,i=3e3,n={})=>{console.log(" showToast called:",{message:t,type:e,duration:i,options:n});const r=document.createElement("div");r.className=`toast toast-${e}`,r.setAttribute("role","alert"),r.setAttribute("aria-live","polite");const o=mC(e);console.log(" Toast element created:",r),r.innerHTML=`
    <div class="toast-icon">${o}</div>
    <div class="toast-message">${fC(t)}</div>
    <button class="toast-close" aria-label="Schlieen"></button>
  `;const a=n.position||"top-center";r.classList.add(`toast-${a}`);const l=window.__fastSearchToastContainer||document.getElementById("toast-container")||document.body;console.log(" Toast container found:",l,"via:",window.__fastSearchToastContainer?"window ref":document.getElementById("toast-container")?"getElementById":"body fallback"),l.appendChild(r),console.log(" Toast appended to DOM, total toasts:",l.querySelectorAll(".toast").length),r.querySelector(".toast-close").addEventListener("click",()=>na(r)),requestAnimationFrame(()=>{r.classList.add("toast-visible")});const d=setTimeout(()=>{na(r)},i);return n.onClick&&(r.style.cursor="pointer",r.addEventListener("click",u=>{u.target.classList.contains("toast-close")||(n.onClick(),na(r))})),r._timeoutId=d,r},na=t=>{!t||!t.parentNode||(t._timeoutId&&clearTimeout(t._timeoutId),t.classList.remove("toast-visible"),t.classList.add("toast-hiding"),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},300))},mC=t=>({[Bi.SUCCESS]:"",[Bi.ERROR]:"",[Bi.WARNING]:"",[Bi.INFO]:""})[t]||"",fC=t=>{const e=document.createElement("div");return e.textContent=t,e.innerHTML},sa=(t,e=3e3,i={})=>yg(t,Bi.SUCCESS,e,i),d0=(t,e=3e3,i={})=>yg(t,Bi.ERROR,e,i),pC=t=>{const e=t.area||"Wohnzimmer",i=t.entity_id,n=[{id:"scene.filmabend",name:"Filmabend",area:"Wohnzimmer",icon:"",entities:["light.wohnzimmer","media_player.tv","cover.wohnzimmer"]},{id:"scene.romantik",name:"Romantik",area:"Schlafzimmer",icon:"",entities:["light.schlafzimmer","light.nachttisch"]},{id:"scene.party",name:"Party",area:"Alle Rume",icon:"",entities:["light.*","media_player.*"]},{id:"scene.gute_nacht",name:"Gute Nacht",area:"Haus",icon:"",entities:["light.*","cover.*","lock.*"]},{id:"scene.aufwachen",name:"Aufwachen",area:"Schlafzimmer",icon:"",entities:["light.schlafzimmer","cover.schlafzimmer","climate.schlafzimmer"]},{id:"scene.arbeiten",name:"Arbeiten",area:"Bro",icon:"",entities:["light.buero","climate.buero"]},{id:"scene.entspannen",name:"Entspannen",area:"Wohnzimmer",icon:"",entities:["light.wohnzimmer","media_player.tv"]}],r=[{id:"script.alle_lichter_aus",name:"Alle Lichter aus",area:"Haus",icon:"",entities:["light.*"]},{id:"script.rollos_schliessen",name:"Rolllden schlieen",area:"Haus",icon:"",entities:["cover.*"]},{id:"script.heizung_nachtmodus",name:"Heizung Nachtmodus",area:"Haus",icon:"",entities:["climate.*"]},{id:"script.multimedia_aus",name:"Multimedia aus",area:"Haus",icon:"",entities:["media_player.*"]},{id:"script.morgenroutine",name:"Morgenroutine",area:"Haus",icon:"",entities:["light.*","cover.*","climate.*"]}],o=[{id:"automation.motion_lights",name:"Bewegungslicht",area:e,icon:"",entities:[`light.${e.toLowerCase()}`,"binary_sensor.motion_*"]},{id:"automation.sunrise",name:"Sonnenaufgang Simulation",area:"Haus",icon:"",entities:["light.*","cover.*"]},{id:"automation.vacation",name:"Urlaubsmodus",area:"Haus",icon:"",entities:["light.*","cover.*","climate.*"]},{id:"automation.energy_saving",name:"Energiesparmodus",area:"Haus",icon:"",entities:["light.*","climate.*","media_player.*"]}],a=c=>c.area===e||c.area==="Haus"||c.area==="Alle Rume"?!0:c.entities.some(d=>{if(d===i)return!0;if(d.endsWith("*")){const u=d.slice(0,-1);return i.startsWith(u)}return!1});return[...n.filter(a).map(c=>({...c,type:"scene",relevance:c.area===e?100:50})),...r.filter(a).map(c=>({...c,type:"script",relevance:c.entities.includes(i)?90:40})),...o.filter(a).map(c=>({...c,type:"automation",relevance:c.area===e?80:30}))].sort((c,d)=>d.relevance!==c.relevance?d.relevance-c.relevance:c.name.localeCompare(d.name))},gC=(t,e)=>{const i=(t.attributes?.friendly_name||t.name||"").toLowerCase(),n=(e.attributes?.friendly_name||e.name||"").toLowerCase(),r=t.domain,o=e.domain;return!!(o==="climate"&&(r==="sensor"||r==="binary_sensor")&&(i.includes("temperatur")||i.includes("temperature")||i.includes("luftfeuchtigkeit")||i.includes("humidity")||i.includes("fenster")||i.includes("window"))||o==="media_player"&&r==="media_player"&&(n.includes("tv")&&i.includes("soundbar")||n.includes("soundbar")&&i.includes("tv"))||o==="light"&&r==="binary_sensor"&&(i.includes("bewegung")||i.includes("motion"))||o==="cover"&&r==="binary_sensor"&&(i.includes("fenster")||i.includes("window")))},vC=(t,e)=>Me(()=>{if(!t||t.length===0)return[];const i=e.area||"Wohnzimmer",n=e.entity_id;return t.filter(l=>!(l.entity_id===n||["scene","script","automation"].includes(l.domain)||l.domain==="settings")).map(l=>{let c=0;return l.area===i&&(c+=100),gC(l,e)&&(c+=80),l.floor_id&&l.floor_id===e.floor_id&&(c+=30),l.entity_id.includes(n.split(".")[1])&&(c+=60),{...l,relevance:c}}).filter(l=>l.relevance>=30).sort((l,c)=>c.relevance!==l.relevance?c.relevance-l.relevance:(l.attributes?.friendly_name||l.name||"").localeCompare(c.attributes?.friendly_name||c.name||"")).slice(0,10)},[t,e.entity_id,e.area,e.floor_id]),yC=({type:t})=>{switch(t){case"scene":return s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s("rect",{width:"7",height:"5",rx:"0.6",transform:"matrix(0 -1 -1 0 22 21)",stroke:"currentColor",strokeWidth:"1.5"}),s("rect",{width:"7",height:"5",rx:"0.6",transform:"matrix(0 -1 -1 0 7 15.5)",stroke:"currentColor",strokeWidth:"1.5"}),s("rect",{width:"7",height:"5",rx:"0.6",transform:"matrix(0 -1 -1 0 22 10)",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M17 17.5H13.5C12.3954 17.5 11.5 16.6046 11.5 15.5V8.5C11.5 7.39543 12.3954 6.5 13.5 6.5H17",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M11.5 12H7",stroke:"currentColor",strokeWidth:"1.5"})]});case"script":return s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s("path",{d:"M3.5 6.00398C3.5 7.80795 6.35714 9 11.5 9C18.5 9 19.5 6.00398 19.5 6.00398C19.5 6.00398 18.5 3 11.5 3C6.35714 3 3.5 4.2 3.5 6.00398Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M3.5 12.004C3.5 13.808 6.35714 15 11.5 15C18.5 15 19.5 12.004 19.5 12.004C19.5 12.004 18.5 9 11.5 9C6.35714 9 3.5 10.2 3.5 12.004Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M3.5 18.004C3.5 19.808 6.35714 21 11.5 21C18.5 21 19.5 18.004 19.5 18.004C19.5 18.004 18.5 15 11.5 15C6.35714 15 3.5 16.2 3.5 18.004Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M19.5 12C19.5 12 20.5 11.025 20.5 9C20.5 6.975 19.5 6 19.5 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M20.5 4C20.5 5.35 19.5 6 19.5 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M19.5 18C19.5 18 20.5 17.025 20.5 15C20.5 12.975 19.5 12 19.5 12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M20.5 20C20.5 18.65 19.5 18 19.5 18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]});case"automation":return s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s("path",{d:"M6 20.5C7 11 11.5 8 20 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M15.9086 3.80941L20.3946 5.90126L18.3028 10.3873",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M5 7C6.10457 7 7 6.10457 7 5C7 3.89543 6.10457 3 5 3C3.89543 3 3 3.89543 3 5C3 6.10457 3.89543 7 5 7Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M16 20.2426L18.1213 18.1213M18.1213 18.1213L20.2426 16M18.1213 18.1213L16 16M18.1213 18.1213L20.2426 20.2426",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]});default:return null}},bC=({item:t,index:e,favorites:i,onToggleFavorite:n,onActionExecute:r,onActionNavigate:o})=>{const a=t.type&&["scene","script","automation"].includes(t.type);return s(T.div,{className:"action-item",style:{cursor:"pointer"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},whileTap:{scale:.98},transition:{opacity:{duration:.3,delay:e*.05},y:{duration:.3,delay:e*.05},scale:{duration:.2}},onClick:()=>{o&&o(t)},children:[s("div",{className:"action-type-icon",children:a?s(yC,{type:t.type}):""}),s("div",{className:"action-content",children:[s("div",{className:"action-name",children:t.attributes?.friendly_name||t.name}),s("div",{className:"action-meta",children:a?s(ve,{children:[s("span",{className:`action-type ${t.type}`,children:t.type}),s("span",{className:"action-area",children:t.area})]}):s(ve,{children:[s("span",{className:"action-type",style:{background:"rgb(94, 92, 230)",border:"1px solid rgba(94, 92, 230, 0.5)"},children:t.domain}),t.state&&s("span",{className:"action-area",children:t.state})]})})]}),s("div",{className:"action-buttons",children:[a&&t.type!=="automation"&&s(T.button,{className:"action-execute-btn",onClick:l=>{l.stopPropagation(),r?.(t);const c=l.currentTarget;c.style.boxShadow="0 0 25px rgba(48, 209, 88, 0.8), 0 0 50px rgba(48, 209, 88, 0.5)",setTimeout(()=>{c.style.boxShadow=""},300)},whileHover:{scale:1.1},whileTap:{scale:.9},transition:{duration:.15},children:s("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s("path",{d:"M12 2V6",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 18V22",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M22 12H18",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M6 12H2",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M4.92896 4.92896L7.75738 7.75738",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M16.2427 16.2427L19.0711 19.0711",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M19.071 4.92896L16.2426 7.75738",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M7.75732 16.2427L4.9289 19.0711",strokeLinecap:"round",strokeLinejoin:"round"})]})}),s(T.button,{className:`action-favorite-btn ${i.has(t.id||t.entity_id)?"active":""}`,onClick:l=>{l.stopPropagation(),n(t.id||t.entity_id)},whileHover:{scale:1.05},whileTap:{scale:.95},transition:{duration:.2},children:s("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinejoin:"round",children:s("path",{d:"M22 8.86222C22 10.4087 21.4062 11.8941 20.3458 12.9929C17.9049 15.523 15.5374 18.1613 13.0053 20.5997C12.4249 21.1505 11.5042 21.1304 10.9488 20.5547L3.65376 12.9929C1.44875 10.7072 1.44875 7.01723 3.65376 4.73157C5.88044 2.42345 9.50794 2.42345 11.7346 4.73157L11.9998 5.00642L12.2648 4.73173C13.3324 3.6245 14.7864 3 16.3053 3C17.8242 3 19.2781 3.62444 20.3458 4.73157C21.4063 5.83045 22 7.31577 22 8.86222Z"})})})]})]},t.id||t.entity_id)},wC=({selectedFilter:t,onFilterChange:e,filterSelectorRef:i,sliderPosition:n,t:r})=>{const o=["actions","favorites","environment"];return s("div",{ref:i,className:"context-filter",children:[s(T.div,{className:"context-filter-slider",animate:{x:n.x,width:n.width,scaleX:[1,1.12,.96,1.03,1],scaleY:[1,.94,1.06,.99,1]},transition:{x:{type:"spring",stiffness:280,damping:22,mass:1.5},width:{type:"spring",stiffness:280,damping:22,mass:1.5},scaleX:{duration:.6,times:[0,.2,.5,.8,1],ease:[.34,1.56,.64,1]},scaleY:{duration:.6,times:[0,.2,.5,.8,1],ease:[.34,1.56,.64,1]}}}),o.map(a=>{const l=t===a;return s(T.button,{className:`filter-tab ${l?"active":""}`,onClick:()=>e(a),whileHover:l?{}:{scale:1.04},whileTap:l?{}:{scale:.96},transition:{duration:.2},children:r(a==="actions"?"tabActions":a==="favorites"?"tabFavorites":"tabEnvironment")},a)})]})},u0=({item:t,onActionExecute:e,onActionNavigate:i,lang:n="de"})=>{const{favorites:r,toggleFavorite:o}=At(),[a]=sc(),[l]=fp(),c=A=>ee(`context.${A}`,n),[d,u]=M("actions"),[h,m]=M(!1),[f,g]=M([]),[p,v]=M(!1);te(null);const[b,y]=M({x:0,width:0}),w=te(null),_=window.location.hostname==="localhost";U(()=>{console.log(_?"[ContextTab] Running in DEVELOPMENT mode - using Mock Data":"[ContextTab] Running in PRODUCTION mode - using Home Assistant Data")},[_]);const N={...{entity_id:"light.wohnzimmer",domain:"light",area:"Wohnzimmer",attributes:{friendly_name:"Wohnzimmer Licht"}},...t};U(()=>{const A=()=>{if(w.current){const I=["actions","favorites","environment"].indexOf(d),z=w.current.querySelectorAll(".filter-tab");if(z[I]){const D=z[I],L=w.current.getBoundingClientRect(),E=D.getBoundingClientRect(),W=E.left-L.left,F=E.width;y({x:Math.round(W),width:Math.round(F)})}}};return setTimeout(A,50),window.addEventListener("resize",A),()=>{window.removeEventListener("resize",A)}},[d]),U(()=>{const A=setTimeout(()=>m(!0),50);return()=>clearTimeout(A)},[]);const C=vC(a,N);U(()=>{v(!0),_?setTimeout(()=>{const A=pC();g(A),v(!1)},300):S()},[N.entity_id,_,a]);const S=()=>{if(!a||a.length===0){console.warn("ContextTab: No entities available"),g([]),v(!1);return}try{const A=a.filter(L=>["script","automation","scene"].includes(L.domain)),P=l?.excludedPatterns||[],z=A.filter(L=>!uC(L.entity_id,P)).map(L=>lC(L,N,a)),D=hC(z);g(D),v(!1)}catch(A){console.error("ContextTab: Error loading actions",A),d0(n==="de"?"Fehler beim Laden der Aktionen":"Error loading actions",3e3,{position:"bottom-center"}),g([]),v(!1)}},x=async A=>{if(!e){console.warn("ContextTab: onActionExecute callback not provided");return}try{const P=document.querySelector(`[data-action-id="${A.id}"] .action-execute-btn`);if(P&&(P.style.boxShadow="0 0 25px rgba(48, 209, 88, 0.8), 0 0 50px rgba(48, 209, 88, 0.5)"),A.type==="scene")await e("scene","turn_on",{entity_id:A.id}),console.log(" About to show scene toast"),sa(n==="de"?"Szene aktiviert":"Scene activated",3e3,{position:"bottom-center"}),console.log(" Scene toast called");else if(A.type==="script")await e("script","turn_on",{entity_id:A.id}),console.log(" About to show script toast"),sa(n==="de"?"Skript ausgefhrt":"Script executed",3e3,{position:"bottom-center"}),console.log(" Script toast called");else if(A.type==="automation"){const I=A.state==="on"?"turn_off":"turn_on";await e("automation",I,{entity_id:A.id}),console.log(" About to show automation toast"),sa(I==="turn_on"?n==="de"?"Automation aktiviert":"Automation activated":n==="de"?"Automation deaktiviert":"Automation deactivated",3e3,{position:"bottom-center"}),console.log(" Automation toast called")}setTimeout(()=>{P&&(P.style.boxShadow="")},300)}catch(P){console.error("ContextTab: Execute failed",P),d0(n==="de"?"Fehler beim Ausfhren":"Execution failed",3e3,{position:"bottom-center"})}},B=Me(()=>d==="actions"?f.filter(A=>A.type==="scene"||A.type==="script"||A.type==="automation"):d==="favorites"?f.filter(A=>r.has(A.id)):d==="environment"?C:[],[d,f,r,C]);return Me(()=>({actions:f.length,favorites:f.filter(A=>r.has(A.id)).length,environment:d==="environment"?B.length:0}),[f,r,d,B]),s("div",{className:`context-tab ${h?"visible":""}`,children:[s(wC,{selectedFilter:d,onFilterChange:u,filterSelectorRef:w,sliderPosition:b,t:c}),s("div",{className:"context-container",children:p?s("div",{className:"context-loading",children:c("loading")}):B.length===0?s("div",{className:"context-empty",children:[s("div",{className:"empty-icon",children:d==="favorites"?"":d==="environment"?"":""}),s("div",{className:"empty-text",children:c(d==="favorites"?"noFavorites":d==="environment"?"noEnvironment":"noActions")})]}):s("div",{className:"context-list",children:B.map((A,P)=>s(bC,{item:A,index:P,favorites:r,onToggleFavorite:o,onActionExecute:x,onActionNavigate:i},A.id||A.entity_id))})})]})},bg=[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s("path",{d:"M2.6 4H8.77805C8.92127 4 9.05977 4.05124 9.16852 4.14445L12.3315 6.85555C12.4402 6.94876 12.5787 7 12.722 7H21.4C21.7314 7 22 7.26863 22 7.6V10.4C22 10.7314 21.7314 11 21.4 11H2.6C2.26863 11 2 10.7314 2 10.4V4.6C2 4.26863 2.26863 4 2.6 4Z",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M22 10L22 14",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M2 10V19.4C2 19.7314 2.26863 20 2.6 20H13",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M19 21C20.1046 21 21 20.1046 21 19C21 17.8954 20.1046 17 19 17C18.6357 17 18.2942 17.0974 18 17.2676C17.4022 17.6134 17 18.2597 17 19C17 19.7403 17.4022 20.3866 18 20.7324C18.2942 20.9026 18.6357 21 19 21Z",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M19 22C20.6569 22 22 20.6569 22 19C22 17.3431 20.6569 16 19 16C17.3431 16 16 17.3431 16 19C16 20.6569 17.3431 22 19 22Z",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"0.3 2"})]}),s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s("path",{d:"M12 21H4C2.89543 21 2 20.1046 2 19V5C2.89543 3 2.89543 3 4 3H20C21.1046 3 22 3.89543 22 5V12",strokeLinecap:"round"}),s("path",{d:"M2 7L22 7",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M5 5.01L5.01 4.99889",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M8 5.01L8.01 4.99889",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M11 5.01L11.01 4.99889",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M18 14L19.2246 15.0436L20.8284 15.1716L20.9564 16.7754L22 18L20.9564 19.2246L20.8284 20.8284L19.2246 20.9564L18 22L16.7754 20.9564L15.1716 20.8284L15.0436 19.2246L14 18L15.0436 16.7754L15.1716 15.1716L16.7754 15.0436L18 14Z"}),s("path",{d:"M16.7754 20.9564L18 22V14L16.7754 15.0436L15.1716 15.1716L15.0436 16.7754L14 18L15.0436 19.2246L15.1716 20.8284L16.7754 20.9564Z",fill:"currentColor"})]}),s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s("path",{d:"M18 3L18 7",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M18 11.01L18.01 10.9989",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M22 7V11V19.4C22 19.7314 21.7314 20 21.4 20H2.6C2.26863 20 2 19.7314 2 19.4V11",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M14 7H12.722C12.5787 7 12.4402 6.94876 12.3315 6.85555L9.16852 4.14445C9.05977 4.05124 8.92127 4 8.77805 4H2.6C2.26863 4 2 4.26863 2 4.6V11H14",strokeLinecap:"round",strokeLinejoin:"round"})]}),s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s("path",{d:"M12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2Z",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M4.271 18.3457C4.271 18.3457 6.50002 15.5 12 15.5C17.5 15.5 19.7291 18.3457 19.7291 18.3457",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 12C13.6569 12 15 10.6569 15 9C15 7.34315 13.6569 6 12 6C10.3431 6 9 7.34315 9 9C9 10.6569 10.3431 12 12 12Z",strokeLinecap:"round",strokeLinejoin:"round"})]})],kC=["de","en"],_C={de:"",en:"",fr:"",es:"",it:"",nl:"",pt:"",ru:"",zh:"",tr:""},xC={de:"Deutsch",en:"English",fr:"Franais",es:"Espaol",it:"Italiano",nl:"Nederlands",pt:"Portugus",ru:"",zh:"",tr:"Trke"},h0=t=>`${_C[t]||""} ${xC[t]||"Deutsch"}`,CC=["EUR","USD","GBP","CHF","JPY"],SC={EUR:"",USD:"$",GBP:"",CHF:"CHF",JPY:""},NC={EUR:"Euro",USD:"US Dollar",GBP:"British Pound",CHF:"Swiss Franc",JPY:"Japanese Yen"},m0=t=>`${SC[t]||""} ${NC[t]||"Euro"}`,wg=async t=>{try{if(!t||!t.callWS)return console.warn("Energy Dashboard: No hass connection available"),null;const e=await t.callWS({type:"energy/get_prefs"});return console.log(" Energy Dashboard Config (FULL):",JSON.stringify(e,null,2)),e}catch(e){return console.error("Failed to get energy config:",e),null}},kg=t=>{if(!t||!t.energy_sources)return{gridConsumption:null,gridReturn:null,solar:null,battery:null,energyGridConsumption:null,energyGridReturn:null,energySolar:null};const e={gridConsumption:null,gridReturn:null,solar:null,battery:null,energyGridConsumption:null,energyGridReturn:null,energySolar:null};return t.energy_sources.forEach(i=>{if(i.type==="grid"){if(i.flow_from&&i.flow_from.length>0){const n=i.flow_from[0];e.gridConsumption=n.stat_cost_from||n.stat_energy_from,e.energyGridConsumption=n.stat_energy_from}if(i.flow_to&&i.flow_to.length>0){const n=i.flow_to[0];e.gridReturn=n.stat_compensation_from||n.stat_energy_to,e.energyGridReturn=n.stat_energy_to}}i.type==="solar"&&(e.solar=i.stat_cost_from||i.stat_energy_from,e.energySolar=i.stat_energy_from),i.type==="battery"&&(e.battery=i.stat_energy_from)}),console.log("Extracted sensors from Energy Dashboard:",e),e},pt=(t,e)=>!t||!t.states||!e?!1:!!t.states[e],jn=(t,e,i="--")=>pt(t,e)&&t.states[e].state||i,LC=async t=>{try{console.log(" Starting power sensor detection...");const e=MC(t);if(e.success){console.log(" Found power sensors via direct search:",e.sensors);const i=await wg(t),n=i?kg(i):{};return{success:!0,source:"auto_detect",sensors:e.sensors,energySensors:n,allPowerSensors:e.allPowerSensors}}return console.warn(" No power sensors found in system"),{success:!1,source:"none",sensors:{gridConsumption:null,gridReturn:null,solar:null,battery:null}}}catch(e){return console.error("Failed to initialize energy sensors:",e),{success:!1,source:"error",sensors:{gridConsumption:null,gridReturn:null,solar:null,battery:null}}}},MC=t=>{if(!t||!t.states)return{success:!1,source:"none",sensors:{}};const e={gridConsumption:null,gridReturn:null,solar:null,battery:null},i={gridConsumption:[/sensor\..*leistung.*netzbezug/i,/sensor\..*netzbezug.*leistung/i,/sensor\..*bezogene.*leistung/i,/sensor\.(grid|power)_consumption/i,/sensor\..*grid.*import/i,/sensor\..*power.*consumption/i,/sensor\..*import.*power/i,/sensor\..*grid.*power/i],gridReturn:[/sensor\..*leistung.*einspeisung/i,/sensor\..*einspeisung.*leistung/i,/sensor\..*netzeinspeisung/i,/sensor\..*eingespeiste.*leistung/i,/sensor\.(grid|power)_return/i,/sensor\..*export.*power/i,/sensor\..*return.*power/i,/sensor\..*grid.*export/i],solar:[/sensor\..*pv.*leistung/i,/sensor\..*solar.*leistung/i,/sensor\..*leistung.*pv/i,/sensor\.solar.*power/i,/sensor\.pv.*power/i,/sensor\..*solar.*production/i,/sensor\.inverter.*power/i],battery:[/sensor\..*batterie.*leistung/i,/sensor\..*battery.*power/i,/sensor\..*battery.*discharge/i]},n={};return Object.keys(t.states).forEach(r=>{const o=t.states[r];if(o.entity_id.startsWith("sensor.")){const a=o.attributes?.device_class,l=o.attributes?.unit_of_measurement;(a==="power"||l==="W"||l==="kW")&&(n[r]={unit:l,deviceClass:a,friendlyName:o.attributes?.friendly_name||r})}}),console.log("Found all power sensors:",Object.keys(n)),Object.keys(i).forEach(r=>{for(const o of Object.keys(n)){for(const a of i[r])if(a.test(o)&&!e[r]){e[r]=o,console.log(` Matched ${r}: ${o}`);break}if(e[r])break}}),console.log("Auto-detected sensors by patterns:",e),{success:Object.values(e).some(r=>r!==null),source:"auto_detect",sensors:e,allPowerSensors:n}},f0=t=>{try{const e=JSON.parse(localStorage.getItem("systemSettings")||"{}");e.statsBar=e.statsBar||{},e.statsBar.energySensors=t,localStorage.setItem("systemSettings",JSON.stringify(e)),console.log("Energy sensor config saved:",t),window.dispatchEvent(new CustomEvent("energySensorConfigChanged",{detail:{sensors:t}}))}catch(e){console.error("Failed to save energy sensor config:",e)}},ll=()=>{try{return JSON.parse(localStorage.getItem("systemSettings")||"{}").statsBar?.energySensors||null}catch(t){return console.error("Failed to load energy sensor config:",t),null}},ra=async(t,e)=>{if(!t||!t.callWS||!e)return null;try{const i=new Date,r=new Date(i.getFullYear(),i.getMonth(),i.getDate()).toISOString(),o=await t.callWS({type:"recorder/statistics_during_period",start_time:r,statistic_ids:[e],period:"hour"});if(!o||!o[e]||o[e].length===0)return console.log(`No statistics found for ${e} today`),null;const a=o[e],l=a[a.length-1];return l.state!==void 0?parseFloat(l.state):l.sum!==void 0?parseFloat(l.sum):null}catch(i){return console.error(`Failed to get today's statistics for ${e}:`,i),null}},xc=()=>{try{return JSON.parse(localStorage.getItem("systemSettings")||"{}").statsBar?.energyPrice||.3}catch{return .3}},TC=(t,e=null)=>{const i=e!==null?e:xc();return t*i},p0=async(t,e)=>{if(!t||!e)return null;try{const i={currentGridConsumption:null,currentGridReturn:null,currentSolarProduction:null,currentBatteryPower:null,todayGridConsumption:null,todayGridReturn:null,todaySolarProduction:null,todayCost:null,todayRevenue:null};if(e.gridConsumption){const r=jn(t,e.gridConsumption);r!=="--"&&(i.currentGridConsumption=parseFloat(r))}if(e.gridReturn){const r=jn(t,e.gridReturn);r!=="--"&&(i.currentGridReturn=parseFloat(r))}if(e.solar){const r=jn(t,e.solar);r!=="--"&&(i.currentSolarProduction=parseFloat(r))}if(e.battery){const r=jn(t,e.battery);r!=="--"&&(i.currentBatteryPower=parseFloat(r))}const n=await wg(t);if(n){const r=kg(n);if(r.gridConsumption&&(i.todayGridConsumption=await ra(t,r.gridConsumption)),r.gridReturn&&(i.todayGridReturn=await ra(t,r.gridReturn)),r.solar&&(i.todaySolarProduction=await ra(t,r.solar)),i.todayGridConsumption!==null&&(i.todayCost=TC(i.todayGridConsumption)),i.todayGridReturn!==null){const o=xc()*.08;i.todayRevenue=i.todayGridReturn*o}}return console.log("Energy Dashboard Data:",i),i}catch(i){return console.error("Failed to get energy dashboard data:",i),null}},no=({size:t=14,color:e="currentColor",style:i={}})=>s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 463 463",fill:e,xmlns:"http://www.w3.org/2000/svg",style:i,children:s("path",{d:"M367.5,159c4.142,0,7.5-3.357,7.5-7.5v-32c0-0.278-0.018-0.552-0.047-0.822c-0.004-0.037-0.012-0.074-0.017-0.111 c-0.039-0.313-0.1-0.619-0.176-0.919c-0.015-0.061-0.03-0.121-0.046-0.181c-0.093-0.332-0.206-0.656-0.342-0.967 c-0.013-0.03-0.029-0.058-0.042-0.087c-0.132-0.291-0.282-0.57-0.448-0.839c-0.031-0.051-0.06-0.103-0.093-0.153 c-0.183-0.281-0.384-0.549-0.602-0.802c-0.044-0.052-0.092-0.101-0.138-0.152c-0.225-0.248-0.462-0.483-0.718-0.699 c-0.011-0.009-0.019-0.02-0.03-0.029l-0.026-0.022c-0.003-0.002-0.006-0.005-0.008-0.007l-95.292-79.41L253.5,3 c-1.417-1.889-3.639-3-6-3h-32c-2.361,0-4.583,1.111-6,3l-23.474,31.299l-95.292,79.41c-0.003,0.002-0.006,0.005-0.008,0.007 l-0.026,0.022c-0.011,0.009-0.019,0.02-0.03,0.029c-0.256,0.216-0.493,0.452-0.718,0.699c-0.046,0.051-0.093,0.1-0.138,0.152 c-0.218,0.253-0.419,0.521-0.602,0.802c-0.033,0.05-0.062,0.102-0.093,0.153c-0.166,0.269-0.317,0.548-0.448,0.839 c-0.013,0.029-0.029,0.057-0.042,0.087c-0.136,0.312-0.248,0.635-0.342,0.967c-0.017,0.06-0.031,0.12-0.046,0.181 c-0.076,0.3-0.137,0.606-0.176,0.919c-0.005,0.037-0.013,0.074-0.017,0.111C88.018,118.948,88,119.222,88,119.5v32 c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5V127h81v68.987l-93.267,77.722c-0.003,0.002-0.006,0.005-0.008,0.007l-0.026,0.022 c-0.011,0.009-0.019,0.02-0.03,0.029c-0.256,0.216-0.493,0.452-0.718,0.699c-0.046,0.051-0.093,0.1-0.138,0.152 c-0.218,0.253-0.419,0.521-0.602,0.802c-0.033,0.05-0.062,0.102-0.093,0.153c-0.166,0.269-0.317,0.548-0.448,0.839 c-0.013,0.029-0.029,0.057-0.042,0.087c-0.136,0.312-0.248,0.635-0.342,0.967c-0.017,0.06-0.031,0.12-0.046,0.181 c-0.076,0.3-0.137,0.606-0.176,0.919c-0.005,0.037-0.013,0.074-0.017,0.111C88.018,278.948,88,279.222,88,279.5v32 c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5V287h77.792l-58.545,161H111.5c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5h40 c4.142,0,7.5-3.357,7.5-7.5s-3.358-7.5-7.5-7.5h-8.173L231.5,340.233L319.673,448H319.5c-4.142,0-7.5,3.357-7.5,7.5 s3.358,7.5,7.5,7.5h40c4.142,0,7.5-3.357,7.5-7.5s-3.358-7.5-7.5-7.5h-18.747l-58.545-161H360v24.5c0,4.143,3.358,7.5,7.5,7.5 s7.5-3.357,7.5-7.5v-32c0-0.278-0.018-0.552-0.047-0.822c-0.004-0.037-0.012-0.074-0.017-0.111c-0.039-0.313-0.1-0.619-0.176-0.919 c-0.015-0.061-0.03-0.121-0.046-0.181c-0.093-0.332-0.206-0.656-0.342-0.967c-0.013-0.03-0.029-0.058-0.042-0.087 c-0.132-0.291-0.282-0.57-0.448-0.839c-0.031-0.051-0.06-0.103-0.093-0.153c-0.183-0.281-0.384-0.549-0.602-0.802 c-0.044-0.052-0.092-0.101-0.138-0.152c-0.225-0.248-0.462-0.483-0.718-0.699c-0.011-0.009-0.019-0.02-0.03-0.029l-0.026-0.022 c-0.003-0.002-0.006-0.005-0.008-0.007L279,195.987V127h81v24.5C360,155.643,363.358,159,367.5,159z M220.893,79.5L199,101.393 V57.607L220.893,79.5z M209.607,47h43.786L231.5,68.893L209.607,47z M209.607,112L231.5,90.107L253.393,112H209.607z M253.393,127 L231.5,148.893L209.607,127H253.393z M220.893,159.5L199,181.393v-43.786L220.893,159.5z M209.607,192l21.893-21.893L253.393,192 H209.607z M253.393,207L231.5,228.893L209.607,207H253.393z M220.893,239.5L199,261.393v-43.786L220.893,239.5z M231.5,250.107 L253.393,272h-43.786L231.5,250.107z M255.673,287L231.5,316.545L207.327,287H255.673z M242.107,239.5L264,217.607v43.786 L242.107,239.5z M242.107,159.5L264,137.607v43.786L242.107,159.5z M242.107,79.5L264,57.607v43.786L242.107,79.5z M219.25,15h24.5 l12.75,17h-50L219.25,15z M184,55.513V112h-67.785L184,55.513z M184,215.513V272h-67.785L184,215.513z M149.617,416.624 l44.426-122.172l27.766,33.937L149.617,416.624z M241.19,328.389l27.766-33.937l44.426,122.172L241.19,328.389z M279,272v-56.487 L346.785,272H279z M279,112V55.513L346.785,112H279z"})}),_g=({size:t=14,color:e="currentColor",style:i={}})=>s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 512 512",fill:e,xmlns:"http://www.w3.org/2000/svg",style:i,children:s("path",{d:"M48 32h96v96H48zm128 0h96v96h-96zm128 0h96v96h-96zM48 160h96v96H48zm128 0h96v96h-96zm128 0h96v96h-96zM48 288h96v96H48zm128 0h96v96h-96zm128 0h96v96h-96zM80 416h288v32H80z"})}),EC=({size:t=14,color:e="currentColor",style:i={}})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i,children:[s("path",{d:"M14 13H16L18 13",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M6 13H8M10 13H8M8 13V11M8 13V15",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M6 7H2.6C2.26863 7 2 7.26863 2 7.6V18.4C2 18.7314 2.26863 19 2.6 19H21.4C21.7314 19 22 18.7314 22 18.4V7.6C22 7.26863 21.7314 7 21.4 7H18M6 7V5H8V7M6 7H8M8 7H16M16 7V5H18V7M16 7H18",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),xg=({size:t=14,color:e="currentColor",style:i={}})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i,children:[s("path",{d:"M16.5 21H18.6688C19.8945 21 20.8319 19.9074 20.6455 18.6959L19.2609 9.69589C19.1108 8.72022 18.2713 8 17.2842 8H6.71584C5.7287 8 4.8892 8.72022 4.73909 9.69589L3.35448 18.6959C3.16809 19.9074 4.10545 21 5.33122 21H7.5",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 19V12M12 12L15 15M12 12L9 15",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M14 5C14 3.89543 13.1046 3 12 3C10.8954 3 10 3.89543 10 5",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Cg=({size:t=14,color:e="currentColor",style:i={}})=>s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",strokeWidth:"1.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i,children:[s("path",{d:"M2 8L11.7317 3.13416C11.9006 3.04971 12.0994 3.0497 12.2683 3.13416L22 8",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M20 11V19C20 20.1046 19.1046 21 18 21H6C4.89543 21 4 20.1046 4 19V11",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Sg=({size:t=14,color:e="currentColor",style:i={}})=>s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",fill:"none",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",style:i,children:s("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),DC=({size:t=14,color:e="currentColor",style:i={}})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i,children:[s("path",{d:"M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M22 12L23 12",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 2V1",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 23V22",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M20 20L19 19",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M20 4L19 5",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M4 20L5 19",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M4 4L5 5",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M1 12L2 12",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Ng=({size:t=14,color:e="currentColor",style:i={}})=>s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",fill:"none",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",style:i,children:[s("path",{d:"M12 6L12 12L18 12"}),s("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"})]}),Lg=({size:t=14,color:e="currentColor",style:i={}})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i,children:[s("path",{d:"M18 8.4C18 6.70261 17.3679 5.07475 16.2426 3.87452C15.1174 2.67428 13.5913 2 12 2C10.4087 2 8.88258 2.67428 7.75736 3.87452C6.63214 5.07475 6 6.70261 6 8.4C6 15.8667 3 18 3 18H21C21 18 18 15.8667 18 8.4Z",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),AC=({size:t=14,color:e="currentColor",style:i={}})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i,children:[s("path",{d:"M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M22 12L23 12",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 2V1",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 23V22",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M20 20L19 19",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M20 4L19 5",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M4 20L5 19",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M4 4L5 5",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M1 12L2 12",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),FC=({size:t=14,color:e="currentColor",style:i={}})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i,children:s("path",{d:"M12 4C9.79086 4 8 5.79086 8 8V8.5C5.23858 8.5 3 10.7386 3 13.5C3 16.2614 5.23858 18.5 8 18.5H17C19.2091 18.5 21 16.7091 21 14.5C21 12.2909 19.2091 10.5 17 10.5C16.6565 10.5 16.3257 10.5485 16.0127 10.6391C15.5088 7.21102 12.5031 4 12 4Z",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),PC=({size:t=14,color:e="currentColor",style:i={}})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i,children:[s("path",{d:"M12 4C9.79086 4 8 5.79086 8 8V8.5C5.23858 8.5 3 10.7386 3 13.5C3 16.2614 5.23858 18.5 8 18.5H17C19.2091 18.5 21 16.7091 21 14.5C21 12.2909 19.2091 10.5 17 10.5C16.6565 10.5 16.3257 10.5485 16.0127 10.6391C15.5088 7.21102 12.5031 4 12 4Z",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M8 19L8 21",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 19L12 23",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M16 19L16 21",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),IC=({size:t=14,color:e="currentColor",style:i={}})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i,children:[s("path",{d:"M12 4C9.79086 4 8 5.79086 8 8V8.5C5.23858 8.5 3 10.7386 3 13.5C3 16.2614 5.23858 18.5 8 18.5H17C19.2091 18.5 21 16.7091 21 14.5C21 12.2909 19.2091 10.5 17 10.5C16.6565 10.5 16.3257 10.5485 16.0127 10.6391C15.5088 7.21102 12.5031 4 12 4Z",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M8 21L8 19M12 23L12 19M16 21L16 19",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("circle",{cx:"8",cy:"21",r:"0.5",fill:e}),s("circle",{cx:"12",cy:"23",r:"0.5",fill:e}),s("circle",{cx:"16",cy:"21",r:"0.5",fill:e})]}),g0=({size:t=14,color:e="currentColor",style:i={}})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i,children:[s("path",{d:"M6 13C6 10.2386 8.23858 8 11 8C11.3506 8 11.6918 8.03807 12.0194 8.11048M17 14C19.2091 14 21 15.7909 21 18C21 20.2091 19.2091 22 17 22H9C6.23858 22 4 19.7614 4 17C4 14.4003 5.98398 12.2466 8.52042 12.0247",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M14 6C14 7.65685 15.3431 9 17 9C18.6569 9 20 7.65685 20 6C20 4.34315 18.6569 3 17 3C15.3431 3 14 4.34315 14 6Z",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M17 1V2M21 6H22M13 6H12M19.5 3.5L18.8 4.2M15.2 4.2L14.5 3.5M19.5 8.5L18.8 7.8",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),v0=(t,e=14,i="rgba(255, 255, 255, 0.9)")=>{const n=t?.toLowerCase()||"";return n.includes("sunny")||n.includes("clear")?s(AC,{size:e,color:i}):n.includes("rain")||n.includes("pouring")?s(PC,{size:e,color:i}):n.includes("snow")||n.includes("snowy")?s(IC,{size:e,color:i}):n.includes("partlycloudy")||n.includes("partly")?s(g0,{size:e,color:i}):n.includes("cloud")||n.includes("overcast")?s(FC,{size:e,color:i}):s(g0,{size:e,color:i})},RC=async t=>{if(!t?.callWS)return null;try{const e=await t.callWS({type:"auth/current_user"});if(e?.picture){const o=e.picture;return o.startsWith("/")?`${window.location.origin}${o}`:o}if(e?.avatar){const o=e.avatar;return o.startsWith("/")?`${window.location.origin}${o}`:o}const i=t.user?.id;if(!i)return null;const r=Object.keys(t.states).filter(o=>o.startsWith("person.")).map(o=>t.states[o]).find(o=>o.attributes?.user_id===i);if(r?.attributes?.entity_picture){const o=r.attributes.entity_picture;return o.startsWith("/")?`${window.location.origin}${o}`:o}return null}catch{return null}};let oa=null,y0=0;const BC=300*1e3,Mg=async t=>{const e=Date.now();if(oa&&e-y0<BC)return oa;const i=await RC(t);return i&&(oa=i,y0=e),i},zC={enter:t=>({x:t>0?300:-300,opacity:0}),center:{x:0,opacity:1},exit:t=>({x:t>0?-300:300,opacity:0})},VC=()=>{try{const t=localStorage.getItem("systemSettings");if(!t)return{weather:!0,gridConsumption:!0,gridReturn:!0,solar:!1,notifications:!0,time:!0,consumption:!1,todayConsumption:!1,todayCost:!1};const n=(JSON.parse(t).statsBar||{}).widgets||{};return{weather:n.weather!==!1,gridConsumption:n.gridConsumption!==!1,gridReturn:n.gridReturn!==!1,solar:n.solar===!0,notifications:n.notifications!==!1,time:n.time!==!1,consumption:n.consumption===!0,todayConsumption:n.todayConsumption===!0,todayCost:n.todayCost===!0}}catch(t){return console.error("Failed to load widget settings:",t),{weather:!0,gridConsumption:!0,gridReturn:!0,solar:!1,notifications:!0,time:!0,todayConsumption:!1,todayCost:!1}}},WC=t=>{try{const e=localStorage.getItem("systemSettings"),i=e?JSON.parse(e):{};i.statsBar=i.statsBar||{},i.statsBar.widgets=t,localStorage.setItem("systemSettings",JSON.stringify(i))}catch(e){console.error("Failed to save widget settings:",e)}},OC=({t,hass:e,lang:i="de",onBack:n})=>{const[r,o]=M("main"),a=te(null),[l,c]=M(!1),[d,u]=M(()=>VC()),[h,m]=M(1),[f,g]=M("auto"),[p,v]=M(null),[b,y]=M(()=>ll()||{gridConsumption:null,gridReturn:null,solar:null,battery:null}),[w,_]=M(!1);M(()=>xc());const[k,N]=M(null),[C,S]=M(()=>{const F=localStorage.getItem("statsBarEnabled");return F!==null?F==="true":!0});U(()=>{e&&f==="auto"&&!p&&x()},[e,f]),U(()=>{r==="dataSources"&&e&&f==="auto"&&!p&&x()},[r,e,f]),U(()=>{const F=()=>{const Q=_e.getAllEntities().find(re=>re.domain==="energy_dashboard_device");Q?.attributes?N({gridImport:Q.attributes.grid_import_sensor,gridReturn:Q.attributes.grid_return_sensor,solar:Q.attributes.solar_sensor,consumption:Q.attributes.consumption_sensor,estimatedPower:Q.attributes.estimated_power_sensor,kwh:Q.attributes.kwh_sensor,pvTotal:Q.attributes.pv_total_sensor,estimatedEnergyToday:Q.attributes.estimated_energy_today_sensor,gridExportTotal:Q.attributes.grid_export_total_sensor,battery:Q.attributes.battery_sensor,batteryCharged:Q.attributes.battery_charged_sensor,batteryDischarged:Q.attributes.battery_discharged_sensor,feedInTariff:Q.attributes.feed_in_tariff_sensor,purchaseTariff:Q.attributes.purchase_tariff_sensor}):N(null)};F();const K=$=>{$.domain==="energy_dashboard_device"&&F()},G=$=>{$.domain==="energy_dashboard_device"&&F()};return _e.on("entity-updated",K),_e.on("entity-registered",G),()=>{_e.off("entity-updated",K),_e.off("entity-registered",G)}},[]);const x=async()=>{if(!e){console.warn("No hass connection for energy sensor detection");return}_(!0);try{const F=await LC(e);v(F),F.success&&F.sensors&&(y(F.sensors),f0(F.sensors))}catch(F){console.error("Failed to detect energy sensors:",F),v({success:!1,source:"error",sensors:b})}finally{_(!1)}},B=()=>{m(-1),o("main")},A=(F,K)=>{const G={...d,[F]:K};u(G),WC(G),window.dispatchEvent(new CustomEvent("statsBarWidgetsChanged",{detail:G}))},P=F=>{g(F),F==="auto"&&x()},I=(F,K)=>{const G={...b,[F]:K};y(G),f0(G)},z=()=>{m(1),o("widgets")},D=()=>{m(1),o("dataSources")},L=F=>{S(F),localStorage.setItem("statsBarEnabled",F),window.dispatchEvent(new CustomEvent("statsBarEnabledChanged",{detail:F}))},[E,W]=M(null);return U(()=>{(async()=>{if(e)try{const K=await Mg(e);W(K)}catch{W(null)}})()},[e]),s(T.div,{custom:h,variants:zC,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{position:"relative"},children:[r==="main"?s(ve,{children:[s("div",{className:"ios-navbar",children:[n&&s("button",{className:"ios-navbar-back",onClick:n,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:t("back")})]}),s("div",{className:"ios-navbar-title",children:t("statsBar")})]}),s("div",{ref:a,className:"ios-settings-view",children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:i==="de"?"EINSTELLUNGEN":"SETTINGS"}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:i==="de"?"StatsBar aktivieren":"Enable StatsBar"}),s("div",{className:"ios-item-subtitle",children:i==="de"?"Statusleiste mit Widgets anzeigen":"Show status bar with widgets"})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:C,onChange:F=>L(F.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",style:{opacity:C?1:.5},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:i==="de"?"Benutzername":"Username"}),s("div",{className:"ios-item-subtitle",children:i==="de"?"Automatisch aus Home Assistant":"Automatically from Home Assistant"})]})}),s("div",{className:"ios-item-right",style:{display:"flex",alignItems:"center",gap:"8px"},children:[E&&s("img",{src:E,alt:e.user.name,onError:F=>{console.error("Failed to load profile picture:",E),F.target.style.display="none"},style:{width:"28px",height:"28px",borderRadius:"50%",objectFit:"cover",border:"2px solid rgba(255, 255, 255, 0.2)"}}),s("span",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"14px"},children:e?.user?.name||"User"})]})]})]})]}),s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:C?z:void 0,style:{opacity:C?1:.5,pointerEvents:C?"auto":"none"},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("widgets")}),s("div",{className:"ios-item-subtitle",children:t("widgetsDescription")})]})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:[Object.values(d).filter(F=>F===!0).length," ",t("active")]}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:C?D:void 0,style:{opacity:C?1:.5,pointerEvents:C?"auto":"none"},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("dataSources")}),s("div",{className:"ios-item-subtitle",children:t("dataSourcesDescription")})]})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:p?.source==="energy_dashboard"?" Auto":p?.source==="auto_detect"?" Muster":f==="manual"?" Manuell":"--"}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]})}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("aboutStatsBar")}),s("div",{className:"ios-card",style:{padding:"16px"},children:s("div",{className:"ios-text",style:{fontSize:"14px",lineHeight:"1.6"},children:[t("statsBarDescription"),s("br",{}),s("br",{}),s("strong",{children:t("features")}),s("br",{})," ",t("liveUpdates"),s("br",{})," ",t("energyDashboardIntegration"),s("br",{})," ",t("customizableWidgets")]})})]})]})]}):r==="widgets"?s(ve,{children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:B,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:t("back")})]}),s("div",{className:"ios-navbar-title",children:t("widgets")})]}),s("div",{ref:a,className:"ios-settings-view",children:s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("availableWidgets")}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s(DC,{size:20,color:"rgba(255, 255, 255, 0.9)"}),s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("weatherWidget")}),s("div",{className:"ios-item-subtitle",children:t("weatherWidgetDescription")})]})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:d.weather,onChange:F=>A("weather",F.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s(no,{size:20,color:"rgba(255, 255, 255, 0.9)"}),s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("energyGridConsumptionWidget")}),s("div",{className:"ios-item-subtitle",children:t("energyGridConsumptionDescription")})]})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:d.gridConsumption,onChange:F=>A("gridConsumption",F.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s(no,{size:20,color:"rgba(255, 255, 255, 0.9)"}),s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("energyGridReturnWidget")}),s("div",{className:"ios-item-subtitle",children:t("energyGridReturnDescription")})]})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:d.gridReturn,onChange:F=>A("gridReturn",F.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s(_g,{size:20,color:"rgba(255, 255, 255, 0.9)"}),s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("solarProductionWidget")}),s("div",{className:"ios-item-subtitle",children:t("solarProductionDescription")})]})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:d.solar,onChange:F=>A("solar",F.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s(Lg,{size:20,color:"rgba(255, 255, 255, 0.9)"}),s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("notificationsWidget")}),s("div",{className:"ios-item-subtitle",children:t("notificationsWidgetDescription")})]})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:d.notifications,onChange:F=>A("notifications",F.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s(Ng,{size:20,color:"rgba(255, 255, 255, 0.9)"}),s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("timeWidget")}),s("div",{className:"ios-item-subtitle",children:t("timeWidgetDescription")})]})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:d.time,onChange:F=>A("time",F.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s(Cg,{size:20,color:"rgba(255, 255, 255, 0.9)"}),s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("consumptionWidget")}),s("div",{className:"ios-item-subtitle",children:t("consumptionDescription")})]})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:d.consumption,onChange:F=>A("consumption",F.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s(Sg,{size:20,color:"rgba(255, 255, 255, 0.9)"}),s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("todayConsumptionWidget")}),s("div",{className:"ios-item-subtitle",children:t("todayConsumptionDescription")})]})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:d.todayConsumption,onChange:F=>A("todayConsumption",F.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s(xg,{size:20,color:"rgba(255, 255, 255, 0.9)"}),s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("todayCostWidget")}),s("div",{className:"ios-item-subtitle",children:t("todayCostDescription")})]})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:d.todayCost,onChange:F=>A("todayCost",F.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]})]}),s("div",{className:"ios-section-footer",children:t("widgetsFooter")})]})})]}):r==="dataSources"?s(ve,{children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:B,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:t("back")})]}),s("div",{className:"ios-navbar-title",children:t("dataSources")})]}),s("div",{ref:a,className:"ios-settings-view",children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("detectionMode")}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("autoDetection")}),s("div",{className:"ios-item-subtitle",children:[w&&t("detectionRunning"),!w&&p?.source==="energy_dashboard"&&t("energyDashboardFound"),!w&&p?.source==="auto_detect"&&t("patternBasedDetection"),!w&&p?.source==="none"&&t("noSensorsDetected"),!w&&p?.source==="error"&&t("detectionError"),!w&&!p&&t("notChecked")]})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:f==="auto",onChange:F=>P(F.target.checked?"auto":"manual")}),s("span",{className:"ios-toggle-slider"})]})})]}),f==="auto"&&s(ve,{children:[s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{w||x()},style:{cursor:w?"wait":"pointer",opacity:w?.6:1},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("startDetection")}),s("div",{className:"ios-item-subtitle",children:t(w?"searchRunning":"redetectSensors")})]})}),s("div",{className:"ios-item-right",children:s(T.svg,{className:"ios-chevron",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",animate:w?{rotate:360}:{rotate:0},transition:w?{duration:1,repeat:1/0,ease:"linear"}:{},children:s("path",{d:"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0118.8-4.3M22 12.5a10 10 0 01-18.8 4.2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})]}),s("div",{className:"ios-section-footer",children:t(f==="auto"?"autoDetectionInfo":"manualConfigInfo")})]}),k?s(ve,{children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:i==="de"?"LEISTUNG (W/KW)":"POWER (W/KW)"}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:i==="de"?"Netzbezug":"Grid Import"}),s("div",{className:"ios-item-subtitle",style:{fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.gridImport||(i==="de"?"Nicht konfiguriert":"Not configured")})]})}),s("div",{className:"ios-item-right",children:k.gridImport&&e&&pt(e,k.gridImport)?s("span",{style:{color:"#34C759",fontSize:"18px"},children:""}):k.gridImport?s("span",{style:{color:"#FF9500",fontSize:"18px"},children:""}):s("span",{style:{color:"#8E8E93",fontSize:"18px"},children:"--"})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:i==="de"?"Netzeinspeisung":"Grid Export"}),s("div",{className:"ios-item-subtitle",style:{fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.gridReturn||(i==="de"?"Nicht konfiguriert":"Not configured")})]})}),s("div",{className:"ios-item-right",children:k.gridReturn&&e&&pt(e,k.gridReturn)?s("span",{style:{color:"#34C759",fontSize:"18px"},children:""}):k.gridReturn?s("span",{style:{color:"#FF9500",fontSize:"18px"},children:""}):s("span",{style:{color:"#8E8E93",fontSize:"18px"},children:"--"})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:i==="de"?"PV Leistung":"PV Power"}),s("div",{className:"ios-item-subtitle",style:{fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.solar||(i==="de"?"Nicht konfiguriert":"Not configured")})]})}),s("div",{className:"ios-item-right",children:k.solar&&e&&pt(e,k.solar)?s("span",{style:{color:"#34C759",fontSize:"18px"},children:""}):k.solar?s("span",{style:{color:"#FF9500",fontSize:"18px"},children:""}):s("span",{style:{color:"#8E8E93",fontSize:"18px"},children:"--"})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:i==="de"?"Verbrauch":"Consumption"}),s("div",{className:"ios-item-subtitle",style:{fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.consumption||(i==="de"?"Nicht konfiguriert":"Not configured")})]})}),s("div",{className:"ios-item-right",children:k.consumption&&e&&pt(e,k.consumption)?s("span",{style:{color:"#34C759",fontSize:"18px"},children:""}):k.consumption?s("span",{style:{color:"#FF9500",fontSize:"18px"},children:""}):s("span",{style:{color:"#8E8E93",fontSize:"18px"},children:"--"})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:i==="de"?"Geschtzte Leistung":"Estimated Power"}),s("div",{className:"ios-item-subtitle",style:{fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.estimatedPower||(i==="de"?"Nicht konfiguriert":"Not configured")})]})}),s("div",{className:"ios-item-right",children:k.estimatedPower&&e&&pt(e,k.estimatedPower)?s("span",{style:{color:"#34C759",fontSize:"18px"},children:""}):k.estimatedPower?s("span",{style:{color:"#FF9500",fontSize:"18px"},children:""}):s("span",{style:{color:"#8E8E93",fontSize:"18px"},children:"--"})})]})]}),s("div",{className:"ios-section-footer",children:i==="de"?"Quelle: system.energy_dashboard":"Source: system.energy_dashboard"})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:i==="de"?"ENERGIE (WH/KWH)":"ENERGY (WH/KWH)"}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:i==="de"?"Bezogene Wirkenergie gesamt":"Grid Import Total"}),s("div",{className:"ios-item-subtitle",style:{fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.kwh||(i==="de"?"Nicht konfiguriert":"Not configured")})]})}),s("div",{className:"ios-item-right",children:k.kwh&&e&&pt(e,k.kwh)?s("span",{style:{color:"#34C759",fontSize:"18px"},children:""}):k.kwh?s("span",{style:{color:"#FF9500",fontSize:"18px"},children:""}):s("span",{style:{color:"#8E8E93",fontSize:"18px"},children:"--"})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:i==="de"?"PV kumulativ gesamt":"PV Total"}),s("div",{className:"ios-item-subtitle",style:{fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.pvTotal||(i==="de"?"Nicht konfiguriert":"Not configured")})]})}),s("div",{className:"ios-item-right",children:k.pvTotal&&e&&pt(e,k.pvTotal)?s("span",{style:{color:"#34C759",fontSize:"18px"},children:""}):k.pvTotal?s("span",{style:{color:"#FF9500",fontSize:"18px"},children:""}):s("span",{style:{color:"#8E8E93",fontSize:"18px"},children:"--"})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:i==="de"?"Geschtzte Erzeugung heute":"Estimated Production Today"}),s("div",{className:"ios-item-subtitle",style:{fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.estimatedEnergyToday||(i==="de"?"Nicht konfiguriert":"Not configured")})]})}),s("div",{className:"ios-item-right",children:k.estimatedEnergyToday&&e&&pt(e,k.estimatedEnergyToday)?s("span",{style:{color:"#34C759",fontSize:"18px"},children:""}):k.estimatedEnergyToday?s("span",{style:{color:"#FF9500",fontSize:"18px"},children:""}):s("span",{style:{color:"#8E8E93",fontSize:"18px"},children:"--"})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:i==="de"?"Einspeisung gesamt":"Grid Export Total"}),s("div",{className:"ios-item-subtitle",style:{fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.gridExportTotal||(i==="de"?"Nicht konfiguriert":"Not configured")})]})}),s("div",{className:"ios-item-right",children:k.gridExportTotal&&e&&pt(e,k.gridExportTotal)?s("span",{style:{color:"#34C759",fontSize:"18px"},children:""}):k.gridExportTotal?s("span",{style:{color:"#FF9500",fontSize:"18px"},children:""}):s("span",{style:{color:"#8E8E93",fontSize:"18px"},children:"--"})})]})]}),s("div",{className:"ios-section-footer",children:i==="de"?"Quelle: system.energy_dashboard":"Source: system.energy_dashboard"})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:i==="de"?"BATTERIE":"BATTERY"}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:i==="de"?"Entladen (kWh)":"Discharged (kWh)"}),s("div",{className:"ios-item-subtitle",style:{fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.batteryDischarged||(i==="de"?"Nicht konfiguriert":"Not configured")})]})}),s("div",{className:"ios-item-right",children:k.batteryDischarged&&e&&pt(e,k.batteryDischarged)?s("span",{style:{color:"#34C759",fontSize:"18px"},children:""}):k.batteryDischarged?s("span",{style:{color:"#FF9500",fontSize:"18px"},children:""}):s("span",{style:{color:"#8E8E93",fontSize:"18px"},children:"--"})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:i==="de"?"Geladen (kWh)":"Charged (kWh)"}),s("div",{className:"ios-item-subtitle",style:{fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.batteryCharged||(i==="de"?"Nicht konfiguriert":"Not configured")})]})}),s("div",{className:"ios-item-right",children:k.batteryCharged&&e&&pt(e,k.batteryCharged)?s("span",{style:{color:"#34C759",fontSize:"18px"},children:""}):k.batteryCharged?s("span",{style:{color:"#FF9500",fontSize:"18px"},children:""}):s("span",{style:{color:"#8E8E93",fontSize:"18px"},children:"--"})})]})]}),s("div",{className:"ios-section-footer",children:i==="de"?"Quelle: system.energy_dashboard":"Source: system.energy_dashboard"})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:i==="de"?"TARIFE":"TARIFFS"}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:i==="de"?"Einspesetarif":"Feed-in Tariff"}),s("div",{className:"ios-item-subtitle",style:{fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.feedInTariff||(i==="de"?"Nicht konfiguriert":"Not configured")})]})}),s("div",{className:"ios-item-right",children:k.feedInTariff&&e&&pt(e,k.feedInTariff)?s("span",{style:{color:"#34C759",fontSize:"18px"},children:""}):k.feedInTariff?s("span",{style:{color:"#FF9500",fontSize:"18px"},children:""}):s("span",{style:{color:"#8E8E93",fontSize:"18px"},children:"--"})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:i==="de"?"Bezugstarif":"Purchase Tariff"}),s("div",{className:"ios-item-subtitle",style:{fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:k.purchaseTariff||(i==="de"?"Nicht konfiguriert":"Not configured")})]})}),s("div",{className:"ios-item-right",children:k.purchaseTariff&&e&&pt(e,k.purchaseTariff)?s("span",{style:{color:"#34C759",fontSize:"18px"},children:""}):k.purchaseTariff?s("span",{style:{color:"#FF9500",fontSize:"18px"},children:""}):s("span",{style:{color:"#8E8E93",fontSize:"18px"},children:"--"})})]})]}),s("div",{className:"ios-section-footer",children:i==="de"?"Quelle: system.energy_dashboard":"Source: system.energy_dashboard"})]})]}):s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:"ENERGIE"}),s("div",{className:"ios-card",style:{padding:"20px",textAlign:"center"},children:s("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"14px"},children:i==="de"?"Keine Energy Dashboard Entity gefunden. Bitte konfiguriere system.energy_dashboard in Integration.":"No Energy Dashboard entity found. Please configure system.energy_dashboard in Integration."})})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:"WETTER"}),s("div",{className:"ios-card",children:s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("weatherWidget")}),s("div",{className:"ios-item-subtitle",style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.6)"},children:i==="de"?"Automatisch aus weather.* Entity":"Automatically from weather.* entity"})]})}),s("div",{className:"ios-item-right",children:e&&Object.keys(e.states).some(F=>F.startsWith("weather."))?s("span",{style:{color:"#34C759",fontSize:"18px"},children:""}):s("span",{style:{color:"#8E8E93",fontSize:"18px"},children:"--"})})]})}),s("div",{className:"ios-section-footer",children:i==="de"?"Wetter-Daten werden automatisch von der ersten weather.* Entity in Home Assistant erkannt.":"Weather data is automatically detected from the first weather.* entity in Home Assistant."})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:"UHR"}),s("div",{className:"ios-card",children:s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("timeWidget")}),s("div",{className:"ios-item-subtitle",style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.6)"},children:i==="de"?"Systemzeit":"System time"})]})}),s("div",{className:"ios-item-right",children:s("span",{style:{color:"#34C759",fontSize:"18px"},children:""})})]})}),s("div",{className:"ios-section-footer",children:i==="de"?"Die Uhrzeit wird aus der Systemzeit des Browsers abgeleitet. Kein Sensor erforderlich.":"Time is derived from browser system time. No sensor required."})]}),f==="manual"&&s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("manualConfiguration")}),s("div",{className:"ios-card",style:{padding:"16px"},children:[s("div",{className:"ios-text",style:{fontSize:"14px",lineHeight:"1.6",marginBottom:"16px"},children:t("manualConfigDescription")}),s("div",{style:{marginBottom:"12px"},children:[s("label",{style:{display:"block",fontSize:"13px",marginBottom:"4px",color:"rgba(255,255,255,0.6)"},children:t("gridConsumptionEntityLabel")}),s("input",{type:"text",value:b.gridConsumption||"",onChange:F=>I("gridConsumption",F.target.value),placeholder:"z.B. sensor.grid_consumption_power",style:{width:"100%",padding:"8px 12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"white",fontSize:"14px"}})]}),s("div",{style:{marginBottom:"12px"},children:[s("label",{style:{display:"block",fontSize:"13px",marginBottom:"4px",color:"rgba(255,255,255,0.6)"},children:t("gridReturnEntityLabel")}),s("input",{type:"text",value:b.gridReturn||"",onChange:F=>I("gridReturn",F.target.value),placeholder:"z.B. sensor.grid_return_power",style:{width:"100%",padding:"8px 12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"white",fontSize:"14px"}})]}),s("div",{children:[s("label",{style:{display:"block",fontSize:"13px",marginBottom:"4px",color:"rgba(255,255,255,0.6)"},children:t("solarEntityLabel")}),s("input",{type:"text",value:b.solar||"",onChange:F=>I("solar",F.target.value),placeholder:"z.B. sensor.solar_power",style:{width:"100%",padding:"8px 12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"white",fontSize:"14px"}})]})]})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("aboutDataSources")}),s("div",{className:"ios-card",style:{padding:"16px"},children:s("div",{className:"ios-text",style:{fontSize:"14px",lineHeight:"1.6",whiteSpace:"pre-line"},children:t("autoDetectionDescription")})})]})]})]}):null,s(Pe,{scrollContainerRef:a,isHovered:l})]},r)},Dn={enter:t=>({x:t>0?"100%":"-100%",opacity:0}),center:{x:0,opacity:1},exit:t=>({x:t<0?"100%":"-100%",opacity:0})},b0=(t,e)=>({slow:e("slow"),normal:e("normal"),fast:e("fast")})[t]||e("normal"),$C=()=>{try{const t=localStorage.getItem("systemSettings");if(!t)return{enabled:!0,username:"User"};const i=JSON.parse(t).appearance||{};return{enabled:i.statsBarEnabled!==!1,username:i.statsBarUsername||"User"}}catch{return{enabled:!0,username:"User"}}},HC=()=>{try{const t=localStorage.getItem("systemSettings");return t?{enabled:(JSON.parse(t).appearance||{}).greetingsBarEnabled!==!1}:{enabled:!0}}catch{return{enabled:!0}}},jC=t=>{try{const e=localStorage.getItem("systemSettings"),i=e?JSON.parse(e):{};i.appearance=i.appearance||{},i.appearance.greetingsBarEnabled=t.enabled,localStorage.setItem("systemSettings",JSON.stringify(i))}catch(e){console.error("Failed to save GreetingsBar settings:",e)}},UC=({t,aiModeEnabled:e,setAiModeEnabled:i,animations:n,setAnimations:r,soundEffects:o,setSoundEffects:a,language:l,setLanguage:c,currency:d,setCurrency:u,notifications:h,setNotifications:m,showNotifications:f=!0,hass:g,lang:p,predictiveSuggestions:v,confidenceThreshold:b,timeWindow:y,maxSuggestions:w,learningRate:_})=>{const[k,N]=M("main"),C=te(null),[S,x]=M(!1),[B,A]=M(()=>$C()),[P,I]=M(()=>HC()),[z,D]=M(v),[L,E]=M(b),[W,F]=M(y),[K,G]=M(w),[$,Q]=M(_);U(()=>{const O=H=>{A(X=>({...X,enabled:H.detail}))};return window.addEventListener("statsBarEnabledChanged",O),()=>window.removeEventListener("statsBarEnabledChanged",O)},[]);const re=()=>{N("main")},he=O=>{const H={...P,enabled:O};I(H),jC(H),window.dispatchEvent(new CustomEvent("greetingsBarEnabledChanged",{detail:O}))};return s("div",{className:"ios-settings-container",children:s(Ce,{mode:"wait",initial:!1,custom:k==="main"?-1:1,children:k==="main"?s(T.div,{custom:-1,variants:Dn,initial:!1,animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),style:{position:"relative"},children:[s("div",{ref:C,className:"ios-settings-view",style:{padding:"20px"},children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("general")}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",style:{display:"none"},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("aiMode")}),s("div",{className:"ios-item-subtitle",children:t("aiModeDescription")})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:e,onChange:O=>{const H=O.target.checked;i(H),localStorage.setItem("aiModeEnabled",H),window.dispatchEvent(new CustomEvent("aiModeSettingChanged",{detail:{enabled:H}}))}}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-item",style:{display:"none"},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("animations")}),s("div",{className:"ios-item-subtitle",children:t("animationsDescription")})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:n,onChange:O=>r(O.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-item",style:{display:"none"},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("soundEffects")}),s("div",{className:"ios-item-subtitle",children:t("soundEffectsDescription")})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:o,onChange:O=>a(O.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>N("language"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("appLanguage")}),s("div",{className:"ios-item-subtitle",children:t("appLanguageDescription")})]})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:h0(l)}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>N("currency"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("appCurrency")}),s("div",{className:"ios-item-subtitle",children:t("appCurrencyDescription")})]})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:m0(d)}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("statusAndGreetings")}),s("div",{className:"ios-card",children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>N("statsBar"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("statsBarLabel")}),s("div",{className:"ios-item-subtitle",children:t("statsBarDescription")})]})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:B.enabled?t("active"):t("inactive")}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("greetingsBarLabel")}),s("div",{className:"ios-item-subtitle",children:t("greetingsBarDescription")})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:P.enabled,onChange:O=>he(O.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]})]})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("suggestions")}),s("div",{className:"ios-card",children:s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>N("suggestions"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("enableSuggestions")}),s("div",{className:"ios-item-subtitle",children:t("enableSuggestionsDescription")})]})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:t(z?"active":"inactive")}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})})]}),s("div",{className:"ios-section",style:{display:"none"},children:[s("div",{className:"ios-section-header",children:t("notifications")}),s("div",{className:"ios-card",children:s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("pushNotifications")}),s("div",{className:"ios-item-subtitle",children:t("pushNotificationsDescription")})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:h,onChange:O=>m(O.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]})})]})]}),s(Pe,{scrollContainerRef:C,isHovered:S})]},"main"):k==="statsBar"?s(OC,{t,hass:g,lang:p,onBack:re}):k==="suggestions"?s(T.div,{custom:1,variants:Dn,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:re,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:t("back")})]}),s("div",{className:"ios-navbar-title",children:t("enableSuggestions")})]}),s("div",{ref:C,className:"ios-settings-view",children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("settings")}),s("div",{className:"ios-card",children:s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("enableSuggestions")}),s("div",{className:"ios-item-subtitle",children:t("enableSuggestionsDescription")})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:z,onChange:O=>{const H=O.target.checked;D(H),localStorage.setItem("predictiveSuggestions",H),window.dispatchEvent(new CustomEvent("predictiveSettingChanged",{detail:{enabled:H}}))}}),s("span",{className:"ios-toggle-slider"})]})})]})})]}),s("div",{className:"ios-section",style:{opacity:z?1:.5,pointerEvents:z?"auto":"none",transition:"opacity 0.3s ease"},children:s("div",{className:"ios-card",children:s("div",{className:"ios-item",style:{flexDirection:"column",alignItems:"stretch",padding:"16px"},children:[s("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[s("div",{className:"ios-item-label",style:{fontSize:"14px",fontWeight:"600"},children:t("confidenceThresholdLabel")}),s("div",{className:"slider-value",style:{fontSize:"14px",fontWeight:"600"},children:[L,"%"]})]}),s("div",{className:"ios-item-subtitle",style:{marginBottom:"12px",fontSize:"14px"},children:t("confidenceThresholdDescription")}),s("input",{type:"range",className:"bambu-slider",min:"40",max:"90",value:L,disabled:!z,onChange:O=>{const H=parseInt(O.target.value);E(H),localStorage.setItem("confidenceThreshold",H),window.dispatchEvent(new CustomEvent("predictiveSettingChanged",{detail:{confidenceThreshold:H}}))},style:{"--value":L,"--min":40,"--max":90}})]})})}),s("div",{className:"ios-section",style:{opacity:z?1:.5,pointerEvents:z?"auto":"none",transition:"opacity 0.3s ease"},children:s("div",{className:"ios-card",children:s("div",{className:"ios-item",style:{flexDirection:"column",alignItems:"stretch",padding:"16px"},children:[s("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[s("div",{className:"ios-item-label",style:{fontSize:"14px",fontWeight:"600"},children:t("timeWindowLabel")}),s("div",{className:"slider-value",style:{fontSize:"14px",fontWeight:"600"},children:[W," min"]})]}),s("div",{className:"ios-item-subtitle",style:{marginBottom:"12px",fontSize:"14px"},children:t("timeWindowDescription")}),s("input",{type:"range",className:"bambu-slider",min:"15",max:"120",step:"15",value:W,disabled:!z,onChange:O=>{const H=parseInt(O.target.value);F(H),localStorage.setItem("suggestionTimeWindow",H),window.dispatchEvent(new CustomEvent("predictiveSettingChanged",{detail:{timeWindow:H}}))},style:{"--value":W,"--min":15,"--max":120}})]})})}),s("div",{className:"ios-section",style:{opacity:z?1:.5,pointerEvents:z?"auto":"none",transition:"opacity 0.3s ease"},children:s("div",{className:"ios-card",children:s("div",{className:"ios-item",style:{flexDirection:"column",alignItems:"stretch",padding:"16px"},children:[s("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px"},children:[s("div",{className:"ios-item-label",style:{fontSize:"14px",fontWeight:"600"},children:t("maxSuggestionsLabel")}),s("div",{className:"slider-value",style:{fontSize:"14px",fontWeight:"600"},children:K})]}),s("div",{className:"ios-item-subtitle",style:{marginBottom:"12px",fontSize:"14px"},children:t("maxSuggestionsDescription")}),s("input",{type:"range",className:"bambu-slider",min:"5",max:"20",value:K,disabled:!z,onChange:O=>{const H=parseInt(O.target.value);G(H),localStorage.setItem("maxSuggestions",H),window.dispatchEvent(new CustomEvent("predictiveSettingChanged",{detail:{maxSuggestions:H}}))},style:{"--value":K,"--min":5,"--max":20}})]})})}),s("div",{className:"ios-section",style:{opacity:z?1:.5,pointerEvents:z?"auto":"none",transition:"opacity 0.3s ease"},children:[s("div",{className:"ios-section-header",children:t("learningSpeed")}),s("div",{className:"ios-card",children:s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>N("learningRate"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("learningSpeed")}),s("div",{className:"ios-item-subtitle",children:t("learningSpeedDescription")})]})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:b0($,t)}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})})]})]}),s(Pe,{scrollContainerRef:C,isHovered:S})]},"suggestions"):k==="learningRate"?s(T.div,{custom:1,variants:Dn,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:()=>N("suggestions"),children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:t("back")})]}),s("div",{className:"ios-navbar-title",children:t("learningSpeed")})]}),s("div",{ref:C,className:"ios-settings-view",children:s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:["slow","normal","fast"].map((O,H)=>s("div",{children:[H>0&&s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{Q(O),localStorage.setItem("learningRate",O),window.dispatchEvent(new CustomEvent("predictiveSettingChanged",{detail:{learningRate:O}}))},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:b0(O,t)})})}),s("div",{className:"ios-item-right",children:$===O&&s("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",style:{color:"rgb(0, 122, 255)"},children:s("path",{d:"M7 10L9 12L13 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]},O))})})}),s(Pe,{scrollContainerRef:C,isHovered:S})]},"learningRate"):k==="language"?s(T.div,{custom:1,variants:Dn,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:re,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:t("back")||"Zurck"})]}),s("div",{className:"ios-navbar-title",children:t("appLanguage")})]}),s("div",{ref:C,className:"ios-settings-view",children:s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:kC.map((O,H)=>s("div",{children:[H>0&&s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{c(O),localStorage.setItem("userLanguage",O),window.dispatchEvent(new CustomEvent("languageChanged",{detail:{language:O}})),setTimeout(re,150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:h0(O)})})}),s("div",{className:"ios-item-right",children:l===O&&s(T.svg,{className:"ios-checkmark",width:"24",height:"24",viewBox:"0 0 24 24",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},children:[s(T.circle,{cx:"12",cy:"12",r:"11",fill:"white",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"}),s(T.path,{d:"M7 12L10.5 15.5L17 9",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]})]},O))})})}),s(Pe,{scrollContainerRef:C,isHovered:S})]},"language"):k==="currency"?s(T.div,{custom:1,variants:Dn,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:re,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:t("back")||"Zurck"})]}),s("div",{className:"ios-navbar-title",children:t("appCurrency")})]}),s("div",{ref:C,className:"ios-settings-view",children:s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:CC.map((O,H)=>s("div",{children:[H>0&&s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{u(O),localStorage.setItem("userCurrency",O),window.dispatchEvent(new CustomEvent("currencyChanged",{detail:{currency:O}})),setTimeout(re,150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:m0(O)})})}),s("div",{className:"ios-item-right",children:d===O&&s(T.svg,{className:"ios-checkmark",width:"24",height:"24",viewBox:"0 0 24 24",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},children:[s(T.circle,{cx:"12",cy:"12",r:"11",fill:"white",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"}),s(T.path,{d:"M7 12L10.5 15.5L17 9",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]})]},O))})})}),s(Pe,{scrollContainerRef:C,isHovered:S})]},"currency"):null})})},Tg={none:null,subtle:"polygon(100% 50%, 100% 58%, 100% 60.5%, 100% 62.5%, 99.95% 64.2%, 99.95% 65.6%, 99.9% 66.9%, 99.85% 68.1%, 99.8% 69.2%, 99.75% 70.2%, 99.7% 71.2%, 99.6% 72.1%, 99.5% 73%, 99.4% 73.9%, 99.3% 74.7%, 99.15% 75.5%, 99% 76.3%, 98.85% 77%, 98.7% 77.7%, 98.5% 78.4%, 98.3% 79.1%, 98.1% 79.7%, 97.9% 80.4%, 97.65% 81%, 97.4% 81.6%, 97.15% 82.2%, 96.9% 82.8%, 96.6% 83.4%, 96.3% 84%, 96% 84.5%, 95.7% 85%, 95.4% 85.6%, 95.05% 86.1%, 94.7% 86.6%, 94.35% 87.1%, 94% 87.6%, 93.6% 88.1%, 93.2% 88.5%, 92.8% 89%, 92.4% 89.4%, 92% 89.9%, 91.55% 90.3%, 91.1% 90.7%, 90.65% 91.1%, 90.2% 91.5%, 89.7% 91.9%, 89.25% 92.2%, 88.75% 92.6%, 88.3% 93%, 87.8% 93.3%, 87.3% 93.7%, 86.8% 94%, 86.25% 94.35%, 85.7% 94.7%, 85.2% 95%, 84.65% 95.3%, 84.1% 95.6%, 83.5% 95.9%, 82.95% 96.15%, 82.4% 96.4%, 81.8% 96.65%, 81.2% 96.9%, 80.6% 97.1%, 80% 97.35%, 79.4% 97.6%, 78.75% 97.8%, 78.1% 98%, 77.45% 98.2%, 76.8% 98.35%, 76.1% 98.5%, 75.4% 98.65%, 74.7% 98.8%, 74% 98.9%, 73.25% 99%, 72.5% 99.1%, 71.75% 99.2%, 71% 99.3%, 70.2% 99.35%, 69.4% 99.4%, 68.6% 99.45%, 67.8% 99.5%, 67% 99.55%, 66.2% 99.6%, 65.35% 99.65%, 64.5% 99.7%, 63.65% 99.75%, 62.8% 99.8%, 61.9% 99.85%, 61% 99.9%, 60.1% 99.95%, 59.2% 100%, 58.25% 100%, 57.3% 100%, 56.3% 100%, 55.3% 100%, 54.3% 100%, 53.25% 100%, 52.2% 100%, 51.1% 100%, 50% 100%, 48.9% 100%, 47.8% 100%, 46.75% 100%, 45.7% 100%, 44.7% 100%, 43.7% 100%, 42.7% 100%, 41.75% 100%, 40.8% 100%, 39.9% 99.95%, 39% 99.9%, 38.1% 99.85%, 37.2% 99.8%, 36.35% 99.75%, 35.5% 99.7%, 34.65% 99.65%, 33.8% 99.6%, 33% 99.55%, 32.2% 99.5%, 31.4% 99.45%, 30.6% 99.4%, 29.8% 99.35%, 29% 99.3%, 28.25% 99.2%, 27.5% 99.1%, 26.75% 99%, 26% 98.9%, 25.3% 98.8%, 24.6% 98.65%, 23.9% 98.5%, 23.2% 98.35%, 22.55% 98.2%, 21.9% 98%, 21.25% 97.8%, 20.6% 97.6%, 20% 97.35%, 19.4% 97.1%, 18.8% 96.9%, 18.2% 96.65%, 17.6% 96.4%, 17.05% 96.15%, 16.5% 95.9%, 15.9% 95.6%, 15.35% 95.3%, 14.8% 95%, 14.3% 94.7%, 13.75% 94.35%, 13.2% 94%, 12.7% 93.7%, 12.2% 93.3%, 11.7% 93%, 11.25% 92.6%, 10.75% 92.2%, 10.3% 91.9%, 9.8% 91.5%, 9.35% 91.1%, 8.9% 90.7%, 8.45% 90.3%, 8% 89.9%, 7.6% 89.4%, 7.2% 89%, 6.8% 88.5%, 6.4% 88.1%, 6% 87.6%, 5.65% 87.1%, 5.3% 86.6%, 4.95% 86.1%, 4.6% 85.6%, 4.3% 85%, 4% 84.5%, 3.7% 84%, 3.4% 83.4%, 3.1% 82.8%, 2.85% 82.2%, 2.6% 81.6%, 2.35% 81%, 2.1% 80.4%, 1.9% 79.7%, 1.7% 79.1%, 1.5% 78.4%, 1.3% 77.7%, 1.15% 77%, 1% 76.3%, 0.85% 75.5%, 0.7% 74.7%, 0.6% 73.9%, 0.5% 73%, 0.4% 72.1%, 0.3% 71.2%, 0.25% 70.2%, 0.2% 69.2%, 0.15% 68.1%, 0.1% 66.9%, 0.05% 65.6%, 0.05% 64.2%, 0% 62.5%, 0% 60.5%, 0% 58%, 0% 50%, 0% 42%, 0% 39.5%, 0% 37.5%, 0.05% 35.8%, 0.05% 34.4%, 0.1% 33.1%, 0.15% 31.9%, 0.2% 30.8%, 0.25% 29.8%, 0.3% 28.8%, 0.4% 27.9%, 0.5% 27%, 0.6% 26.1%, 0.7% 25.3%, 0.85% 24.5%, 1% 23.7%, 1.15% 23%, 1.3% 22.3%, 1.5% 21.6%, 1.7% 20.9%, 1.9% 20.3%, 2.1% 19.6%, 2.35% 19%, 2.6% 18.4%, 2.85% 17.8%, 3.1% 17.2%, 3.4% 16.6%, 3.7% 16%, 4% 15.5%, 4.3% 15%, 4.6% 14.4%, 4.95% 13.9%, 5.3% 13.4%, 5.65% 12.9%, 6% 12.4%, 6.4% 11.9%, 6.8% 11.5%, 7.2% 11%, 7.6% 10.6%, 8% 10.1%, 8.45% 9.7%, 8.9% 9.3%, 9.35% 8.9%, 9.8% 8.5%, 10.3% 8.1%, 10.75% 7.8%, 11.25% 7.4%, 11.7% 7%, 12.2% 6.7%, 12.7% 6.3%, 13.2% 6%, 13.75% 5.65%, 14.3% 5.3%, 14.8% 5%, 15.35% 4.7%, 15.9% 4.4%, 16.5% 4.1%, 17.05% 3.85%, 17.6% 3.6%, 18.2% 3.35%, 18.8% 3.1%, 19.4% 2.9%, 20% 2.65%, 20.6% 2.4%, 21.25% 2.2%, 21.9% 2%, 22.55% 1.8%, 23.2% 1.65%, 23.9% 1.5%, 24.6% 1.35%, 25.3% 1.2%, 26% 1.1%, 26.75% 1%, 27.5% 0.9%, 28.25% 0.8%, 29% 0.7%, 29.8% 0.65%, 30.6% 0.6%, 31.4% 0.55%, 32.2% 0.5%, 33% 0.45%, 33.8% 0.4%, 34.65% 0.35%, 35.5% 0.3%, 36.35% 0.25%, 37.2% 0.2%, 38.1% 0.15%, 39% 0.1%, 39.9% 0.05%, 40.8% 0%, 41.75% 0%, 42.7% 0%, 43.7% 0%, 44.7% 0%, 45.7% 0%, 46.75% 0%, 47.8% 0%, 48.9% 0%, 50% 0%, 51.1% 0%, 52.2% 0%, 53.25% 0%, 54.3% 0%, 55.3% 0%, 56.3% 0%, 57.3% 0%, 58.25% 0%, 59.2% 0%, 60.1% 0.05%, 61% 0.1%, 61.9% 0.15%, 62.8% 0.2%, 63.65% 0.25%, 64.5% 0.3%, 65.35% 0.35%, 66.2% 0.4%, 67% 0.45%, 67.8% 0.5%, 68.6% 0.55%, 69.4% 0.6%, 70.2% 0.65%, 71% 0.7%, 71.75% 0.8%, 72.5% 0.9%, 73.25% 1%, 74% 1.1%, 74.7% 1.2%, 75.4% 1.35%, 76.1% 1.5%, 76.8% 1.65%, 77.45% 1.8%, 78.1% 2%, 78.75% 2.2%, 79.4% 2.4%, 80% 2.65%, 80.6% 2.9%, 81.2% 3.1%, 81.8% 3.35%, 82.4% 3.6%, 82.95% 3.85%, 83.5% 4.1%, 84.1% 4.4%, 84.65% 4.7%, 85.2% 5%, 85.7% 5.3%, 86.25% 5.65%, 86.8% 6%, 87.3% 6.3%, 87.8% 6.7%, 88.3% 7%, 88.75% 7.4%, 89.25% 7.8%, 89.7% 8.1%, 90.2% 8.5%, 90.65% 8.9%, 91.1% 9.3%, 91.55% 9.7%, 92% 10.1%, 92.4% 10.6%, 92.8% 11%, 93.2% 11.5%, 93.6% 11.9%, 94% 12.4%, 94.35% 12.9%, 94.7% 13.4%, 95.05% 13.9%, 95.4% 14.4%, 95.7% 15%, 96% 15.5%, 96.3% 16%, 96.6% 16.6%, 96.9% 17.2%, 97.15% 17.8%, 97.4% 18.4%, 97.65% 19%, 97.9% 19.6%, 98.1% 20.3%, 98.3% 20.9%, 98.5% 21.6%, 98.7% 22.3%, 98.85% 23%, 99% 23.7%, 99.15% 24.5%, 99.3% 25.3%, 99.4% 26.1%, 99.5% 27%, 99.6% 27.9%, 99.7% 28.8%, 99.75% 29.8%, 99.8% 30.8%, 99.85% 31.9%, 99.9% 33.1%, 99.95% 34.4%, 99.95% 35.8%, 100% 37.5%, 100% 39.5%, 100% 42%, 100% 0)",balanced:"polygon(100% 50%, 100% 56.6%, 100% 59.3%, 100% 61.4%, 99.9% 63.2%, 99.9% 64.8%, 99.9% 66.2%, 99.8% 67.5%, 99.8% 68.7%, 99.7% 69.8%, 99.6% 70.8%, 99.5% 71.8%, 99.5% 72.8%, 99.4% 73.7%, 99.3% 74.6%, 99.1% 75.4%, 99% 76.3%, 98.9% 77%, 98.8% 77.8%, 98.6% 78.5%, 98.5% 79.2%, 98.3% 79.9%, 98.1% 80.6%, 98% 81.3%, 97.8% 81.9%, 97.6% 82.5%, 97.4% 83.1%, 97.2% 83.7%, 97% 84.3%, 96.8% 84.8%, 96.5% 85.4%, 96.3% 85.9%, 96% 86.4%, 95.8% 86.9%, 95.5% 87.4%, 95.3% 87.9%, 95% 88.3%, 94.7% 88.8%, 94.4% 89.2%, 94.1% 89.7%, 93.8% 90.1%, 93.4% 90.5%, 93.1% 90.9%, 92.8% 91.3%, 92.4% 91.7%, 92% 92%, 91.7% 92.4%, 91.3% 92.8%, 90.9% 93.1%, 90.5% 93.4%, 90.1% 93.8%, 89.7% 94.1%, 89.2% 94.4%, 88.8% 94.7%, 88.3% 95%, 87.9% 95.3%, 87.4% 95.5%, 86.9% 95.8%, 86.4% 96%, 85.9% 96.3%, 85.4% 96.5%, 84.8% 96.8%, 84.3% 97%, 83.7% 97.2%, 83.1% 97.4%, 82.5% 97.6%, 81.9% 97.8%, 81.3% 98%, 80.6% 98.1%, 79.9% 98.3%, 79.2% 98.5%, 78.5% 98.6%, 77.8% 98.8%, 77% 98.9%, 76.3% 99%, 75.4% 99.1%, 74.6% 99.3%, 73.7% 99.4%, 72.8% 99.5%, 71.8% 99.5%, 70.8% 99.6%, 69.8% 99.7%, 68.7% 99.8%, 67.5% 99.8%, 66.2% 99.9%, 64.8% 99.9%, 63.2% 99.9%, 61.4% 100%, 59.3% 100%, 56.6% 100%, 50% 100%, 43.4% 100%, 40.7% 100%, 38.6% 100%, 36.8% 99.9%, 35.2% 99.9%, 33.8% 99.9%, 32.5% 99.8%, 31.3% 99.8%, 30.2% 99.7%, 29.2% 99.6%, 28.2% 99.5%, 27.2% 99.5%, 26.3% 99.4%, 25.4% 99.3%, 24.6% 99.1%, 23.7% 99%, 23% 98.9%, 22.2% 98.8%, 21.5% 98.6%, 20.8% 98.5%, 20.1% 98.3%, 19.4% 98.1%, 18.7% 98%, 18.1% 97.8%, 17.5% 97.6%, 16.9% 97.4%, 16.3% 97.2%, 15.7% 97%, 15.2% 96.8%, 14.6% 96.5%, 14.1% 96.3%, 13.6% 96%, 13.1% 95.8%, 12.6% 95.5%, 12.1% 95.3%, 11.7% 95%, 11.2% 94.7%, 10.8% 94.4%, 10.3% 94.1%, 9.9% 93.8%, 9.5% 93.4%, 9.1% 93.1%, 8.7% 92.8%, 8.3% 92.4%, 8% 92%, 7.6% 91.7%, 7.2% 91.3%, 6.9% 90.9%, 6.6% 90.5%, 6.2% 90.1%, 5.9% 89.7%, 5.6% 89.2%, 5.3% 88.8%, 5% 88.3%, 4.7% 87.9%, 4.5% 87.4%, 4.2% 86.9%, 4% 86.4%, 3.7% 85.9%, 3.5% 85.4%, 3.2% 84.8%, 3% 84.3%, 2.8% 83.7%, 2.6% 83.1%, 2.4% 82.5%, 2.2% 81.9%, 2% 81.3%, 1.9% 80.6%, 1.7% 79.9%, 1.5% 79.2%, 1.4% 78.5%, 1.2% 77.8%, 1.1% 77%, 1% 76.3%, 0.9% 75.4%, 0.7% 74.6%, 0.6% 73.7%, 0.5% 72.8%, 0.5% 71.8%, 0.4% 70.8%, 0.3% 69.8%, 0.2% 68.7%, 0.2% 67.5%, 0.1% 66.2%, 0.1% 64.8%, 0.1% 63.2%, 0% 61.4%, 0% 59.3%, 0% 56.6%, 0% 50%, 0% 43.4%, 0% 40.7%, 0% 38.6%, 0.1% 36.8%, 0.1% 35.2%, 0.1% 33.8%, 0.2% 32.5%, 0.2% 31.3%, 0.3% 30.2%, 0.4% 29.2%, 0.5% 28.2%, 0.5% 27.2%, 0.6% 26.3%, 0.7% 25.4%, 0.9% 24.6%, 1% 23.7%, 1.1% 23%, 1.2% 22.2%, 1.4% 21.5%, 1.5% 20.8%, 1.7% 20.1%, 1.9% 19.4%, 2% 18.7%, 2.2% 18.1%, 2.4% 17.5%, 2.6% 16.9%, 2.8% 16.3%, 3% 15.7%, 3.2% 15.2%, 3.5% 14.6%, 3.7% 14.1%, 4% 13.6%, 4.2% 13.1%, 4.5% 12.6%, 4.7% 12.1%, 5% 11.7%, 5.3% 11.2%, 5.6% 10.8%, 5.9% 10.3%, 6.2% 9.9%, 6.6% 9.5%, 6.9% 9.1%, 7.2% 8.7%, 7.6% 8.3%, 8% 8%, 8.3% 7.6%, 8.7% 7.2%, 9.1% 6.9%, 9.5% 6.6%, 9.9% 6.2%, 10.3% 5.9%, 10.8% 5.6%, 11.2% 5.3%, 11.7% 5%, 12.1% 4.7%, 12.6% 4.5%, 13.1% 4.2%, 13.6% 4%, 14.1% 3.7%, 14.6% 3.5%, 15.2% 3.2%, 15.7% 3%, 16.3% 2.8%, 16.9% 2.6%, 17.5% 2.4%, 18.1% 2.2%, 18.7% 2%, 19.4% 1.9%, 20.1% 1.7%, 20.8% 1.5%, 21.5% 1.4%, 22.2% 1.2%, 23% 1.1%, 23.7% 1%, 24.6% 0.9%, 25.4% 0.7%, 26.3% 0.6%, 27.2% 0.5%, 28.2% 0.5%, 29.2% 0.4%, 30.2% 0.3%, 31.3% 0.2%, 32.5% 0.2%, 33.8% 0.1%, 35.2% 0.1%, 36.8% 0.1%, 38.6% 0%, 40.7% 0%, 43.4% 0%, 50% 0%, 56.6% 0%, 59.3% 0%, 61.4% 0%, 63.2% 0.1%, 64.8% 0.1%, 66.2% 0.1%, 67.5% 0.2%, 68.7% 0.2%, 69.8% 0.3%, 70.8% 0.4%, 71.8% 0.5%, 72.8% 0.5%, 73.7% 0.6%, 74.6% 0.7%, 75.4% 0.9%, 76.3% 1%, 77% 1.1%, 77.8% 1.2%, 78.5% 1.4%, 79.2% 1.5%, 79.9% 1.7%, 80.6% 1.9%, 81.3% 2%, 81.9% 2.2%, 82.5% 2.4%, 83.1% 2.6%, 83.7% 2.8%, 84.3% 3%, 84.8% 3.2%, 85.4% 3.5%, 85.9% 3.7%, 86.4% 4%, 86.9% 4.2%, 87.4% 4.5%, 87.9% 4.7%, 88.3% 5%, 88.8% 5.3%, 89.2% 5.6%, 89.7% 5.9%, 90.1% 6.2%, 90.5% 6.6%, 90.9% 6.9%, 91.3% 7.2%, 91.7% 7.6%, 92% 8%, 92.4% 8.3%, 92.8% 8.7%, 93.1% 9.1%, 93.4% 9.5%, 93.8% 9.9%, 94.1% 10.3%, 94.4% 10.8%, 94.7% 11.2%, 95% 11.7%, 95.3% 12.1%, 95.5% 12.6%, 95.8% 13.1%, 96% 13.6%, 96.3% 14.1%, 96.5% 14.6%, 96.8% 15.2%, 97% 15.7%, 97.2% 16.3%, 97.4% 16.9%, 97.6% 17.5%, 97.8% 18.1%, 98% 18.7%, 98.1% 19.4%, 98.3% 20.1%, 98.5% 20.8%, 98.6% 21.5%, 98.8% 22.2%, 98.9% 23%, 99% 23.7%, 99.1% 24.6%, 99.3% 25.4%, 99.4% 26.3%, 99.5% 27.2%, 99.5% 28.2%, 99.6% 29.2%, 99.7% 30.2%, 99.8% 31.3%, 99.8% 32.5%, 99.9% 33.8%, 99.9% 35.2%, 99.9% 36.8%, 100% 38.6%, 100% 40.7%, 100% 43.4%, 100% 0)",prominent:"polygon(100% 50%, 100% 55.4%, 100% 58.2%, 100% 60.5%, 99.95% 62.5%, 99.9% 64.2%, 99.9% 65.8%, 99.85% 67.2%, 99.8% 68.5%, 99.75% 69.7%, 99.7% 70.8%, 99.65% 71.9%, 99.6% 72.9%, 99.55% 73.9%, 99.5% 74.8%, 99.4% 75.7%, 99.3% 76.6%, 99.2% 77.4%, 99.1% 78.2%, 99% 79%, 98.9% 79.7%, 98.75% 80.5%, 98.6% 81.2%, 98.45% 81.9%, 98.3% 82.6%, 98.15% 83.2%, 97.95% 83.9%, 97.75% 84.5%, 97.55% 85.1%, 97.35% 85.7%, 97.15% 86.3%, 96.9% 86.9%, 96.7% 87.4%, 96.45% 88%, 96.2% 88.5%, 95.95% 89%, 95.7% 89.5%, 95.4% 90%, 95.1% 90.5%, 94.8% 91%, 94.5% 91.4%, 94.2% 91.9%, 93.85% 92.3%, 93.5% 92.7%, 93.15% 93.1%, 92.8% 93.5%, 92.4% 93.9%, 92% 94.3%, 91.6% 94.6%, 91.2% 95%, 90.75% 95.3%, 90.35% 95.7%, 89.9% 96%, 89.5% 96.3%, 89.05% 96.6%, 88.6% 96.9%, 88.15% 97.2%, 87.7% 97.5%, 87.2% 97.75%, 86.7% 98%, 86.2% 98.25%, 85.7% 98.5%, 85.2% 98.7%, 84.65% 98.95%, 84.1% 99.15%, 83.55% 99.35%, 83% 99.5%, 82.4% 99.7%, 81.8% 99.85%, 81.2% 100%, 80.6% 100%, 79.95% 100%, 79.3% 100%, 78.65% 100%, 78% 100%, 77.3% 100%, 76.6% 100%, 75.9% 100%, 75.2% 100%, 74.5% 100%, 73.75% 100%, 73% 100%, 72.25% 100%, 71.5% 100%, 70.75% 100%, 70% 100%, 69.2% 100%, 68.4% 100%, 67.6% 100%, 66.8% 100%, 66% 100%, 65.2% 100%, 64.35% 100%, 63.5% 100%, 62.65% 100%, 61.8% 100%, 60.95% 100%, 60.05% 100%, 59.2% 100%, 58.3% 100%, 57.4% 100%, 56.5% 100%, 55.6% 100%, 54.7% 100%, 53.75% 100%, 52.8% 100%, 51.85% 100%, 50.9% 100%, 50% 100%, 49.1% 100%, 48.15% 100%, 47.2% 100%, 46.25% 100%, 45.3% 100%, 44.4% 100%, 43.5% 100%, 42.6% 100%, 41.7% 100%, 40.8% 100%, 39.95% 100%, 39.05% 100%, 38.2% 100%, 37.35% 100%, 36.5% 100%, 35.65% 100%, 34.8% 100%, 34% 100%, 33.2% 100%, 32.4% 100%, 31.6% 100%, 30.8% 100%, 30% 100%, 29.25% 100%, 28.5% 100%, 27.75% 100%, 27% 100%, 26.25% 100%, 25.5% 100%, 24.8% 100%, 24.1% 100%, 23.4% 100%, 22.7% 100%, 22% 100%, 21.35% 100%, 20.7% 100%, 20.05% 100%, 19.4% 100%, 18.8% 99.85%, 18.2% 99.7%, 17.6% 99.5%, 17% 99.35%, 16.45% 99.15%, 15.9% 98.95%, 15.35% 98.7%, 14.8% 98.5%, 14.3% 98.25%, 13.8% 98%, 13.3% 97.75%, 12.8% 97.5%, 12.35% 97.2%, 11.85% 96.9%, 11.4% 96.6%, 10.95% 96.3%, 10.5% 96%, 10.1% 95.7%, 9.65% 95.3%, 9.25% 95%, 8.8% 94.6%, 8.4% 94.3%, 8% 93.9%, 7.6% 93.5%, 7.2% 93.1%, 6.85% 92.7%, 6.5% 92.3%, 6.15% 91.9%, 5.8% 91.4%, 5.5% 91%, 5.2% 90.5%, 4.9% 90%, 4.6% 89.5%, 4.3% 89%, 4.05% 88.5%, 3.8% 88%, 3.55% 87.4%, 3.3% 86.9%, 3.1% 86.3%, 2.85% 85.7%, 2.65% 85.1%, 2.45% 84.5%, 2.25% 83.9%, 2.05% 83.2%, 1.85% 82.6%, 1.7% 81.9%, 1.55% 81.2%, 1.4% 80.5%, 1.25% 79.7%, 1.1% 79%, 1% 78.2%, 0.9% 77.4%, 0.8% 76.6%, 0.7% 75.7%, 0.6% 74.8%, 0.5% 73.9%, 0.45% 72.9%, 0.4% 71.9%, 0.35% 70.8%, 0.3% 69.7%, 0.25% 68.5%, 0.2% 67.2%, 0.15% 65.8%, 0.1% 64.2%, 0.1% 62.5%, 0.05% 60.5%, 0% 58.2%, 0% 55.4%, 0% 50%, 0% 44.6%, 0% 41.8%, 0.05% 39.5%, 0.1% 37.5%, 0.1% 35.8%, 0.15% 34.2%, 0.2% 32.8%, 0.25% 31.5%, 0.3% 30.3%, 0.35% 29.2%, 0.4% 28.1%, 0.45% 27.1%, 0.5% 26.1%, 0.6% 25.2%, 0.7% 24.3%, 0.8% 23.4%, 0.9% 22.6%, 1% 21.8%, 1.1% 21%, 1.25% 20.3%, 1.4% 19.5%, 1.55% 18.8%, 1.7% 18.1%, 1.85% 17.4%, 2.05% 16.8%, 2.25% 16.1%, 2.45% 15.5%, 2.65% 14.9%, 2.85% 14.3%, 3.1% 13.7%, 3.3% 13.1%, 3.55% 12.6%, 3.8% 12%, 4.05% 11.5%, 4.3% 11%, 4.6% 10.5%, 4.9% 10%, 5.2% 9.5%, 5.5% 9%, 5.8% 8.6%, 6.15% 8.1%, 6.5% 7.7%, 6.85% 7.3%, 7.2% 6.9%, 7.6% 6.5%, 8% 6.1%, 8.4% 5.7%, 8.8% 5.4%, 9.25% 5%, 9.65% 4.7%, 10.1% 4.3%, 10.5% 4%, 10.95% 3.7%, 11.4% 3.4%, 11.85% 3.1%, 12.35% 2.8%, 12.8% 2.5%, 13.3% 2.25%, 13.8% 2%, 14.3% 1.75%, 14.8% 1.5%, 15.35% 1.3%, 15.9% 1.05%, 16.45% 0.85%, 17% 0.65%, 17.6% 0.5%, 18.2% 0.3%, 18.8% 0.15%, 19.4% 0%, 20.05% 0%, 20.7% 0%, 21.35% 0%, 22% 0%, 22.7% 0%, 23.4% 0%, 24.1% 0%, 24.8% 0%, 25.5% 0%, 26.25% 0%, 27% 0%, 27.75% 0%, 28.5% 0%, 29.25% 0%, 30% 0%, 30.8% 0%, 31.6% 0%, 32.4% 0%, 33.2% 0%, 34% 0%, 34.8% 0%, 35.65% 0%, 36.5% 0%, 37.35% 0%, 38.2% 0%, 39.05% 0%, 39.95% 0%, 40.8% 0%, 41.7% 0%, 42.6% 0%, 43.5% 0%, 44.4% 0%, 45.3% 0%, 46.25% 0%, 47.2% 0%, 48.15% 0%, 49.1% 0%, 50% 0%, 50.9% 0%, 51.85% 0%, 52.8% 0%, 53.75% 0%, 54.7% 0%, 55.6% 0%, 56.5% 0%, 57.4% 0%, 58.3% 0%, 59.2% 0%, 60.05% 0%, 60.95% 0%, 61.8% 0%, 62.65% 0%, 63.5% 0%, 64.35% 0%, 65.2% 0%, 66% 0%, 66.8% 0%, 67.6% 0%, 68.4% 0%, 69.2% 0%, 70% 0%, 70.75% 0%, 71.5% 0%, 72.25% 0%, 73% 0%, 73.75% 0%, 74.5% 0%, 75.2% 0%, 75.9% 0%, 76.6% 0%, 77.3% 0%, 78% 0%, 78.65% 0%, 79.3% 0%, 79.95% 0%, 80.6% 0%, 81.2% 0%, 81.8% 0.15%, 82.4% 0.3%, 83% 0.5%, 83.55% 0.65%, 84.1% 0.85%, 84.65% 1.05%, 85.2% 1.3%, 85.7% 1.5%, 86.2% 1.75%, 86.7% 2%, 87.2% 2.25%, 87.7% 2.5%, 88.15% 2.8%, 88.6% 3.1%, 89.05% 3.4%, 89.5% 3.7%, 89.9% 4%, 90.35% 4.3%, 90.75% 4.7%, 91.2% 5%, 91.6% 5.4%, 92% 5.7%, 92.4% 6.1%, 92.8% 6.5%, 93.15% 6.9%, 93.5% 7.3%, 93.85% 7.7%, 94.2% 8.1%, 94.5% 8.6%, 94.8% 9%, 95.1% 9.5%, 95.4% 10%, 95.7% 10.5%, 95.95% 11%, 96.2% 11.5%, 96.45% 12%, 96.7% 12.6%, 96.9% 13.1%, 97.15% 13.7%, 97.35% 14.3%, 97.55% 14.9%, 97.75% 15.5%, 97.95% 16.1%, 98.15% 16.8%, 98.3% 17.4%, 98.45% 18.1%, 98.6% 18.8%, 98.75% 19.5%, 98.9% 20.3%, 99% 21%, 99.1% 21.8%, 99.2% 22.6%, 99.3% 23.4%, 99.4% 24.3%, 99.5% 25.2%, 99.55% 26.1%, 99.6% 27.1%, 99.65% 28.1%, 99.7% 29.2%, 99.75% 30.3%, 99.8% 31.5%, 99.85% 32.8%, 99.9% 34.2%, 99.9% 35.8%, 99.95% 37.5%, 100% 39.5%, 100% 41.8%, 100% 44.6%, 100% 0)"},Cc=(t="none")=>Tg[t]||null,GC=Object.freeze(Object.defineProperty({__proto__:null,SQUIRCLE_STYLES:Tg,getSquircleClipPath:Cc},Symbol.toStringTag,{value:"Module"})),en={enter:t=>({x:t>0?"100%":"-100%",opacity:0}),center:{x:0,opacity:1},exit:t=>({x:t<0?"100%":"-100%",opacity:0})},KC=(t,e)=>e(t==="dark"?"dark":t==="light"?"light":"automatic"),YC=(t,e)=>({none:e("squircleStandard"),prominent:e("squircleProminent"),balanced:e("squircleBalanced"),subtle:e("squircleSubtle")})[t]||e("squircleStandard"),ZC=()=>{try{const t=localStorage.getItem("systemSettings");if(!t)return{brightness:100,blur:0,contrast:100,saturation:100,grayscale:0};const i=JSON.parse(t).appearance||{};return{brightness:i.backgroundBrightness||100,blur:i.backgroundBlur||0,contrast:i.backgroundContrast||100,saturation:i.backgroundSaturation||100,grayscale:i.backgroundGrayscale||0}}catch{return{brightness:100,blur:0,contrast:100,saturation:100,grayscale:0}}},An=t=>{try{const e=localStorage.getItem("systemSettings"),i=e?JSON.parse(e):{};i.appearance=i.appearance||{},i.appearance.backgroundBrightness=t.brightness,i.appearance.backgroundBlur=t.blur,i.appearance.backgroundContrast=t.contrast,i.appearance.backgroundSaturation=t.saturation,i.appearance.backgroundGrayscale=t.grayscale,localStorage.setItem("systemSettings",JSON.stringify(i)),document.documentElement.style.setProperty("--background-brightness",`${t.brightness}%`),document.documentElement.style.setProperty("--background-blur",`${t.blur}px`),document.documentElement.style.setProperty("--background-contrast",`${t.contrast}%`),document.documentElement.style.setProperty("--background-saturation",`${t.saturation}%`),document.documentElement.style.setProperty("--background-grayscale",`${t.grayscale}%`)}catch(e){console.error("Failed to save background settings:",e)}},qC=()=>{try{const t=localStorage.getItem("systemSettings");if(!t)return{enabled:!1,mobileEnabled:!1,path:"/local/fast-search-videos"};const i=JSON.parse(t).appearance||{};return{enabled:i.detailViewVideosEnabled===!0,mobileEnabled:i.detailViewVideosMobileEnabled===!0,path:i.detailViewVideosPath||"/local/fast-search-videos"}}catch{return{enabled:!1,mobileEnabled:!1,path:"/local/fast-search-videos"}}},w0=t=>{try{const e=localStorage.getItem("systemSettings"),i=e?JSON.parse(e):{};i.appearance=i.appearance||{},i.appearance.detailViewVideosEnabled=t.enabled,i.appearance.detailViewVideosMobileEnabled=t.mobileEnabled,i.appearance.detailViewVideosPath=t.path,localStorage.setItem("systemSettings",JSON.stringify(i))}catch(e){console.error("Failed to save video settings:",e)}},XC=()=>{try{const t=localStorage.getItem("systemSettings");return t&&(JSON.parse(t).appearance||{}).gridColumns||4}catch{return 4}},JC=t=>{try{const e=localStorage.getItem("systemSettings"),i=e?JSON.parse(e):{};i.appearance=i.appearance||{},i.appearance.gridColumns=t,localStorage.setItem("systemSettings",JSON.stringify(i)),document.documentElement.style.setProperty("--device-grid-columns",t)}catch(e){console.error("Failed to save grid columns setting:",e)}},QC=()=>{try{const t=localStorage.getItem("systemSettings");return t&&(JSON.parse(t).appearance||{}).squircleStyle||"none"}catch{return"none"}},e6=t=>{try{const e=localStorage.getItem("systemSettings"),i=e?JSON.parse(e):{};i.appearance=i.appearance||{},i.appearance.squircleStyle=t,localStorage.setItem("systemSettings",JSON.stringify(i));const n=Cc(t);n?document.documentElement.style.setProperty("--card-clip-path",n):document.documentElement.style.removeProperty("--card-clip-path")}catch(e){console.error("Failed to save squircle style setting:",e)}},t6=({t,darkMode:e,applyDarkMode:i,isDropdownOpen:n,setIsDropdownOpen:r,hass:o,lang:a})=>{const[l,c]=M("main"),d=te(null),[u,h]=M(!1),[m,f]=M(()=>qC()),[g,p]=M(()=>XC()),[v,b]=M(()=>QC()),[y,w]=M(()=>ZC());U(()=>{document.documentElement.style.setProperty("--device-grid-columns",g);const z=Cc(v);z&&document.documentElement.style.setProperty("--card-clip-path",z),document.documentElement.style.setProperty("--background-brightness",`${y.brightness}%`),document.documentElement.style.setProperty("--background-blur",`${y.blur}px`)},[]);const _=()=>{c("main")},k=z=>{const D={...m,enabled:z};f(D),w0(D)},N=z=>{const D={...m,mobileEnabled:z};f(D),w0(D)},C=z=>{p(z),JC(z)},S=z=>{b(z),e6(z)},x=z=>{const D={...y,brightness:z};w(D),An(D)},B=z=>{const D={...y,blur:z};w(D),An(D)},A=z=>{const D={...y,contrast:z};w(D),An(D)},P=z=>{const D={...y,saturation:z};w(D),An(D)},I=z=>{const D={...y,grayscale:z};w(D),An(D)};return s("div",{className:"ios-settings-container",children:s(Ce,{mode:"wait",initial:!1,custom:l==="main"?-1:1,children:l==="main"?s(T.div,{custom:-1,variants:en,initial:!1,animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),style:{position:"relative"},children:[s("div",{ref:d,className:"ios-settings-view",style:{padding:"20px"},children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("design")}),s("div",{className:"ios-card",children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>c("darkMode"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("backgroundMode")}),s("div",{className:"ios-item-subtitle",children:t("backgroundModeDescription")})]})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:KC(e,t)}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>c("gridColumns"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("gridColumns")}),s("div",{className:"ios-item-subtitle",children:t("gridColumnsDescription")})]})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:t("columnsCount").replace("{count}",g)}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>c("squircleStyle"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("cardShape")}),s("div",{className:"ios-item-subtitle",children:t("cardShapeDescription")})]})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:YC(v,t)}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>c("backgroundSettings"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("background")}),s("div",{className:"ios-item-subtitle",children:t("backgroundDescription")})]})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:y.brightness!==100||y.blur!==0||y.contrast!==100||y.saturation!==100||y.grayscale!==0?t("customized"):t("standard")}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("animations")}),s("div",{className:"ios-card",children:s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>c("animations"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("detailViewVideos")}),s("div",{className:"ios-item-subtitle",children:t("detailViewVideosDescription")})]})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:m.enabled?t("active"):t("inactive")}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})})]})]}),s(Pe,{scrollContainerRef:d,isHovered:u})]},"main"):l==="darkMode"?s(T.div,{custom:1,variants:en,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:_,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:t("back")})]}),s("div",{className:"ios-navbar-title",children:t("backgroundMode")})]}),s("div",{ref:d,className:"ios-settings-view",children:s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{i("auto"),setTimeout(_,150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:t("automatic")})})}),s("div",{className:"ios-item-right",children:e==="auto"&&s(T.svg,{className:"ios-checkmark",width:"24",height:"24",viewBox:"0 0 24 24",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},children:[s(T.circle,{cx:"12",cy:"12",r:"11",fill:"white",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"}),s(T.path,{d:"M7 12L10.5 15.5L17 9",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{i("light"),setTimeout(_,150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:t("light")})})}),s("div",{className:"ios-item-right",children:e==="light"&&s(T.svg,{className:"ios-checkmark",width:"24",height:"24",viewBox:"0 0 24 24",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},children:[s(T.circle,{cx:"12",cy:"12",r:"11",fill:"white",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"}),s(T.path,{d:"M7 12L10.5 15.5L17 9",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{i("dark"),setTimeout(_,150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:t("dark")})})}),s("div",{className:"ios-item-right",children:e==="dark"&&s(T.svg,{className:"ios-checkmark",width:"24",height:"24",viewBox:"0 0 24 24",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},children:[s(T.circle,{cx:"12",cy:"12",r:"11",fill:"white",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"}),s(T.path,{d:"M7 12L10.5 15.5L17 9",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]})]})})}),s(Pe,{scrollContainerRef:d,isHovered:u})]},"darkMode"):l==="animations"?s(T.div,{custom:1,variants:en,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:_,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:t("back")})]}),s("div",{className:"ios-navbar-title",children:t("detailViewVideos")})]}),s("div",{ref:d,className:"ios-settings-view",children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("settings")}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("enableVideos")}),s("div",{className:"ios-item-subtitle",children:t("enableVideosDescription")})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:m.enabled,onChange:z=>k(z.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("onMobile")}),s("div",{className:"ios-item-subtitle",children:t("onMobileDescription")})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:m.mobileEnabled,onChange:z=>N(z.target.checked),disabled:!m.enabled}),s("span",{className:"ios-toggle-slider"})]})})]})]})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("videoFolder")}),s("div",{className:"ios-card",children:s("div",{className:"ios-item",children:s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("path")}),s("div",{className:"ios-item-subtitle",children:m.path})]})})})}),s("div",{className:"ios-section-footer",children:t("videoFooter")})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("videoFiles")}),s("div",{className:"ios-card",style:{padding:"16px"},children:s("div",{className:"ios-text",style:{fontSize:"14px",lineHeight:"1.6"},children:[s("strong",{className:"ios-text-strong",children:t("namingScheme")}),s("br",{}),s("code",{style:{background:"rgba(0,0,0,0.3)",padding:"2px 6px",borderRadius:"4px",fontSize:"13px"},children:"{domain}_{state}.mp4"}),s("br",{}),s("br",{}),s("strong",{className:"ios-text-strong",children:t("examples")}),s("br",{})," light_on.mp4 / light_off.mp4",s("br",{})," switch_on.mp4 / switch_off.mp4",s("br",{})," cover_open.mp4 / cover_closed.mp4",s("br",{})," fan_on.mp4 / fan_off.mp4",s("br",{}),s("br",{}),s("strong",{className:"ios-text-strong",children:[t("note"),":"]}),s("br",{}),t("namingSchemeNote")]})})]})]}),s(Pe,{scrollContainerRef:d,isHovered:u})]},"animations"):l==="gridColumns"?s(T.div,{custom:1,variants:en,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:_,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:t("back")})]}),s("div",{className:"ios-navbar-title",children:t("gridColumns")})]}),s("div",{ref:d,className:"ios-settings-view",children:[s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{C(4),setTimeout(_,150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("fourColumns")}),s("div",{className:"ios-item-subtitle",children:t("fourColumnsDescription")})]})}),s("div",{className:"ios-item-right",children:g===4&&s(T.svg,{className:"ios-checkmark",width:"24",height:"24",viewBox:"0 0 24 24",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},children:[s(T.circle,{cx:"12",cy:"12",r:"11",fill:"white",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"}),s(T.path,{d:"M7 12L10.5 15.5L17 9",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{C(5),setTimeout(_,150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("fiveColumns")}),s("div",{className:"ios-item-subtitle",children:t("fiveColumnsDescription")})]})}),s("div",{className:"ios-item-right",children:g===5&&s(T.svg,{className:"ios-checkmark",width:"24",height:"24",viewBox:"0 0 24 24",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},children:[s(T.circle,{cx:"12",cy:"12",r:"11",fill:"white",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"}),s(T.path,{d:"M7 12L10.5 15.5L17 9",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]})]})}),s("div",{className:"ios-section",children:s("div",{className:"ios-section-footer",children:t("gridColumnsFooter")})})]}),s(Pe,{scrollContainerRef:d,isHovered:u})]},"gridColumns"):l==="squircleStyle"?s(T.div,{custom:1,variants:en,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:_,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:t("back")})]}),s("div",{className:"ios-navbar-title",children:t("cardShape")})]}),s("div",{ref:d,className:"ios-settings-view",children:[s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{S("none"),setTimeout(_,150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("squircleStandard")}),s("div",{className:"ios-item-subtitle",children:t("squircleStandardDescription")})]})}),s("div",{className:"ios-item-right",children:v==="none"&&s(T.svg,{className:"ios-checkmark",width:"24",height:"24",viewBox:"0 0 24 24",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},children:[s(T.circle,{cx:"12",cy:"12",r:"11",fill:"white",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"}),s(T.path,{d:"M7 12L10.5 15.5L17 9",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{S("prominent"),setTimeout(_,150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("squircleProminent")}),s("div",{className:"ios-item-subtitle",children:t("squircleProminentDescription")})]})}),s("div",{className:"ios-item-right",children:v==="prominent"&&s(T.svg,{className:"ios-checkmark",width:"24",height:"24",viewBox:"0 0 24 24",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},children:[s(T.circle,{cx:"12",cy:"12",r:"11",fill:"white",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"}),s(T.path,{d:"M7 12L10.5 15.5L17 9",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{S("balanced"),setTimeout(_,150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("squircleBalanced")}),s("div",{className:"ios-item-subtitle",children:t("squircleBalancedDescription")})]})}),s("div",{className:"ios-item-right",children:v==="balanced"&&s(T.svg,{className:"ios-checkmark",width:"24",height:"24",viewBox:"0 0 24 24",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},children:[s(T.circle,{cx:"12",cy:"12",r:"11",fill:"white",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"}),s(T.path,{d:"M7 12L10.5 15.5L17 9",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{S("subtle"),setTimeout(_,150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("squircleSubtle")}),s("div",{className:"ios-item-subtitle",children:t("squircleSubtleDescription")})]})}),s("div",{className:"ios-item-right",children:v==="subtle"&&s(T.svg,{className:"ios-checkmark",width:"24",height:"24",viewBox:"0 0 24 24",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},children:[s(T.circle,{cx:"12",cy:"12",r:"11",fill:"white",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"}),s(T.path,{d:"M7 12L10.5 15.5L17 9",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]})]})}),s("div",{className:"ios-section",children:s("div",{className:"ios-section-footer",children:t("squircleFooter")})})]}),s(Pe,{scrollContainerRef:d,isHovered:u})]},"squircleStyle"):l==="backgroundSettings"?s(T.div,{custom:1,variants:en,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:_,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:t("back")})]}),s("div",{className:"ios-navbar-title",children:t("background")})]}),s("div",{ref:d,className:"ios-settings-view",children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-card",children:s("div",{className:"ios-item",style:{paddingTop:"16px",paddingBottom:"16px"},children:s("div",{className:"ios-item-left",style:{flexDirection:"column",alignItems:"flex-start",gap:"12px",width:"100%"},children:[s("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"},children:[s("div",{className:"ios-item-label",children:t("brightnessLabel")}),s("div",{className:"slider-value",style:{fontSize:"14px",fontWeight:"600"},children:[y.brightness,"%"]})]}),s("input",{type:"range",min:"0",max:"100",value:y.brightness,onChange:z=>x(parseInt(z.target.value)),style:{width:"100%",height:"4px",borderRadius:"2px",background:`linear-gradient(to right, rgb(0, 122, 255) 0%, rgb(0, 122, 255) ${y.brightness}%, rgba(255,255,255,0.2) ${y.brightness}%, rgba(255,255,255,0.2) 100%)`,outline:"none",WebkitAppearance:"none",appearance:"none"}})]})})}),s("div",{className:"ios-section-footer",children:t("brightnessFooter")})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-card",children:s("div",{className:"ios-item",style:{paddingTop:"16px",paddingBottom:"16px"},children:s("div",{className:"ios-item-left",style:{flexDirection:"column",alignItems:"flex-start",gap:"12px",width:"100%"},children:[s("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"},children:[s("div",{className:"ios-item-label",children:t("blurLabel")}),s("div",{className:"slider-value",style:{fontSize:"14px",fontWeight:"600"},children:[y.blur,"px"]})]}),s("input",{type:"range",min:"0",max:"50",value:y.blur,onChange:z=>B(parseInt(z.target.value)),style:{width:"100%",height:"4px",borderRadius:"2px",background:`linear-gradient(to right, rgb(0, 122, 255) 0%, rgb(0, 122, 255) ${y.blur*2}%, rgba(255,255,255,0.2) ${y.blur*2}%, rgba(255,255,255,0.2) 100%)`,outline:"none",WebkitAppearance:"none",appearance:"none"}})]})})}),s("div",{className:"ios-section-footer",children:t("blurFooter")})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-card",children:s("div",{className:"ios-item",style:{paddingTop:"16px",paddingBottom:"16px"},children:s("div",{className:"ios-item-left",style:{flexDirection:"column",alignItems:"flex-start",gap:"12px",width:"100%"},children:[s("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"},children:[s("div",{className:"ios-item-label",children:t("contrastLabel")}),s("div",{className:"slider-value",style:{fontSize:"14px",fontWeight:"600"},children:[y.contrast,"%"]})]}),s("input",{type:"range",min:"0",max:"200",value:y.contrast,onChange:z=>A(parseInt(z.target.value)),style:{width:"100%",height:"4px",borderRadius:"2px",background:`linear-gradient(to right, rgb(0, 122, 255) 0%, rgb(0, 122, 255) ${y.contrast/2}%, rgba(255,255,255,0.2) ${y.contrast/2}%, rgba(255,255,255,0.2) 100%)`,outline:"none",WebkitAppearance:"none",appearance:"none"}})]})})}),s("div",{className:"ios-section-footer",children:t("contrastFooter")})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-card",children:s("div",{className:"ios-item",style:{paddingTop:"16px",paddingBottom:"16px"},children:s("div",{className:"ios-item-left",style:{flexDirection:"column",alignItems:"flex-start",gap:"12px",width:"100%"},children:[s("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"},children:[s("div",{className:"ios-item-label",children:t("saturationLabel")}),s("div",{className:"slider-value",style:{fontSize:"14px",fontWeight:"600"},children:[y.saturation,"%"]})]}),s("input",{type:"range",min:"0",max:"200",value:y.saturation,onChange:z=>P(parseInt(z.target.value)),style:{width:"100%",height:"4px",borderRadius:"2px",background:`linear-gradient(to right, rgb(0, 122, 255) 0%, rgb(0, 122, 255) ${y.saturation/2}%, rgba(255,255,255,0.2) ${y.saturation/2}%, rgba(255,255,255,0.2) 100%)`,outline:"none",WebkitAppearance:"none",appearance:"none"}})]})})}),s("div",{className:"ios-section-footer",children:t("saturationFooter")})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-card",children:s("div",{className:"ios-item",style:{paddingTop:"16px",paddingBottom:"16px"},children:s("div",{className:"ios-item-left",style:{flexDirection:"column",alignItems:"flex-start",gap:"12px",width:"100%"},children:[s("div",{style:{display:"flex",justifyContent:"space-between",width:"100%",alignItems:"center"},children:[s("div",{className:"ios-item-label",children:t("grayscaleLabel")}),s("div",{className:"slider-value",style:{fontSize:"14px",fontWeight:"600"},children:[y.grayscale,"%"]})]}),s("input",{type:"range",min:"0",max:"100",value:y.grayscale,onChange:z=>I(parseInt(z.target.value)),style:{width:"100%",height:"4px",borderRadius:"2px",background:`linear-gradient(to right, rgb(0, 122, 255) 0%, rgb(0, 122, 255) ${y.grayscale}%, rgba(255,255,255,0.2) ${y.grayscale}%, rgba(255,255,255,0.2) 100%)`,outline:"none",WebkitAppearance:"none",appearance:"none"}})]})})}),s("div",{className:"ios-section-footer",children:t("grayscaleFooter")})]})]}),s(Pe,{scrollContainerRef:d,isHovered:u})]},"backgroundSettings"):null})})},i6=({t,maxEntitiesLimit:e,newPattern:i,setNewPattern:n,patternError:r,setPatternError:o,excludedPatterns:a,addPattern:l,removePattern:c})=>{const d=te(null),[u,h]=M(!1),[m,f]=M(e);return s("div",{className:"ios-settings-container",children:s("div",{className:"ios-view-wrapper",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),style:{position:"relative"},children:[s("div",{ref:d,className:"ios-settings-view",style:{padding:"20px"},children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("systemSettings")}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",style:{flexDirection:"column",alignItems:"stretch"},children:[s("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("maxEntities")}),s("div",{className:"ios-item-subtitle",children:m===0?t("maxEntitiesUnlimited"):t("maxEntitiesDescription").replace("{count}",m)})]})}),s("input",{type:"number",className:"ios-number-input",min:"0",max:"1000",step:"50",value:m,placeholder:"0",onChange:g=>{const p=parseInt(g.target.value)||0;f(p),localStorage.setItem("maxEntitiesLimit",p),window.dispatchEvent(new CustomEvent("entityLimitChanged",{detail:{limit:p}}))},style:{width:"100%",padding:"8px 12px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(255, 255, 255, 0.05)",color:"#ffffff",fontSize:"15px"}})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",style:{opacity:.7},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:t("onlyEntitiesWithArea")}),s("div",{className:"ios-item-subtitle",children:t("onlyEntitiesWithAreaDescription")})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",style:{pointerEvents:"none"},children:[s("input",{type:"checkbox",checked:!0,disabled:!0}),s("span",{className:"ios-toggle-slider"})]})})]})]})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("excludedPatterns")}),s("div",{className:"ios-card",style:{padding:"16px",marginBottom:"12px",backgroundColor:"rgba(0, 122, 255, 0.1)"},children:s("div",{className:"ios-text",style:{fontSize:"13px",lineHeight:"1.5"},children:[s("p",{style:{margin:"0 0 8px 0"},children:t("excludedPatternsDescription")}),s("ul",{style:{margin:"8px 0",paddingLeft:"20px"},children:[s("li",{children:[s("code",{style:{background:"rgba(0,0,0,0.2)",padding:"2px 4px",borderRadius:"3px"},children:"*"})," = ",t("wildcardAny")," ",s("code",{style:{background:"rgba(0,0,0,0.2)",padding:"2px 4px",borderRadius:"3px"},children:"sensor.*"})," ",t("wildcardAnySuffix")]}),s("li",{children:[s("code",{style:{background:"rgba(0,0,0,0.2)",padding:"2px 4px",borderRadius:"3px"},children:"?"})," = ",t("wildcardSingle")]})]}),s("div",{style:{marginTop:"12px"},children:[s("strong",{className:"ios-text-strong",children:t("examples")}),s("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",marginTop:"6px"},children:[s("span",{className:"ios-text-medium",style:{background:"rgba(0,0,0,0.3)",padding:"4px 8px",borderRadius:"12px",fontSize:"12px"},children:"sensor.temp_*"}),s("span",{className:"ios-text-medium",style:{background:"rgba(0,0,0,0.3)",padding:"4px 8px",borderRadius:"12px",fontSize:"12px"},children:"binary_sensor.motion_*"}),s("span",{className:"ios-text-medium",style:{background:"rgba(0,0,0,0.3)",padding:"4px 8px",borderRadius:"12px",fontSize:"12px"},children:"*_unavailable"})]})]})]})}),s("div",{className:"ios-card",style:{padding:"12px",marginBottom:"12px"},children:[s("div",{style:{display:"flex",gap:"8px"},children:[s("input",{type:"text",placeholder:t("patternPlaceholder"),value:i,onChange:g=>{n(g.target.value),o("")},onKeyPress:g=>{g.key==="Enter"&&l()},style:{flex:1,padding:"8px 12px",borderRadius:"8px",border:r?"1px solid rgb(255, 69, 58)":"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(255, 255, 255, 0.05)",color:"#ffffff",fontSize:"15px"}}),s("button",{onClick:l,style:{padding:"8px 16px",borderRadius:"8px",border:"none",background:"rgb(0, 122, 255)",color:"white",fontSize:"15px",fontWeight:600,cursor:"pointer",whiteSpace:"nowrap"},children:t("addPattern")})]}),r&&s("div",{style:{marginTop:"8px",color:"rgb(255, 69, 58)",fontSize:"13px"},children:[" ",r]})]}),a.length>0?s("div",{className:"ios-card",children:[s("div",{className:"ios-text-strong",style:{padding:"12px 16px",borderBottom:"1px solid rgba(255, 255, 255, 0.05)",fontWeight:600},children:t("activePatterns").replace("{count}",a.length)}),a.map((g,p)=>s("div",{children:[p>0&&s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("code",{className:"ios-text-strong",style:{background:"rgba(0, 122, 255, 0.15)",padding:"4px 8px",borderRadius:"6px",fontSize:"13px",fontFamily:"monospace"},children:g})}),s("div",{className:"ios-item-right",children:s("button",{onClick:()=>c(g),style:{background:"rgb(255, 69, 58)",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"18px",fontWeight:600,lineHeight:1},title:t("removePattern"),children:""})})]})]},p))]}):s("div",{className:"ios-card",style:{padding:"32px 16px",textAlign:"center"},children:[s("div",{style:{fontSize:"32px",marginBottom:"8px"},children:""}),s("div",{className:"ios-text",style:{fontSize:"13px"},children:t("noPatternsYet")})]})]})]}),s(Pe,{scrollContainerRef:d,isHovered:u})]})})},n6=({t})=>{const e=te(null),[i,n]=M(!1);return s("div",{className:"ios-settings-container",children:s(T.div,{className:"ios-view-wrapper",initial:!1,animate:"center",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),style:{position:"relative"},children:[s("div",{ref:e,className:"ios-settings-view",style:{padding:"20px"},children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("aboutCard")}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-label",children:t("version")})}),s("div",{className:"ios-item-right",children:s("span",{className:"ios-item-value",children:"1.1.1060"})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-label",children:t("build")})}),s("div",{className:"ios-item-right",children:s("span",{className:"ios-item-value",children:"2026.01.14"})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-label",children:t("developer")})}),s("div",{className:"ios-item-right",children:s("span",{className:"ios-item-value",children:"fastender"})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-label",children:t("license")})}),s("div",{className:"ios-item-right",children:s("span",{className:"ios-item-value",children:"MIT"})})]})]})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:t("privacySecurity")}),s("div",{className:"ios-card",children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:r=>{confirm(t("clearCacheConfirm"))&&(localStorage.removeItem("searchCache"),localStorage.removeItem("suggestionCache"),window.dispatchEvent(new CustomEvent("cacheCleared")),alert(t("clearCacheSuccess")))},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:t("clearCache")})})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{confirm(t("resetDataWarning"))&&confirm(t("resetDataConfirm"))&&(localStorage.clear(),window.location.reload())},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",style:{color:"rgb(255, 69, 58)"},children:t("resetData")})})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})]}),s("div",{className:"ios-section",children:s("div",{className:"ios-card",style:{padding:"16px",backgroundColor:"rgba(0, 122, 255, 0.1)"},children:s("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[s("div",{style:{fontSize:"24px"},children:""}),s("div",{children:[s("div",{className:"ios-text-strong",style:{fontWeight:600,marginBottom:"4px"},children:t("privacySecure")}),s("div",{className:"ios-text",style:{fontSize:"13px"},children:t("privacyLocalOnly")})]})]})})})]}),s(Pe,{scrollContainerRef:e,isHovered:i})]})})},so=({lang:t="de",onTabChange:e,settingsRef:i,hass:n})=>{const[r,o]=M(0),[a,l]=M(localStorage.getItem("darkMode")||"auto"),[c,d]=M(localStorage.getItem("userLanguage")||t||"de"),[u,h]=M(localStorage.getItem("userCurrency")||"EUR"),[m,f]=M(!0),[g,p]=M(!0),[v,b]=M(!0),[y,w]=M(localStorage.getItem("aiModeEnabled")!=="false"),[_,k]=M(!1),[N,C]=M(!1),[S,x]=M(()=>{try{const H=localStorage.getItem("excludedPatterns");return H?JSON.parse(H):[]}catch{return[]}}),[B,A]=M(""),[P,I]=M(""),[z]=M(localStorage.getItem("predictiveSuggestions")!=="false"),[D]=M(parseInt(localStorage.getItem("confidenceThreshold")||"60")),[L]=M(parseInt(localStorage.getItem("suggestionTimeWindow")||"45")),[E]=M(parseInt(localStorage.getItem("maxSuggestions")||"10")),[W]=M(localStorage.getItem("learningRate")||"normal"),[F]=M(parseInt(localStorage.getItem("maxEntitiesLimit")||"0")),K=c||t||"de",G=H=>ee(`settings.${H}`,K);U(()=>{const H=X=>{const me=X.detail.language;d(me)};return window.addEventListener("languageChanged",H),()=>{window.removeEventListener("languageChanged",H)}},[]),U(()=>{i&&(i.current={setActiveTab:H=>{o(H)},getActiveTab:()=>r,getTabIcons:()=>bg})}),U(()=>{e&&e(r)},[r,e]);const $=H=>{l(H),localStorage.setItem("darkMode",H),window.dispatchEvent(new CustomEvent("darkModeChanged",{detail:{mode:H}}))},Q=H=>!H||H.trim()===""?"Pattern darf nicht leer sein":/^[a-z0-9_.*?]+$/i.test(H)?null:"Pattern darf nur Buchstaben, Zahlen, Unterstrich, * und ? enthalten",re=()=>{const H=B.trim(),X=Q(H);if(X){I(X);return}if(S.includes(H)){I("Pattern existiert bereits");return}const me=[...S,H];x(me),localStorage.setItem("excludedPatterns",JSON.stringify(me)),window.dispatchEvent(new CustomEvent("excludedPatternsChanged",{detail:{patterns:me}})),A(""),I("")},he=H=>{const X=S.filter(me=>me!==H);x(X),localStorage.setItem("excludedPatterns",JSON.stringify(X)),window.dispatchEvent(new CustomEvent("excludedPatternsChanged",{detail:{patterns:X}}))};return s("div",{className:"settings-container",children:s("div",{className:"settings-content",children:(()=>{switch(r){case 0:return s(UC,{t:G,aiModeEnabled:y,setAiModeEnabled:w,animations:v,setAnimations:b,soundEffects:g,setSoundEffects:p,language:c,setLanguage:d,currency:u,setCurrency:h,isLangDropdownOpen:N,setIsLangDropdownOpen:C,notifications:m,setNotifications:f,hass:n,lang:K,predictiveSuggestions:z,confidenceThreshold:D,timeWindow:L,maxSuggestions:E,learningRate:W});case 1:return s(t6,{t:G,darkMode:a,applyDarkMode:$,isDropdownOpen:_,setIsDropdownOpen:k,hass:n,lang:K});case 2:return s(i6,{t:G,maxEntitiesLimit:F,newPattern:B,setNewPattern:A,patternError:P,setPatternError:I,excludedPatterns:S,addPattern:re,removePattern:he});case 3:return s(n6,{t:G});default:return null}})()})})};so.getTabIcons=()=>bg;const s6=({viewLoader:t,entity:e,hass:i,lang:n,onBack:r,onNavigate:o,onServiceCall:a,fallbackComponent:l})=>{const[c,d]=M(null),[u,h]=M(!0),[m,f]=M(null),g=_e.getEntityByDomain(e.domain);if(U(()=>{let p=!0;return t().then(v=>{p&&(d(()=>v.default||v),h(!1))}).catch(v=>{p&&(f(v.message),h(!1))}),()=>{p=!1}},[e.domain]),u)return s("div",{className:"system-view-loading",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px",color:"rgba(255,255,255,0.7)"},children:[s("div",{className:"loading-spinner",style:{width:"40px",height:"40px",border:"3px solid rgba(255,255,255,0.1)",borderTop:"3px solid rgba(255,255,255,0.5)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),s("p",{style:{marginTop:"16px"},children:["Loading ",e.name,"..."]})]});if(m)return s("div",{className:"system-view-error",style:{padding:"20px",textAlign:"center",color:"rgba(255,100,100,0.9)"},children:[s("h3",{children:"Error Loading View"}),s("p",{children:m}),l&&l()]});if(!c&&l){const p=l();if(p)return p}return c?s(c,{entity:g||e,hass:i,lang:n,onBack:r,onNavigate:o,onServiceCall:a}):s("div",{className:"system-view-error",style:{padding:"20px",textAlign:"center",color:"rgba(255,255,255,0.7)"},children:[s("h3",{children:"View Not Available"}),s("p",{children:["The view for ",e.name," could not be loaded."]})]})},r6=Sl(s6),o6=t=>({light:"",switch:"",climate:"",cover:"",media_player:"",vacuum:"",fan:"",lock:"",sensor:"",binary_sensor:"",camera:"",settings:"",news:"",todos:""})[t]||"",a6=t=>{const e={light:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",climate:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",media_player:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",cover:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",vacuum:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",default:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"};return{background:e[t.domain]||e.default}},l6=(t,e="de")=>{const i=n=>ee(`controls.${n}`,e);if(!t)return i("unknown");if(t.domain==="settings")return ee("controls.systemSettings",e);if(t.domain==="sensor"){const n=t.state,r=t.attributes?.unit_of_measurement||"",o=t.name?.toLowerCase()||"";return o.includes("batterie")||o.includes("battery")?`${n}${r==="%"?"%":""} ${e==="de"?"Batterie":"Battery"}`:o.includes("luftfeuchtigkeit")||o.includes("humidity")?`${n}${r==="%"?"%":""} ${e==="de"?"Luftfeuchtigkeit":"Humidity"}`:o.includes("temperatur")||o.includes("temperature")||r==="C"||r==="F"?`${n}${r||"C"}`:o.includes("energie")||o.includes("energy")||o.includes("power")||o.includes("strom")?`${n} ${r||"W"}`:o.includes("co2")?`${n} ${r||"ppm"} CO`:o.includes("druck")||o.includes("pressure")?`${n} ${r||"hPa"}`:r?`${n} ${r}`:n}if(t.domain==="binary_sensor")return t.state==="on"?e==="de"?"Aktiv":"Active":e==="de"?"Inaktiv":"Inactive";if(t.domain==="switch"){const n=t.state==="on"?i("on"):i("off");return n.charAt(0).toUpperCase()+n.slice(1)}if(t.domain==="light"){if(t.state==="on"){const r=t.attributes?.brightness;if(r){const a=Math.round(r/255*100),l=i("on");return`${l.charAt(0).toUpperCase()+l.slice(1)} - ${a}%`}const o=i("on");return o.charAt(0).toUpperCase()+o.slice(1)}const n=i("off");return n.charAt(0).toUpperCase()+n.slice(1)}if(t.domain==="climate"){const n=t.attributes?.temperature,r=t.attributes?.current_temperature;return n?`${r||"--"}  ${n}C`:t.state}if(t.domain==="printer3d_device"){const n=t.attributes?.current_step||"Bereit",r=String(n).toLowerCase();return{idle:e==="de"?"Leerlauf":"Idle",offline:"Offline",unavailable:e==="de"?"Nicht verfgbar":"Unavailable",unknown:e==="de"?"Unbekannt":"Unknown",bereit:e==="de"?"Bereit":"Ready",ready:e==="de"?"Bereit":"Ready",printing:e==="de"?"Druckt":"Printing",paused:e==="de"?"Pausiert":"Paused",error:e==="de"?"Fehler":"Error",complete:e==="de"?"Abgeschlossen":"Complete",finished:e==="de"?"Fertig":"Finished"}[r]||n}if(t.domain==="cover"){const n=t.attributes?.current_position;return n!==void 0?`${n}% ${e==="de"?"offen":"open"}`:t.state==="closed"?e==="de"?"Geschlossen":"Closed":e==="de"?"Offen":"Open"}return t.state||i("unknown")},c6=(t,e="de")=>{const i=ee("controls.justNow",e),n=ee("controls.since",e);if(t?.domain==="printer3d_device"){const o=t.attributes?.nozzle_size,a=t.attributes?.nozzle_type,l=[];return o&&o!=="unavailable"&&l.push(o),a&&a!=="unavailable"&&l.push(a),l.length>0?l.join(", "):e==="de"?"Nicht verfgbar":"Not available"}return{on:`${n} 2 ${e==="de"?"Stunden":"hours"}`,off:`${n} 30 ${e==="de"?"Minuten":"minutes"}`,playing:`${n} 15 ${e==="de"?"Minuten":"minutes"}`,idle:`${n} 1 ${e==="de"?"Stunde":"hour"}`}[t?.state]||i},d6=(t,e="de")=>{const i=[];if(t.domain==="light"){if(t.attributes?.brightness){const n=Math.round(t.attributes.brightness/255*100);i.push(`${n}% ${e==="de"?"Helligkeit":"Brightness"}`)}t.attributes?.color_temp&&i.push(`${t.attributes.color_temp} mired`),t.state==="on"?i.push(e==="de"?"Eingeschaltet":"On"):i.push(e==="de"?"Ausgeschaltet":"Off")}if(t.domain==="climate"&&(t.attributes?.current_temperature&&i.push(`${t.attributes.current_temperature}C ${e==="de"?"aktuell":"current"}`),t.attributes?.temperature&&i.push(`${t.attributes.temperature}C ${e==="de"?"Ziel":"target"}`),t.attributes?.hvac_mode&&i.push(t.attributes.hvac_mode)),t.domain==="printer3d_device"){const n=JSON.parse(localStorage.getItem("bambulab_quickstats_config")||'{"progress":true,"status":true,"remainingTime":true,"nozzleTemp":false,"bedTemp":false,"layerProgress":false}');if(n.progress&&t.attributes?.progress&&i.push(`${Math.round(t.attributes.progress)}%`),n.status&&t.attributes?.current_step){const r=t.attributes.current_step,o=String(r).toLowerCase(),a={idle:e==="de"?"Leerlauf":"Idle",offline:"Offline",unavailable:e==="de"?"Nicht verfgbar":"Unavailable",unknown:e==="de"?"Unbekannt":"Unknown",bereit:e==="de"?"Bereit":"Ready",ready:e==="de"?"Bereit":"Ready",printing:e==="de"?"Druckt":"Printing",paused:e==="de"?"Pausiert":"Paused",error:e==="de"?"Fehler":"Error",complete:e==="de"?"Abgeschlossen":"Complete",finished:e==="de"?"Fertig":"Finished"};i.push(a[o]||r)}n.remainingTime&&t.attributes?.remaining_time&&i.push(t.attributes.remaining_time),n.nozzleTemp&&t.attributes?.nozzle_temp&&i.push(`${e==="de"?"Dse":"Nozzle"}: ${t.attributes.nozzle_temp}C`),n.bedTemp&&t.attributes?.bed_temp&&i.push(`${e==="de"?"Bett":"Bed"}: ${t.attributes.bed_temp}C`),n.layerProgress&&t.attributes?.current_layer&&t.attributes?.total_layers&&i.push(`${e==="de"?"Schicht":"Layer"} ${t.attributes.current_layer}/${t.attributes.total_layers}`)}return i},u6=({item:t,isFavorite:e,onBack:i,onToggleFavorite:n,lang:r})=>s("div",{className:"detail-left-header",children:[s(T.button,{className:"back-button",onClick:i,whileHover:{scale:1.05},whileTap:{scale:.95},children:s("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M15 6L9 12L15 18",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),s("div",{className:"detail-left-title-info",children:[s(T.h3,{className:"detail-left-title-name",style:{fontWeight:600},initial:{opacity:0,filter:"blur(10px)"},animate:{opacity:1,filter:"blur(0px)"},transition:{duration:.6,delay:.25,ease:"easeOut"},children:(()=>{if(["settings","weather","news","todos","all_schedules","pluginstore"].includes(t.domain)){const a=t.domain==="all_schedules"?"all-schedules":t.domain;return ee(`deviceNames.${a}`,r)||t.name}return t.attributes?.friendly_name||t.name})()}),s(T.p,{className:"detail-left-title-area",style:{fontWeight:400},initial:{opacity:0,filter:"blur(10px)"},animate:{opacity:1,filter:"blur(0px)"},transition:{duration:.6,delay:.35,ease:"easeOut"},children:["settings","weather","news","todos","all_schedules","pluginstore"].includes(t.domain)?ee("subcategories.system",r):t.area||t.attributes?.area_id||ee("general.noRoom",r)})]}),s(T.button,{className:`favorite-button ${e?"active":""}`,onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinejoin:"round",children:s("path",{d:"M22 8.86222C22 10.4087 21.4062 11.8941 20.3458 12.9929C17.9049 15.523 15.5374 18.1613 13.0053 20.5997C12.4249 21.1505 11.5042 21.1304 10.9488 20.5547L3.65376 12.9929C1.44875 10.7072 1.44875 7.01723 3.65376 4.73157C5.88044 2.42345 9.50794 2.42345 11.7346 4.73157L11.9998 5.00642L12.2648 4.73173C13.3324 3.6245 14.7864 3 16.3053 3C17.8242 3 19.2781 3.62444 20.3458 4.73157C21.4063 5.83045 22 7.31577 22 8.86222Z"})})})]}),h6=({item:t,lang:e,videoUrl:i,showVideo:n,isCheckingVideo:r})=>s("div",{className:"icon-content",children:[!i&&!r&&s("div",{className:"icon-background-wrapper",children:s("div",{className:"icon-background",style:a6(t),children:o6(t.domain)})}),s("div",{className:"detail-info-row",children:s("div",{className:"quick-stats",children:s(Ce,{mode:"popLayout",children:d6(t,e).map((o,a)=>s(T.div,{className:"stat-item",initial:{scale:0,opacity:0,filter:"blur(10px)"},animate:{scale:1,opacity:1,filter:"blur(0px)"},exit:{scale:0,opacity:0,filter:"blur(10px)"},transition:{delay:.5+a*.05,duration:.6,ease:"easeOut"},layout:!0,children:o},o))})})}),s(T.div,{className:"entity-id-display",initial:{opacity:0,filter:"blur(10px)"},animate:{opacity:1,filter:"blur(0px)"},transition:{duration:.6,delay:.7,ease:"easeOut"},children:t.entity_id})]}),m6=({filteredTabIcons:t,activeTab:e,onTabChange:i,sliderPosition:n,isMobile:r,stateText:o,stateDuration:a,item:l,settingsTabRef:c,actionButtons:d=null,onBack:u,currentLanguage:h="de"})=>{const[m,f]=M(null),g=N=>l.domain==="settings"?ee(["tooltips.generalTab","tooltips.appearanceTab","tooltips.privacyTab","tooltips.aboutTab"][N],h)||"":ee(["tooltips.controlsTab","tooltips.scheduleTab","tooltips.historyTab","tooltips.contextTab"][N],h)||"";U(()=>{if(!d)return;const N=()=>{const B=(window._printerViewRef||window._newsViewRef||window._todosViewRef||window._weatherViewRef)?.getActiveButton?.();B!==m&&f(B)};N();let C;const S=()=>{N(),C=requestAnimationFrame(S)};return C=requestAnimationFrame(S),()=>{C&&cancelAnimationFrame(C)}},[d,m]);const p=N=>{i(N),l.domain==="settings"&&c.current&&c.current.setActiveTab&&c.current.setActiveTab(N)},v=N=>{const C=window._newsViewRef,S=window._todosViewRef,x=window._weatherViewRef,B=window._printerViewRef;switch(N){case"back":C&&window._newsViewRef.handleBackNavigation?window._newsViewRef.handleBackNavigation():S&&window._todosViewRef.handleBackNavigation?window._todosViewRef.handleBackNavigation():x&&window._weatherViewRef.handleBackNavigation?window._weatherViewRef.handleBackNavigation():B&&window._printerViewRef.handleBackNavigation?window._printerViewRef.handleBackNavigation():u?.();break;case"overview":C&&window._newsViewRef.handleOverview?window._newsViewRef.handleOverview():S&&window._todosViewRef.handleOverview?window._todosViewRef.handleOverview():B&&window._printerViewRef.handleOverview&&window._printerViewRef.handleOverview();break;case"settings":C&&window._newsViewRef.handleOpenSettings?window._newsViewRef.handleOpenSettings():S&&window._todosViewRef.handleOpenSettings?window._todosViewRef.handleOpenSettings():x&&window._weatherViewRef.handleOpenSettings?window._weatherViewRef.handleOpenSettings():B&&window._printerViewRef.handleOpenSettings&&window._printerViewRef.handleOpenSettings();break;case"camera":B&&window._printerViewRef.handleOpenCamera&&window._printerViewRef.handleOpenCamera();break;case"image":B&&window._printerViewRef.handleOpenImage&&window._printerViewRef.handleOpenImage();break;case"refresh":C&&window._newsViewRef.handleRefresh?window._newsViewRef.handleRefresh():S&&window._todosViewRef.handleRefresh?window._todosViewRef.handleRefresh():x&&window._weatherViewRef.handleRefresh&&window._weatherViewRef.handleRefresh();break;case"add":S&&window._todosViewRef.handleAdd&&window._todosViewRef.handleAdd();break;case"read":C&&window._newsViewRef.handleToggleRead&&window._newsViewRef.handleToggleRead();break;case"favorite":C&&window._newsViewRef.handleToggleFavorite&&window._newsViewRef.handleToggleFavorite();break;default:console.warn("Unknown action:",N)}},b=N=>{const C=N.isRead||!1,S=N.isFavorite||!1;switch(N.id){case"overview":return s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22Z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12C16 14.2091 14.2091 16 12 16Z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 2V8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 16V22",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M2 12H8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M16 12H22",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M4.92896 4.92871L9.1716 9.17135",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M14.8284 14.8286L19.071 19.0713",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M4.92896 19.0713L9.1716 14.8286",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M14.8284 9.17139L19.071 4.92875",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]});case"back":return l.domain==="todos"?s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("path",{d:"M9 6L20 6",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M3.80002 5.79999L4.60002 6.59998L6.60001 4.59999",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M3.80002 11.8L4.60002 12.6L6.60001 10.6",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M3.80002 17.8L4.60002 18.6L6.60001 16.6",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M9 12L20 12",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M9 18L20 18",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}):l.domain==="news"?s("svg",{width:"20",height:"20",strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("path",{d:"M12 19C12 14.8 9.2 12 5 12",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M19 19C19 10.6 13.4 5 5 5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M5 19.01L5.01 18.9989",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}):s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("path",{d:"M15 6L9 12L15 18",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})});case"settings":return s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M19.622 10.395l-1.097-2.65L20 6l-2-2-1.735 1.483-2.707-1.113L12.935 2h-1.954l-.632 2.401-2.645 1.115L6 4 4 6l1.453 1.789-1.08 2.657L2 11v2l2.401.655L5.516 16.3 4 18l2 2 1.791-1.46 2.606 1.072L11 22h2l.604-2.387 2.651-1.098C16.697 18.831 18 20 18 20l2-2-1.484-1.75 1.098-2.652 2.386-.62V11l-2.378-.605Z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]});case"refresh":return s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("path",{d:"M21.5 2V8M21.5 8H15.5M21.5 8L18.5 5C17.1 3.6 15.2 2.7 13 2.7C8.5 2.7 4.9 6.3 4.9 10.8C4.9 15.3 8.5 18.9 13 18.9C16.9 18.9 20.1 16.1 20.8 12.4",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});case"read":return s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:C?"currentColor":"none",stroke:"currentColor",children:[s("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z",strokeWidth:"2"}),s("circle",{cx:"12",cy:"12",r:"3",strokeWidth:"2"})]});case"favorite":return s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:S?"currentColor":"none",stroke:"currentColor",children:s("path",{d:"M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z",strokeWidth:"2"})});case"add":return s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("path",{d:"M12 5V19M5 12H19",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});case"camera":return s("svg",{width:"20",height:"20",strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("path",{d:"M15 12V16.4C15 16.7314 14.7314 17 14.4 17H3.6C3.26863 17 3 16.7314 3 16.4V7.6C3 7.26863 3.26863 7 3.6 7H14.4C14.7314 7 15 7.26863 15 7.6V12ZM15 12L20.0159 7.82009C20.4067 7.49443 21 7.77232 21 8.28103V15.719C21 16.2277 20.4067 16.5056 20.0159 16.1799L15 12Z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})});case"image":return s("svg",{width:"20",height:"20","stroke-width":"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",children:[s("path",{d:"M21 3.6V20.4C21 20.7314 20.7314 21 20.4 21H3.6C3.26863 21 3 20.7314 3 20.4V3.6C3 3.26863 3.26863 3 3.6 3H20.4C20.7314 3 21 3.26863 21 3.6Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M3 16L10 13L21 18",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M16 10C14.8954 10 14 9.10457 14 8C14 6.89543 14.8954 6 16 6C17.1046 6 18 6.89543 18 8C18 9.10457 17.1046 10 16 10Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]});default:return null}},y={x:n.x,width:n.width,height:n.height,scaleX:[1,1.12,.96,1.03,1],scaleY:[1,.94,1.06,.99,1]},w={x:{type:"spring",stiffness:280,damping:22,mass:1.5},width:{type:"spring",stiffness:280,damping:22,mass:1.5},height:{type:"spring",stiffness:280,damping:22,mass:1.5},scaleX:{duration:.6,times:[0,.2,.5,.8,1],ease:[.34,1.56,.64,1]},scaleY:{duration:.6,times:[0,.2,.5,.8,1],ease:[.34,1.56,.64,1]}},_=Me(()=>{if(!m||!d)return{x:0,width:40,height:40};const N=d.findIndex(A=>A.id===m);if(N===-1)return{x:0,width:40,height:40};const C=r?36:40;return{x:(r?3:5)+N*(C+(r?4:6)),width:C,height:C}},[d,r,m]),k={x:_.x,width:_.width,height:_.height,scaleX:[1,1.12,.96,1.03,1],scaleY:[1,.94,1.06,.99,1]};return r?s("div",{className:"mobile-tabs",children:[s("div",{className:"detail-header-info",children:[s("h3",{className:"detail-header-name",style:{fontWeight:600},children:o}),s("p",{className:"detail-header-area",style:{fontWeight:400},children:a})]}),s("div",{className:"detail-tabs",children:d?s(ve,{children:[s(T.div,{className:"tab-slider",animate:k,transition:w}),d.map((N,C)=>{const B=(window._printerViewRef||window._newsViewRef||window._todosViewRef||window._weatherViewRef)?.getActiveButton?.()===N.id;return s(T.button,{className:`detail-tab ${B?"active":""}`,onClick:()=>v(N.action),whileHover:{scale:1.04},whileTap:{scale:.96},transition:{duration:.2},title:ee(`actionButtons.${N.id}`,h)||N.title,children:b(N)},N.id)})]}):s(ve,{children:[s(T.div,{className:"tab-slider",animate:y,transition:w}),t.map((N,C)=>s(T.button,{className:`detail-tab ${e===C?"active":""}`,onClick:()=>p(C),whileHover:{scale:1.04},whileTap:{scale:.96},transition:{duration:.2},title:g(C),children:N},C))]})})]}):s("div",{className:"desktop-tabs",children:s("div",{className:"detail-header",children:[s("div",{className:"detail-header-info",children:[s("h3",{className:"detail-header-name",style:{fontWeight:600},children:o}),s("p",{className:"detail-header-area",style:{fontWeight:400},children:a})]}),s("div",{className:"detail-tabs",children:d?s(ve,{children:[s(T.div,{className:"tab-slider",animate:k,transition:w}),d.map((N,C)=>{const B=(window._printerViewRef||window._newsViewRef||window._todosViewRef||window._weatherViewRef)?.getActiveButton?.()===N.id;return s(T.button,{className:`detail-tab ${B?"active":""}`,onClick:()=>v(N.action),whileHover:{scale:1.04},whileTap:{scale:.96},transition:{duration:.2},title:ee(`actionButtons.${N.id}`,h)||N.title,children:b(N)},N.id)})]}):s(ve,{children:[s(T.div,{className:"tab-slider",animate:y,transition:w}),t.map((N,C)=>s(T.button,{className:`detail-tab ${e===C?"active":""}`,onClick:()=>p(C),whileHover:{scale:1.04},whileTap:{scale:.96},transition:{duration:.2},title:g(C),children:N},C))]})})]})})},f6=[s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",children:[s("path",{d:"M12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22Z",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12C16 14.2091 14.2091 16 12 16Z",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 2V8",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 16V22",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M2 12H8",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M16 12H22",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M4.92896 4.92871L9.1716 9.17135",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M14.8284 14.8286L19.071 19.0713",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M4.92896 19.0713L9.1716 14.8286",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M14.8284 9.17139L19.071 4.92875",strokeLinecap:"round",strokeLinejoin:"round"})]}),s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",children:[s("path",{d:"M12 6L12 12L18 12",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",strokeLinecap:"round",strokeLinejoin:"round"})]}),s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s("path",{d:"M3 7.4V3.6C3 3.26863 3.26863 3 3.6 3H9.4C9.73137 3 10 3.26863 10 3.6V7.4C10 7.73137 9.73137 8 9.4 8H3.6C3.26863 8 3 7.73137 3 7.4Z"}),s("path",{d:"M14 20.4V16.6C14 16.2686 14.2686 16 14.6 16H20.4C20.7314 16 21 16.2686 21 16.6V20.4C21 20.7314 20.7314 21 20.4 21H14.6C14.2686 21 14 20.7314 14 20.4Z"}),s("path",{d:"M14 12.4V3.6C14 3.26863 14.2686 3 14.6 3H20.4C20.7314 3 21 3.26863 21 3.6V12.4C21 12.7314 20.7314 13 20.4 13H14.6C14.2686 13 14 12.7314 14 12.4Z"}),s("path",{d:"M3 20.4V11.6C3 11.2686 3.26863 11 3.6 11H9.4C9.73137 11 10 11.2686 10 11.6V20.4C10 20.7314 9.73137 21 9.4 21H3.6C3.26863 21 3 20.7314 3 20.4Z"})]}),s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s("path",{d:"M21 9.6V20.4C21 20.7314 20.7314 21 20.4 21H9.6C9.26863 21 9 20.7314 9 20.4V9.6C9 9.26863 9.26863 9 9.6 9H20.4C20.7314 9 21 9.26863 21 9.6Z",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M15 3.6V14.4C15 14.7314 14.7314 15 14.4 15H3.6C3.26863 15 3 14.7314 3 14.4V3.6C3 3.26863 3.26863 3 3.6 3H14.4C14.7314 3 15 3.26863 15 3.6Z",strokeLinecap:"round",strokeLinejoin:"round"})]})];function p6(t,e){if(!t)return"off";const i=t.toLowerCase(),n=["on","playing","heat","cool","auto","locked","home","active","armed","cleaning","docked"],r=["off","idle","paused","unlocked","away","inactive","disarmed","standby"],o=["open","opening"],a=["closed","closing"];if(e==="cover"||e==="door"||e==="window"){if(o.includes(i))return"open";if(a.includes(i))return"closed"}return n.includes(i)?"on":r.includes(i)?"off":o.includes(i)?"open":a.includes(i)?"closed":"off"}function g6(t,e,i="/local/fast-search-videos"){if(!t||!e)return null;const n=p6(e,t);return`${i}/${t}_${n}.mp4`}async function cl(t){if(!t)return!1;try{const e=await fetch(t,{method:"HEAD",cache:"no-cache"});return e.ok&&e.status===200}catch{return console.debug(`Video not found: ${t}`),!1}}function Eg(){try{const t=localStorage.getItem("systemSettings");if(!t)return{enabled:!1,mobileEnabled:!1,basePath:"/local/fast-search-videos"};const i=JSON.parse(t).appearance||{};return{enabled:i.detailViewVideosEnabled===!0,mobileEnabled:i.detailViewVideosMobileEnabled===!0,basePath:i.detailViewVideosPath||"/local/fast-search-videos"}}catch(t){return console.error("Failed to read video settings:",t),{enabled:!1,mobileEnabled:!1,basePath:"/local/fast-search-videos"}}}function v6(){const t=Eg();return!(!t.enabled||window.innerWidth<=768&&!t.mobileEnabled)}async function y6(t="/local/fast-search-videos"){const e="videoDefaultsCache",i="videoDefaultsCacheTime";try{const a=localStorage.getItem(i),l=localStorage.getItem(e);if(l&&a){const c=Date.now()-parseInt(a),d=1440*60*1e3;if(c<d)return JSON.parse(l)}}catch{console.debug("Cache read failed, will discover defaults")}const r=[],o=10;for(let a=1;a<=o;a++){const l=`${t}/default_${a}.mp4`;await cl(l)&&r.push(l)}try{localStorage.setItem(e,JSON.stringify(r)),localStorage.setItem(i,Date.now().toString())}catch{console.debug("Failed to cache default videos")}return r}async function b6(t="/local/fast-search-videos"){const e=await y6(t);if(e.length===0)return null;const i=Math.floor(Math.random()*e.length);return e[i]}async function w6(t){if(!t||!t.domain||!v6())return null;const e=Eg(),i=g6(t.domain,t.state,e.basePath);if(i&&await cl(i))return i;const n=`${e.basePath}/${t.domain}.mp4`;if(await cl(n))return n;const o=await b6(e.basePath);return o||null}const k6=({item:t={entity_id:"light.wohnzimmer",domain:"light",name:"Wohnzimmer Licht",area:"Wohnzimmer",state:"on",attributes:{brightness:180,color_temp:350,friendly_name:"Wohnzimmer Deckenlampe"}},isVisible:e=!1,onBack:i,onToggleFavorite:n,onServiceCall:r,onActionNavigate:o,hass:a,lang:l="de",isFavorite:c=!1})=>{const[d]=sc(),u=Me(()=>!t?.entity_id||!d?t:d.find(Y=>Y.entity_id===t.entity_id)||t,[d,t?.entity_id]),[h,m]=M(0),[f,g]=M(!1),[p,v]=M(c),[b,y]=M(null),[w,_]=M({x:0,width:0,height:0}),[k,N]=M(null),C=te(null),S=te(null),[x,B]=M(null),[A,P]=M(!1),[I,z]=M(!1),D=te(null),[L,E]=M(!1);U(()=>{v(c)},[c,t?.entity_id,t?.id]),U(()=>{const J=t?.entity_id||t?.id;b&&b!==J&&m(0),y(J)},[t?.entity_id,t?.id]),U(()=>{const J=()=>{g(window.innerWidth<=768)};return J(),window.addEventListener("resize",J),()=>window.removeEventListener("resize",J)},[]),U(()=>{B(null),P(!1),z(!0),(async()=>{if(!t){z(!1);return}const Y=await w6(t);Y&&B(Y),z(!1)})()},[t?.entity_id,t?.state]);const W=()=>{setTimeout(()=>P(!0),50)},F=()=>{console.warn("Failed to load video, falling back to icon"),B(null),P(!1)},K=t?.domain==="settings"?so.getTabIcons():[],G=t?.domain==="settings"?K:f6,Q=(()=>{if(t.domain==="settings")return K;if(t.domain==="printer3d_device"||t.domain==="energy_dashboard_device"){const J=Ua(t,l);return J&&J.primary&&J.primary.length>0?J.primary.map(Y=>Y.icon):[]}return _e.isSystemEntity(t.domain)&&!_e.hasTabs(t.domain)?[]:t.domain==="sensor"||t.domain==="binary_sensor"?[G[0],G[2],G[3]]:G})(),re=()=>{if(_e.isSystemEntity(t.domain)){if(t.domain==="news"&&window._newsViewRef){const{selectedArticle:Y}=window._newsViewRef;return Y?[{id:"back",action:"back",title:"Zurck"},{id:"read",action:"read",title:Y.read?"Als ungelesen markieren":"Als gelesen markieren",isRead:Y.read||!1},{id:"favorite",action:"favorite",title:"Favorit",isFavorite:Y.favorite||!1}]:_e.getActionButtons(t.domain)}if(t.domain==="todos"&&window._todosViewRef){const{selectedTodo:Y}=window._todosViewRef;return Y?[{id:"back",action:"back",title:"Zurck"}]:_e.getActionButtons(t.domain)}return _e.getActionButtons(t.domain)}return null};U(()=>{const J=()=>{const Y=re();N(Y)};if(J(),t.domain==="news")return window.addEventListener("news-view-state-changed",J),()=>{window.removeEventListener("news-view-state-changed",J)};if(t.domain==="todos")return window.addEventListener("todos-view-state-changed",J),()=>{window.removeEventListener("todos-view-state-changed",J)}},[t.domain,t.entity_id]),U(()=>{const J=()=>{if(k)return;const oe=Q.length;if(oe===0||h>=oe){console.warn(" [SLIDER] Invalid tab configuration:",{tabCount:oe,activeTab:h});return}const ae=f?36:40,Z=(f?3:5)+h*(ae+(f?4:6));_({x:Math.round(Z),width:ae,height:ae})};J();const Y=()=>{J()};return window.addEventListener("resize",Y),()=>{window.removeEventListener("resize",Y)}},[h,f,Q]);const he=()=>{const J=t.entity_id||t.id;J&&(v(!p),n?.(J))},O=Ee(()=>{i?.()},[i]),H=(J,Y)=>{if(!J)return"";const oe=new Date(J),V=new Date-oe,ne=Math.floor(V/6e4),Z=Math.floor(V/36e5),se=Math.floor(V/864e5);return Y==="de"?ne<1?"Gerade eben":ne<60?`vor ${ne} Minute${ne!==1?"n":""}`:Z<24?`vor ${Z} Stunde${Z!==1?"n":""}`:se<7?`vor ${se} Tag${se!==1?"en":""}`:oe.toLocaleDateString("de-DE"):ne<1?"Just now":ne<60?`${ne} minute${ne!==1?"s":""} ago`:Z<24?`${Z} hour${Z!==1?"s":""} ago`:se<7?`${se} day${se!==1?"s":""} ago`:oe.toLocaleDateString("en-US")},X=()=>{if(t.domain!=="news"||!window._newsViewRef)return null;const{selectedArticle:J,unreadCount:Y,feedCount:oe}=window._newsViewRef;if(J){const V=J.source||"Unbekannt",ne=H(J.published,l);return{stateText:V,stateDuration:ne}}else{const ae=l==="de"?`${Y||0} Neue Nachrichten`:`${Y||0} New Articles`,V=l==="de"?`${oe||0} Feeds`:`${oe||0} Feeds`;return{stateText:ae,stateDuration:V}}},me=()=>{if(t.domain!=="todos"||!window._todosViewRef)return null;const{selectedTodo:J,showSettings:Y,incompleteCount:oe,overdueCount:ae,todayCount:V}=window._todosViewRef;if(J){const ne=J.listName||"Todo",Z=J.due?H(J.due,l):l==="de"?"Kein Datum":"No date";return{stateText:ne,stateDuration:Z}}else{if(Y)return{stateText:l==="de"?"Einstellungen":"Settings",stateDuration:l==="de"?"Anpassen":"Customize"};{const ne=l==="de"?`${oe||0} Unerledigt`:`${oe||0} Incomplete`;let Z=[];V>0&&Z.push(l==="de"?`${V} Heute`:`${V} Today`),ae>0&&Z.push(l==="de"?`${ae} berfllig`:`${ae} Overdue`);const se=Z.length>0?Z.join(", "):l==="de"?"Alles erledigt":"All done";return{stateText:ne,stateDuration:se}}}},q=()=>{if(t.domain!=="printer3d_device")return null;const J=t.attributes||{},Y=J.nozzle_temp||0,oe=J.bed_temp||0,ae=J.current_step||(l==="de"?"Bereit":"Ready"),V=String(ae).toLowerCase(),Z={idle:l==="de"?"Leerlauf":"Idle",offline:"Offline",unavailable:l==="de"?"Nicht verfgbar":"Unavailable",unknown:l==="de"?"Unbekannt":"Unknown",bereit:l==="de"?"Bereit":"Ready",ready:l==="de"?"Bereit":"Ready",printing:l==="de"?"Druckt":"Printing",paused:l==="de"?"Pausiert":"Paused",error:l==="de"?"Fehler":"Error",complete:l==="de"?"Abgeschlossen":"Complete",finished:l==="de"?"Fertig":"Finished"}[V]||ae,R=Y||oe?`${l==="de"?"Druckbett":"Bed"}: ${oe}C | ${l==="de"?"Dse":"Nozzle"}: ${Y}C`:l==="de"?"Nicht verfgbar":"Not available";return{stateText:Z,stateDuration:R}},ce=async J=>{if(!a)return null;try{const{loadEntityHistory:Y}=await $e(async()=>{const{loadEntityHistory:ae}=await Promise.resolve().then(()=>pw);return{loadEntityHistory:ae}},void 0),oe=await Y(a,J.entity_id,J.timeRange);return oe?{history:oe.data,events:oe.events}:null}catch{return null}},ie=()=>{if(t.domain==="settings")return s(so,{settingsRef:S,lang:l,hass:a,onTabChange:ae=>{}});if(t.is_system||t.is_plugin||_e.isSystemEntity(t.domain)){const ae=_e.getViewComponent(t.domain);if(ae)return typeof ae=="function"?s(r6,{viewLoader:ae,entity:t,hass:a,lang:l,onBack:O,onNavigate:o,onServiceCall:r}):s(ae,{entity:t,hass:a,lang:l,onBack:O,onNavigate:o,onServiceCall:r})}const Y=async(ae,V,ne)=>{if(!r){console.warn("DetailView: onServiceCall not provided");return}return await r(ae,V,ne)};if(t.domain==="sensor"||t.domain==="binary_sensor"){const ae=[s(io,{item:u,onServiceCall:r,lang:l,hass:a}),s(a0,{item:u,onDataRequest:ce}),s(u0,{item:u,onActionExecute:Y,onActionNavigate:V=>{o&&o(V)},favoriteActions:[]})];return ae[h]||ae[0]}const oe=[s(io,{item:u,onServiceCall:r,lang:l,hass:a}),s(nC,{item:u,lang:l,onTimerCreate:ae=>$w(a,u,ae),onScheduleCreate:ae=>Hw(a,u,ae)}),s(a0,{item:u,onDataRequest:ce}),s(u0,{item:t,onActionExecute:Y,onActionNavigate:ae=>{o&&o(ae)},favoriteActions:[]})];return oe[h]||oe[0]};return t?s(Ce,{mode:"wait",children:e&&s(T.div,{className:"detail-panel visible","data-entity-id":t.entity_id,variants:dw,initial:"hidden",animate:"visible",exit:"exit",children:s(T.div,{className:"detail-content",variants:uw,initial:"hidden",animate:"visible",exit:"exit",children:[s("div",{className:`detail-left ${x?"has-video":""}`,children:[x&&s("video",{ref:D,className:`detail-left-video-background ${A?"visible":""}`,src:x,autoPlay:!0,muted:!0,playsInline:!0,preload:"auto",onLoadedData:W,onError:F}),s(u6,{item:t,isFavorite:p,onBack:O,onToggleFavorite:he,lang:l}),s(h6,{item:t,lang:l,videoUrl:x,showVideo:A,isCheckingVideo:I})]}),!(f&&x)&&s("div",{className:"detail-divider"}),s("div",{className:"detail-right",children:[s(m6,{filteredTabIcons:Q,activeTab:h,onTabChange:m,sliderPosition:w,isMobile:f,stateText:me()?.stateText||X()?.stateText||q()?.stateText||l6(t,l),stateDuration:me()?.stateDuration||X()?.stateDuration||q()?.stateDuration||c6(t,l),item:t,settingsTabRef:S,actionButtons:k,onBack:O,currentLanguage:l}),s("div",{id:"tab-content-container",ref:C,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:ie()}),s(Pe,{scrollContainerRef:C,isHovered:L})]})]},t.entity_id||t.id)})}):null},_6=({username:t="User",weatherEntity:e,powerEntity:i,hass:n,notificationCount:r=0,show:o=!0,isMobile:a=!1,position:l="centered",hasAppeared:c=!0})=>{const[d,u]=M(new Date),[h,m]=M(()=>{const D=localStorage.getItem("statsBarEnabled");return D!==null?D==="true":!0}),f=n?.user?.name||t,[g,p]=M(null);U(()=>{(async()=>{if(n)try{const L=await Mg(n);p(L)}catch{p(null)}})()},[n]);const[v,b]=M(()=>ll()||{gridConsumption:null,gridReturn:null,solar:null,battery:null}),[y,w]=M(()=>{try{const D=localStorage.getItem("systemSettings");if(!D)return{weather:!0,gridConsumption:!0,gridReturn:!0,solar:!1,notifications:!0,time:!0,consumption:!1,todayConsumption:!0,todayCost:!0};const W=(JSON.parse(D).statsBar||{}).widgets||{};return{weather:W.weather!==!1,gridConsumption:W.gridConsumption!==!1,gridReturn:W.gridReturn!==!1,solar:W.solar===!0,notifications:W.notifications!==!1,time:W.time!==!1,consumption:W.consumption===!0,todayConsumption:W.todayConsumption===!0,todayCost:W.todayCost===!0}}catch{return{weather:!0,gridConsumption:!0,gridReturn:!0,solar:!1,notifications:!0,time:!0,consumption:!1,todayConsumption:!1,todayCost:!1}}}),[_,k]=M(null);U(()=>{const D=async()=>{if(!n||!v.gridConsumption){k(null);return}try{const E=await p0(n,v);k(E)}catch(E){console.error("Failed to load energy dashboard data:",E),k(null)}};D();const L=setInterval(D,3e5);return()=>clearInterval(L)},[n,v]),U(()=>{const D=setInterval(()=>{u(new Date)},6e4);return()=>clearInterval(D)},[]),U(()=>{const D=L=>{w(L.detail)};return window.addEventListener("statsBarWidgetsChanged",D),()=>window.removeEventListener("statsBarWidgetsChanged",D)},[]),U(()=>{const D=()=>{const L=ll();L&&b(L)};return window.addEventListener("energySensorConfigChanged",D),window.addEventListener("storage",D),()=>{window.removeEventListener("energySensorConfigChanged",D),window.removeEventListener("storage",D)}},[]),U(()=>{const D=async()=>{if(n&&v.gridConsumption)try{const L=await p0(n,v);k(L)}catch(L){console.error("Failed to reload energy data after price change:",L)}};return window.addEventListener("energyPriceChanged",D),()=>{window.removeEventListener("energyPriceChanged",D)}},[n,v]),U(()=>{const D=L=>{m(L.detail)};return window.addEventListener("statsBarEnabledChanged",D),()=>{window.removeEventListener("statsBarEnabledChanged",D)}},[]);const N=D=>{const L=D.getHours().toString().padStart(2,"0"),E=D.getMinutes().toString().padStart(2,"0");return`${L}:${E}`},C=e?.attributes?.temperature||e?.attributes?.current_temperature,S=C?`${Math.round(C)}C`:"--C",x=e?.state?v0(e.state,14,"rgba(255, 255, 255, 0.9)"):v0("partlycloudy",14,"rgba(255, 255, 255, 0.9)"),B=D=>{if(!n||!D)return"--";const L=jn(n,D,"--");if(L==="--")return L;try{const E=parseFloat(L),F=n.states[D]?.attributes?.unit_of_measurement;return F==="W"?`${(E/1e3).toFixed(1)}kW`:F==="kW"?`${E.toFixed(1)}kW`:F==="kWh"||F==="Wh"?F==="Wh"?`${(E/1e3).toFixed(1)}kWh`:`${E.toFixed(1)}kWh`:`${E.toFixed(1)}${F||"kW"}`}catch(E){return console.warn("Failed to parse energy value:",E),"--"}},A=B(v.gridConsumption),P=B(v.gridReturn),I=B(v.solar),z=B(v.battery);return i?.state&&`${parseFloat(i.state).toFixed(1)}`,!o||!h?null:s("div",{style:{width:"100%",marginBottom:"12px",position:"relative"},children:s(T.div,{initial:{opacity:0},animate:{opacity:c?1:0},transition:{duration:.4,ease:[.16,1,.3,1]},style:{borderRadius:"20px",display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:a?"13px":"14px",fontWeight:"500",color:"rgba(255, 255, 255, 0.9)",position:"relative",overflow:"hidden",minHeight:"35px"},className:"stats-bar",children:[s("div",{style:{display:"flex",alignItems:"center",gap:"8px",flex:a?"0 0 auto":"1",minWidth:0},children:[g?s("img",{src:g,alt:f,onError:D=>{D.target.style.display="none"},style:{width:a?"24px":"28px",height:a?"24px":"28px",borderRadius:"50%",objectFit:"cover",flexShrink:0,border:"2px solid rgba(255, 255, 255, 0.2)"}}):null,!g&&s("span",{style:{fontSize:a?"16px":"18px",flexShrink:0},children:""}),s("span",{style:{fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:f})]}),s("div",{style:{display:"flex",alignItems:"center",gap:a?"12px":"16px",flex:"0 0 auto"},children:[y.weather&&!a&&s("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:"rgba(255, 255, 255, 0.08)",borderRadius:"12px"},children:[x,s("span",{children:S})]}),y.gridConsumption&&v.gridConsumption&&s("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:"rgba(255, 255, 255, 0.08)",borderRadius:"12px"},children:[s(no,{size:14,color:"rgba(255, 255, 255, 0.9)"}),s("span",{children:_?.currentGridConsumption!==void 0&&_?.currentGridConsumption!==null?`${(_.currentGridConsumption/1e3).toFixed(1)}kW`:A})]}),y.gridReturn&&v.gridReturn&&s("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:"rgba(255, 255, 255, 0.08)",borderRadius:"12px"},children:[s(no,{size:14,color:"rgba(255, 255, 255, 0.9)"}),s("span",{children:P})]}),y.solar&&v.solar&&s("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:"rgba(255, 255, 255, 0.08)",borderRadius:"12px"},children:[s(_g,{size:14,color:"rgba(255, 255, 255, 0.9)"}),s("span",{children:_?.currentSolarProduction!==void 0&&_?.currentSolarProduction!==null?`${(_.currentSolarProduction/1e3).toFixed(1)}kW`:I})]}),y.battery&&v.battery&&s("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:"rgba(255, 255, 255, 0.08)",borderRadius:"12px"},children:[s(EC,{size:14,color:"rgba(255, 255, 255, 0.9)"}),s("span",{children:z})]}),y.todayConsumption&&_?.todayGridConsumption!==void 0&&_?.todayGridConsumption!==null&&s("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:"rgba(255, 255, 255, 0.08)",borderRadius:"12px"},children:[s(Sg,{size:14,color:"rgba(255, 255, 255, 0.9)"}),s("span",{children:[_.todayGridConsumption.toFixed(1),"kWh"]})]}),y.todayCost&&_?.todayCost!==void 0&&_?.todayCost!==null&&s("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:"rgba(255, 255, 255, 0.08)",borderRadius:"12px"},children:[s(xg,{size:14,color:"rgba(255, 255, 255, 0.9)"}),s("span",{children:[_.todayCost.toFixed(2),""]})]}),y.notifications&&r>0&&s("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:"rgba(255, 100, 100, 0.2)",borderRadius:"12px",position:"relative"},children:[s(Lg,{size:14,color:"rgba(255, 255, 255, 0.9)"}),s("span",{style:{background:"rgba(255, 60, 60, 0.9)",color:"white",padding:"2px 6px",borderRadius:"8px",fontSize:a?"11px":"12px",fontWeight:"700",minWidth:"20px",textAlign:"center"},children:r})]}),y.time&&s("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:"rgba(255, 255, 255, 0.08)",borderRadius:"12px",fontVariantNumeric:"tabular-nums"},children:[s(Ng,{size:14,color:"rgba(255, 255, 255, 0.9)"}),s("span",{children:N(d)})]}),y.consumption&&(()=>{let D=0,L=!1;if(_){const E=_.currentGridConsumption||0,W=_.currentGridReturn||0,F=_.currentSolarProduction||0;D=E-W+F,L=!0}return L?s("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:"rgba(255, 255, 255, 0.08)",borderRadius:"12px"},children:[s(Cg,{size:14,color:"rgba(255, 255, 255, 0.9)"}),s("span",{children:[(D/1e3).toFixed(1),"kW"]})]}):null})()]})]})})},k0=(t="de")=>{const e=new Date().getHours(),i={de:{morning:["Guten Morgen","Einen wunderschnen Morgen","Frohes Erwachen","Zeit fr einen guten Start","Bereit fr einen groartigen Tag","Ein neuer Tag wartet"],afternoon:["Guten Tag","Schnen Nachmittag","Auf geht's","Weiter so","Produktiver Tag heute","Toll, dich zu sehen"],evening:["Guten Abend","Schnen Abend","Zeit zum Entspannen","Fast geschafft","Feierabend in Sicht","Zeit fr dich"]},en:{morning:["Good Morning","Rise and shine","Great to see you","Ready for a great day","Fresh start ahead","Let's make today count"],afternoon:["Good Afternoon","Keep it going","You're doing great","Productive day","Nice to see you","Halfway there"],evening:["Good Evening","Almost done","Time to relax","You earned this","Wrapping up nicely","Evening vibes"]}};let n;e<12?n="morning":e<18?n="afternoon":n="evening";const r=i[t]?.[n]||i.de.afternoon,o=Math.floor(Math.random()*r.length);return r[o]},x6=({username:t="User",show:e=!0,isExpanded:i=!1,currentLanguage:n="de",isMobile:r=!1,position:o="centered",hasAppeared:a=!0})=>{const[l,c]=M(()=>k0(n)),[d,u]=M(0);return U(()=>{!i&&e&&(c(k0(n)),u(h=>h+1))},[i,e,n]),s(Ce,{mode:"wait",children:e&&!i&&s(T.div,{initial:{opacity:0,y:-20,filter:"blur(8px)"},animate:{opacity:a?1:0,y:a&&o==="centered"?r?60:120:0,filter:"blur(0px)"},exit:{opacity:0,y:-20,filter:"blur(8px)",transition:{duration:.2,ease:[.4,0,.2,1]}},transition:{duration:.3,ease:[.16,1,.3,1],filter:{duration:.15}},style:{width:"100%",marginTop:r?"32px":"48px",marginBottom:r?"12px":"16px",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center"},className:"greetings-bar",children:s("div",{style:{padding:r?"10px 28px":"16px 48px",borderRadius:"20px",fontSize:r?"35px":"63px",fontWeight:"600",color:"rgba(255, 255, 255, 0.95)",position:"relative",backdropFilter:"blur(12px) saturate(150%)",WebkitBackdropFilter:"blur(12px) saturate(150%)",textShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",lineHeight:"1.1em"},children:[l,", ",t,"!"]})},`greetings-bar-${d}`)})};function ni(t){return Array.isArray?Array.isArray(t):Fg(t)==="[object Array]"}function C6(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function S6(t){return t==null?"":C6(t)}function Wt(t){return typeof t=="string"}function Dg(t){return typeof t=="number"}function N6(t){return t===!0||t===!1||L6(t)&&Fg(t)=="[object Boolean]"}function Ag(t){return typeof t=="object"}function L6(t){return Ag(t)&&t!==null}function bt(t){return t!=null}function aa(t){return!t.trim().length}function Fg(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const M6="Incorrect 'index' type",T6=t=>`Invalid value for key ${t}`,E6=t=>`Pattern length exceeds max of ${t}.`,D6=t=>`Missing ${t} property in key`,A6=t=>`Property 'weight' in key '${t}' must be a positive integer`,_0=Object.prototype.hasOwnProperty;class F6{constructor(e){this._keys=[],this._keyMap={};let i=0;e.forEach(n=>{let r=Pg(n);this._keys.push(r),this._keyMap[r.id]=r,i+=r.weight}),this._keys.forEach(n=>{n.weight/=i})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Pg(t){let e=null,i=null,n=null,r=1,o=null;if(Wt(t)||ni(t))n=t,e=x0(t),i=dl(t);else{if(!_0.call(t,"name"))throw new Error(D6("name"));const a=t.name;if(n=a,_0.call(t,"weight")&&(r=t.weight,r<=0))throw new Error(A6(a));e=x0(a),i=dl(a),o=t.getFn}return{path:e,id:i,weight:r,src:n,getFn:o}}function x0(t){return ni(t)?t:t.split(".")}function dl(t){return ni(t)?t.join("."):t}function P6(t,e){let i=[],n=!1;const r=(o,a,l)=>{if(bt(o))if(!a[l])i.push(o);else{let c=a[l];const d=o[c];if(!bt(d))return;if(l===a.length-1&&(Wt(d)||Dg(d)||N6(d)))i.push(S6(d));else if(ni(d)){n=!0;for(let u=0,h=d.length;u<h;u+=1)r(d[u],a,l+1)}else a.length&&r(d,a,l+1)}};return r(t,Wt(e)?e.split("."):e,0),n?i:i[0]}const I6={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},R6={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},B6={location:0,threshold:.6,distance:100},z6={useExtendedSearch:!1,getFn:P6,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ke={...R6,...I6,...B6,...z6};const V6=/[^ ]+/g;function W6(t=1,e=3){const i=new Map,n=Math.pow(10,e);return{get(r){const o=r.match(V6).length;if(i.has(o))return i.get(o);const a=1/Math.pow(o,.5*t),l=parseFloat(Math.round(a*n)/n);return i.set(o,l),l},clear(){i.clear()}}}class Sc{constructor({getFn:e=ke.getFn,fieldNormWeight:i=ke.fieldNormWeight}={}){this.norm=W6(i,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((i,n)=>{this._keysMap[i.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Wt(this.docs[0])?this.docs.forEach((e,i)=>{this._addString(e,i)}):this.docs.forEach((e,i)=>{this._addObject(e,i)}),this.norm.clear())}add(e){const i=this.size();Wt(e)?this._addString(e,i):this._addObject(e,i)}removeAt(e){this.records.splice(e,1);for(let i=e,n=this.size();i<n;i+=1)this.records[i].i-=1}getValueForItemAtKeyId(e,i){return e[this._keysMap[i]]}size(){return this.records.length}_addString(e,i){if(!bt(e)||aa(e))return;let n={v:e,i,n:this.norm.get(e)};this.records.push(n)}_addObject(e,i){let n={i,$:{}};this.keys.forEach((r,o)=>{let a=r.getFn?r.getFn(e):this.getFn(e,r.path);if(bt(a)){if(ni(a)){let l=[];const c=[{nestedArrIndex:-1,value:a}];for(;c.length;){const{nestedArrIndex:d,value:u}=c.pop();if(bt(u))if(Wt(u)&&!aa(u)){let h={v:u,i:d,n:this.norm.get(u)};l.push(h)}else ni(u)&&u.forEach((h,m)=>{c.push({nestedArrIndex:m,value:h})})}n.$[o]=l}else if(Wt(a)&&!aa(a)){let l={v:a,n:this.norm.get(a)};n.$[o]=l}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Ig(t,e,{getFn:i=ke.getFn,fieldNormWeight:n=ke.fieldNormWeight}={}){const r=new Sc({getFn:i,fieldNormWeight:n});return r.setKeys(t.map(Pg)),r.setSources(e),r.create(),r}function O6(t,{getFn:e=ke.getFn,fieldNormWeight:i=ke.fieldNormWeight}={}){const{keys:n,records:r}=t,o=new Sc({getFn:e,fieldNormWeight:i});return o.setKeys(n),o.setIndexRecords(r),o}function dr(t,{errors:e=0,currentLocation:i=0,expectedLocation:n=0,distance:r=ke.distance,ignoreLocation:o=ke.ignoreLocation}={}){const a=e/t.length;if(o)return a;const l=Math.abs(n-i);return r?a+l/r:l?1:a}function $6(t=[],e=ke.minMatchCharLength){let i=[],n=-1,r=-1,o=0;for(let a=t.length;o<a;o+=1){let l=t[o];l&&n===-1?n=o:!l&&n!==-1&&(r=o-1,r-n+1>=e&&i.push([n,r]),n=-1)}return t[o-1]&&o-n>=e&&i.push([n,o-1]),i}const Fi=32;function H6(t,e,i,{location:n=ke.location,distance:r=ke.distance,threshold:o=ke.threshold,findAllMatches:a=ke.findAllMatches,minMatchCharLength:l=ke.minMatchCharLength,includeMatches:c=ke.includeMatches,ignoreLocation:d=ke.ignoreLocation}={}){if(e.length>Fi)throw new Error(E6(Fi));const u=e.length,h=t.length,m=Math.max(0,Math.min(n,h));let f=o,g=m;const p=l>1||c,v=p?Array(h):[];let b;for(;(b=t.indexOf(e,g))>-1;){let C=dr(e,{currentLocation:b,expectedLocation:m,distance:r,ignoreLocation:d});if(f=Math.min(C,f),g=b+u,p){let S=0;for(;S<u;)v[b+S]=1,S+=1}}g=-1;let y=[],w=1,_=u+h;const k=1<<u-1;for(let C=0;C<u;C+=1){let S=0,x=_;for(;S<x;)dr(e,{errors:C,currentLocation:m+x,expectedLocation:m,distance:r,ignoreLocation:d})<=f?S=x:_=x,x=Math.floor((_-S)/2+S);_=x;let B=Math.max(1,m-x+1),A=a?h:Math.min(m+x,h)+u,P=Array(A+2);P[A+1]=(1<<C)-1;for(let z=A;z>=B;z-=1){let D=z-1,L=i[t.charAt(D)];if(p&&(v[D]=+!!L),P[z]=(P[z+1]<<1|1)&L,C&&(P[z]|=(y[z+1]|y[z])<<1|1|y[z+1]),P[z]&k&&(w=dr(e,{errors:C,currentLocation:D,expectedLocation:m,distance:r,ignoreLocation:d}),w<=f)){if(f=w,g=D,g<=m)break;B=Math.max(1,2*m-g)}}if(dr(e,{errors:C+1,currentLocation:m,expectedLocation:m,distance:r,ignoreLocation:d})>f)break;y=P}const N={isMatch:g>=0,score:Math.max(.001,w)};if(p){const C=$6(v,l);C.length?c&&(N.indices=C):N.isMatch=!1}return N}function j6(t){let e={};for(let i=0,n=t.length;i<n;i+=1){const r=t.charAt(i);e[r]=(e[r]||0)|1<<n-i-1}return e}const ro=String.prototype.normalize?(t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(t=>t);class Rg{constructor(e,{location:i=ke.location,threshold:n=ke.threshold,distance:r=ke.distance,includeMatches:o=ke.includeMatches,findAllMatches:a=ke.findAllMatches,minMatchCharLength:l=ke.minMatchCharLength,isCaseSensitive:c=ke.isCaseSensitive,ignoreDiacritics:d=ke.ignoreDiacritics,ignoreLocation:u=ke.ignoreLocation}={}){if(this.options={location:i,threshold:n,distance:r,includeMatches:o,findAllMatches:a,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:u},e=c?e:e.toLowerCase(),e=d?ro(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const h=(f,g)=>{this.chunks.push({pattern:f,alphabet:j6(f),startIndex:g})},m=this.pattern.length;if(m>Fi){let f=0;const g=m%Fi,p=m-g;for(;f<p;)h(this.pattern.substr(f,Fi),f),f+=Fi;if(g){const v=m-Fi;h(this.pattern.substr(v),v)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:i,ignoreDiacritics:n,includeMatches:r}=this.options;if(e=i?e:e.toLowerCase(),e=n?ro(e):e,this.pattern===e){let p={isMatch:!0,score:0};return r&&(p.indices=[[0,e.length-1]]),p}const{location:o,distance:a,threshold:l,findAllMatches:c,minMatchCharLength:d,ignoreLocation:u}=this.options;let h=[],m=0,f=!1;this.chunks.forEach(({pattern:p,alphabet:v,startIndex:b})=>{const{isMatch:y,score:w,indices:_}=H6(e,p,v,{location:o+b,distance:a,threshold:l,findAllMatches:c,minMatchCharLength:d,includeMatches:r,ignoreLocation:u});y&&(f=!0),m+=w,y&&_&&(h=[...h,..._])});let g={isMatch:f,score:f?m/this.chunks.length:1};return f&&r&&(g.indices=h),g}}class yi{constructor(e){this.pattern=e}static isMultiMatch(e){return C0(e,this.multiRegex)}static isSingleMatch(e){return C0(e,this.singleRegex)}search(){}}function C0(t,e){const i=t.match(e);return i?i[1]:null}class U6 extends yi{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const i=e===this.pattern;return{isMatch:i,score:i?0:1,indices:[0,this.pattern.length-1]}}}class G6 extends yi{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class K6 extends yi{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const i=e.startsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[0,this.pattern.length-1]}}}class Y6 extends yi{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const i=!e.startsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[0,e.length-1]}}}class Z6 extends yi{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const i=e.endsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class q6 extends yi{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const i=!e.endsWith(this.pattern);return{isMatch:i,score:i?0:1,indices:[0,e.length-1]}}}class Bg extends yi{constructor(e,{location:i=ke.location,threshold:n=ke.threshold,distance:r=ke.distance,includeMatches:o=ke.includeMatches,findAllMatches:a=ke.findAllMatches,minMatchCharLength:l=ke.minMatchCharLength,isCaseSensitive:c=ke.isCaseSensitive,ignoreDiacritics:d=ke.ignoreDiacritics,ignoreLocation:u=ke.ignoreLocation}={}){super(e),this._bitapSearch=new Rg(e,{location:i,threshold:n,distance:r,includeMatches:o,findAllMatches:a,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class zg extends yi{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let i=0,n;const r=[],o=this.pattern.length;for(;(n=e.indexOf(this.pattern,i))>-1;)i=n+o,r.push([n,i-1]);const a=!!r.length;return{isMatch:a,score:a?0:1,indices:r}}}const ul=[U6,zg,K6,Y6,q6,Z6,G6,Bg],S0=ul.length,X6=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,J6="|";function Q6(t,e={}){return t.split(J6).map(i=>{let n=i.trim().split(X6).filter(o=>o&&!!o.trim()),r=[];for(let o=0,a=n.length;o<a;o+=1){const l=n[o];let c=!1,d=-1;for(;!c&&++d<S0;){const u=ul[d];let h=u.isMultiMatch(l);h&&(r.push(new u(h,e)),c=!0)}if(!c)for(d=-1;++d<S0;){const u=ul[d];let h=u.isSingleMatch(l);if(h){r.push(new u(h,e));break}}}return r})}const e8=new Set([Bg.type,zg.type]);class t8{constructor(e,{isCaseSensitive:i=ke.isCaseSensitive,ignoreDiacritics:n=ke.ignoreDiacritics,includeMatches:r=ke.includeMatches,minMatchCharLength:o=ke.minMatchCharLength,ignoreLocation:a=ke.ignoreLocation,findAllMatches:l=ke.findAllMatches,location:c=ke.location,threshold:d=ke.threshold,distance:u=ke.distance}={}){this.query=null,this.options={isCaseSensitive:i,ignoreDiacritics:n,includeMatches:r,minMatchCharLength:o,findAllMatches:l,ignoreLocation:a,location:c,threshold:d,distance:u},e=i?e:e.toLowerCase(),e=n?ro(e):e,this.pattern=e,this.query=Q6(this.pattern,this.options)}static condition(e,i){return i.useExtendedSearch}searchIn(e){const i=this.query;if(!i)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r,ignoreDiacritics:o}=this.options;e=r?e:e.toLowerCase(),e=o?ro(e):e;let a=0,l=[],c=0;for(let d=0,u=i.length;d<u;d+=1){const h=i[d];l.length=0,a=0;for(let m=0,f=h.length;m<f;m+=1){const g=h[m],{isMatch:p,indices:v,score:b}=g.search(e);if(p){if(a+=1,c+=b,n){const y=g.constructor.type;e8.has(y)?l=[...l,...v]:l.push(v)}}else{c=0,a=0,l.length=0;break}}if(a){let m={isMatch:!0,score:c/a};return n&&(m.indices=l),m}}return{isMatch:!1,score:1}}}const hl=[];function i8(...t){hl.push(...t)}function ml(t,e){for(let i=0,n=hl.length;i<n;i+=1){let r=hl[i];if(r.condition(t,e))return new r(t,e)}return new Rg(t,e)}const oo={AND:"$and",OR:"$or"},fl={PATH:"$path",PATTERN:"$val"},pl=t=>!!(t[oo.AND]||t[oo.OR]),n8=t=>!!t[fl.PATH],s8=t=>!ni(t)&&Ag(t)&&!pl(t),N0=t=>({[oo.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function Vg(t,e,{auto:i=!0}={}){const n=r=>{let o=Object.keys(r);const a=n8(r);if(!a&&o.length>1&&!pl(r))return n(N0(r));if(s8(r)){const c=a?r[fl.PATH]:o[0],d=a?r[fl.PATTERN]:r[c];if(!Wt(d))throw new Error(T6(c));const u={keyId:dl(c),pattern:d};return i&&(u.searcher=ml(d,e)),u}let l={children:[],operator:o[0]};return o.forEach(c=>{const d=r[c];ni(d)&&d.forEach(u=>{l.children.push(n(u))})}),l};return pl(t)||(t=N0(t)),n(t)}function r8(t,{ignoreFieldNorm:e=ke.ignoreFieldNorm}){t.forEach(i=>{let n=1;i.matches.forEach(({key:r,norm:o,score:a})=>{const l=r?r.weight:null;n*=Math.pow(a===0&&l?Number.EPSILON:a,(l||1)*(e?1:o))}),i.score=n})}function o8(t,e){const i=t.matches;e.matches=[],bt(i)&&i.forEach(n=>{if(!bt(n.indices)||!n.indices.length)return;const{indices:r,value:o}=n;let a={indices:r,value:o};n.key&&(a.key=n.key.src),n.idx>-1&&(a.refIndex=n.idx),e.matches.push(a)})}function a8(t,e){e.score=t.score}function l8(t,e,{includeMatches:i=ke.includeMatches,includeScore:n=ke.includeScore}={}){const r=[];return i&&r.push(o8),n&&r.push(a8),t.map(o=>{const{idx:a}=o,l={item:e[a],refIndex:a};return r.length&&r.forEach(c=>{c(o,l)}),l})}class kn{constructor(e,i={},n){this.options={...ke,...i},this._keyStore=new F6(this.options.keys),this.setCollection(e,n)}setCollection(e,i){if(this._docs=e,i&&!(i instanceof Sc))throw new Error(M6);this._myIndex=i||Ig(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){bt(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const i=[];for(let n=0,r=this._docs.length;n<r;n+=1){const o=this._docs[n];e(o,n)&&(this.removeAt(n),n-=1,r-=1,i.push(o))}return i}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:i=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:o,sortFn:a,ignoreFieldNorm:l}=this.options;let c=Wt(e)?Wt(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return r8(c,{ignoreFieldNorm:l}),o&&c.sort(a),Dg(i)&&i>-1&&(c=c.slice(0,i)),l8(c,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(e){const i=ml(e,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:o,i:a,n:l})=>{if(!bt(o))return;const{isMatch:c,score:d,indices:u}=i.searchIn(o);c&&r.push({item:o,idx:a,matches:[{score:d,value:o,norm:l,indices:u}]})}),r}_searchLogical(e){const i=Vg(e,this.options),n=(l,c,d)=>{if(!l.children){const{keyId:h,searcher:m}=l,f=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(c,h),searcher:m});return f&&f.length?[{idx:d,item:c,matches:f}]:[]}const u=[];for(let h=0,m=l.children.length;h<m;h+=1){const f=l.children[h],g=n(f,c,d);if(g.length)u.push(...g);else if(l.operator===oo.AND)return[]}return u},r=this._myIndex.records,o={},a=[];return r.forEach(({$:l,i:c})=>{if(bt(l)){let d=n(i,l,c);d.length&&(o[c]||(o[c]={idx:c,item:l,matches:[]},a.push(o[c])),d.forEach(({matches:u})=>{o[c].matches.push(...u)}))}}),a}_searchObjectList(e){const i=ml(e,this.options),{keys:n,records:r}=this._myIndex,o=[];return r.forEach(({$:a,i:l})=>{if(!bt(a))return;let c=[];n.forEach((d,u)=>{c.push(...this._findMatches({key:d,value:a[u],searcher:i}))}),c.length&&o.push({idx:l,item:a,matches:c})}),o}_findMatches({key:e,value:i,searcher:n}){if(!bt(i))return[];let r=[];if(ni(i))i.forEach(({v:o,i:a,n:l})=>{if(!bt(o))return;const{isMatch:c,score:d,indices:u}=n.searchIn(o);c&&r.push({score:d,key:e,value:o,idx:a,norm:l,indices:u})});else{const{v:o,n:a}=i,{isMatch:l,score:c,indices:d}=n.searchIn(o);l&&r.push({score:c,key:e,value:o,norm:a,indices:d})}return r}}kn.version="7.1.0";kn.createIndex=Ig;kn.parseIndex=O6;kn.config=ke;kn.parseQuery=Vg;i8(t8);const c8=(t=[],e={})=>{const[i,n]=M(""),[r,o]=M(!1),a=te(null),l=Me(()=>new kn(t,{keys:[{name:"name",weight:.4},{name:"attributes.friendly_name",weight:.35},{name:"area",weight:.15},{name:"id",weight:.05},{name:"entity_id",weight:.05}],threshold:.5,includeScore:!0,includeMatches:!0,minMatchCharLength:1,shouldSort:!0,findAllMatches:!0,ignoreLocation:!0,useExtendedSearch:!1,tokenize:!0,matchAllTokens:!1,distance:1e3,...e}),[t]),c=Ee(m=>{if(clearTimeout(a.current),n(m),!m)return o(!1),t;o(!0),a.current=setTimeout(()=>{o(!1)},150);const f=m.toLowerCase().trim().split(/\s+/);if(f.length>1){const p=t.filter(v=>{const b=[v.name||"",v.attributes?.friendly_name||"",v.entity_id||"",v.id||"",v.area||""].join(" ").toLowerCase();return f.every(y=>b.includes(y))});return p.sort((v,b)=>{const y=(v.attributes?.friendly_name||v.name||"").toLowerCase(),w=(b.attributes?.friendly_name||b.name||"").toLowerCase(),_=y===m.toLowerCase(),k=w===m.toLowerCase();if(_&&!k)return-1;if(!_&&k)return 1;const N=d(y,f),C=d(w,f);return N-C}),p.map(v=>({...v,score:0,matches:[]}))}return l.search(m).map(p=>({...p.item,score:p.score,matches:p.matches}))},[l,t]),d=(m,f)=>{if(f.length<2)return 0;const g=f.map(v=>{const b=m.indexOf(v);return b>=0?b:m.length});g.sort((v,b)=>v-b);let p=0;for(let v=1;v<g.length;v++)p+=g[v]-g[v-1];return p},u=Ee((m,f=5)=>m?l.search(m).slice(0,f).map(p=>({...p.item,highlight:d8(p.item.name,p.matches)})):[],[l]),h=Me(()=>c(i),[i,c]);return{searchTerm:i,setSearchTerm:n,results:h,isSearching:r,getSuggestions:u,search:c}},d8=(t,e)=>{if(!e)return t;const i=e.find(o=>o.key==="name");if(!i)return t;let n="",r=0;return i.indices.forEach(([o,a])=>{n+=t.slice(r,o),n+=`<mark>${t.slice(o,a+1)}</mark>`,r=a+1}),n+=t.slice(r),n},u8=({size:t=39})=>{const e=`lightbulb_on_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("g",{id:`${e}_segment1`,children:s("path",{d:"M9.00082 15C9.00098 13 8.50098 12.5 7.50082 11.5C6.50067 10.5 6.02422 9.48689 6.00082 8C5.95284 4.95029 8.00067 3 12.0008 3C16.001 3 18.0488 4.95029 18.0008 8C17.9774 9.48689 17.5007 10.5 16.5008 11.5C15.501 12.5 15.001 13 15.0008 15",stroke:"#FFD54F",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",opacity:"0",children:[s("animate",{attributeName:"opacity",values:"0;1",dur:"1s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,-2;0,0",dur:"1s",fill:"freeze"})]})}),s("g",{id:`${e}_segment2`,children:s("path",{d:"M9 18H15",stroke:"#42A5F5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",children:[s("animate",{attributeName:"opacity",values:"0;1",dur:"1s",begin:"0.3s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,2;0,0",dur:"1s",begin:"0.3s",fill:"freeze"})]})}),s("g",{id:`${e}_segment3`,children:s("path",{d:"M10 21H14",stroke:"#42A5F5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",children:[s("animate",{attributeName:"opacity",values:"0;1",dur:"1s",begin:"0.6s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,2;0,0",dur:"1s",begin:"0.6s",fill:"freeze"})]})})]})},h8=({size:t=39})=>{const e=`lightbulb_off_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("g",{id:`${e}_segment1`,children:s("path",{d:"M9.00082 15C9.00098 13 8.50098 12.5 7.50082 11.5C6.50067 10.5 6.02422 9.48689 6.00082 8C5.95284 4.95029 8.00067 3 12.0008 3C16.001 3 18.0488 4.95029 18.0008 8C17.9774 9.48689 17.5007 10.5 16.5008 11.5C15.501 12.5 15.001 13 15.0008 15",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",stroke:"#FFD54F",children:[s("animate",{attributeName:"stroke",values:"#FFD54F;#F0F4F8;#F0F4F8",dur:"1s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1;0.95;1",dur:"1s",fill:"freeze"})]})}),s("g",{id:`${e}_segment2`,children:s("path",{d:"M9 18H15",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",stroke:"#42A5F5",children:[s("animate",{attributeName:"opacity",values:"1;0.3;1",dur:"1s",fill:"freeze"}),s("animate",{attributeName:"stroke",values:"#42A5F5;#42A5F5;#B0BEC5",dur:"1s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,1;0,0",dur:"1s",fill:"freeze"})]})}),s("g",{id:`${e}_segment3`,children:s("path",{d:"M10 21H14",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",stroke:"#42A5F5",children:[s("animate",{attributeName:"opacity",values:"1;0.3;1",dur:"1s",begin:"0.3s",fill:"freeze"}),s("animate",{attributeName:"stroke",values:"#42A5F5;#42A5F5;#B0BEC5",dur:"1s",begin:"0.3s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,1;0,0",dur:"1s",begin:"0.3s",fill:"freeze"})]})})]})},m8=({size:t=39})=>{const e=`desk_lamp_on_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",strokeWidth:"1",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{id:`${e}_sockel`,d:"M8 21H16",stroke:"#42A5F5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",children:[s("animate",{attributeName:"opacity",values:"0;1",dur:"1s",begin:"0.6s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,2;0,0",dur:"1s",begin:"0.6s",fill:"freeze"})]}),s("path",{id:`${e}_stiel`,d:"M12 15L12 21",stroke:"#42A5F5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",children:[s("animate",{attributeName:"opacity",values:"0;1",dur:"1s",begin:"0.3s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,2;0,0",dur:"1s",begin:"0.3s",fill:"freeze"})]}),s("path",{id:`${e}_gelenk`,d:"M8 15L8 13",stroke:"#42A5F5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",children:[s("animate",{attributeName:"opacity",values:"0;1",dur:"1s",begin:"0.2s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"1,0;0,0",dur:"1s",begin:"0.2s",fill:"freeze"})]}),s("path",{id:`${e}_lampenschirm`,d:"M6.87172 3.42759L4.23172 12.2276C4.11623 12.6126 4.4045 13 4.80642 13L19.1936 13C19.5955 13 19.8838 12.6126 19.7683 12.2276L17.1283 3.42759C17.0521 3.1738 16.8185 3 16.5536 3L7.44642 3C7.18145 3 6.94786 3.1738 6.87172 3.42759Z",stroke:"#FFD54F",fill:"#FFD54F",fillOpacity:"0.3",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",children:[s("animate",{attributeName:"opacity",values:"0;1",dur:"1s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,-2;0,0",dur:"1s",fill:"freeze"}),s("animate",{attributeName:"stroke",values:"#B0BEC5;#FFD54F;#FF8F00",dur:"1.5s",fill:"freeze"}),s("animate",{attributeName:"fill-opacity",values:"0.1;0.3;0.4",dur:"1.5s",fill:"freeze"})]})]})},f8=({size:t=39})=>{const e=`desk_lamp_off_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",strokeWidth:"1",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{id:`${e}_sockel`,d:"M8 21H16",stroke:"#42A5F5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#42A5F5;#B0BEC5",dur:"1.5s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,1;0,0",dur:"1.5s",begin:"0.4s",fill:"freeze"})]}),s("path",{id:`${e}_stiel`,d:"M12 15L12 21",stroke:"#42A5F5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#42A5F5;#B0BEC5",dur:"1.5s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,1;0,0",dur:"1.5s",begin:"0.2s",fill:"freeze"})]}),s("path",{id:`${e}_gelenk`,d:"M8 15L8 13",stroke:"#42A5F5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#42A5F5;#B0BEC5",dur:"1.5s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;1,0;0,0",dur:"1.5s",begin:"0.1s",fill:"freeze"})]}),s("path",{id:`${e}_lampenschirm`,d:"M6.87172 3.42759L4.23172 12.2276C4.11623 12.6126 4.4045 13 4.80642 13L19.1936 13C19.5955 13 19.8838 12.6126 19.7683 12.2276L17.1283 3.42759C17.0521 3.1738 16.8185 3 16.5536 3L7.44642 3C7.18145 3 6.94786 3.1738 6.87172 3.42759Z",stroke:"#FF8F00",fill:"#FFD54F",fillOpacity:"0.3",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#FF8F00;#FFD54F;#B0BEC5",dur:"1.5s",fill:"freeze"}),s("animate",{attributeName:"fill",values:"#FFD54F;#F0F4F8",dur:"1.5s",fill:"freeze"}),s("animate",{attributeName:"fill-opacity",values:"0.3;0.1",dur:"1.5s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1;0.98;1",dur:"1.5s",fill:"freeze"})]})]})},p8=({size:t=39})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{d:"M6 20H3V6L12 4L21 6V20H18M6 20H18M6 20V16M18 20V16M6 12V8L18 8V12M6 12L18 12M6 12V16M18 12V16M6 16H18",stroke:"#388E3C",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("rect",{x:"6",y:"16",width:"12",height:"4",fill:"rgba(56, 142, 60, 0.3)",stroke:"none",opacity:"1",children:s("animate",{attributeName:"opacity",values:"1;0",dur:"0.5s",begin:"0.5s",fill:"freeze"})}),s("rect",{x:"6",y:"12",width:"12",height:"4",fill:"rgba(56, 142, 60, 0.3)",stroke:"none",opacity:"1",children:s("animate",{attributeName:"opacity",values:"1;0",dur:"0.5s",begin:"1s",fill:"freeze"})}),s("rect",{x:"6",y:"8",width:"12",height:"4",fill:"rgba(56, 142, 60, 0.3)",stroke:"none",opacity:"1",children:s("animate",{attributeName:"opacity",values:"1;0",dur:"0.5s",begin:"1.5s",fill:"freeze"})})]}),g8=({size:t=39})=>s("svg",{id:"garage_door_system",width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("style",{children:`
    /* Garagentor schliet sich - von oben nach unten */
    #top_slat_fill {
      animation: fade_in_top 2000ms ease-in-out forwards;
      animation-delay: 500ms;
      opacity: 0;
    }
    
    #middle_slat_fill {
      animation: fade_in_middle 2000ms ease-in-out forwards;
      animation-delay: 1000ms;
      opacity: 0;
    }
    
    #bottom_slat_fill {
      animation: fade_in_bottom 2000ms ease-in-out forwards;
      animation-delay: 1500ms;
      opacity: 0;
    }
    
    @keyframes fade_in_top {
      0% { opacity: 0; }
      25% { opacity: 1; }
      100% { opacity: 1; }
    }
    
    @keyframes fade_in_middle {
      0% { opacity: 0; }
      25% { opacity: 1; }
      100% { opacity: 1; }
    }
    
    @keyframes fade_in_bottom {
      0% { opacity: 0; }
      25% { opacity: 1; }
      100% { opacity: 1; }
    }
    
    /* Kein Glow-Effekt im geschlossenen Zustand */
    #garage_door_system {
      filter: none;
    }
    `}),s("path",{d:"M6 20H3V6L12 4L21 6V20H18M6 20H18M6 20V16M18 20V16M6 12V8L18 8V12M6 12L18 12M6 12V16M18 12V16M6 16H18",stroke:"#B0BEC5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("rect",{id:"top_slat_fill",x:"6",y:"8",width:"12",height:"4",fill:"rgba(176, 190, 197, 0.3)",stroke:"none"}),s("rect",{id:"middle_slat_fill",x:"6",y:"12",width:"12",height:"4",fill:"rgba(176, 190, 197, 0.3)",stroke:"none"}),s("rect",{id:"bottom_slat_fill",x:"6",y:"16",width:"12",height:"4",fill:"rgba(176, 190, 197, 0.3)",stroke:"none"})]}),v8=({size:t=39})=>{const e=`roller_on_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("g",{id:`${e}_frame`,children:s("path",{d:"M3 7.5V3.6C3 3.26863 3.26863 3 3.6 3H20.4C20.7314 3 21 3.26863 21 3.6V7.5M21 16.5V20.4C21 20.7314 20.7314 21 20.4 21H3.6C3.26863 21 3 20.7314 3 20.4V16.5M3 7.5V16.5M21 7.5V16.5",stroke:"#388E3C",strokeWidth:"1.5"})}),s("rect",{id:`${e}_first_slat_fill`,x:"3",y:"3",width:"18",height:"4.5",fill:"rgba(56, 142, 60, 0.3)",stroke:"none",children:s("animate",{attributeName:"opacity",values:"1;0;0",dur:"2s",begin:"2s",fill:"freeze"})}),s("rect",{id:`${e}_second_slat_fill`,x:"3",y:"7.5",width:"18",height:"4.5",fill:"rgba(56, 142, 60, 0.3)",stroke:"none",children:s("animate",{attributeName:"opacity",values:"1;0;0",dur:"2s",begin:"1.5s",fill:"freeze"})}),s("rect",{id:`${e}_third_slat_fill`,x:"3",y:"12",width:"18",height:"4.5",fill:"rgba(56, 142, 60, 0.3)",stroke:"none",children:s("animate",{attributeName:"opacity",values:"1;0;0",dur:"2s",begin:"1s",fill:"freeze"})}),s("rect",{id:`${e}_fourth_slat_fill`,x:"3",y:"16.5",width:"18",height:"4.5",fill:"rgba(56, 142, 60, 0.3)",stroke:"none",children:s("animate",{attributeName:"opacity",values:"1;0;0",dur:"2s",begin:"0.5s",fill:"freeze"})}),s("path",{d:"M3 7.5H21",stroke:"#388E3C",strokeWidth:"1.5"}),s("path",{d:"M3 12H21",stroke:"#388E3C",strokeWidth:"1.5"}),s("path",{d:"M3 16.5H21",stroke:"#388E3C",strokeWidth:"1.5"})]})},y8=({size:t=39})=>s("svg",{id:"rollershutter_system",width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("style",{children:`
    /* Erste Lamelle Fade-In */
    #first_slat_fill {
      animation: fade_in_first 2000ms ease-in-out forwards;
      animation-delay: 500ms;
      opacity: 0;
    }
    
    /* Zweite Lamelle Fade-In mit 1.0s Delay */
    #second_slat_fill {
      animation: fade_in_second 2000ms ease-in-out forwards;
      animation-delay: 1000ms;
      opacity: 0;
    }
    
    /* Dritte Lamelle Fade-In mit 1.5s Delay */
    #third_slat_fill {
      animation: fade_in_third 2000ms ease-in-out forwards;
      animation-delay: 1500ms;
      opacity: 0;
    }
    
    /* Vierte Lamelle Fade-In mit 2.0s Delay */
    #fourth_slat_fill {
      animation: fade_in_fourth 2000ms ease-in-out forwards;
      animation-delay: 2000ms;
      opacity: 0;
    }
    
    @keyframes fade_in_first {
      0% { opacity: 0; }
      25% { opacity: 1; }
      100% { opacity: 1; }
    }
    
    @keyframes fade_in_second {
      0% { opacity: 0; }
      25% { opacity: 1; }
      100% { opacity: 1; }
    }
    
    @keyframes fade_in_third {
      0% { opacity: 0; }
      25% { opacity: 1; }
      100% { opacity: 1; }
    }
    
    @keyframes fade_in_fourth {
      0% { opacity: 0; }
      25% { opacity: 1; }
      100% { opacity: 1; }
    }
    `}),s("g",{id:"frame",children:s("path",{d:"M3 7.5V3.6C3 3.26863 3.26863 3 3.6 3H20.4C20.7314 3 21 3.26863 21 3.6V7.5M21 16.5V20.4C21 20.7314 20.7314 21 20.4 21H3.6C3.26863 21 3 20.7314 3 20.4V16.5M3 7.5V16.5M21 7.5V16.5",stroke:"#B0BEC5",strokeWidth:"1.5"})}),s("rect",{id:"first_slat_fill",x:"3",y:"3",width:"18",height:"4.5",fill:"rgba(176, 190, 197, 0.4)",stroke:"none"}),s("rect",{id:"second_slat_fill",x:"3",y:"7.5",width:"18",height:"4.5",fill:"rgba(176, 190, 197, 0.4)",stroke:"none"}),s("rect",{id:"third_slat_fill",x:"3",y:"12",width:"18",height:"4.5",fill:"rgba(176, 190, 197, 0.4)",stroke:"none"}),s("rect",{id:"fourth_slat_fill",x:"3",y:"16.5",width:"18",height:"4.5",fill:"rgba(176, 190, 197, 0.4)",stroke:"none"}),s("path",{d:"M3 7.5H21",stroke:"#B0BEC5",strokeWidth:"1.5"}),s("path",{d:"M3 12H21",stroke:"#B0BEC5",strokeWidth:"1.5"}),s("path",{d:"M3 16.5H21",stroke:"#B0BEC5",strokeWidth:"1.5"})]}),ur=({size:t=39})=>{const e=`door_on_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:[s("path",{id:`${e}_door_frame`,d:"M2 18V6C2 4.34315 3.34315 3 5 3H7C8.65685 3 10 4.34315 10 6V18C10 19.6569 8.65685 21 7 21H5C3.34315 21 2 19.6569 2 18Z",stroke:"#42A5F5",fill:"rgba(66, 165, 245, 0.2)",strokeWidth:"1.5",children:[s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;-1.5,0",dur:"1.5s",fill:"freeze"}),s("animate",{attributeName:"opacity",values:"0.4;0.8",dur:"1.5s",fill:"freeze"})]}),s("path",{id:`${e}_door_opening_side`,d:"M16 3H18C20.2091 3 22 4.79086 22 7V17C22 19.2091 20.2091 21 18 21H16",stroke:"#42A5F5",fill:"rgba(66, 165, 245, 0.1)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",children:[s("animateTransform",{attributeName:"transform",type:"translate",values:"-5,0;-10,0",dur:"1.5s",fill:"freeze"}),s("animate",{attributeName:"opacity",values:"0;1",dur:"1.5s",fill:"freeze"})]})]})},hr=({size:t=39})=>{const e=`door_off_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:[s("path",{id:`${e}_door_frame`,d:"M2 18V6C2 4.34315 3.34315 3 5 3H7C8.65685 3 10 4.34315 10 6V18C10 19.6569 8.65685 21 7 21H5C3.34315 21 2 19.6569 2 18Z",stroke:"#B0BEC5",fill:"rgba(176, 190, 197, 0.1)",strokeWidth:"1.5",opacity:"0.8",children:[s("animateTransform",{attributeName:"transform",type:"translate",values:"-1.5,0;0,0",dur:"1.5s",fill:"freeze"}),s("animate",{attributeName:"opacity",values:"0.8;0.4",dur:"1.5s",fill:"freeze"})]}),s("path",{id:`${e}_door_opening_side`,d:"M16 3H18C20.2091 3 22 4.79086 22 7V17C22 19.2091 20.2091 21 18 21H16",stroke:"#B0BEC5",fill:"rgba(176, 190, 197, 0.05)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",opacity:"1",children:[s("animateTransform",{attributeName:"transform",type:"translate",values:"-10,0;-5,0",dur:"1.5s",fill:"freeze"}),s("animate",{attributeName:"opacity",values:"1;0",dur:"1.5s",fill:"freeze"})]})]})},b8=({size:t=39})=>{const e=`motion_on_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:[s("g",{id:`${e}_movement_icon`,children:[s("path",{id:`${e}_activity_glow`,d:"M3 12H6L9 3L15 21L18 12H21",stroke:"#FFB300",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3",children:s("animate",{attributeName:"opacity",values:"0.3;0.8;0.5;0.3",dur:"3s",repeatCount:"indefinite"})}),s("path",{id:`${e}_activity_line`,d:"M3 12H6L9 3L15 21L18 12H21",stroke:"#F44336",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"50",strokeDashoffset:"50",children:[s("animate",{attributeName:"stroke-dashoffset",values:"50;0;-50",dur:"2s",repeatCount:"indefinite"}),s("animate",{attributeName:"stroke",values:"#FF8F00;#F44336;#FF8F00",dur:"2s",repeatCount:"indefinite"})]})]}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1;1.1;1",dur:"1.5s",repeatCount:"indefinite"})]})},w8=({size:t=39})=>{const e=`motion_off_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:[s("g",{id:`${e}_movement_icon`,children:s("path",{d:"M3 12H6L9 3L15 21L18 12H21",stroke:"#B0BEC5",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),s("animate",{attributeName:"opacity",values:"1;0.4",dur:"1s",fill:"freeze"})]})},mr=({size:t=39})=>{const e=`presence_on_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",strokeWidth:"1.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{filter:"drop-shadow(0 0 3px rgba(66, 165, 245, 0.4))"},children:[s("path",{id:`${e}_outer_ring`,d:"M6 19.0007C3.57111 17.1763 2 14.2716 2 11C2 5.47715 6.47715 1 12 1C17.5228 1 22 5.47715 22 11C22 14.2716 20.4289 17.1763 18 19.0007",stroke:"#42A5F5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"opacity",values:"0.3;0.8;0.3",dur:"3s",repeatCount:"indefinite"}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1;1.05;1",dur:"3s",repeatCount:"indefinite"})]}),s("path",{id:`${e}_middle_ring`,d:"M7.52779 15C6.57771 13.9385 6 12.5367 6 11C6 7.68629 8.68629 5 12 5C15.3137 5 18 7.68629 18 11C18 12.5367 17.4223 13.9385 16.4722 15",stroke:"#42A5F5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"opacity",values:"0.4;0.9;0.4",dur:"3s",begin:"0.4s",repeatCount:"indefinite"}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1;1.08;1",dur:"3s",begin:"0.4s",repeatCount:"indefinite"})]}),s("g",{id:`${e}_person_figure`,children:[s("path",{d:"M12 13C13.1046 13 14 12.1046 14 11C14 9.89543 13.1046 9 12 9C10.8954 9 10 9.89543 10 11C10 12.1046 10.8954 13 12 13Z",stroke:"#42A5F5",fill:"rgba(66, 165, 245, 0.2)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M10.076 16.2827L10.8906 15.7396C11.5624 15.2917 12.4376 15.2917 13.1094 15.7396L13.924 16.2827C14.5789 16.7192 14.9168 17.4993 14.7874 18.2756L14.2785 21.3288C14.1178 22.2932 13.2834 23 12.3057 23H11.6943C10.7166 23 9.8822 22.2932 9.72147 21.3288L9.2126 18.2756C9.08321 17.4993 9.42114 16.7192 10.076 16.2827Z",stroke:"#42A5F5",fill:"rgba(66, 165, 245, 0.15)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("animate",{attributeName:"opacity",values:"0.8;1;0.8",dur:"3s",begin:"0.8s",repeatCount:"indefinite"}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1;1.03;1",dur:"3s",begin:"0.8s",repeatCount:"indefinite"})]})]})},Ni=({size:t=39})=>{const e=`presence_off_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",strokeWidth:"1.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{id:`${e}_outer_ring`,d:"M6 19.0007C3.57111 17.1763 2 14.2716 2 11C2 5.47715 6.47715 1 12 1C17.5228 1 22 5.47715 22 11C22 14.2716 20.4289 17.1763 18 19.0007",stroke:"#F0F4F8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"opacity",values:"1;0",dur:"1.5s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1;0.95",dur:"1.5s",fill:"freeze"})]}),s("path",{id:`${e}_middle_ring`,d:"M7.52779 15C6.57771 13.9385 6 12.5367 6 11C6 7.68629 8.68629 5 12 5C15.3137 5 18 7.68629 18 11C18 12.5367 17.4223 13.9385 16.4722 15",stroke:"#F0F4F8",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"opacity",values:"1;0",dur:"1.5s",begin:"0.2s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1;0.95",dur:"1.5s",begin:"0.2s",fill:"freeze"})]}),s("g",{id:`${e}_person_figure`,children:[s("path",{d:"M12 13C13.1046 13 14 12.1046 14 11C14 9.89543 13.1046 9 12 9C10.8954 9 10 9.89543 10 11C10 12.1046 10.8954 13 12 13Z",stroke:"#F0F4F8",fill:"rgba(240, 244, 248, 0.1)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M10.076 16.2827L10.8906 15.7396C11.5624 15.2917 12.4376 15.2917 13.1094 15.7396L13.924 16.2827C14.5789 16.7192 14.9168 17.4993 14.7874 18.2756L14.2785 21.3288C14.1178 22.2932 13.2834 23 12.3057 23H11.6943C10.7166 23 9.8822 22.2932 9.72147 21.3288L9.2126 18.2756C9.08321 17.4993 9.42114 16.7192 10.076 16.2827Z",stroke:"#F0F4F8",fill:"rgba(240, 244, 248, 0.05)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("animate",{attributeName:"opacity",values:"1;0.4",dur:"1.5s",begin:"0.4s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1;0.98",dur:"1.5s",begin:"0.4s",fill:"freeze"})]})]})},ri=({size:t=39})=>{const e=`lock_on_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:[s("path",{d:"M16 12H17.4C17.7314 12 18 12.2686 18 12.6V19.4C18 19.7314 17.7314 20 17.4 20H6.6C6.26863 20 6 19.7314 6 19.4V12.6C6 12.2686 6.26863 12 6.6 12H8M16 12H8",stroke:"#FFD54F",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"stroke",values:"#FFD54F;#B0BEC5",dur:"1.5s",fill:"freeze"})}),s("path",{id:`${e}_shackle`,d:"M16 12V8C16 6.66667 15.2 4 12 4C8.8 4 8 6.66667 8 8V12",stroke:"#1976D2",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#1976D2;#B0BEC5",dur:"1.5s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"rotate",values:"45 16 12;0 16 12",dur:"1.5s",fill:"freeze"})]})]})},Un=({size:t=39})=>{const e=`lock_off_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:[s("path",{d:"M16 12H17.4C17.7314 12 18 12.2686 18 12.6V19.4C18 19.7314 17.7314 20 17.4 20H6.6C6.26863 20 6 19.7314 6 19.4V12.6C6 12.2686 6.26863 12 6.6 12H8M16 12H8",stroke:"#B0BEC5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"stroke",values:"#B0BEC5;#FFD54F",dur:"1.5s",fill:"freeze"})}),s("path",{id:`${e}_shackle`,d:"M16 12V8C16 6.66667 15.2 4 12 4C8.8 4 8 6.66667 8 8V12",stroke:"#B0BEC5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#B0BEC5;#1976D2",dur:"1.5s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"rotate",values:"0 16 12;45 16 12",dur:"1.5s",fill:"freeze"})]})]})},Ut=({size:t=39})=>{const e=`siren_on_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:s("g",{id:`${e}_alert_icon`,children:[s("animateTransform",{attributeName:"transform",type:"scale",values:"1;1.1;1",dur:"2s",repeatCount:"indefinite"}),s("path",{id:`${e}_bell`,d:"M18 8.4C18 6.70261 17.3679 5.07475 16.2426 3.87452C15.1174 2.67428 13.5913 2 12 2C10.4087 2 8.88258 2.67428 7.75736 3.87452C6.63214 5.07475 6 6.70261 6 8.4C6 15.8667 3 18 3 18H21C21 18 18 15.8667 18 8.4Z",stroke:"#F44336",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s("animateTransform",{attributeName:"transform",type:"rotate",values:"0 12 6;-8 12 6;8 12 6;-5 12 6;5 12 6;-2 12 6;0 12 6",dur:"1.5s",repeatCount:"indefinite"})}),s("path",{id:`${e}_clapper`,d:"M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21",stroke:"#FF8F00",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s("animateTransform",{attributeName:"transform",type:"rotate",values:"0 12 19;6 12 19;-6 12 19;4 12 19;-4 12 19;2 12 19;0 12 19",dur:"1.5s",repeatCount:"indefinite"})})]})})},Yt=({size:t=39})=>(`${Math.random().toString(36).substr(2,9)}`,s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:[s("path",{d:"M18 8.4C18 6.70261 17.3679 5.07475 16.2426 3.87452C15.1174 2.67428 13.5913 2 12 2C10.4087 2 8.88258 2.67428 7.75736 3.87452C6.63214 5.07475 6 6.70261 6 8.4C6 15.8667 3 18 3 18H21C21 18 18 15.8667 18 8.4Z",stroke:"#F44336",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"stroke",values:"#F44336;#F0F4F8",dur:"1.5s",fill:"freeze"})}),s("path",{d:"M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21",stroke:"#FF8F00",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"stroke",values:"#FF8F00;#F0F4F8",dur:"1.5s",fill:"freeze"})}),s("animate",{attributeName:"opacity",values:"1;0.4",dur:"1.5s",fill:"freeze"})]})),la=({size:t=39})=>{const e=`music_on_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{id:`${e}_notenlinie`,d:"M20 14V3L9 5V16",stroke:"#E91E63",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",children:[s("animate",{attributeName:"opacity",values:"0;1",dur:"1s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,-2;0,0",dur:"1s",fill:"freeze"}),s("animate",{attributeName:"stroke-width",values:"1;1.2;1",dur:"2s",begin:"1s",repeatCount:"indefinite"})]}),s("path",{id:`${e}_obere_note`,d:"M17 19H18C19.1046 19 20 18.1046 20 17V14H17C15.8954 14 15 14.8954 15 16V17C15 18.1046 15.8954 19 17 19Z",stroke:"#E91E63",fill:"#E91E63",fillOpacity:"0.2",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",children:[s("animate",{attributeName:"opacity",values:"0;1",dur:"1s",begin:"0.3s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"2,0;0,0",dur:"1s",begin:"0.3s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1;1.05;1",dur:"2s",begin:"1.3s",repeatCount:"indefinite"}),s("animate",{attributeName:"fill-opacity",values:"0.2;0.3;0.2",dur:"2s",begin:"1.3s",repeatCount:"indefinite"})]}),s("path",{id:`${e}_untere_note`,d:"M6 21H7C8.10457 21 9 20.1046 9 19V16H6C4.89543 16 4 16.8954 4 18V19C4 20.1046 4.89543 21 6 21Z",stroke:"#E91E63",fill:"#E91E63",fillOpacity:"0.2",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",children:[s("animate",{attributeName:"opacity",values:"0;1",dur:"1s",begin:"0.6s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"-2,0;0,0",dur:"1s",begin:"0.6s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1;1.05;1",dur:"2s",begin:"1.8s",repeatCount:"indefinite"}),s("animate",{attributeName:"fill-opacity",values:"0.2;0.3;0.2",dur:"2s",begin:"1.8s",repeatCount:"indefinite"})]})]})},ca=({size:t=39})=>{const e=`music_off_${Math.random().toString(36).substr(2,9)}`;return s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{id:`${e}_notenlinie`,d:"M20 14V3L9 5V16",stroke:"#E91E63",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#E91E63;#B0BEC5",dur:"1.5s",fill:"freeze"}),s("animate",{attributeName:"stroke-width",values:"1.2;1",dur:"1.5s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,0.5;0,0",dur:"1.5s",fill:"freeze"})]}),s("path",{id:`${e}_obere_note`,d:"M17 19H18C19.1046 19 20 18.1046 20 17V14H17C15.8954 14 15 14.8954 15 16V17C15 18.1046 15.8954 19 17 19Z",stroke:"#E91E63",fill:"#E91E63",fillOpacity:"0.3",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#E91E63;#B0BEC5",dur:"1.5s",fill:"freeze"}),s("animate",{attributeName:"fill",values:"#E91E63;#F0F4F8",dur:"1.5s",fill:"freeze"}),s("animate",{attributeName:"fill-opacity",values:"0.3;0.1",dur:"1.5s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1.05;1;0.98;1",dur:"1.5s",begin:"0.2s",fill:"freeze"})]}),s("path",{id:`${e}_untere_note`,d:"M6 21H7C8.10457 21 9 20.1046 9 19V16H6C4.89543 16 4 16.8954 4 18V19C4 20.1046 4.89543 21 6 21Z",stroke:"#E91E63",fill:"#E91E63",fillOpacity:"0.3",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#E91E63;#B0BEC5",dur:"1.5s",fill:"freeze"}),s("animate",{attributeName:"fill",values:"#E91E63;#F0F4F8",dur:"1.5s",fill:"freeze"}),s("animate",{attributeName:"fill-opacity",values:"0.3;0.1",dur:"1.5s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1.05;1;0.98;1",dur:"1.5s",begin:"0.4s",fill:"freeze"})]})]})},Fn=({size:t=39})=>{const e=`tv_on_${Math.random().toString(36).substr(2,9)}`;return s("svg",{id:`${e}_system`,width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{d:"M7 21L17 21",stroke:"#1976D2",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M2 16.4V3.6C2 3.26863 2.26863 3 2.6 3H21.4C21.7314 3 22 3.26863 22 3.6V16.4C22 16.7314 21.7314 17 21.4 17H2.6C2.26863 17 2 16.7314 2 16.4Z",stroke:"#1976D2",fill:"rgba(25, 118, 210, 0.1)",strokeWidth:"1.5"}),s("rect",{x:"3.5",y:"4.5",width:"17",height:"11",fill:"rgba(66, 165, 245, 0.2)",stroke:"none",children:s("animate",{attributeName:"opacity",values:"0.2;0.6;0.2",dur:"3s",repeatCount:"indefinite"})}),s("g",{id:`${e}_content`,stroke:"#42A5F5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("path",{d:"M13.5 7L13.5 11M13.5 13L13.5 11M13.5 11L14.8706 9.43363M17 7L14.8706 9.43363M14.8706 9.43363L17 13",children:[s("animate",{attributeName:"opacity",values:"0.4;1;0.4",dur:"4s",begin:"0s",repeatCount:"indefinite"}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1;1.05;1",dur:"4s",begin:"0s",repeatCount:"indefinite"})]}),s("path",{d:"M9.5 7L6.5 11.5L10 11.5L10 13",children:[s("animate",{attributeName:"opacity",values:"0.4;1;0.4",dur:"4s",begin:"1s",repeatCount:"indefinite"}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1;1.05;1",dur:"4s",begin:"1s",repeatCount:"indefinite"})]})]})]})},sn=({size:t=39})=>{const e=`tv_off_${Math.random().toString(36).substr(2,9)}`;return s("svg",{id:`${e}_system_off`,width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{d:"M7 21L17 21",stroke:"#B0BEC5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M2 16.4V3.6C2 3.26863 2.26863 3 2.6 3H21.4C21.7314 3 22 3.26863 22 3.6V16.4C22 16.7314 21.7314 17 21.4 17H2.6C2.26863 17 2 16.7314 2 16.4Z",stroke:"#B0BEC5",fill:"rgba(176, 190, 197, 0.05)",strokeWidth:"1.5"}),s("rect",{x:"3.5",y:"4.5",width:"17",height:"11",fill:"rgba(66, 66, 66, 0.9)",stroke:"none",children:s("animate",{attributeName:"opacity",values:"0.9;0",dur:"3s",fill:"freeze"})}),s("circle",{cx:"20",cy:"5",r:"0.5",fill:"#F44336",stroke:"none",children:s("animate",{attributeName:"opacity",values:"0.3;1;0.3",dur:"2s",repeatCount:"indefinite"})})]})},fr=({size:t=39})=>(`${Math.random().toString(36).substr(2,9)}`,s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"#FF9246",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"rgba(255,146,48,.1)"}),s("path",{d:"M8 8V16",stroke:"#FF9246",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"opacity",values:"0.4;1;0.4",dur:"2s",repeatCount:"indefinite"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"2s",repeatCount:"indefinite"})]}),s("path",{d:"M12 6V18",stroke:"#FF9246",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"opacity",values:"0.4;1;0.4",dur:"2s",begin:"0.3s",repeatCount:"indefinite"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"2s",begin:"0.3s",repeatCount:"indefinite"})]}),s("path",{d:"M16 8V16",stroke:"#FF9246",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"opacity",values:"0.4;1;0.4",dur:"2s",begin:"0.6s",repeatCount:"indefinite"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-2;0,0",dur:"2s",begin:"0.6s",repeatCount:"indefinite"})]})]})),Li=({size:t=39})=>(`${Math.random().toString(36).substr(2,9)}`,s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"#3CD3FE",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"rgba(60,211,254,.1)"}),s("path",{d:"M12 6L12 18M6 12L18 12M8 8L16 16M16 8L8 16",stroke:"#3CD3FE",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),s("circle",{cx:"8",cy:"10",r:"1",fill:"#3CD3FE",opacity:"0.8",children:[s("animate",{attributeName:"opacity",values:"0;1;0",dur:"2.5s",repeatCount:"indefinite"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,-3;0,3",dur:"2.5s",repeatCount:"indefinite"})]}),s("circle",{cx:"12",cy:"12",r:"1",fill:"#3CD3FE",opacity:"0.8",children:[s("animate",{attributeName:"opacity",values:"0;1;0",dur:"2.5s",begin:"0.5s",repeatCount:"indefinite"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,-3;0,3",dur:"2.5s",begin:"0.5s",repeatCount:"indefinite"})]}),s("circle",{cx:"16",cy:"14",r:"1",fill:"#3CD3FE",opacity:"0.8",children:[s("animate",{attributeName:"opacity",values:"0;1;0",dur:"2.5s",begin:"1s",repeatCount:"indefinite"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,-3;0,3",dur:"2.5s",begin:"1s",repeatCount:"indefinite"})]})]})),Pn=({size:t=39})=>(`${Math.random().toString(36).substr(2,9)}`,s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"#FFD600",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"rgba(255,214,0,.1)"}),s("path",{d:"M7 20L17 20",stroke:"#FFD600",strokeWidth:"1.5",strokeLinecap:"round",opacity:"0.5"}),s("path",{d:"M8 14C8 14 8 10 10 8C10 10 10 14 8 14Z",fill:"#FFD600",opacity:"0.6",children:[s("animate",{attributeName:"opacity",values:"1;0",dur:"3s",repeatCount:"indefinite"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-5",dur:"3s",repeatCount:"indefinite"})]}),s("path",{d:"M12 16C12 16 12 12 14 10C14 12 14 16 12 16Z",fill:"#FFD600",opacity:"0.6",children:[s("animate",{attributeName:"opacity",values:"1;0",dur:"3s",begin:"1s",repeatCount:"indefinite"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-5",dur:"3s",begin:"1s",repeatCount:"indefinite"})]}),s("path",{d:"M16 14C16 14 16 10 18 8C18 10 18 14 16 14Z",fill:"#FFD600",opacity:"0.6",children:[s("animate",{attributeName:"opacity",values:"1;0",dur:"3s",begin:"2s",repeatCount:"indefinite"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0,-5",dur:"3s",begin:"2s",repeatCount:"indefinite"})]})]})),pr=({size:t=39})=>(`${Math.random().toString(36).substr(2,9)}`,s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"#30D158",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"rgba(48,209,88,.1)"}),s("circle",{cx:"12",cy:"12",r:"2",fill:"#30D158",opacity:"0.8"}),s("g",{children:[s("path",{d:"M12 7V12L15 9",stroke:"#30D158",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M17 12H12L15 15",stroke:"#30D158",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 17V12L9 15",stroke:"#30D158",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M7 12H12L9 9",stroke:"#30D158",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("animateTransform",{attributeName:"transform",type:"rotate",values:"0 12 12;360 12 12",dur:"4s",repeatCount:"indefinite"})]})]})),da=({size:t=39})=>(`${Math.random().toString(36).substr(2,9)}`,s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:[s("g",{children:[s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 9C12 9 10.012 7.025 10 5C10.001 3.007 9.95 0.999 12 1C13.948 1.001 13.997 2.976 14 5C14.003 6.985 12 9 12 9Z",stroke:"#42A5F5",strokeWidth:"1",strokeMiterlimit:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 12C15 12 16.975 10.012 19 10C20.993 10.001 23.001 9.95 23 12C22.999 13.948 21.024 13.997 19 14C17.015 14.003 15 12 15 12Z",stroke:"#42A5F5",strokeWidth:"1",strokeMiterlimit:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 12C9 12 7.025 13.988 5 14C3.007 13.999 0.999 14.05 1 12C1.001 10.052 2.976 10.003 5 10C6.985 9.997 9 12 9 12Z",stroke:"#42A5F5",strokeWidth:"1",strokeMiterlimit:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 15C12 15 13.988 16.975 14 19C13.999 20.993 14.05 23.001 12 23C10.052 22.999 10.003 21.024 10 19C9.997 17.015 12 15 12 15Z",stroke:"#42A5F5",strokeWidth:"1",strokeMiterlimit:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("animateTransform",{attributeName:"transform",type:"rotate",values:"0 12 12;360 12 12",dur:"1s",repeatCount:"indefinite"})]}),s("path",{d:"M11.9996 14.9995C13.6565 14.9995 14.9996 13.6564 14.9996 11.9995C14.9996 10.3427 13.6565 8.99951 11.9996 8.99951C10.3428 8.99951 8.99963 10.3427 8.99963 11.9995C8.99963 13.6564 10.3428 14.9995 11.9996 14.9995Z",stroke:"#1976D2",strokeWidth:"2",strokeMiterlimit:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s("animateTransform",{attributeName:"transform",type:"scale",values:"1;1.1;1",dur:"2s",repeatCount:"indefinite"})})]})),gr=({size:t=39})=>(`${Math.random().toString(36).substr(2,9)}`,s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:[s("g",{children:[s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 9C12 9 10.012 7.025 10 5C10.001 3.007 9.95 0.999 12 1C13.948 1.001 13.997 2.976 14 5C14.003 6.985 12 9 12 9Z",stroke:"#42A5F5",strokeWidth:"1",strokeMiterlimit:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"stroke",values:"#42A5F5;#F0F4F8",dur:"1.5s",fill:"freeze"})}),s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 12C15 12 16.975 10.012 19 10C20.993 10.001 23.001 9.95 23 12C22.999 13.948 21.024 13.997 19 14C17.015 14.003 15 12 15 12Z",stroke:"#42A5F5",strokeWidth:"1",strokeMiterlimit:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"stroke",values:"#42A5F5;#F0F4F8",dur:"1.5s",begin:"0.1s",fill:"freeze"})}),s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 12C9 12 7.025 13.988 5 14C3.007 13.999 0.999 14.05 1 12C1.001 10.052 2.976 10.003 5 10C6.985 9.997 9 12 9 12Z",stroke:"#42A5F5",strokeWidth:"1",strokeMiterlimit:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"stroke",values:"#42A5F5;#F0F4F8",dur:"1.5s",begin:"0.2s",fill:"freeze"})}),s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 15C12 15 13.988 16.975 14 19C13.999 20.993 14.05 23.001 12 23C10.052 22.999 10.003 21.024 10 19C9.997 17.015 12 15 12 15Z",stroke:"#42A5F5",strokeWidth:"1",strokeMiterlimit:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"stroke",values:"#42A5F5;#F0F4F8",dur:"1.5s",begin:"0.3s",fill:"freeze"})}),s("animateTransform",{attributeName:"transform",type:"rotate",values:"0 12 12;180 12 12;360 12 12",dur:"2s",fill:"freeze"}),s("animate",{attributeName:"opacity",values:"1;0.4",dur:"1.5s",fill:"freeze"})]}),s("path",{d:"M11.9996 14.9995C13.6565 14.9995 14.9996 13.6564 14.9996 11.9995C14.9996 10.3427 13.6565 8.99951 11.9996 8.99951C10.3428 8.99951 8.99963 10.3427 8.99963 11.9995C8.99963 13.6564 10.3428 14.9995 11.9996 14.9995Z",stroke:"#1976D2",strokeWidth:"2",strokeMiterlimit:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#1976D2;#F0F4F8",dur:"1.5s",begin:"0.4s",fill:"freeze"}),s("animate",{attributeName:"opacity",values:"1;0.4",dur:"1.5s",begin:"0.4s",fill:"freeze"})]})]})),Wg=({size:t=39})=>(`${Math.random().toString(36).substr(2,9)}`,s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:[s("path",{d:"M7.5 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3H18.9999C20.1045 3 20.9999 3.89543 20.9999 4.99999L21 19C21 20.1046 20.1046 21 19 21H16.5",stroke:"#B0BEC5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M21 7H3.00006",stroke:"#1976D2",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),s("g",{children:[s("path",{d:"M12 16C13.6569 16 15 14.5076 15 12.6667V10H9V12.6667C9 14.5076 10.3431 16 12 16Z",stroke:"#42A5F5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 16V21M12 21H10M12 21H14",stroke:"#42A5F5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),s("animateTransform",{attributeName:"transform",type:"rotate",values:"0 12 18.5;-30 12 18.5;0 12 18.5;30 12 18.5;0 12 18.5",dur:"3s",repeatCount:"indefinite"})]}),s("path",{d:"M18 5.01L18.01 4.99889",stroke:"#388E3C",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"opacity",values:"1;0.3;1",dur:"2s",repeatCount:"indefinite"})}),s("path",{d:"M15 5.01L15.01 4.99889",stroke:"#FF8F00",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"opacity",values:"0.3;1;0.3",dur:"2s",repeatCount:"indefinite"})}),s("g",{children:[s("circle",{cx:"10",cy:"14",r:"0.5",fill:"#42A5F5",opacity:"0.6"}),s("circle",{cx:"14",cy:"13",r:"0.4",fill:"#42A5F5",opacity:"0.5"}),s("circle",{cx:"11",cy:"11",r:"0.3",fill:"#42A5F5",opacity:"0.7"}),s("circle",{cx:"13",cy:"15",r:"0.4",fill:"#42A5F5",opacity:"0.4"}),s("animate",{attributeName:"opacity",values:"0.4;0.8;0.6;0.4",dur:"3s",repeatCount:"indefinite"})]})]})),Og=({size:t=39})=>(`${Math.random().toString(36).substr(2,9)}`,s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:[s("path",{d:"M7.5 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3H18.9999C20.1045 3 20.9999 3.89543 20.9999 4.99999L21 19C21 20.1046 20.1046 21 19 21H16.5",stroke:"#F0F4F8",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M21 7H3.00006",stroke:"#1976D2",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"stroke",values:"#1976D2;#F0F4F8",dur:"1.5s",fill:"freeze"})}),s("g",{children:[s("path",{d:"M12 16C13.6569 16 15 14.5076 15 12.6667V10H9V12.6667C9 14.5076 10.3431 16 12 16Z",stroke:"#42A5F5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"stroke",values:"#42A5F5;#F0F4F8",dur:"1.5s",fill:"freeze"})}),s("path",{d:"M12 16V21M12 21H10M12 21H14",stroke:"#42A5F5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"stroke",values:"#42A5F5;#F0F4F8",dur:"1.5s",fill:"freeze"})}),s("animateTransform",{attributeName:"transform",type:"rotate",values:"0 12 18.5;-5 12 18.5;0 12 18.5",dur:"1.5s",fill:"freeze"})]}),s("path",{d:"M18 5.01L18.01 4.99889",stroke:"#388E3C",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#388E3C;#F0F4F8",dur:"1.5s",fill:"freeze"}),s("animate",{attributeName:"opacity",values:"1;0.3",dur:"1.5s",fill:"freeze"})]}),s("path",{d:"M15 5.01L15.01 4.99889",stroke:"#FF8F00",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#FF8F00;#F0F4F8",dur:"1.5s",begin:"0.2s",fill:"freeze"}),s("animate",{attributeName:"opacity",values:"1;0.3",dur:"1.5s",begin:"0.2s",fill:"freeze"})]}),s("g",{children:[s("circle",{cx:"10",cy:"14",r:"0.5",fill:"#42A5F5",opacity:"0.6"}),s("circle",{cx:"14",cy:"13",r:"0.4",fill:"#42A5F5",opacity:"0.5"}),s("circle",{cx:"11",cy:"11",r:"0.3",fill:"#42A5F5",opacity:"0.7"}),s("circle",{cx:"13",cy:"15",r:"0.4",fill:"#42A5F5",opacity:"0.4"}),s("animate",{attributeName:"fill",values:"#42A5F5;#F0F4F8",dur:"1.5s",begin:"0.4s",fill:"freeze"}),s("animate",{attributeName:"opacity",values:"0.6;0",dur:"1.5s",begin:"0.4s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"scale",values:"1;0.8",dur:"1.5s",begin:"0.4s",fill:"freeze"})]})]})),$g=({size:t=39})=>(`${Math.random().toString(36).substr(2,9)}`,s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:s("g",{children:[s("g",{transform:"matrix(0.33023402094841 0 0 0.33023402094841 -12.17848396301270 -1.60764098167419)",children:s("path",{d:"M50.582000,41.719000C51.347000,23.263000,71.804000,12.557000,87.405000,22.447000C94.048000,26.659000,98.205000,33.860000,98.531000,41.719000L102.531000,41.719000C102.355000,36.658000,100.801000,31.742000,98.037000,27.499000L101.343000,25.184000C101.973000,24.743000,101.890000,23.784000,101.193000,23.458000C100.869000,23.307000,100.489000,23.340000,100.196000,23.545000L96.886000,25.862000C96.307000,25.095000,95.690000,24.358000,95.036000,23.653000L100.013000,18.677000C100.550000,18.126000,100.289000,17.199000,99.543000,17.010000C99.206000,16.924000,98.848000,17.020000,98.598000,17.263000L93.619000,22.242000C92.916000,21.586000,92.180000,20.967000,91.414000,20.387000L93.730000,17.079000C94.179000,16.453000,93.782000,15.577000,93.016000,15.501000C92.652000,15.465000,92.298000,15.630000,92.092000,15.932000L89.780000,19.234000C80.524000,13.214000,68.589000,13.214000,59.333000,19.234000L57.021000,15.933000C56.592000,15.294000,55.632000,15.359000,55.293000,16.050000C55.130000,16.383000,55.164000,16.779000,55.383000,17.079000L57.699000,20.387000C56.933000,20.967000,56.197000,21.586000,55.494000,22.241000L50.515000,17.263000C49.978000,16.711000,49.045000,16.949000,48.836000,17.690000C48.737000,18.042000,48.839000,18.421000,49.101000,18.677000L54.077000,23.653000C53.423000,24.358000,52.805000,25.095000,52.226000,25.862000L48.917000,23.545000C48.287000,23.103000,47.414000,23.510000,47.347000,24.277000C47.316000,24.633000,47.477000,24.979000,47.770000,25.184000L51.075000,27.499000C48.312000,31.742000,46.758000,36.658000,46.582000,41.719000L50.582000,41.719000ZM74.556000,66.719000C61.698000,66.703000,51.131000,56.566000,50.582000,43.719000L46.582000,43.719000C47.346000,65.254000,71.136000,77.886000,89.403000,66.457000C97.283000,61.527000,102.201000,53.008000,102.531000,43.719000L98.531000,43.719000C97.982000,56.566000,87.415000,66.703000,74.556000,66.719000Z",transform:"matrix(1 0 0 1 -1.34028837709955 -1.53274161016582)",fill:"#424242",stroke:"none",strokeWidth:"1"})}),s("g",{transform:"matrix(0.33023402094841 0 0 0.33023402094841 17.25779151916504 0.55571800470352)",children:s("g",{transform:"translate(-15.921411,34.655067) rotate(0)",children:s("path",{d:"M-13.277000,25.125000C-13.277000,25.895000,-14.110000,26.376000,-14.777000,25.991000C-15.444000,25.606000,-15.444000,24.644000,-14.777000,24.259000C-14.625000,24.171000,-14.453000,24.125000,-14.277000,24.125000C-13.725000,24.125000,-13.277000,24.573000,-13.277000,25.125000ZM-9.277000,37.125000C-9.277000,40.974000,-13.444000,43.380000,-16.777000,41.455000C-18.324000,40.562000,-19.277000,38.911000,-19.277000,37.125000L-19.277000,25.125000C-19.277000,21.276000,-15.110000,18.870000,-11.777000,20.795000C-10.230000,21.688000,-9.277000,23.339000,-9.277000,25.125000L-9.277000,37.125000ZM-11.277000,25.125000C-11.277000,22.816000,-13.777000,21.372000,-15.777000,22.527000C-17.777000,23.682000,-17.777000,26.568000,-15.777000,27.723000C-15.321000,27.986000,-14.804000,28.125000,-14.277000,28.125000C-12.621000,28.123000,-11.279000,26.781000,-11.277000,25.125000ZM7.723000,36.125000C7.723000,53.061000,-10.610000,63.645000,-25.277000,55.178000C-39.944000,46.710000,-39.944000,25.540000,-25.277000,17.072000C-21.933000,15.142000,-18.139000,14.125000,-14.277000,14.125000C-2.132000,14.139000,7.709000,23.980000,7.723000,36.125000ZM-19.277000,48.125000C-19.277000,47.355000,-20.110000,46.874000,-20.777000,47.259000C-21.444000,47.644000,-21.444000,48.606000,-20.777000,48.991000C-20.625000,49.079000,-20.453000,49.125000,-20.277000,49.125000C-19.725000,49.125000,-19.277000,48.677000,-19.277000,48.125000ZM-10.277000,53.125000C-10.277000,52.573000,-10.725000,52.125000,-11.277000,52.125000L-17.277000,52.125000C-18.047000,52.125000,-18.528000,52.958000,-18.143000,53.625000C-17.964000,53.934000,-17.634000,54.125000,-17.277000,54.125000L-11.277000,54.125000C-10.725000,54.125000,-10.277000,53.677000,-10.277000,53.125000ZM-16.277000,49.125000C-15.507000,49.125000,-15.026000,48.292000,-15.411000,47.625000C-15.796000,46.958000,-16.758000,46.958000,-17.143000,47.625000C-17.231000,47.777000,-17.277000,47.949000,-17.277000,48.125000C-17.277000,48.677000,-16.829000,49.125000,-16.277000,49.125000ZM-12.277000,49.125000C-11.507000,49.125000,-11.026000,48.292000,-11.411000,47.625000C-11.796000,46.958000,-12.758000,46.958000,-13.143000,47.625000C-13.231000,47.777000,-13.277000,47.949000,-13.277000,48.125000C-13.277000,48.677000,-12.829000,49.125000,-12.277000,49.125000ZM-7.277000,48.125000C-7.277000,47.355000,-8.110000,46.874000,-8.777000,47.259000C-9.444000,47.644000,-9.444000,48.606000,-8.777000,48.991000C-8.625000,49.079000,-8.453000,49.125000,-8.277000,49.125000C-7.725000,49.125000,-7.277000,48.677000,-7.277000,48.125000ZM-7.277000,25.125000C-7.277000,19.736000,-13.110000,16.369000,-17.777000,19.063000C-19.943000,20.313000,-21.277000,22.624000,-21.277000,25.125000L-21.277000,37.125000C-21.277000,42.514000,-15.444000,45.881000,-10.777000,43.187000C-8.611000,41.937000,-7.277000,39.626000,-7.277000,37.125000L-7.277000,25.125000Z",transform:"translate(14.277125,-36.141457)",fill:"#9C27B0",stroke:"none",strokeWidth:"1"})})}),s("animateTransform",{attributeName:"transform",type:"rotate",values:"0 12 12;-45 12 12;0 12 12;45 12 12;0 12 12",dur:"8s",repeatCount:"indefinite"})]})})),Hg=({size:t=39})=>(`${Math.random().toString(36).substr(2,9)}`,s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[s("g",{transform:"matrix(0.33023402094841 0 0 0.33023402094841 -12.17848396301270 -1.60764098167419)",children:s("path",{d:"M50.582000,41.719000C51.347000,23.263000,71.804000,12.557000,87.405000,22.447000C94.048000,26.659000,98.205000,33.860000,98.531000,41.719000L102.531000,41.719000C102.355000,36.658000,100.801000,31.742000,98.037000,27.499000L101.343000,25.184000C101.973000,24.743000,101.890000,23.784000,101.193000,23.458000C100.869000,23.307000,100.489000,23.340000,100.196000,23.545000L96.886000,25.862000C96.307000,25.095000,95.690000,24.358000,95.036000,23.653000L100.013000,18.677000C100.550000,18.126000,100.289000,17.199000,99.543000,17.010000C99.206000,16.924000,98.848000,17.020000,98.598000,17.263000L93.619000,22.242000C92.916000,21.586000,92.180000,20.967000,91.414000,20.387000L93.730000,17.079000C94.179000,16.453000,93.782000,15.577000,93.016000,15.501000C92.652000,15.465000,92.298000,15.630000,92.092000,15.932000L89.780000,19.234000C80.524000,13.214000,68.589000,13.214000,59.333000,19.234000L57.021000,15.933000C56.592000,15.294000,55.632000,15.359000,55.293000,16.050000C55.130000,16.383000,55.164000,16.779000,55.383000,17.079000L57.699000,20.387000C56.933000,20.967000,56.197000,21.586000,55.494000,22.241000L50.515000,17.263000C49.978000,16.711000,49.045000,16.949000,48.836000,17.690000C48.737000,18.042000,48.839000,18.421000,49.101000,18.677000L54.077000,23.653000C53.423000,24.358000,52.805000,25.095000,52.226000,25.862000L48.917000,23.545000C48.287000,23.103000,47.414000,23.510000,47.347000,24.277000C47.316000,24.633000,47.477000,24.979000,47.770000,25.184000L51.075000,27.499000C48.312000,31.742000,46.758000,36.658000,46.582000,41.719000L50.582000,41.719000ZM74.556000,66.719000C61.698000,66.703000,51.131000,56.566000,50.582000,43.719000L46.582000,43.719000C47.346000,65.254000,71.136000,77.886000,89.403000,66.457000C97.283000,61.527000,102.201000,53.008000,102.531000,43.719000L98.531000,43.719000C97.982000,56.566000,87.415000,66.703000,74.556000,66.719000Z",transform:"matrix(1 0 0 1 -1.34028837709955 -1.53274161016582)",fill:"#5F6267",stroke:"none",strokeWidth:"1"})}),s("g",{transform:"matrix(0.33023402094841 0 0 0.33023402094841 17.25779151916504 0.55571800470352)",children:s("path",{d:"M-13.277000,25.125000C-13.277000,25.895000,-14.110000,26.376000,-14.777000,25.991000C-15.444000,25.606000,-15.444000,24.644000,-14.777000,24.259000C-14.625000,24.171000,-14.453000,24.125000,-14.277000,24.125000C-13.725000,24.125000,-13.277000,24.573000,-13.277000,25.125000ZM-9.277000,37.125000C-9.277000,40.974000,-13.444000,43.380000,-16.777000,41.455000C-18.324000,40.562000,-19.277000,38.911000,-19.277000,37.125000L-19.277000,25.125000C-19.277000,21.276000,-15.110000,18.870000,-11.777000,20.795000C-10.230000,21.688000,-9.277000,23.339000,-9.277000,25.125000L-9.277000,37.125000ZM-11.277000,25.125000C-11.277000,22.816000,-13.777000,21.372000,-15.777000,22.527000C-17.777000,23.682000,-17.777000,26.568000,-15.777000,27.723000C-15.321000,27.986000,-14.804000,28.125000,-14.277000,28.125000C-12.621000,28.123000,-11.279000,26.781000,-11.277000,25.125000ZM7.723000,36.125000C7.723000,53.061000,-10.610000,63.645000,-25.277000,55.178000C-39.944000,46.710000,-39.944000,25.540000,-25.277000,17.072000C-21.933000,15.142000,-18.139000,14.125000,-14.277000,14.125000C-2.132000,14.139000,7.709000,23.980000,7.723000,36.125000ZM-19.277000,48.125000C-19.277000,47.355000,-20.110000,46.874000,-20.777000,47.259000C-21.444000,47.644000,-21.444000,48.606000,-20.777000,48.991000C-20.625000,49.079000,-20.453000,49.125000,-20.277000,49.125000C-19.725000,49.125000,-19.277000,48.677000,-19.277000,48.125000ZM-10.277000,53.125000C-10.277000,52.573000,-10.725000,52.125000,-11.277000,52.125000L-17.277000,52.125000C-18.047000,52.125000,-18.528000,52.958000,-18.143000,53.625000C-17.964000,53.934000,-17.634000,54.125000,-17.277000,54.125000L-11.277000,54.125000C-10.725000,54.125000,-10.277000,53.677000,-10.277000,53.125000ZM-16.277000,49.125000C-15.507000,49.125000,-15.026000,48.292000,-15.411000,47.625000C-15.796000,46.958000,-16.758000,46.958000,-17.143000,47.625000C-17.231000,47.777000,-17.277000,47.949000,-17.277000,48.125000C-17.277000,48.677000,-16.829000,49.125000,-16.277000,49.125000ZM-12.277000,49.125000C-11.507000,49.125000,-11.026000,48.292000,-11.411000,47.625000C-11.796000,46.958000,-12.758000,46.958000,-13.143000,47.625000C-13.231000,47.777000,-13.277000,47.949000,-13.277000,48.125000C-13.277000,48.677000,-12.829000,49.125000,-12.277000,49.125000ZM-7.277000,48.125000C-7.277000,47.355000,-8.110000,46.874000,-8.777000,47.259000C-9.444000,47.644000,-9.444000,48.606000,-8.777000,48.991000C-8.625000,49.079000,-8.453000,49.125000,-8.277000,49.125000C-7.725000,49.125000,-7.277000,48.677000,-7.277000,48.125000ZM-7.277000,25.125000C-7.277000,19.736000,-13.110000,16.369000,-17.777000,19.063000C-19.943000,20.313000,-21.277000,22.624000,-21.277000,25.125000L-21.277000,37.125000C-21.277000,42.514000,-15.444000,45.881000,-10.777000,43.187000C-8.611000,41.937000,-7.277000,39.626000,-7.277000,37.125000L-7.277000,25.125000Z",transform:"matrix(1 0 0 1 -1.64428582627723 -1.48639076794777)",fill:"#9EA0A2",stroke:"none",strokeWidth:"1",children:s("animate",{attributeName:"opacity",values:"1;0.5",dur:"1s",fill:"freeze"})})})]})),jg=({size:t=39})=>(`${Math.random().toString(36).substr(2,9)}`,s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:[s("g",{children:[s("path",{d:"M20.9999 3.99999L21 20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V4C3 2.89543 3.89543 2 5 2H18.9999C20.1045 2 20.9999 2.89543 20.9999 3.99999Z",stroke:"#B0BEC5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M18 5.01L18.01 4.99889",stroke:"#388E3C",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"opacity",values:"1;0.3;1",dur:"1.5s",repeatCount:"indefinite"})}),s("path",{d:"M18 13C18 16.3137 15.3137 19 12 19C8.68629 19 6 16.3137 6 13C6 9.68629 8.68629 7 12 7C15.3137 7 18 9.68629 18 13Z",stroke:"#1976D2",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;0.5,0;0,0.5;-0.5,0;0,0",dur:"3s",repeatCount:"indefinite"})]}),s("g",{children:[s("path",{d:"M12 16C10.3431 16 9 14.6569 9 13",stroke:"#FF8F00",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("circle",{cx:"10",cy:"11",r:"0.5",fill:"#FF8F00",opacity:"0.6"}),s("circle",{cx:"14",cy:"11",r:"0.5",fill:"#FF8F00",opacity:"0.6"}),s("circle",{cx:"12",cy:"15",r:"0.5",fill:"#FF8F00",opacity:"0.6"}),s("animateTransform",{attributeName:"transform",type:"rotate",values:"0 12 13;360 12 13",dur:"2s",repeatCount:"indefinite"})]})]})),Ug=({size:t=39})=>(`${Math.random().toString(36).substr(2,9)}`,s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:[s("path",{d:"M20.9999 3.99999L21 20C21 21.1046 20.1046 22 19 22H5C3.89543 22 3 21.1046 3 20V4C3 2.89543 3.89543 2 5 2H18.9999C20.1045 2 20.9999 2.89543 20.9999 3.99999Z",stroke:"#B0BEC5",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M18 5.01L18.01 4.99889",stroke:"#388E3C",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#388E3C;#F0F4F8",dur:"1.5s",fill:"freeze"}),s("animate",{attributeName:"opacity",values:"1;0.3",dur:"1.5s",fill:"freeze"})]}),s("path",{d:"M18 13C18 16.3137 15.3137 19 12 19C8.68629 19 6 16.3137 6 13C6 9.68629 8.68629 7 12 7C15.3137 7 18 9.68629 18 13Z",stroke:"#1976D2",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"stroke",values:"#1976D2;#F0F4F8",dur:"1.5s",begin:"0.2s",fill:"freeze"})}),s("g",{children:[s("path",{d:"M12 16C10.3431 16 9 14.6569 9 13",stroke:"#FF8F00",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"stroke",values:"#FF8F00;#F0F4F8",dur:"1.5s",begin:"0.4s",fill:"freeze"})}),s("circle",{cx:"10",cy:"11",r:"0.5",fill:"#FF8F00",opacity:"0.6"}),s("circle",{cx:"14",cy:"11",r:"0.5",fill:"#FF8F00",opacity:"0.6"}),s("circle",{cx:"12",cy:"15",r:"0.5",fill:"#FF8F00",opacity:"0.6"}),s("animate",{attributeName:"fill",values:"#FF8F00;#F0F4F8",dur:"1.5s",begin:"0.4s",fill:"freeze"}),s("animate",{attributeName:"opacity",values:"0.6;0.2",dur:"1.5s",begin:"0.4s",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"rotate",values:"0 12 13;180 12 13;360 12 13",dur:"2s",fill:"freeze"})]})]})),Gg=({size:t=39})=>(`${Math.random().toString(36).substr(2,9)}`,s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",strokeWidth:"1",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:[s("path",{d:"M2 4L22 4",stroke:"#388E3C",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2s",repeatCount:"indefinite"})}),s("g",{children:[s("path",{d:"M3 8.01L3.01 7.99889",stroke:"#26A69A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M9 8.01L9.01 7.99889",stroke:"#26A69A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M15 8.01L15.01 7.99889",stroke:"#26A69A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M21 8.01L21.01 7.99889",stroke:"#26A69A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("animate",{attributeName:"opacity",values:"0.6;1;0.4;0.6",dur:"3s",repeatCount:"indefinite"})]}),s("g",{children:[s("path",{d:"M6 12.01L6.01 11.9989",stroke:"#42A5F5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 12.01L12.01 11.9989",stroke:"#42A5F5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M18 12.01L18.01 11.9989",stroke:"#42A5F5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("animate",{attributeName:"opacity",values:"0.4;0.6;1;0.4",dur:"3s",repeatCount:"indefinite"})]}),s("g",{children:[s("path",{d:"M3 16.01L3.01 15.9989",stroke:"#1976D2",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M9 16.01L9.01 15.9989",stroke:"#1976D2",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M15 16.01L15.01 15.9989",stroke:"#1976D2",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M21 16.01L21.01 15.9989",stroke:"#1976D2",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("animate",{attributeName:"opacity",values:"1;0.4;0.6;1",dur:"3s",repeatCount:"indefinite"})]}),s("g",{children:[s("path",{d:"M6 20.01L6.01 19.9989",stroke:"#9C27B0",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 20.01L12.01 19.9989",stroke:"#9C27B0",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M18 20.01L18.01 19.9989",stroke:"#9C27B0",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("animate",{attributeName:"opacity",values:"0.6;1;0.4;0.6",dur:"3s",repeatCount:"indefinite"})]})]})),Kg=({size:t=39})=>(`${Math.random().toString(36).substr(2,9)}`,s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",strokeWidth:"1",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:[s("path",{d:"M2 4L22 4",stroke:"#388E3C",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s("animate",{attributeName:"stroke",values:"#388E3C;#F0F4F8",dur:"1.5s",fill:"freeze"})}),s("g",{children:[s("path",{d:"M3 8.01L3.01 7.99889",stroke:"#26A69A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M9 8.01L9.01 7.99889",stroke:"#26A69A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M15 8.01L15.01 7.99889",stroke:"#26A69A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M21 8.01L21.01 7.99889",stroke:"#26A69A",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("animate",{attributeName:"stroke",values:"#26A69A;#F0F4F8",dur:"1.5s",fill:"freeze"}),s("animate",{attributeName:"opacity",values:"1;0.3",dur:"1.5s",fill:"freeze"})]}),s("g",{children:[s("path",{d:"M6 12.01L6.01 11.9989",stroke:"#42A5F5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 12.01L12.01 11.9989",stroke:"#42A5F5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M18 12.01L18.01 11.9989",stroke:"#42A5F5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("animate",{attributeName:"stroke",values:"#42A5F5;#F0F4F8",dur:"1.5s",begin:"0.2s",fill:"freeze"}),s("animate",{attributeName:"opacity",values:"1;0.3",dur:"1.5s",begin:"0.2s",fill:"freeze"})]}),s("g",{children:[s("path",{d:"M3 16.01L3.01 15.9989",stroke:"#1976D2",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M9 16.01L9.01 15.9989",stroke:"#1976D2",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M15 16.01L15.01 15.9989",stroke:"#1976D2",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M21 16.01L21.01 15.9989",stroke:"#1976D2",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("animate",{attributeName:"stroke",values:"#1976D2;#F0F4F8",dur:"1.5s",begin:"0.4s",fill:"freeze"}),s("animate",{attributeName:"opacity",values:"1;0.3",dur:"1.5s",begin:"0.4s",fill:"freeze"})]}),s("g",{children:[s("path",{d:"M6 20.01L6.01 19.9989",stroke:"#9C27B0",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 20.01L12.01 19.9989",stroke:"#9C27B0",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M18 20.01L18.01 19.9989",stroke:"#9C27B0",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("animate",{attributeName:"stroke",values:"#9C27B0;#F0F4F8",dur:"1.5s",begin:"0.6s",fill:"freeze"}),s("animate",{attributeName:"opacity",values:"1;0.3",dur:"1.5s",begin:"0.6s",fill:"freeze"})]})]})),L0=({size:t=39})=>s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{d:"M6 20.5C7 11 11.5 8 20 6",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M15.9086 3.80941L20.3946 5.90126L18.3028 10.3873",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M5 7C6.10457 7 7 6.10457 7 5C7 3.89543 6.10457 3 5 3C3.89543 3 3 3.89543 3 5C3 6.10457 3.89543 7 5 7Z",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M16 20.2426L18.1213 18.1213M18.1213 18.1213L20.2426 16M18.1213 18.1213L16 16M18.1213 18.1213L20.2426 20.2426",strokeLinecap:"round",strokeLinejoin:"round"})]}),k8=({size:t=39})=>s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",children:[s("rect",{width:"7",height:"5",rx:"0.6",transform:"matrix(0 -1 -1 0 22 21)",stroke:"#F0F4F8",fill:"rgba(240, 244, 248, 0.1)",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.4"}),s("rect",{width:"7",height:"5",rx:"0.6",transform:"matrix(0 -1 -1 0 7 15.5)",stroke:"#F0F4F8",fill:"rgba(240, 244, 248, 0.1)",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.4"}),s("rect",{width:"7",height:"5",rx:"0.6",transform:"matrix(0 -1 -1 0 22 10)",stroke:"#F0F4F8",fill:"rgba(240, 244, 248, 0.1)",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.4"}),s("path",{d:"M17 17.5H13.5C12.3954 17.5 11.5 16.6046 11.5 15.5V8.5C11.5 7.39543 12.3954 6.5 13.5 6.5H17",stroke:"#F0F4F8",fill:"rgba(240, 244, 248, 0.05)",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),s("path",{d:"M11.5 12H7",stroke:"#F0F4F8",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"})]}),_8=({size:t=39})=>s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",fill:"none",strokeWidth:"1.5",xmlns:"http://www.w3.org/2000/svg",children:[s("rect",{x:"4",y:"18",width:"16",height:"3",rx:"0.5",stroke:"#F0F4F8",fill:"rgba(240, 244, 248, 0.1)",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.4"}),s("rect",{x:"4",y:"14",width:"16",height:"3",rx:"0.5",stroke:"#F0F4F8",fill:"rgba(240, 244, 248, 0.1)",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.4"}),s("rect",{x:"4",y:"10",width:"16",height:"3",rx:"0.5",stroke:"#F0F4F8",fill:"rgba(240, 244, 248, 0.1)",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.4"}),s("path",{d:"M7 3C6.44772 3 6 3.44772 6 4V8C6 8.55228 6.44772 9 7 9",stroke:"#F0F4F8",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),s("path",{d:"M17 3C17.5523 3 18 3.44772 18 4V8C18 8.55228 17.5523 9 17 9",stroke:"#F0F4F8",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.3"}),s("circle",{cx:"8",cy:"6",r:"0.5",fill:"#F0F4F8",opacity:"0.2"}),s("circle",{cx:"12",cy:"6",r:"0.6",fill:"#F0F4F8",opacity:"0.3"}),s("circle",{cx:"16",cy:"6",r:"0.4",fill:"#F0F4F8",opacity:"0.2"}),s("path",{d:"M12 9V10",stroke:"#F0F4F8",strokeWidth:"1",strokeLinecap:"round",opacity:"0.3"})]}),M0=({size:t=39})=>s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{d:"M5 12C5 12 7 4 12 4C17 4 19 12 19 12C19 12 17 20 12 20C7 20 5 12 5 12Z",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"rgba(0, 0, 0, 0.05)"}),s("path",{d:"M8 12L11 15L16 10",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s("circle",{cx:"6",cy:"12",r:"2",stroke:"#000000",strokeWidth:"1.5",fill:"rgba(0, 0, 0, 0.1)"}),s("circle",{cx:"18",cy:"12",r:"2",stroke:"#000000",strokeWidth:"1.5",fill:"rgba(0, 0, 0, 0.1)"})]}),ua=({size:t=39})=>s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("rect",{x:"3",y:"7",width:"18",height:"3",rx:"0.5",stroke:"#000000",strokeWidth:"1.5",fill:"rgba(0, 0, 0, 0.05)"}),s("rect",{x:"3",y:"11",width:"18",height:"3",rx:"0.5",stroke:"#000000",strokeWidth:"1.5",fill:"rgba(0, 0, 0, 0.05)"}),s("rect",{x:"3",y:"15",width:"18",height:"3",rx:"0.5",stroke:"#000000",strokeWidth:"1.5",fill:"rgba(0, 0, 0, 0.05)"}),s("circle",{cx:"12",cy:"12",r:"2",stroke:"#000000",strokeWidth:"2",fill:"rgba(0, 0, 0, 0.2)"})]}),vr=({size:t=39})=>s("svg",{width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{d:"M5 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3Z",stroke:"#000000",strokeWidth:"1.5",fill:"rgba(0, 0, 0, 0.02)"}),s("path",{d:"M8 9L5 12L8 15",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M16 9L19 12L16 15",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M13 7L11 17",stroke:"#000000",strokeWidth:"2",strokeLinecap:"round"})]}),x8=({size:t=39})=>{const e=`switch_on_${Math.random().toString(36).substr(2,9)}`;return s("svg",{id:e,width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{id:`${e}_background`,d:"M17 17H7C4.23858 17 2 14.7614 2 12C2 9.23858 4.23858 7 7 7H17C19.7614 7 22 9.23858 22 12C22 14.7614 19.7614 17 17 17Z",stroke:"#B0BEC5",fill:"rgba(176, 190, 197, 0.1)",strokeWidth:"1.5",children:[s("animate",{attributeName:"stroke",values:"#B0BEC5;#42A5F5",dur:"1500ms",begin:"300ms",fill:"freeze"}),s("animate",{attributeName:"fill",values:"rgba(176, 190, 197, 0.1);rgba(66, 165, 245, 0.2)",dur:"1500ms",begin:"300ms",fill:"freeze"})]}),s("circle",{id:`${e}_button`,cx:"7",cy:"12",r:"1.5",fill:"#B0BEC5",stroke:"#B0BEC5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"fill",values:"#B0BEC5;#388E3C",dur:"1500ms",begin:"300ms",fill:"freeze"}),s("animate",{attributeName:"stroke",values:"#B0BEC5;#388E3C",dur:"1500ms",begin:"300ms",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;10,0",dur:"1500ms",begin:"300ms",fill:"freeze"})]}),s("ellipse",{cx:"17",cy:"12",rx:"3",ry:"3",fill:"rgba(66, 165, 245, 0)",opacity:"0",children:[s("animate",{attributeName:"opacity",values:"0;0.3",dur:"1500ms",begin:"300ms",fill:"freeze"}),s("animate",{attributeName:"rx",values:"3;5",dur:"1500ms",begin:"300ms",fill:"freeze"}),s("animate",{attributeName:"ry",values:"3;5",dur:"1500ms",begin:"300ms",fill:"freeze"})]})]})},C8=({size:t=39})=>{const e=`switch_off_${Math.random().toString(36).substr(2,9)}`;return s("svg",{id:e,width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{id:`${e}_background`,d:"M17 17H7C4.23858 17 2 14.7614 2 12C2 9.23858 4.23858 7 7 7H17C19.7614 7 22 9.23858 22 12C22 14.7614 19.7614 17 17 17Z",stroke:"#42A5F5",fill:"rgba(66, 165, 245, 0.2)",strokeWidth:"1.5",children:[s("animate",{attributeName:"stroke",values:"#42A5F5;#F0F4F8",dur:"1500ms",begin:"300ms",fill:"freeze"}),s("animate",{attributeName:"fill",values:"rgba(66, 165, 245, 0.2);rgba(240, 244, 248, 0.1)",dur:"1500ms",begin:"300ms",fill:"freeze"})]}),s("circle",{id:`${e}_button`,cx:"17",cy:"12",r:"1.5",fill:"#388E3C",stroke:"#388E3C",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"fill",values:"#388E3C;#F0F4F8",dur:"1500ms",begin:"300ms",fill:"freeze"}),s("animate",{attributeName:"stroke",values:"#388E3C;#F0F4F8",dur:"1500ms",begin:"300ms",fill:"freeze"}),s("animateTransform",{attributeName:"transform",type:"translate",values:"0,0;-10,0",dur:"1500ms",begin:"300ms",fill:"freeze"})]}),s("ellipse",{cx:"17",cy:"12",rx:"5",ry:"5",fill:"rgba(66, 165, 245, 0.3)",opacity:"0.3",children:[s("animate",{attributeName:"opacity",values:"0.3;0",dur:"1500ms",begin:"300ms",fill:"freeze"}),s("animate",{attributeName:"rx",values:"5;3",dur:"1500ms",begin:"300ms",fill:"freeze"}),s("animate",{attributeName:"ry",values:"5;3",dur:"1500ms",begin:"300ms",fill:"freeze"})]})]})},yr=({size:t=39})=>{const e=`power_on_${Math.random().toString(36).substr(2,9)}`;return s("svg",{id:`${e}_rotary_switch`,width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",strokeWidth:"1.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{d:"M21 3.6V20.4C21 20.7314 20.7314 21 20.4 21H3.6C3.26863 21 3 20.7314 3 20.4V3.6C3 3.26863 3.26863 3 3.6 3H20.4C20.7314 3 21 3.26863 21 3.6Z",stroke:"#B0BEC5",fill:"rgba(176, 190, 197, 0.1)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#B0BEC5;#388E3C",dur:"2s",fill:"freeze"}),s("animate",{attributeName:"fill",values:"rgba(176, 190, 197, 0.1);rgba(56, 142, 60, 0.1)",dur:"2s",fill:"freeze"})]}),s("path",{d:"M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z",stroke:"#B0BEC5",fill:"rgba(176, 190, 197, 0.05)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#B0BEC5;#388E3C",dur:"2s",fill:"freeze"}),s("animate",{attributeName:"fill",values:"rgba(176, 190, 197, 0.05);rgba(56, 142, 60, 0.2)",dur:"2s",fill:"freeze"})]}),s("path",{d:"M8.5 7.5L12 12",stroke:"#B0BEC5",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#B0BEC5;#388E3C",dur:"2s",fill:"freeze"}),s("animate",{attributeName:"d",values:"M8.5 7.5L12 12;M15.5 7.5L12 12",dur:"1s",fill:"freeze"})]}),s("circle",{cx:"12",cy:"12",r:"10",fill:"none",stroke:"rgba(56, 142, 60, 0.3)",strokeWidth:"0.5",opacity:"0",children:[s("animate",{attributeName:"opacity",values:"0;0.4",dur:"2s",fill:"freeze"}),s("animate",{attributeName:"r",values:"10;12",dur:"2s",fill:"freeze"})]})]})},Rt=({size:t=39})=>{const e=`power_off_${Math.random().toString(36).substr(2,9)}`;return s("svg",{id:`${e}_rotary_switch`,width:`${t}px`,height:`${t}px`,viewBox:"0 0 24 24",strokeWidth:"1.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{d:"M21 3.6V20.4C21 20.7314 20.7314 21 20.4 21H3.6C3.26863 21 3 20.7314 3 20.4V3.6C3 3.26863 3.26863 3 3.6 3H20.4C20.7314 3 21 3.26863 21 3.6Z",stroke:"#388E3C",fill:"rgba(56, 142, 60, 0.1)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#388E3C;#F0F4F8",dur:"2s",fill:"freeze"}),s("animate",{attributeName:"fill",values:"rgba(56, 142, 60, 0.1);rgba(240, 244, 248, 0.1)",dur:"2s",fill:"freeze"})]}),s("path",{d:"M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z",stroke:"#388E3C",fill:"rgba(56, 142, 60, 0.2)",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#388E3C;#F0F4F8",dur:"2s",fill:"freeze"}),s("animate",{attributeName:"fill",values:"rgba(56, 142, 60, 0.2);rgba(240, 244, 248, 0.05)",dur:"2s",fill:"freeze"})]}),s("path",{d:"M15.5 7.5L12 12",stroke:"#388E3C",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[s("animate",{attributeName:"stroke",values:"#388E3C;#F0F4F8",dur:"2s",fill:"freeze"}),s("animate",{attributeName:"d",values:"M15.5 7.5L12 12;M8.5 7.5L12 12",dur:"1s",fill:"freeze"})]}),s("circle",{cx:"12",cy:"12",r:"12",fill:"none",stroke:"rgba(56, 142, 60, 0.3)",strokeWidth:"0.5",opacity:"0.4",children:[s("animate",{attributeName:"opacity",values:"0.4;0",dur:"2s",fill:"freeze"}),s("animate",{attributeName:"r",values:"12;10",dur:"2s",fill:"freeze"})]})]})},bo=({size:t=39})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"#FFFFFF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"rgba(255, 255, 255, 0.1)"}),s("path",{d:"M19.6224 10.3954L18.5247 7.7448L20 6L18 4L16.2647 5.48295L13.5578 4.36974L12.9353 2H10.981L10.3491 4.40113L7.70441 5.51596L6 4L4 6L5.45337 7.78885L4.3725 10.4463L2 11V13L4.40111 13.6555L5.51575 16.2997L4 18L6 20L7.79116 18.5403L10.397 19.6123L11 22H13L13.6045 19.6132L16.2551 18.5155C16.6969 18.8313 18 20 18 20L20 18L18.5159 16.2494L19.6139 13.598L21.9999 12.9772L22 11L19.6224 10.3954Z",stroke:"#FFFFFF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),Nc=({size:t=39})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("rect",{x:"3",y:"3",width:"5.5",height:"5.5",rx:"1.5",stroke:"#FFFFFF",strokeWidth:"1.5",fill:"rgba(255, 255, 255, 0.1)"}),s("rect",{x:"10.25",y:"3",width:"5.5",height:"5.5",rx:"1.5",stroke:"#FFFFFF",strokeWidth:"1.5",fill:"rgba(255, 255, 255, 0.1)"}),s("rect",{x:"17.5",y:"3",width:"5.5",height:"5.5",rx:"1.5",stroke:"#FFFFFF",strokeWidth:"1.5",fill:"rgba(255, 255, 255, 0.1)"}),s("rect",{x:"3",y:"10.25",width:"5.5",height:"5.5",rx:"1.5",stroke:"#FFFFFF",strokeWidth:"1.5",fill:"rgba(255, 255, 255, 0.1)"}),s("rect",{x:"10.25",y:"10.25",width:"5.5",height:"5.5",rx:"1.5",stroke:"#FFFFFF",strokeWidth:"1.5",fill:"rgba(255, 255, 255, 0.15)"}),s("rect",{x:"17.5",y:"10.25",width:"5.5",height:"5.5",rx:"1.5",stroke:"#FFFFFF",strokeWidth:"1.5",fill:"rgba(255, 255, 255, 0.1)"}),s("rect",{x:"3",y:"17.5",width:"5.5",height:"5.5",rx:"1.5",stroke:"#FFFFFF",strokeWidth:"1.5",fill:"rgba(255, 255, 255, 0.1)"}),s("rect",{x:"10.25",y:"17.5",width:"5.5",height:"5.5",rx:"1.5",stroke:"#FFFFFF",strokeWidth:"1.5",fill:"rgba(255, 255, 255, 0.1)"}),s("rect",{x:"17.5",y:"17.5",width:"5.5",height:"5.5",rx:"1.5",stroke:"#FFFFFF",strokeWidth:"1.5",fill:"rgba(255, 255, 255, 0.1)"})]}),S8=({size:t=39})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{d:"M2 11V4.6C2 4.26863 2.26863 4 2.6 4H8.77805C8.92127 4 9.05977 4.05124 9.16852 4.14445L12.3315 6.85555C12.4402 6.94876 12.5787 7 12.722 7H21.4C21.7314 7 22 7.26863 22 7.6V11M2 11V19.4C2 19.7314 2.26863 20 2.6 20H21.4C21.7314 20 22 19.7314 22 19.4V11M2 11H22",stroke:"#FFFFFF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("rect",{x:"2",y:"7",width:"20",height:"4",fill:"rgba(255, 255, 255, 0.1)"}),s("rect",{x:"2",y:"11",width:"20",height:"9",rx:"0.4",fill:"rgba(255, 255, 255, 0.05)"})]}),N8=({size:t=39})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M13 2L3 14H12L11 22L21 10H12L13 2Z",stroke:"#FFFFFF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"rgba(255, 255, 255, 0.1)"})}),L8=({size:t=39})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{d:"M7 17H4C2.89543 17 2 16.1046 2 15V10C2 8.89543 2.89543 8 4 8H20C21.1046 8 22 8.89543 22 10V15C22 16.1046 21.1046 17 20 17H17",stroke:"#FFFFFF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M7 8V4C7 3.44772 7.44772 3 8 3H16C16.5523 3 17 3.44772 17 4V8",stroke:"#FFFFFF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M7 13H17V20C17 20.5523 16.5523 21 16 21H8C7.44772 21 7 20.5523 7 20V13Z",stroke:"#FFFFFF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"rgba(255, 255, 255, 0.1)"})]}),nt={light:{on:{default:u8,desk_lamp:m8},off:{default:h8,desk_lamp:f8}},cover:{on:{default:v8,garage:p8},off:{default:y8,garage:g8}},binary_sensor:{on:{door:ur,window:ur,motion:b8,presence:mr,occupancy:mr,lock:ri,smoke:Ut,gas:Ut,carbon_monoxide:Ut,safety:Ut},off:{door:hr,window:hr,motion:w8,presence:Ni,occupancy:Ni,lock:Un,smoke:Yt,gas:Yt,carbon_monoxide:Yt,safety:Yt}},sensor:{on:{door:ur,window:ur},off:{door:hr,window:hr}},lock:{on:{default:Un},off:{default:ri}},media_player:{on:{default:la,tv:Fn,television:Fn,speaker:la,receiver:la},off:{default:ca,tv:sn,television:sn,speaker:ca,receiver:ca}},climate:{heat:{default:fr},cool:{default:Li},dry:{default:Pn},fan_only:{default:da},auto:{default:pr},off:{default:gr}},fan:{on:{default:da},off:{default:gr}},vacuum:{on:{default:$g},off:{default:Hg}},dishwasher:{on:{default:Wg},off:{default:Og}},washing_machine:{on:{default:jg},off:{default:Ug}},scene:{on:{default:ua},off:{default:ua},scening:{default:ua}},script:{on:{default:vr},off:{default:vr},running:{default:vr},default:{default:vr}},automation:{on:{default:M0},off:{default:M0}},switch:{on:{default:x8},off:{default:C8}},input_boolean:{on:{default:yr},off:{default:Rt}},alert:{on:{default:Ut},off:{default:Yt},idle:{default:Yt}},timer:{active:{default:yr},idle:{default:Rt},paused:{default:Rt}},person:{home:{default:mr},not_home:{default:Ni},unknown:{default:Ni}},device_tracker:{home:{default:mr},not_home:{default:Ni},unknown:{default:Ni}},air_purifier:{on:{default:Gg},off:{default:Kg}},input_number:{default:{default:null}},input_text:{default:{default:Rt}},input_select:{default:{default:Rt}},input_datetime:{default:{default:Rt}},weather:{sunny:{default:fr},clear_night:{default:Li},cloudy:{default:Li},partlycloudy:{default:pr},rainy:{default:Pn},pouring:{default:Pn},snowy:{default:Li},snowy_rainy:{default:Li},windy:{default:da},fog:{default:pr},hail:{default:Li},lightning:{default:Ut},lightning_rainy:{default:Ut},default:{default:pr}},group:{on:{default:yr},off:{default:Rt}},zone:{default:{default:Ni}},sun:{above_horizon:{default:fr},below_horizon:{default:Li}},remote:{on:{default:Fn},off:{default:sn}},water_heater:{on:{default:fr},off:{default:gr}},humidifier:{on:{default:Pn},off:{default:gr}},plant:{default:{default:Pn}},number:{default:{default:null}},select:{default:{default:Rt}},text:{default:{default:Rt}},button:{default:{default:yr}},update:{on:{default:L0},off:{default:L0}},camera:{recording:{default:Fn},streaming:{default:Fn},idle:{default:sn},default:{default:sn}},siren:{on:{default:Ut},off:{default:Yt}},settings:{default:{default:bo}},energy_dashboard_device:{default:{default:N8}},printer3d_device:{default:{default:L8}},alarm_control_panel:{armed_home:{default:ri},armed_away:{default:ri},armed_night:{default:ri},armed_vacation:{default:ri},armed_custom_bypass:{default:ri},disarmed:{default:Un},triggered:{default:Ut},pending:{default:Yt},arming:{default:Un},disarming:{default:ri}}},M8=(t="",e={})=>{const i=t||e?.friendly_name||"";return i.toLowerCase().includes("desk")||i.toLowerCase().includes("schreibtisch")||i.toLowerCase().includes("arbeits")||i.toLowerCase().includes("bro")||e?.device_class==="desk_lamp"},T8=(t={})=>t?.device_class==="garage"||t?.friendly_name?.toLowerCase().includes("garage"),E8=(t={})=>{const e=t?.friendly_name||"";return t?.device_class==="tv"||e.toLowerCase().includes("tv")||e.toLowerCase().includes("fernseh")||e.toLowerCase().includes("television")},D8=(t,e,i={},n="")=>{if(t==="air_purifier")return e==="on"?Gg:Kg;if(t==="washing_machine")return e==="on"?jg:Ug;if(t==="dishwasher")return e==="on"?Wg:Og;if(t==="vacuum")return e==="cleaning"?$g:Hg;if(t==="climate"){const u=i?.hvac_action||e;return(nt.climate[u]||nt.climate.off)?.default||null}if(t==="script"){const u=nt.script;return(u[e==="running"||e==="on"?"running":"off"]||u.default)?.default||_8}if(t==="button")return nt[t]?.default?.default||null;if(t==="scene"){const u=nt.scene;return(u[e==="scening"||e==="on"?"scening":"off"]||u.off)?.default||k8}if(t==="camera"){const u=nt.camera;return(u[e]||u.default)?.default||sn}if(t==="alarm_control_panel"){const u=nt.alarm_control_panel;return(u[e]||u.disarmed)?.default||Un}if(t==="siren"){const u=e==="on"?"on":"off";return nt.siren[u]?.default||Yt}if(t==="person"||t==="device_tracker"){const u=nt[t];if(u)return(u[e]||u.unknown||u.not_home)?.default||null}if(t==="weather"){const u=nt.weather;return(u[e]||u.default)?.default||null}if(t==="alert"){const u=nt.alert;return(u[e]||u.idle)?.default||null}if(t==="timer"){const u=nt.timer;return(u[e]||u.idle)?.default||null}if(t==="settings")return nt.settings?.default?.default||bo;if(t==="pluginstore")return nt.pluginstore?.default?.default||Nc;if(t==="input_number"||t==="number")return null;if(t==="input_text"||t==="input_select"||t==="input_datetime"||t==="select"||t==="text"||t==="plant"){const u=nt[t];return u?.default?u.default.default:Rt}if(t==="zone")return nt.zone?.default?.default||null;if(t==="sun"){const u=e==="above_horizon"?"above_horizon":"below_horizon";return nt.sun[u]?.default||null}const r=nt[t];if(!r)return null;const o=e==="on"||e==="open"||e==="playing"||e==="home"||e==="unlocked"||e==="cleaning"||e==="active"||e==="running"||e==="above_horizon"||e==="recording"||e==="streaming";if(t==="lock")return r[e==="unlocked"?"on":"off"]?.default||null;const l=r[o?"on":"off"];if(!l)return r.default?r.default.default:null;let c="default";t==="light"&&M8(n,i)?c="desk_lamp":t==="cover"&&T8(i)?c="garage":t==="media_player"&&E8(i)?c="tv":(t==="binary_sensor"||t==="sensor")&&i?.device_class&&(c=i.device_class);const d=l[c]||l.default||null;return d===null&&t!=="input_number"&&t!=="number"?S8:d},A8=["input_number","number"],F8=({domain:t,state:e,attributes:i={},size:n=39,name:r=""})=>{const o=D8(t,e,i,r);return o?s(o,{size:n}):(A8.includes(t),null)},Yg=(t,e=39)=>t?s(F8,{domain:t.domain,state:t.state,attributes:t.attributes,size:e,name:t.name||t.attributes?.friendly_name}):null,P8={settings:{color:"rgb(0, 145, 255)",hoverColor:"rgb(0, 145, 255)",activeColor:"rgb(0, 145, 255)",iconComponent:bo,iconMdi:"mdi:cog",iconSize:48,animation:{hidden:{opacity:0,scale:.92,y:20,filter:"blur(4px)"},inactive:{scale:1,opacity:1,y:0,filter:"blur(0px)",transition:{duration:.45,ease:[.4,0,.2,1]}},active:{scale:1,opacity:1,y:0,filter:"blur(0px)"},hover:{scale:1.05,transition:{duration:.2,ease:[.4,0,.2,1]}}},detailView:{type:"tabs",tabs:["general","appearance","privacy","about"],defaultTab:"general",showHeader:!0,showCloseButton:!0}},pluginstore:{color:"rgb(219, 52, 242)",hoverColor:"rgb(219, 52, 242)",activeColor:"rgb(219, 52, 242)",iconComponent:Nc,iconMdi:"mdi:puzzle-plus",iconSize:48,animation:{hidden:{opacity:0,scale:.92,y:20,filter:"blur(4px)"},inactive:{scale:1,opacity:1,y:0,filter:"blur(0px)",transition:{duration:.45,ease:[.4,0,.2,1]}},active:{scale:1,opacity:1,y:0,filter:"blur(0px)"},hover:{scale:1.05,transition:{duration:.2,ease:[.4,0,.2,1]}}},detailView:{type:"fullscreen",sections:["discover","installed","develop","upload"],defaultSection:"discover",showHeader:!0,showBackButton:!0,showInstallButton:!0}},all_schedules:{color:"rgb(255, 146, 48)",hoverColor:"rgb(255, 146, 48)",activeColor:"rgb(255, 146, 48)",iconComponent:null,iconMdi:"mdi:calendar-clock",iconSize:48,animation:{hidden:{opacity:0,scale:.92,y:20,filter:"blur(4px)"},inactive:{scale:1,opacity:1,y:0,filter:"blur(0px)",transition:{duration:.45,ease:[.4,0,.2,1]}},active:{scale:1,opacity:1,y:0,filter:"blur(0px)"},hover:{scale:1.05,transition:{duration:.2,ease:[.4,0,.2,1]}}},detailView:{type:"fullscreen",showHeader:!0,showBackButton:!0,showFilterTabs:!0}},weather:{color:"rgb(60, 211, 254)",hoverColor:"rgb(60, 211, 254)",activeColor:"rgb(60, 211, 254)",iconComponent:null,iconMdi:"mdi:weather-partly-cloudy",iconSize:48,animation:{hidden:{opacity:0,scale:.92,y:20,filter:"blur(4px)"},inactive:{scale:1,opacity:1,y:0,filter:"blur(0px)",transition:{duration:.45,ease:[.4,0,.2,1]}},active:{scale:1,opacity:1,y:0,filter:"blur(0px)"},hover:{scale:1.05,transition:{duration:.2,ease:[.4,0,.2,1]}}},detailView:{type:"fullscreen",showHeader:!0,showBackButton:!0,showRefreshButton:!0}},news:{color:"rgb(255, 149, 0)",hoverColor:"rgb(255, 149, 0)",activeColor:"rgb(255, 149, 0)",iconComponent:null,iconMdi:"mdi:newspaper",iconSize:48,animation:{hidden:{opacity:0,scale:.92,y:20,filter:"blur(4px)"},inactive:{scale:1,opacity:1,y:0,filter:"blur(0px)",transition:{duration:.45,ease:[.4,0,.2,1]}},active:{scale:1,opacity:1,y:0,filter:"blur(0px)"},hover:{scale:1.05,transition:{duration:.2,ease:[.4,0,.2,1]}}},detailView:{type:"fullscreen",showHeader:!0,showBackButton:!0,showRefreshButton:!0,showFilterBar:!0}},todos:{color:"rgb(0, 122, 255)",hoverColor:"rgb(0, 122, 255)",activeColor:"rgb(0, 122, 255)",iconComponent:null,iconMdi:"mdi:check-circle",iconSize:48,animation:{hidden:{opacity:0,scale:.92,y:20,filter:"blur(4px)"},inactive:{scale:1,opacity:1,y:0,filter:"blur(0px)",transition:{duration:.45,ease:[.4,0,.2,1]}},active:{scale:1,opacity:1,y:0,filter:"blur(0px)"},hover:{scale:1.05,transition:{duration:.2,ease:[.4,0,.2,1]}}},detailView:{type:"fullscreen",showHeader:!0,showBackButton:!0,showRefreshButton:!0,showFilterBar:!0,showAddButton:!0}},integration:{color:"rgb(175, 82, 222)",hoverColor:"rgb(175, 82, 222)",activeColor:"rgb(175, 82, 222)",iconComponent:null,iconMdi:"mdi:devices",iconSize:48,animation:{hidden:{opacity:0,scale:.92,y:20,filter:"blur(4px)"},inactive:{scale:1,opacity:1,y:0,filter:"blur(0px)",transition:{duration:.45,ease:[.4,0,.2,1]}},active:{scale:1,opacity:1,y:0,filter:"blur(0px)"},hover:{scale:1.05,transition:{duration:.2,ease:[.4,0,.2,1]}}},detailView:{type:"fullscreen",showHeader:!0,showBackButton:!0,showManagementButton:!0}},printer3d_device:{color:"rgb(48, 209, 88)",hoverColor:"rgb(48, 209, 88)",activeColor:"rgb(48, 209, 88)",iconComponent:null,iconMdi:"mdi:printer-3d",iconSize:48,animation:{hidden:{opacity:0,scale:.92,y:20,filter:"blur(4px)"},inactive:{scale:1,opacity:1,y:0,filter:"blur(0px)",transition:{duration:.45,ease:[.4,0,.2,1]}},active:{scale:1,opacity:1,y:0,filter:"blur(0px)"},hover:{scale:1.05,transition:{duration:.2,ease:[.4,0,.2,1]}}},detailView:{type:"tabs",showHeader:!0,showBackButton:!0,showRefreshButton:!0}}};function I8(t,e="grid"){if(!t)return null;const i=e==="list"?1.02:1.05,n=e==="list"?.3:.25;return{hidden:t.animation?.hidden||{opacity:0,scale:.9},inactive:{backgroundColor:t.color,...t.animation?.inactive||{}},active:{backgroundColor:t.activeColor||t.color,...t.animation?.active||{}},hover:{backgroundColor:t.hoverColor||t.color,scale:i,transition:{duration:n,ease:[.4,0,.2,1]}}}}const R8=({size:t=39})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{d:"M2 6C2 4.89543 2.89543 4 4 4H16C17.1046 4 18 4.89543 18 6V18C18 19.1046 17.1046 20 16 20H4C2.89543 20 2 19.1046 2 18V6Z",stroke:"#FFFFFF",strokeWidth:"1.5",fill:"rgba(255, 255, 255, 0.08)"}),s("path",{d:"M18 6V18C18 19.1046 18.8954 20 20 20C21.1046 20 22 19.1046 22 18V8C22 6.89543 21.1046 6 20 6H18Z",stroke:"#FFFFFF",strokeWidth:"1.5",fill:"rgba(255, 255, 255, 0.05)"}),s("rect",{x:"5",y:"7",width:"8",height:"2",rx:"0.5",fill:"rgba(255, 255, 255, 0.6)"}),s("line",{x1:"5",y1:"11",x2:"13",y2:"11",stroke:"rgba(255, 255, 255, 0.4)",strokeWidth:"1"}),s("line",{x1:"5",y1:"13",x2:"11",y2:"13",stroke:"rgba(255, 255, 255, 0.4)",strokeWidth:"1"}),s("line",{x1:"5",y1:"15",x2:"13",y2:"15",stroke:"rgba(255, 255, 255, 0.4)",strokeWidth:"1"}),s("line",{x1:"5",y1:"17",x2:"10",y2:"17",stroke:"rgba(255, 255, 255, 0.4)",strokeWidth:"1"})]}),B8=({size:t=39})=>s("svg",{width:`${t}px`,height:`${t}px`,strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s("path",{d:"M9 6L20 6",stroke:"#FFFFFF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.9"}),s("path",{d:"M3.80002 5.79999L4.60002 6.59998L6.60001 4.59999",stroke:"#FFFFFF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.9"}),s("path",{d:"M3.80002 11.8L4.60002 12.6L6.60001 10.6",stroke:"#FFFFFF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.9"}),s("path",{d:"M9 12L20 12",stroke:"#FFFFFF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.9"}),s("path",{d:"M3.80002 17.8L4.60002 18.6L6.60001 16.6",stroke:"#FFFFFF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.9"}),s("path",{d:"M9 18L20 18",stroke:"#FFFFFF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.9"})]}),Mi=({size:t=24,color:e="#FFFFFF",animated:i=!1,...n})=>s(T.svg,{width:t,height:t,"stroke-width":"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:e,animate:i?{x:[-2,2,-2]}:{},transition:i?{duration:6,repeat:1/0,ease:"easeInOut"}:{},children:s("path",{d:"M12 4C6 4 6 8 6 10C4.33333 10 1 11 1 15C1 19 4.33333 20 6 20H18C19.6667 20 23 19 23 15C23 11 19.6667 10 18 10C18 8 18 4 12 4Z",stroke:e,"stroke-width":"1.5","stroke-linejoin":"round"})}),z8=({size:t=24,color:e="#FFFFFF",animated:i=!1,...n})=>s(T.svg,{width:t,height:t,"stroke-width":"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:e,children:[s("path",{d:"M3.5 17.3818C2.1879 16.7066 1 15.3879 1 13C1 9 4.33333 8 6 8C6 6 6 2 12 2C18 2 18 6 18 8C19.6667 8 23 9 23 13C23 15.3879 21.8121 16.7066 20.5 17.3818",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s(T.path,{d:"M9 14H15",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",animate:i?{opacity:[.4,.8,.4],x:[-1,1,-1]}:{},transition:i?{duration:4,repeat:1/0,ease:"easeInOut"}:{}}),s(T.path,{d:"M9 22H15",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",animate:i?{opacity:[.6,.9,.6],x:[1,-1,1]}:{},transition:i?{duration:4,repeat:1/0,ease:"easeInOut",delay:1}:{}}),s(T.path,{d:"M7 18H17",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",animate:i?{opacity:[.5,1,.5],x:[-1,1,-1]}:{},transition:i?{duration:4,repeat:1/0,ease:"easeInOut",delay:2}:{}})]}),T0=({size:t=24,color:e="#FFFFFF",animated:i=!1,...n})=>s(T.svg,{width:t,height:t,"stroke-width":"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:e,children:[s("path",{d:"M20 17.6073C21.4937 17.0221 23 15.6889 23 13C23 9 19.6667 8 18 8C18 6 18 2 12 2C6 2 6 6 6 8C4.33333 8 1 9 1 13C1 15.6889 2.50628 17.0221 4 17.6073",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s(T.path,{d:"M12 14V16",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",animate:i?{opacity:[.3,1,.3],y:[0,2,0]}:{},transition:i?{duration:1.5,repeat:1/0,ease:"easeInOut"}:{}}),s(T.path,{d:"M12 20V22",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",animate:i?{opacity:[1,.3,1],y:[0,2,0]}:{},transition:i?{duration:1.5,repeat:1/0,ease:"easeInOut",delay:.3}:{}}),s(T.path,{d:"M8 18V20",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",animate:i?{opacity:[.5,1,.5],y:[0,2,0]}:{},transition:i?{duration:1.5,repeat:1/0,ease:"easeInOut",delay:.6}:{}}),s(T.path,{d:"M16 18V20",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",animate:i?{opacity:[.8,.3,.8],y:[0,2,0]}:{},transition:i?{duration:1.5,repeat:1/0,ease:"easeInOut",delay:.9}:{}})]}),ha=({size:t=24,color:e="#FFFFFF",...i})=>s("svg",{width:t,height:t,"stroke-width":"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:e,children:[s("path",{d:"M12 12L12 17M12 22L12 17M12 17L7.5 14.5M12 17L16.5 19.5M12 17L16.5 14.5M12 17L7.5 19.5",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M20 17.6073C21.4937 17.0221 23 15.6889 23 13C23 9 19.6667 8 18 8C18 6 18 2 12 2C6 2 6 6 6 8C4.33333 8 1 9 1 13C1 15.6889 2.50628 17.0221 4 17.6073",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),E0=({size:t=24,color:e="#FFFFFF",animated:i=!1,...n})=>s(T.svg,{width:t,height:t,"stroke-width":"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:e,animate:i?{rotate:360}:{},transition:i?{duration:60,repeat:1/0,ease:"linear"}:{},children:[s("path",{d:"M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M22 12L23 12",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M12 2V1",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M12 23V22",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M20 20L19 19",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M20 4L19 5",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M4 20L5 19",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M4 4L5 5",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M1 12L2 12",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),D0=({size:t=24,color:e="#FFFFFF",...i})=>s("svg",{width:t,height:t,"stroke-width":"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:e,children:[s("path",{d:"M11.5 12L9 17H15L12.5 22",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M20 17.6073C21.4937 17.0221 23 15.6889 23 13C23 9 19.6667 8 18 8C18 6 18 2 12 2C6 2 6 6 6 8C4.33333 8 1 9 1 13C1 15.6889 2.50628 17.0221 4 17.6073",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),Zg=({size:t=24,color:e="#FFFFFF",...i})=>s("svg",{width:t,height:t,viewBox:"0 0 24 24","stroke-width":"1.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:e,children:s("path",{d:"M20 14C20 9.58172 12 2 12 2C12 2 4 9.58172 4 14C4 18.4183 7.58172 22 12 22C16.4183 22 20 18.4183 20 14Z",stroke:e,"stroke-width":"1.5"})}),V8=({size:t=24,color:e="#FFFFFF",...i})=>s("svg",{width:t,height:t,"stroke-width":"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:e,children:[s("path",{d:"M18.2785 7C19.7816 7 21 8.11929 21 9.5C21 10.8807 19.7816 12 18.2785 12H3",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M17.9375 20C19.0766 20 20.5 19.5 20.5 17.5C20.5 15.5 19.0766 15 17.9375 15H3",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M10.4118 4C11.8412 4 13 5.11929 13 6.5C13 7.88071 11.8412 9 10.4118 9H3",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),W8=({size:t=24,color:e="#FFFFFF",...i})=>s("svg",{width:t,height:t,viewBox:"0 0 24 24","stroke-width":"1.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:e,children:[s("path",{d:"M10.5857 10.5857L16.9496 7.0502L13.4141 13.4142L7.05012 16.9497L10.5857 10.5857Z",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",stroke:e,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),wo=(t,e=120,i="#FFFFFF",n=!1)=>{const r={size:e,color:i,animated:n};return{"clear-night":s(E0,{...r}),sunny:s(E0,{...r}),cloudy:s(Mi,{...r}),partlycloudy:s(Mi,{...r}),"partly-cloudy":s(Mi,{...r}),fog:s(z8,{...r}),rainy:s(T0,{...r}),pouring:s(T0,{...r}),snowy:s(ha,{...r}),"snowy-rainy":s(ha,{...r}),hail:s(ha,{...r}),lightning:s(D0,{...r}),"lightning-rainy":s(D0,{...r}),windy:s(Mi,{...r}),"windy-variant":s(Mi,{...r}),exceptional:s(Mi,{...r})}[t]||s(Mi,{...r})},O8=({condition:t,size:e=120,color:i="#FFFFFF",animated:n=!0})=>{const r=wo(t,e,i);return n?s("div",{className:"weather-icon-wrapper",style:{display:"inline-block",animation:"float 3s ease-in-out infinite"},children:r}):r};function $8(t,e="grid"){if(t.is_system||_s(t.domain)){const i=P8[t.domain];if(i)return I8(i,e)}return null}function _s(t){return["settings","pluginstore","all_schedules","weather","news","todos","printer3d_device","energy_dashboard_device","integration","notifications","statistics","help"].includes(t)}function gl(t,e=48){if(!t.is_system&&!_s(t.domain))return null;const n={settings:bo,pluginstore:Nc,news:R8,todos:B8,all_schedules:()=>s("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"white",children:[s("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2z"}),s("circle",{cx:"12",cy:"15",r:"1"})]}),energy_dashboard_device:()=>s("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"white",stroke:"white","stroke-width":"1.5",children:s("path",{d:"M13 2L3 14H12L11 22L21 10H12L13 2Z","stroke-linecap":"round","stroke-linejoin":"round"})}),weather:()=>{const r=_e.getEntityByDomain("weather");let o="partly-cloudy";return r&&r.attributes&&(o=r.attributes.current_condition||"partly-cloudy"),wo(o,e,"#FFFFFF",!1)},integration:()=>s("svg",{width:e,height:e,viewBox:"0 0 24 24","stroke-width":"1.5",fill:"none",stroke:"white",children:[s("path",{d:"M2 19V5C2 3.89543 2.89543 3 4 3H20C21.1046 3 22 3.89543 22 5V19C22 20.1046 21.1046 21 20 21H4C2.89543 21 2 20.1046 2 19Z","stroke-width":"1.5"}),s("path",{d:"M2 7L22 7","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M5 5.01L5.01 4.99889","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M8 5.01L8.01 4.99889","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M11 5.01L11.01 4.99889","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]}),printer3d_device:()=>s("svg",{width:e,height:e,"stroke-width":"1.5",viewBox:"0 0 24 24",fill:"none",stroke:"white",children:[s("path",{d:"M17.5714 18H20.4C20.7314 18 21 17.7314 21 17.4V11C21 8.79086 19.2091 7 17 7H7C4.79086 7 3 8.79086 3 11V17.4C3 17.7314 3.26863 18 3.6 18H6.42857","stroke-width":"1.5"}),s("path",{d:"M8 7V3.6C8 3.26863 8.26863 3 8.6 3H15.4C15.7314 3 16 3.26863 16 3.6V7","stroke-width":"1.5"}),s("path",{d:"M6.09782 20.3151L6.42855 18L6.92639 14.5151C6.96862 14.2196 7.22177 14 7.52036 14H16.4796C16.7782 14 17.0313 14.2196 17.0736 14.5151L17.5714 18L17.9021 20.3151C17.9538 20.6766 17.6733 21 17.3082 21H6.69179C6.32666 21 6.04618 20.6766 6.09782 20.3151Z","stroke-width":"1.5"}),s("path",{d:"M17 10.01L17.01 9.99889","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]})}[t.domain];return n?typeof n=="function"?s(n,{size:e}):s(n,{size:e}):null}const H8=({device:t,isActive:e,cardRef:i,handleClick:n,getItemVariants:r,animateState:o,animationDelay:a,getDisplayState:l,getWeatherArea:c,getWeatherName:d,getNewsArea:u,getNewsName:h,getTodosArea:m,getTodosName:f,getPrinterArea:g,getPrinterName:p,lang:v})=>s(ve,{children:[s("style",{children:`
        .device-list-item {
          border-radius: 16px;
          padding: 16px 20px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 16px;
          position: relative;
          overflow: hidden;
          clip-path: var(--card-clip-path, none);
        }

        /* Actions-Items - weier Hintergrund mit dunklem Text */
        .device-list-item.actions-item {
          backdrop-filter: none;
          -webkit-backdrop-filter: none;
          border: 1px solid rgba(0, 0, 0, 0.1);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .device-list-item.actions-item .device-list-icon {
          background: rgba(0, 0, 0, 0.08);
          color: rgba(0, 0, 0, 0.85);
        }

        .device-list-item.actions-item .device-list-area,
        .device-list-item.actions-item .device-list-name,
        .device-list-item.actions-item .device-list-status {
          color: rgba(0, 0, 0, 0.9);
          opacity: 1;
        }

        .device-list-item.actions-item .device-list-name {
          background: linear-gradient(to right, rgba(0, 0, 0, 0.9) 80%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        /* Settings-Card - blau mit weiem Text */
        .device-list-item.settings-item {
          backdrop-filter: none;
          -webkit-backdrop-filter: none;
          border: 1px solid rgba(0, 145, 255, 0.5);
          box-shadow: 0 8px 32px rgba(0, 145, 255, 0.3);
        }

        .device-list-item.settings-item .device-list-icon {
          background: rgba(255, 255, 255, 0.1);
          color: rgba(255, 255, 255, 0.95);
        }

        .device-list-item.settings-item .device-list-area,
        .device-list-item.settings-item .device-list-name,
        .device-list-item.settings-item .device-list-status {
          color: rgba(255, 255, 255, 0.95);
          opacity: 1;
        }

        .device-list-item.settings-item .device-list-name {
          background: linear-gradient(to right, rgba(255, 255, 255, 0.95) 80%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        /* Marketplace-Card - grn mit weiem Text */
        .device-list-item.marketplace-item {
          backdrop-filter: none;
          -webkit-backdrop-filter: none;
          border: 1px solid rgba(48, 209, 88, 0.5);
          box-shadow: 0 8px 32px rgba(48, 209, 88, 0.3);
        }

        .device-list-item.marketplace-item .device-list-icon {
          background: rgba(255, 255, 255, 0.1);
          color: rgba(255, 255, 255, 0.95);
        }

        .device-list-item.marketplace-item .device-list-area,
        .device-list-item.marketplace-item .device-list-name,
        .device-list-item.marketplace-item .device-list-status {
          color: rgba(255, 255, 255, 0.95);
          opacity: 1;
        }

        .device-list-item.marketplace-item .device-list-name {
          background: linear-gradient(to right, rgba(255, 255, 255, 0.95) 80%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

          .device-list-icon {
            width: 68px;
            height: 68px;
            min-width: 68px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.15);
            color: var(--text-primary, rgba(255, 255, 255, 0.95));
            transition: all 0.3s ease;
          }

          .device-list-item.active .device-list-icon {
            background: rgba(0, 0, 0, 0.08);
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
            color: rgba(0, 0, 0, 0.85);
          }

          .device-list-content {
            flex: 1;
            min-width: 0;
            display: flex;
            flex-direction: column;
            gap: 0px;
          }

          .device-list-area {
            font-size: 11px;
            font-weight: 500;
            color: var(--text-secondary, rgba(255, 255, 255, 0.6));
            text-transform: uppercase;
            letter-spacing: 0.5px;
            line-height: 1.2;
            margin: 0;
            padding: 0;
          }

          .device-list-item.active .device-list-area {
            color: rgba(0, 0, 0, 0.6);
            opacity: 1;
          }

          .device-list-name {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary, rgba(255, 255, 255, 0.95));
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            line-height: 1.3;
            margin: 0;
            padding: 0;
          }

          .device-list-item.active .device-list-name {
            color: rgba(0, 0, 0, 0.9);
            opacity: 1;
            background: linear-gradient(to right, rgba(0, 0, 0, 0.9) 80%, transparent 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
          }

          .device-list-status {
            font-size: 13px;
            color: var(--text-secondary, rgba(255, 255, 255, 0.7));
            line-height: 1.2;
            margin: 0;
            padding: 0;
          }

          .device-list-item.active .device-list-status {
            color: rgba(0, 0, 0, 0.7);
            opacity: 1;
          }

          .device-list-quick-action {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
          }

          @media (hover: hover) {
            .device-list-quick-action:hover {
              background: rgba(255, 255, 255, 0.2);
              transform: scale(1.05);
            }
          }

          .device-list-quick-action.active {
            background: rgba(0, 122, 255, 0.8);
            border-color: rgba(0, 122, 255, 1);
          }

          .sensor-list-value {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
          }

          .sensor-list-value .value {
            font-size: 18px;
            font-weight: 700;
            line-height: 1;
          }

          .sensor-list-value .unit {
            font-size: 10px;
            opacity: 0.7;
            font-weight: 500;
          }

          /* Responsive */
          @media (max-width: 768px) {
            .device-list-item {
              padding: 12px 16px;
              gap: 12px;
            }

            .device-list-icon {
              width: 56px;
              height: 56px;
              min-width: 56px;
            }

            .device-list-area,
            .device-list-name,
            .device-list-status {
              font-size: 14px;
            }
          }
      `}),s(T.div,{ref:i,className:`device-list-item ${e?"active":""} ${t.domain==="settings"?"settings-item":""} ${t.domain==="marketplace"?"marketplace-item":""} ${t.domain==="automation"||t.domain==="scene"||t.domain==="script"?"actions-item":""}`,onClick:n,"data-entity":t.id,variants:r(),initial:"hidden",animate:o,whileHover:window.matchMedia("(hover: hover)").matches?"hover":void 0,transition:{delay:a},children:[s("div",{className:`device-list-icon ${e?"icon-active":""}`,children:t.domain==="sensor"&&!isNaN(parseFloat(t.state))?s("div",{className:"sensor-list-value",children:[s("span",{className:"value",children:Ha(t.state,t.attributes,v).value}),s("span",{className:"unit",children:Ha(t.state,t.attributes,v).unit||""})]}):(t.is_system||_s(t.domain))&&gl(t,32)?gl(t,32):Yg(t,32)}),s("div",{className:"device-list-content",children:[s("div",{className:"device-list-area",children:c&&c()||u&&u()||m&&m()||g&&g()||(t.domain==="settings"?ee("subcategories.system",v):t.domain==="marketplace"?ee("subcategories.apps",v):t.area||ee("general.noRoom",v))}),s("div",{className:"device-list-name",children:d&&d()||h&&h()||f&&f()||p&&p()||(t.domain==="settings"?ee("deviceNames.settings",v):t.domain==="marketplace"?ee("deviceNames.marketplace",v):t.attributes?.friendly_name||t.name)}),s("div",{className:"device-list-status",children:l()})]}),["light","climate","media_player","cover","fan","switch"].includes(t.domain)&&s("button",{className:`device-list-quick-action ${e?"active":""}`,onClick:b=>{b.stopPropagation()},children:s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("path",{d:"M7 6a7.75 7.75 0 1 0 10 0"}),s("path",{d:"M12 4l0 8"})]})})]})]}),j8=({device:t,isActive:e,cardRef:i,handleClick:n,getItemVariants:r,animateState:o,animationDelay:a,renderSensorValue:l,getDisplayState:c,getWeatherArea:d,getWeatherName:u,getNewsArea:h,getNewsName:m,getTodosArea:f,getTodosName:g,getPrinterArea:p,getPrinterName:v,getPrinterState:b,lang:y})=>s(ve,{children:[s("style",{children:`
        .device-card {
          aspect-ratio: 1;
          width: 100%;
          min-width: 130px;
          min-height: 130px;
          background: rgba(255, 255, 255, 0.1);
          border-radius: 24px;
          padding: 20px;
          cursor: pointer;
          display: flex;
          flex-direction: column;
          justify-content: space-between;
          position: relative;
          overflow: hidden;
          box-sizing: border-box;
          container-type: inline-size;
          clip-path: var(--card-clip-path, none);
        }

        .device-card::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: linear-gradient(135deg,
            rgba(255, 255, 255, 0.1) 0%,
            rgba(255, 255, 255, 0.05) 100%);
          opacity: 0;
          pointer-events: none;
        }

        @media (hover: hover) {
          .device-card:hover::before {
            opacity: 1;
          }

          .device-card:hover {
            background: rgba(255, 255, 255, 0.18);
          }
        }

        /* Aktive Cards werden durch Framer Motion Variants gesteuert */

        /* Actions-Card - weier Hintergrund fr Automation, Scene, Script */
        .device-card.actions-card {
          backdrop-filter: none;
          -webkit-backdrop-filter: none;
          border: 1px solid rgba(0, 0, 0, 0.1);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .device-card.actions-card .device-icon {
          color: rgba(0, 0, 0, 0.85);
          opacity: 1;
        }

        .device-card.actions-card .device-area,
        .device-card.actions-card .device-name,
        .device-card.actions-card .device-state {
          color: rgba(0, 0, 0, 0.9);
          opacity: 1;
        }

        .device-card.actions-card .device-area {
          background: linear-gradient(to right, rgba(0, 0, 0, 0.6) 80%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .device-card.actions-card .device-name {
          background: linear-gradient(to right, rgba(0, 0, 0, 0.9) 80%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .device-card.actions-card .device-state {
          background: linear-gradient(to right, rgba(0, 0, 0, 0.7) 85%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        /* Settings-Card - blau mit weiem Text */
        .device-card.settings-card {
          backdrop-filter: none;
          -webkit-backdrop-filter: none;
          border: 1px solid rgba(0, 145, 255, 0.5);
          box-shadow: 0 8px 32px rgba(0, 145, 255, 0.3);
        }

        .device-card.settings-card .device-icon {
          color: rgba(255, 255, 255, 0.95);
          opacity: 1;
        }

        .device-card.settings-card .device-area,
        .device-card.settings-card .device-name,
        .device-card.settings-card .device-state {
          color: rgba(255, 255, 255, 0.95);
          opacity: 1;
        }

        .device-card.settings-card .device-area {
          background: linear-gradient(to right, rgba(255, 255, 255, 0.7) 80%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .device-card.settings-card .device-name {
          background: linear-gradient(to right, rgba(255, 255, 255, 0.95) 80%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .device-card.settings-card .device-state {
          background: linear-gradient(to right, rgba(255, 255, 255, 0.7) 85%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        /* Marketplace-Card - grn mit weiem Text */
        .device-card.marketplace-card {
          backdrop-filter: none;
          -webkit-backdrop-filter: none;
          border: 1px solid rgba(48, 209, 88, 0.5);
          box-shadow: 0 8px 32px rgba(48, 209, 88, 0.3);
        }

        .device-card.marketplace-card .device-icon {
          color: rgba(255, 255, 255, 0.95);
          opacity: 1;
        }

        .device-card.marketplace-card .device-area,
        .device-card.marketplace-card .device-name,
        .device-card.marketplace-card .device-state {
          color: rgba(255, 255, 255, 0.95);
          opacity: 1;
        }

        .device-card.marketplace-card .device-area {
          background: linear-gradient(to right, rgba(255, 255, 255, 0.7) 80%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .device-card.marketplace-card .device-name {
          background: linear-gradient(to right, rgba(255, 255, 255, 0.95) 80%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .device-card.marketplace-card .device-state {
          background: linear-gradient(to right, rgba(255, 255, 255, 0.7) 85%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        /* Pluginstore-Card - lila mit weiem Text */
        .device-card.pluginstore-card {
          backdrop-filter: none;
          -webkit-backdrop-filter: none;
          border: 1px solid rgba(175, 82, 222, 0.5);
          box-shadow: 0 8px 32px rgba(175, 82, 222, 0.3);
        }

        .device-card.pluginstore-card .device-icon {
          color: rgba(255, 255, 255, 0.95);
          opacity: 1;
        }

        .sensor-card .device-icon {
          color: rgba(0, 0, 0, 0.85);
          opacity: 1;
        }

        .sensor-value-display {
          display: flex;
          align-items: flex-start;
          gap: 3px;
          margin-bottom: auto;
        }

        .sensor-value {
          font-size: 48px;
          font-weight: 600;
          color: rgba(255, 255, 255, 0.95);
          line-height: 1;
          opacity: 0.6;
        }

        .sensor-unit {
          font-size: 21px;
          font-weight: 500;
          color: rgba(255, 255, 255, 0.7);
          opacity: 0.5;
          margin-top: 2px;
        }

        /* 5-Spalten Layout: Kleinere Sensor-Werte bei schmaleren Karten */
        @container (max-width: 180px) {
          .sensor-value {
            font-size: 42px;
          }

          .sensor-unit {
            font-size: 18px;
          }
        }

        .device-card.active .sensor-value {
          color: rgba(0, 0, 0, 0.9);
          opacity: 1;
        }

        .device-card.active .sensor-unit {
          color: rgba(0, 0, 0, 0.6);
          opacity: 1;
        }

        .device-info {
          display: flex;
          flex-direction: column;
          gap: 0;
          text-align: left;
          width: 100%;
        }

        .device-area,
        .device-name,
        .device-state {
          font-size: 18px;
          line-height: 1.15;
          margin: 0;
          overflow: hidden;
          white-space: nowrap;
          position: relative;
        }

        /* 5-Spalten Layout: Kleinere Schrift bei schmaleren Karten */
        @container (max-width: 180px) {
          .device-area,
          .device-name,
          .device-state {
            font-size: 16px;
          }
        }

        .device-area {
          color: rgba(255, 255, 255, 0.7);
          opacity: 0.5;
          background: linear-gradient(to right, rgba(255, 255, 255, 0.7) 80%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .device-name {
          font-weight: 600;
          color: rgba(255, 255, 255, 0.95);
          opacity: 0.6;
          background: linear-gradient(to right, rgba(255, 255, 255, 0.95) 80%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .device-state {
          color: rgba(255, 255, 255, 0.7);
          opacity: 0.5;
          background: linear-gradient(to right, rgba(255, 255, 255, 0.7) 85%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .device-card.active .device-area {
          color: rgba(0, 0, 0, 0.6);
          opacity: 1;
          background: linear-gradient(to right, rgba(0, 0, 0, 0.6) 80%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .device-card.active .device-name {
          color: rgba(0, 0, 0, 0.9);
          opacity: 1;
          background: linear-gradient(to right, rgba(0, 0, 0, 0.9) 80%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        .device-card.active .device-state {
          color: rgba(0, 0, 0, 0.7);
          opacity: 1;
          background: linear-gradient(to right, rgba(0, 0, 0, 0.7) 85%, transparent 100%);
          -webkit-background-clip: text;
          -webkit-text-fill-color: transparent;
          background-clip: text;
        }

        @media (max-width: 768px) {
          .device-card {
            padding: 16px;
          }

          .device-area,
          .device-name,
          .device-state {
            font-size: 16px;
          }

          .sensor-value {
            font-size: 38px;
          }

          .sensor-unit {
            font-size: 16px;
          }
        }

        @media (max-width: 480px) {
          .device-card {
            padding: 14px;
            min-width: 120px;
            min-height: 120px;
          }

          .device-area,
          .device-name,
          .device-state {
            font-size: 14px;
          }

          .sensor-value {
            font-size: 38px;
          }

          .sensor-unit {
            font-size: 16px;
          }
        }

        @media (max-width: 360px) {
          .device-card {
            padding: 12px;
            min-width: 110px;
            min-height: 110px;
          }

          .device-area,
          .device-name,
          .device-state {
            font-size: 13px;
          }

          .sensor-value {
            font-size: 38px;
          }

          .sensor-unit {
            font-size: 16px;
          }
        }
      `}),s(T.div,{ref:i,className:`device-card ${e?"active":""} ${t.domain==="sensor"?"sensor-card":""} ${t.domain==="settings"?"settings-card":""} ${t.domain==="marketplace"?"marketplace-card":""} ${t.domain==="automation"||t.domain==="scene"||t.domain==="script"?"actions-card":""}`,onClick:n,"data-entity":t.id,variants:r(),initial:"hidden",animate:o,whileHover:window.matchMedia("(hover: hover)").matches?"hover":void 0,transition:{delay:a},children:[l(),s("div",{className:"device-info",children:[s("div",{className:"device-area",children:d&&d()||h&&h()||f&&f()||p&&p()||(t.domain==="settings"?ee("subcategories.system",y):t.domain==="marketplace"?ee("subcategories.apps",y):t.area||ee("general.noRoom",y))}),s("div",{className:"device-name",children:u&&u()||m&&m()||g&&g()||v&&v()||(t.domain==="settings"?ee("deviceNames.settings",y):t.domain==="marketplace"?ee("deviceNames.marketplace",y):t.attributes?.friendly_name||t.name)}),s("div",{className:"device-state",children:b&&b()||c()})]})]})]}),qg=Sl(({device:t,viewMode:e="grid",onClick:i,index:n=0,lang:r="de",animationKey:o="",roomIndex:a=0,itemsPerRoom:l=[],isPanelAnimationComplete:c=!1})=>{const d=te(null),[u,h]=M(48);U(()=>{const L=()=>{const W=window.innerWidth;if(W>768){const F=getComputedStyle(document.documentElement).getPropertyValue("--device-grid-columns").trim();h(F==="5"?48:56)}else W>480?h(48):W>360?h(36):h(32)};L(),window.addEventListener("resize",L);const E=new MutationObserver(()=>{L()});return E.observe(document.documentElement,{attributes:!0,attributeFilter:["style"]}),()=>{window.removeEventListener("resize",L),E.disconnect()}},[]);const f=(()=>{let L=0;for(let E=0;E<a;E++)L+=l[E]||0;return L+n})(),g=o&&o.startsWith("expand-"),p=t.state==="Ein"||t.state==="ein"||t.state==="on"?!0:t.domain==="climate"?t.state!=="off"&&t.state!=="unavailable"&&t.state!=="unknown":t.domain==="cover"?t.state==="open"||t.state==="opening"||t.attributes?.current_position!==void 0&&t.attributes.current_position>0:(t.domain==="sensor"||t.domain==="binary_sensor")&&t.state&&t.state!=="unavailable"&&t.state!=="unknown"&&(!isNaN(parseFloat(t.state))||t.state==="on")?!0:t.isActive!==void 0?t.isActive:j5(t),v=p?"active":"inactive",y=(g?.4:0)+(f<30?f*.08:0),w=()=>{if(t.domain==="weather"){const L=_e.getEntityByDomain("weather");if(L&&L.attributes&&L.attributes.current_temperature!==void 0)return`${Math.round(L.attributes.current_temperature)}`}return null},_=()=>{if(t.domain==="weather"){const L=_e.getEntityByDomain("weather");if(L&&L.attributes&&L.attributes.current_condition){const E={de:{"clear-night":"Klare Nacht",cloudy:"Bewlkt",fog:"Nebel",hail:"Hagel",lightning:"Gewitter","lightning-rainy":"Gewitter",partlycloudy:"Teilweise bewlkt","partly-cloudy":"Teilweise bewlkt",pouring:"Starkregen",rainy:"Regnerisch",snowy:"Schneefall","snowy-rainy":"Schneeregen",sunny:"Sonnig",windy:"Windig","windy-variant":"Strmisch",exceptional:"Auergewhnlich"},en:{"clear-night":"Clear",cloudy:"Cloudy",fog:"Fog",hail:"Hail",lightning:"Lightning","lightning-rainy":"Thunderstorm",partlycloudy:"Partly cloudy","partly-cloudy":"Partly cloudy",pouring:"Pouring",rainy:"Rainy",snowy:"Snowy","snowy-rainy":"Sleet",sunny:"Sunny",windy:"Windy","windy-variant":"Stormy",exceptional:"Exceptional"}};return(E[r]||E.de)[L.attributes.current_condition]||L.attributes.current_condition}}return null},k=()=>{if(t.domain==="news"){const L=_e.getEntityByDomain("news");if(L&&L.attributes&&L.attributes.unread_count!==void 0){const E=L.attributes.unread_count;return r==="de"?E===1?"1 Neue Nachricht":`${E} Neue Nachrichten`:E===1?"1 New Article":`${E} New Articles`}}return null},N=()=>{if(t.domain==="news"){const L=_e.getEntityByDomain("news");if(L&&L.attributes&&L.attributes.feed_count!==void 0){const E=L.attributes.feed_count;return r==="de"?E===1?"1 Feed":`${E} Feeds`:E===1?"1 Feed":`${E} Feeds`}return r==="de"?"Nachrichten":"News"}return null},C=()=>{if(t.domain==="todos"){const L=_e.getEntityByDomain("todos");if(L&&L.attributes&&L.attributes.incomplete_count!==void 0){const E=L.attributes.incomplete_count;return r==="de"?E===1?"1 Unerledigt":`${E} Unerledigt`:E===1?"1 Incomplete":`${E} Incomplete`}}return null},S=()=>{if(t.domain==="todos"){const L=_e.getEntityByDomain("todos");if(L&&L.attributes&&L.attributes.overdue_count!==void 0){const E=L.attributes.overdue_count;return r==="de"?E===1?"1 berfllig":`${E} berfllig`:E===1?"1 Overdue":`${E} Overdue`}return r==="de"?"Aufgaben":"Tasks"}return null},x=()=>null,B=()=>null,A=()=>{if(t.domain==="printer3d_device"){const L=t.attributes?.current_step;if(!L||L==="unavailable"||L==="unknown")return"Offline";const E={de:{idle:"Bereit",offline:"Offline",printing:"Druckt",paused:"Pausiert",preparing:"Vorbereitung",finishing:"Abschluss",error:"Fehler"},en:{idle:"Ready",offline:"Offline",printing:"Printing",paused:"Paused",preparing:"Preparing",finishing:"Finishing",error:"Error"}},W=E[r]||E.de,F=L.toLowerCase();for(const[K,G]of Object.entries(W))if(F.includes(K))return G;return L.charAt(0).toUpperCase()+L.slice(1)}return null},P=()=>t.is_system||_e.isSystemEntity(t.domain)?"":t.domain==="sensor"&&!isNaN(parseFloat(t.state))?H5(t.state,t.attributes?.device_class,t.attributes?.unit_of_measurement,r)||"":(t.domain==="binary_sensor"||t.domain==="sensor",fu(t.state,t.domain,t.attributes?.device_class,r)),I=()=>{if(t.domain==="sensor"&&!isNaN(parseFloat(t.state))){const L=Ha(t.state,t.attributes,r);return s("div",{className:"sensor-value-display",children:[s("span",{className:"sensor-value",children:L.value}),L.unit&&s("span",{className:"sensor-unit",children:L.unit})]})}if(t.is_system||_s(t.domain)){const L=gl(t,u);if(L)return L}return Yg(t,u)},z=()=>{i&&i(t)},D=()=>{if(t.is_system||_s(t.domain)){const F=$8(t,e);if(F)return F}if(t.domain==="automation"||t.domain==="scene"||t.domain==="script")return cw;const L=e==="list"?aw:lw,E=e==="list"?1.02:1.05,W=e==="list"?.3:.25;return p?{...L,hover:{scale:E,backgroundColor:"#FFFFFF",transition:{duration:W,ease:[.4,0,.2,1]}}}:{...L,hover:{scale:E,backgroundColor:"rgba(255, 255, 255, 0.18)",transition:{duration:W,ease:[.4,0,.2,1]}}}};return e==="list"?s(H8,{device:t,isActive:p,cardRef:d,handleClick:z,getItemVariants:D,animateState:v,animationDelay:y,getDisplayState:P,getWeatherArea:w,getWeatherName:_,getNewsArea:k,getNewsName:N,getTodosArea:C,getTodosName:S,getPrinterArea:x,getPrinterName:B,getPrinterState:A,lang:r}):s(j8,{device:t,isActive:p,cardRef:d,handleClick:z,getItemVariants:D,animateState:v,animationDelay:y,renderSensorValue:I,getDisplayState:P,getWeatherArea:w,getWeatherName:_,getNewsArea:k,getNewsName:N,getTodosArea:C,getTodosName:S,getPrinterArea:x,getPrinterName:B,getPrinterState:A,lang:r})});qg.displayName="DeviceCard";const U8=({searchValue:t,onSend:e,isLoading:i,onSuggestionClick:n,onSubmit:r,lang:o="de"})=>{const[a,l]=M([]),[c,d]=M(!1),u=te(null);te("");const h=te(!1);U(()=>{u.current&&!h.current&&u.current.scrollTo({top:0,behavior:"smooth"})},[a]),U(()=>{r&&r>0&&t&&t.trim()&&m(t)},[r]);const m=y=>{if(!y||!y.trim()||c)return;const w={id:Date.now(),type:"user",content:y.trim(),timestamp:new Date().toISOString()};l(_=>[w,..._]),d(!0),setTimeout(()=>{const _={id:Date.now()+1,type:"assistant",content:f(y),badge:g(y),model:"GPT-4o mini",sources:y.toLowerCase().includes("wetter")?p():null,timestamp:new Date().toISOString()};l(k=>{const N=[...k];return N.splice(1,0,_),N}),d(!1)},1500)},f=y=>{const w=y.toLowerCase();return w.includes("licht")&&w.includes("aus")?"Ich habe alle Lichter im Wohnzimmer ausgeschaltet. Es waren 3 Lichter aktiv.":w.includes("wetter")?`Das aktuelle Wetter in Mnchen:
 Temperatur: 22C mit teilweise bewlkt
 Luftfeuchtigkeit: 65%
 Wind: 15 km/h aus Westen
 Regenwahrscheinlichkeit: 20%`:w.includes("heizung")?"Die Heizung wurde auf 22C eingestellt. Die nderung wird in den nchsten 5 Minuten wirksam.":w.includes("zeit")||w.includes("uhr")?`Es ist aktuell ${new Date().toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})} Uhr.`:`Ich habe deine Anfrage "${y}" verstanden und werde dir mit deinem Smart Home helfen.`},g=y=>{const w=y.toLowerCase();return w.includes("wetter")||w.includes("weather")?{type:"web",text:ee("aiMode.badges.webSearch",o),icon:""}:w.includes("zeit")||w.includes("uhr")||w.includes("time")?{type:"location",text:ee("aiMode.badges.location",o),icon:""}:w.includes("licht")||w.includes("heizung")||w.includes("light")||w.includes("temperature")?{type:"device",text:ee("aiMode.badges.deviceControl",o),icon:""}:{type:"assistant",text:ee("aiMode.badges.assistant",o),icon:""}},p=()=>[{name:"weather.com",url:"#"},{name:"wetter.de",url:"#"},{name:"dwd.de",url:"#"}],v=(y,w)=>{console.log(`Feedback fr Nachricht ${y}: ${w?"Positiv":"Negativ"}`)},b=[ee("aiMode.suggestions.lightsOff",o),ee("aiMode.suggestions.weather",o),ee("aiMode.suggestions.temperature",o)];return s("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"0 0 35px 35px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[s("style",{children:`
        .ai-chat-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .ai-chat-scrollbar::-webkit-scrollbar-track {
          background: rgba(255, 255, 255, 0.05);
          border-radius: 3px;
        }
        .ai-chat-scrollbar::-webkit-scrollbar-thumb {
          background: rgba(255, 255, 255, 0.2);
          border-radius: 3px;
        }
        .ai-chat-scrollbar::-webkit-scrollbar-thumb:hover {
          background: rgba(255, 255, 255, 0.3);
        }
        
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        
        @keyframes pulse {
          0%, 60%, 100% {
            opacity: 0.5;
            transform: scale(0.8);
          }
          30% {
            opacity: 1;
            transform: scale(1.2);
          }
        }
      `}),a.length===0?s("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 20px",animation:"fadeIn 0.3s ease"},children:[s("h2",{style:{fontSize:"48px",fontWeight:"600",color:"rgba(255, 255, 255, 0.95)",marginBottom:"16px",letterSpacing:"-1px"},children:ee("aiMode.askAnything",o)}),s("p",{style:{fontSize:"18px",color:"rgba(255, 255, 255, 0.5)",marginBottom:"48px"},children:ee("aiMode.subtitle",o)}),s("div",{style:{display:"flex",gap:"20px",marginBottom:"48px"},children:[{bg:"linear-gradient(135deg, #03A9F4, #00BCD4)",icon:""},{bg:"linear-gradient(135deg, #10a37f, #1a9870)",icon:""},{bg:"linear-gradient(135deg, #FF6B6B, #FF8E53)",icon:""}].map((y,w)=>s("div",{style:{width:"72px",height:"72px",borderRadius:"18px",background:y.bg,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"32px",cursor:"pointer",transition:"transform 0.2s ease",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},onMouseEnter:_=>_.currentTarget.style.transform="scale(1.1)",onMouseLeave:_=>_.currentTarget.style.transform="scale(1)",children:y.icon},w))}),s("div",{style:{display:"flex",flexDirection:"column",gap:"12px",width:"100%",maxWidth:"450px"},children:b.map((y,w)=>s("button",{onClick:()=>n&&n(y),style:{padding:"16px 24px",background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.15)",borderRadius:"12px",color:"rgba(255, 255, 255, 0.85)",fontSize:"15px",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:_=>{_.currentTarget.style.background="rgba(255, 255, 255, 0.12)",_.currentTarget.style.borderColor="rgba(255, 255, 255, 0.25)",_.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:_=>{_.currentTarget.style.background="rgba(255, 255, 255, 0.08)",_.currentTarget.style.borderColor="rgba(255, 255, 255, 0.15)",_.currentTarget.style.transform="translateY(0)"},children:y},w))})]}):s("div",{ref:u,className:"ai-chat-scrollbar",style:{flex:1,overflowY:"auto",padding:"24px",display:"flex",flexDirection:"column",gap:"24px"},children:[c&&s("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"16px",animation:"fadeIn 0.3s ease"},children:[s("div",{style:{display:"flex",gap:"4px"},children:[0,1,2].map(y=>s("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"rgba(0, 122, 255, 0.6)",animation:"pulse 1.4s ease-in-out infinite",animationDelay:`${y*.2}s`}},y))}),s("span",{style:{color:"rgba(255, 255, 255, 0.5)",fontSize:"14px"},children:ee("aiMode.thinking",o)})]}),a.map(y=>{if(y.type==="user")return s("div",{style:{background:"rgba(255, 255, 255, 0.08)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"14px 18px",color:"rgba(255, 255, 255, 0.7)",fontSize:"15px",lineHeight:"1.5",animation:"fadeIn 0.3s ease"},children:y.content},y.id);if(y.type==="assistant"){const w={web:{bg:"rgba(255, 59, 48, 0.15)",color:"#FF3B30"},location:{bg:"rgba(255, 59, 48, 0.15)",color:"#FF3B30"},device:{bg:"rgba(52, 199, 89, 0.15)",color:"#34C759"},assistant:{bg:"rgba(0, 122, 255, 0.15)",color:"#007AFF"}},_=w[y.badge.type]||w.assistant;return s("div",{style:{display:"flex",flexDirection:"column",gap:"12px",animation:"fadeIn 0.3s ease"},children:[s("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[s("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",padding:"6px 12px",borderRadius:"8px",fontSize:"13px",fontWeight:"500",background:_.bg,color:_.color},children:[s("span",{children:y.badge.icon}),s("span",{children:y.badge.text})]}),s("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"rgba(52, 199, 89, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",color:"#34C759",fontSize:"14px"},children:""})]}),s("div",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"15px",lineHeight:"1.6",whiteSpace:"pre-wrap"},children:y.content}),y.sources&&s("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap",paddingTop:"12px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:y.sources.map((k,N)=>s("a",{href:k.url,style:{display:"flex",alignItems:"center",gap:"6px",padding:"4px 10px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px",fontSize:"13px",color:"rgba(255, 255, 255, 0.6)",textDecoration:"none"},children:[s("span",{style:{fontSize:"12px"},children:""}),s("span",{children:k.name}),s("span",{style:{fontSize:"10px",color:"rgba(255, 255, 255, 0.4)"},children:N+1})]},N))}),s("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingTop:"12px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[s("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",color:"rgba(255, 255, 255, 0.4)"},children:[s("span",{style:{opacity:.7},children:""}),s("span",{children:y.model})]}),s("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s("span",{style:{fontSize:"13px",color:"rgba(255, 255, 255, 0.5)"},children:ee("aiMode.wasHelpful",o)}),s("button",{onClick:()=>v(y.id,!1),style:{padding:"4px 10px",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"rgba(255, 255, 255, 0.6)",fontSize:"13px",cursor:"pointer"},onMouseEnter:k=>{k.currentTarget.style.borderColor="rgba(255, 59, 48, 0.5)",k.currentTarget.style.color="#FF3B30"},onMouseLeave:k=>{k.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)",k.currentTarget.style.color="rgba(255, 255, 255, 0.6)"},children:ee("aiMode.no",o)}),s("button",{onClick:()=>v(y.id,!0),style:{padding:"4px 10px",background:"transparent",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"rgba(255, 255, 255, 0.6)",fontSize:"13px",cursor:"pointer"},onMouseEnter:k=>{k.currentTarget.style.borderColor="rgba(52, 199, 89, 0.5)",k.currentTarget.style.color="#34C759"},onMouseLeave:k=>{k.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)",k.currentTarget.style.color="rgba(255, 255, 255, 0.6)"},children:ee("aiMode.yes",o)})]})]})]},y.id)}return null})]})]})},A0={devices:()=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("rect",{x:"3",y:"3",width:"7",height:"7"}),s("rect",{x:"14",y:"3",width:"7",height:"7"}),s("rect",{x:"14",y:"14",width:"7",height:"7"}),s("rect",{x:"3",y:"14",width:"7",height:"7"})]}),sensors:()=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("path",{d:"M12 22L12 2",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M20.5715 17.5498L3.42819 7.24904",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M3.42822 17.5498L20.5716 7.24904",strokeLinecap:"round",strokeLinejoin:"round"})]}),actions:()=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("path",{d:"M4.40434 13.6099C3.51517 13.1448 3 12.5924 3 12C3 10.3431 7.02944 9 12 9C16.9706 9 21 10.3431 21 12C21 12.7144 20.2508 13.3705 19 13.8858"}),s("path",{d:"M12 11.01L12.01 10.9989"}),s("path",{d:"M16.8827 6C16.878 4.97702 16.6199 4.25309 16.0856 3.98084C14.6093 3.22864 11.5832 6.20912 9.32664 10.6379C7.07005 15.0667 6.43747 19.2668 7.91374 20.019C8.44117 20.2877 9.16642 20.08 9.98372 19.5"}),s("path",{d:"M9.60092 4.25164C8.94056 3.86579 8.35719 3.75489 7.91369 3.98086C6.43742 4.73306 7.06999 8.93309 9.32658 13.3619C11.5832 17.7907 14.6092 20.7712 16.0855 20.019C17.3977 19.3504 17.0438 15.9577 15.3641 12.1016"})]}),custom:()=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("path",{d:"M21 7.35304L21 16.647C21 16.8649 20.8819 17.0656 20.6914 17.1715L12.2914 21.8381C12.1102 21.9388 11.8898 21.9388 11.7086 21.8381L3.30861 17.1715C3.11814 17.0656 3 16.8649 3 16.647L2.99998 7.35304C2.99998 7.13514 3.11812 6.93437 3.3086 6.82855L11.7086 2.16188C11.8898 2.06121 12.1102 2.06121 12.2914 2.16188L20.6914 6.82855C20.8818 6.93437 21 7.13514 21 7.35304Z"}),s("path",{d:"M20.5 16.7222L12.2914 12.1619C12.1102 12.0612 11.8898 12.0612 11.7086 12.1619L3.5 16.7222"}),s("path",{d:"M3.52844 7.29357L11.7086 11.8381C11.8898 11.9388 12.1102 11.9388 12.2914 11.8381L20.5 7.27777"}),s("path",{d:"M12 21L12 3"})]})},G8=({searchValue:t,fuzzyResults:e,devices:i,activeCategory:n,selectedSubcategory:r,activeSubFilter:o,favorites:a,predictiveSuggestions:l})=>{if(t&&t.trim()!=="")return e||[];if(r==="favorites"){const c=new Set(a);return i.filter(d=>c.has(d.entity_id))}return r==="suggestions"?l?.slice(0,12)||[]:i.filter(c=>{const d=n==="all";if(n==="devices"){if((c.is_system||["settings","pluginstore"].includes(c.domain))&&c.category!=="devices"||["script","automation","scene"].includes(c.domain))return!1;const u=c.domain==="binary_sensor"&&["door","window","opening","lock"].some(p=>c.attributes?.device_class?.includes(p)||c.entity_id?.includes(p)),h=c.domain==="binary_sensor"&&["motion","presence","occupancy"].some(p=>c.attributes?.device_class?.includes(p)||c.entity_id?.includes(p));if(["sensor","binary_sensor"].includes(c.domain)&&!(r==="security"&&(u||h)))return!1;if(r==="all"||!r)return!0;const m={light:"lights",switch:"switches",climate:"climate",fan:"climate",cover:"covers",media_player:"media",vacuum:"cleaning",washing_machine:"cleaning",dishwasher:"cleaning",air_purifier:"cleaning",camera:"security",lock:"security",siren:"security",alert:"security",alarm_control_panel:"security",valve:"utilities",printer3d_device:"utilities"};if(!["lights","switches","climate","covers","media","cleaning","security","utilities"].includes(r))return c.area===r;if(r==="security")return m[c.domain]==="security"||u||h;const g=m[c.domain];return r===g}else if(n==="sensors"){if(!["sensor","binary_sensor"].includes(c.domain))return!1;if(r==="all"||!r)return!0;const u=$a(c);return["temperature","humidity","motion","door_window","presence","light","energy","battery","pressure","security","water","other_sensors"].includes(r)?u===r:c.area===r}else if(n==="actions"){if(!["script","automation","scene"].includes(c.domain))return!1;if(r==="all"||!r)return!0;const u={script:"scripts",automation:"automations",scene:"scenes"};if(!["scripts","automations","scenes"].includes(r))return c.area===r;const m=u[c.domain];return r===m}else if(n==="custom")return c.is_system||["settings","pluginstore"].includes(c.domain)?r==="all"||!r?!0:r==="system"?c.attributes?.category==="system"||c.category==="system":r==="apps"?c.domain==="pluginstore"||c.entity_id?.includes("pluginstore")||c.entity_id?.includes("plugin_")||c.attributes?.category==="apps"||c.category==="apps":!1:!1;return d})},K8=({searchValue:t,fuzzyResults:e,currentLanguage:i})=>{if(!t||!e||e.length===0)return null;const n={},r=ee("general.noRoom",i);return e.forEach(a=>{const l=a.area||r;n[l]||(n[l]=[]),n[l].push(a)}),{rooms:Object.keys(n).sort((a,l)=>a===r?1:l===r?-1:a.localeCompare(l,"de")),devicesByRoom:n}},Y8=({searchValue:t,filteredDevices:e,selectedSubcategory:i,currentLanguage:n,favorites:r,predictiveSuggestions:o})=>{if(t&&t.trim()!=="")return null;if(i==="suggestions"){const d={},u={frequentlyUsed:ee("suggestions.frequentlyUsed",n),contextBased:ee("suggestions.contextBased",n),timeBased:ee("suggestions.timeBased",n),areaBased:ee("suggestions.areaBased",n)};return o?.forEach(f=>{const g=f.suggestionType||"frequentlyUsed",p=u[g]||u.frequentlyUsed;d[p]||(d[p]=[]),d[p].push(f)}),{rooms:[u.timeBased,u.contextBased,u.areaBased,u.frequentlyUsed].filter(f=>d[f]),devicesByRoom:d}}if(i==="favorites"){const d={[ee("categories.devices",n)||"Gerte"]:[],[ee("categories.sensors",n)||"Sensoren"]:[],[ee("categories.actions",n)||"Aktionen"]:[],[ee("categories.custom",n)||"Benutzerdefiniert"]:[]};return e.forEach(h=>{h.is_system||["settings","pluginstore"].includes(h.domain)?d[ee("categories.custom",n)||"Benutzerdefiniert"].push(h):["script","automation","scene"].includes(h.domain)?d[ee("categories.actions",n)||"Aktionen"].push(h):["sensor","binary_sensor"].includes(h.domain)?d[ee("categories.sensors",n)||"Sensoren"].push(h):d[ee("categories.devices",n)||"Gerte"].push(h)}),{rooms:Object.keys(d).filter(h=>d[h].length>0),devicesByRoom:d}}const a={},l=ee("general.noRoom",n);return e.forEach(d=>{const u=d.area||l;a[u]||(a[u]=[]),a[u].push(d)}),{rooms:Object.keys(a).sort((d,u)=>d===l?1:u===l?-1:d.localeCompare(u,"de")),devicesByRoom:a}},Z8=({aiMode:t,showCategories:e,hoveredCategory:i,activeCategory:n,currentLanguage:r})=>t?r==="en"?"Ask a follow-up question...":r==="fr"?"Posez une question de suivi...":r==="es"?"Haz una pregunta de seguimiento...":"Stelle eine Folgefrage...":e&&i?ee(`placeholders.search${i.charAt(0).toUpperCase()+i.slice(1)}`,r).replace("...",""):ee(`placeholders.search${n.charAt(0).toUpperCase()+n.slice(1)}`,r).replace("...",""),q8=t=>{const{setSearchValue:e,setFuzzySearchTerm:i,aiMode:n,devices:r,setSuggestionText:o,isExpanded:a,setIsExpanded:l,setAnimationKey:c}=t;return d=>{const u=d.target.value;if(e(u),i(u),u.length>=1&&!n){const h=u.toLowerCase(),m=r.filter(f=>(f.name||f.attributes?.friendly_name||f.entity_id||f.id||"").toLowerCase().includes(h));if(m.sort((f,g)=>{const p=(f.name||f.attributes?.friendly_name||"").toLowerCase(),v=(g.name||g.attributes?.friendly_name||"").toLowerCase(),b=p.startsWith(h),y=v.startsWith(h);if(b&&!y)return-1;if(!b&&y)return 1;const w=p.indexOf(h),_=v.indexOf(h);return w!==_?w-_:p.length-v.length}),m.length>0){const f=m[0],g=f.name||f.attributes?.friendly_name||f.entity_id||f.id||"",p=g.toLowerCase(),v=p.indexOf(h);v!==-1?(v===0||p[v-1]===" "||p[v-1]==="_"||p[v-1],o(g)):o("")}else o("");a||(l(!0),c(`expand-${Date.now()}`))}else o("")}},X8=t=>{const{searchValue:e,setAiMode:i,setSuggestionText:n,setIsExpanded:r,setAnimationKey:o,suggestionText:a,setSearchValue:l,setFuzzySearchTerm:c,aiMode:d,setAiSubmitTrigger:u,setAiResponse:h,setIsAiLoading:m}=t;return f=>{if((f.key==="a"||f.key==="A")&&f.altKey&&e){f.preventDefault(),i(!0),n(""),r(!0),o(`back-${Date.now()}`);return}if(f.key==="Tab"&&e){f.preventDefault(),f.stopPropagation(),a&&a.toLowerCase().startsWith(e.toLowerCase())?(l(a),c(a),n("")):d||(i(!0),n(""),r(!0),o(`back-${Date.now()}`));return}else f.key==="ArrowRight"&&a&&e&&!d?a.toLowerCase().startsWith(e.toLowerCase())&&(f.preventDefault(),l(a),c(a),n("")):f.key==="Enter"&&d?(f.preventDefault(),e.trim()&&(u(g=>g+1),setTimeout(()=>{l(""),n(""),c("")},100))):f.key==="Enter"&&!d?(f.preventDefault(),e.trim()&&(i(!0),n(""),r(!0),o(`back-${Date.now()}`),setTimeout(()=>{u(g=>g+1)},100),setTimeout(()=>{l(""),c("")},150))):f.key==="Escape"&&(d?(i(!1),h(""),m(!1)):(l(""),n("")))}},J8=t=>{const{aiMode:e,isExpanded:i,setIsExpanded:n,setAnimationKey:r,setShowCategories:o,searchPanelRef:a}=t;return l=>{e||(l&&(l.stopPropagation(),l.preventDefault()),i||(n(!0),r(`expand-${Date.now()}`),a.current&&(a.current.dataset.animating="true",a.current.dataset.openTime=Date.now().toString())),o(!1))}},Q8=t=>{const{setSearchValue:e,setSuggestionText:i,setFuzzySearchTerm:n,aiMode:r,setAiMode:o,setAiResponse:a,setIsAiLoading:l}=t;return()=>{e(""),i(""),n(""),r||(o(!1),a(""),l(!1))}},eS=t=>{const{setIsExpanded:e,setShowCategories:i,showCategories:n,setIsCategoryHovered:r}=t;return()=>{e(!1),i(!n),r(!1)}},tS=t=>{const{activeCategory:e,setShowCategories:i,subcategoryPerCategory:n,setSelectedSubcategory:r,setActiveCategory:o,setIsExpanded:a,setAnimationKey:l}=t;return c=>{if(c===e){i(!1);return}const d=n[c]||"all";r(d),o(c),i(!1),a(!0),l(`category-${c}-${Date.now()}`)}},iS=t=>{const{setIsFilterOpen:e,isFilterOpen:i}=t;return()=>{e(!i)}},nS=t=>{const{setSelectedSubcategory:e,setSubcategoryPerCategory:i,activeCategory:n,setAnimationKey:r}=t;return o=>{e(o),i(a=>({...a,[n]:o})),r(`${n}-${o}-${Date.now()}`)}},sS=(t={})=>{const[e,i]=M(!1),[n,r]=M(!1),[o,a]=M(""),[l,c]=M(!1),[d,u]=M("devices"),[h,m]=M(!1),[f,g]=M("grid"),[p,v]=M("categories"),[b,y]=M("all"),[w,_]=M({devices:"all",sensors:"all",actions:"all"}),[k,N]=M(!1),[C,S]=M(!1),[x,B]=M(null);M(null);const A=te(null),P=te(null),I=te(null),z=te(!1),D=te(!1),L=te(!1),E=te(!1),[W,F]=M(""),[K,G]=M(null),[$,Q]=M(!1),[re,he]=M(!1),[O,H]=M(""),[X,me]=M(!1),[q,ce]=M(0),[ie,J]=M("entity"),[Y,oe]=M(!1),[ae,V]=M(t.aiModeEnabled!==!1),[ne,Z]=M(""),[se,R]=M(t.language||localStorage.getItem("userLanguage")||"de");return{isExpanded:e,setIsExpanded:i,isPanelAnimationComplete:n,setIsPanelAnimationComplete:r,searchValue:o,setSearchValue:a,isFilterOpen:l,setIsFilterOpen:c,activeCategory:d,setActiveCategory:u,showCategories:h,setShowCategories:m,activeFilter:f,setActiveFilter:g,activeSubFilter:p,setActiveSubFilter:v,selectedSubcategory:b,setSelectedSubcategory:y,subcategoryPerCategory:w,setSubcategoryPerCategory:_,isMobile:k,setIsMobile:N,showDetail:C,setShowDetail:S,selectedDevice:x,setSelectedDevice:B,containerRef:A,searchPanelRef:P,resultsRef:I,detailViewClosingRef:z,backButtonClickedRef:D,isExpandedRef:L,showDetailRef:E,suggestionText:W,setSuggestionText:F,hoveredCategory:K,setHoveredCategory:G,isCategoryHovered:$,setIsCategoryHovered:Q,aiMode:re,setAiMode:he,aiResponse:O,setAiResponse:H,isAiLoading:X,setIsAiLoading:me,aiSubmitTrigger:q,setAiSubmitTrigger:ce,searchMode:ie,setSearchMode:J,showAIInterface:Y,setShowAIInterface:oe,aiModeEnabled:ae,setAiModeEnabled:V,animationKey:ne,setAnimationKey:Z,currentLanguage:se,setCurrentLanguage:R}},F0=()=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s("path",{d:"M7 14C5.34315 14 4 15.3431 4 17C4 18.6569 5.34315 20 7 20C7.35064 20 7.68722 19.9398 8 19.8293"}),s("path",{d:"M4.26392 15.6046C2.9243 14.9582 2.00004 13.587 2.00004 12C2.00004 10.7883 2.53877 9.70251 3.38978 8.96898"}),s("path",{d:"M3.42053 8.8882C3.1549 8.49109 3 8.01363 3 7.5C3 6.11929 4.11929 5 5.5 5C6.06291 5 6.58237 5.18604 7.00024 5.5"}),s("path",{d:"M7.23769 5.56533C7.08524 5.24215 7 4.88103 7 4.5C7 3.11929 8.11929 2 9.5 2C10.8807 2 12 3.11929 12 4.5V20"}),s("path",{d:"M8 20C8 21.1046 8.89543 22 10 22C11.1046 22 12 21.1046 12 20"}),s("path",{d:"M12 7C12 8.65685 13.3431 10 15 10"}),s("path",{d:"M17 14C18.6569 14 20 15.3431 20 17C20 18.6569 18.6569 20 17 20C16.6494 20 16.3128 19.9398 16 19.8293"}),s("path",{d:"M19.7361 15.6046C21.0757 14.9582 22 13.587 22 12C22 10.7883 21.4612 9.70251 20.6102 8.96898"}),s("path",{d:"M20.5795 8.8882C20.8451 8.49109 21 8.01363 21 7.5C21 6.11929 19.8807 5 18.5 5C17.9371 5 17.4176 5.18604 16.9998 5.5"}),s("path",{d:"M12 4.5C12 3.11929 13.1193 2 14.5 2C15.8807 2 17 3.11929 17 4.5C17 4.88103 16.9148 5.24215 16.7623 5.56533"}),s("path",{d:"M16 20C16 21.1046 15.1046 22 14 22C12.8954 22 12 21.1046 12 20"})]}),P0=({className:t})=>s("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("path",{d:"M15 6L9 12L15 18",strokeLinecap:"round",strokeLinejoin:"round"})}),rS=()=>s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"rgba(255, 255, 255, 0.7)",strokeWidth:"2",children:[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),oS=()=>s("svg",{viewBox:"0 0 24 24",children:[s("rect",{x:"5",y:"5",width:"5",height:"5"}),s("rect",{x:"14",y:"5",width:"5",height:"5"}),s("rect",{x:"5",y:"14",width:"5",height:"5"}),s("rect",{x:"14",y:"14",width:"5",height:"5"})]}),aS=()=>s("svg",{viewBox:"0 0 24 24",children:[s("path",{d:"M8 6L20 6",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M4 6.01L4.01 5.99889",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M4 12.01L4.01 11.9989",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M4 18.01L4.01 17.9989",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M8 12L20 12",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M8 18L20 18",strokeLinecap:"round",strokeLinejoin:"round"})]}),lS=()=>s("svg",{viewBox:"0 0 24 24",children:s("path",{d:"M20.777 13.3453L13.4799 21.3721C12.6864 22.245 11.3136 22.245 10.5201 21.3721L3.22304 13.3453C2.52955 12.5825 2.52955 11.4175 3.22304 10.6547L10.5201 2.62787C11.3136 1.755 12.6864 1.755 13.4799 2.62787L20.777 10.6547C21.4705 11.4175 21.4705 12.5825 20.777 13.3453Z",strokeLinecap:"round",strokeLinejoin:"round"})}),cS=()=>s("svg",{viewBox:"0 0 24 24",children:[s("path",{d:"M10 18V15C10 13.8954 10.8954 13 12 13V13C13.1046 13 14 13.8954 14 15V18","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M2 8L11.7317 3.13416C11.9006 3.04971 12.0994 3.0497 12.2683 3.13416L22 8","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M20 11V19C20 20.1046 19.1046 21 18 21H6C4.89543 21 4 20.1046 4 19V11","stroke-linecap":"round","stroke-linejoin":"round"})]}),dS=()=>s("svg",{viewBox:"0 0 24 24",children:[s("path",{d:"M3 13C6.6 5 17.4 5 21 13","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M12 17C10.3431 17 9 15.6569 9 14C9 12.3431 10.3431 11 12 11C13.6569 11 15 12.3431 15 14C15 15.6569 13.6569 17 12 17Z","stroke-linecap":"round","stroke-linejoin":"round"})]}),uS=()=>s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"rgba(255, 255, 255, 0.8)",strokeWidth:"1.5",children:[s("path",{d:"M3 6H21",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M7 12L17 12",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M11 18L13 18",strokeLinecap:"round",strokeLinejoin:"round"})]}),hS=({isFilterOpen:t,activeFilter:e,activeSubFilter:i,setActiveFilter:n,setActiveSubFilter:r,handleFilterToggle:o,currentLanguage:a="de"})=>s("div",{className:"filter-container",children:[s(Ce,{children:t&&s(T.div,{className:"filter-groups",variants:Q5,initial:"initial",animate:"animate",exit:"exit",children:[s(T.div,{className:"filter-group",variants:Hs,initial:"initial",animate:Hs.animate(.1),exit:"exit",children:[s(T.button,{className:`filter-button ${e==="grid"?"active":""}`,onClick:()=>n("grid"),title:ee("tooltips.gridView",a)||"Kachelansicht",whileHover:Pt.hover,whileTap:Pt.tap,animate:e==="grid"?"active":"inactive",variants:Cn,children:s(oS,{})}),s(T.button,{className:`filter-button ${e==="list"?"active":""}`,onClick:()=>n("list"),title:ee("tooltips.listView",a)||"Listenansicht",whileHover:Pt.hover,whileTap:Pt.tap,animate:e==="list"?"active":"inactive",variants:Cn,children:s(aS,{})})]}),s(T.div,{className:"filter-group",variants:Hs,initial:"initial",animate:Hs.animate(.2),exit:"exit",children:[s(T.button,{className:`filter-button ${i==="categories"?"active":""}`,onClick:()=>r("categories"),title:ee("tooltips.filterCategories",a)||"Nach Kategorien filtern",whileHover:Pt.hover,whileTap:Pt.tap,animate:i==="categories"?"active":"inactive",variants:Cn,children:s(lS,{})}),s(T.button,{className:`filter-button ${i==="areas"?"active":""}`,onClick:()=>r("areas"),title:ee("tooltips.filterAreas",a)||"Nach Rumen filtern",whileHover:Pt.hover,whileTap:Pt.tap,animate:i==="areas"?"active":"inactive",variants:Cn,children:s(cS,{})}),s(T.button,{className:`filter-button ${i==="types"?"active":""}`,onClick:()=>r("types"),title:ee("tooltips.filterTypes",a)||"Nach Typen filtern",whileHover:Pt.hover,whileTap:Pt.tap,animate:i==="types"?"active":"inactive",variants:Cn,children:s(dS,{})})]})]})}),s(T.button,{className:`filter-main-button${t?" active":""}`,variants:Y5,initial:"inactive",animate:t?"active":"inactive",onClick:o,whileHover:"hover",whileTap:"tap",title:ee("tooltips.toggleFilter",a)||"Filter ffnen/schlieen",children:s(uS,{})})]}),I0=({groupedData:t,isEmpty:e=!1,searchValue:i="",activeFilter:n,setSelectedDevice:r,setShowDetail:o,isExpanded:a,setIsExpanded:l,setAnimationKey:c,recordUserAction:d,currentLanguage:u,animationKey:h,isPanelAnimationComplete:m})=>{if(e)return s("div",{className:"grouped-search-results",children:s("div",{className:"empty-state",children:[s("div",{style:{fontSize:"32px",opacity:.5},children:""}),s("h3",{style:{fontSize:"16px",fontWeight:600,color:"var(--text-primary)",margin:0},children:ee("search.noResults",u,{term:i})}),s("p",{style:{fontSize:"13px",opacity:.7,margin:0},children:ee("search.tryDifferent",u)})]})});if(!t||!t.rooms)return null;const f=(g,p)=>{console.log(" GroupedDeviceList onClick:",{entity_id:g.entity_id,domain:g.domain,is_system:g.is_system,is_plugin:g.is_plugin,fullDevice:g});let v=null;if(p&&p.currentTarget){const b=p.currentTarget.getBoundingClientRect();v={top:b.top,left:b.left,width:b.width,height:b.height,centerX:b.left+b.width/2,centerY:b.top+b.height/2},console.log(" Card position captured:",v)}r({...g,_cardPosition:v}),o(!0),a||(l(!0),c(`back-${Date.now()}`)),d&&typeof d=="function"&&d("device_click",g.entity_id||g.id)};return s("div",{className:"grouped-search-results",children:t.rooms.map((g,p)=>{const v=t.devicesByRoom[g],b=t.rooms.map(y=>t.devicesByRoom[y].length);return s("div",{className:"search-group",children:[s("h3",{className:"search-group-title",children:g}),s("div",{className:`${n==="list"?"device-list-container":"device-grid-container"}`,children:v.map((y,w)=>s(qg,{device:y,viewMode:n,onClick:_=>f(y,_),index:w,lang:u,animationKey:h,roomIndex:p,itemsPerRoom:b,isPanelAnimationComplete:m},y.id))})]},g)})})},mS=({aiMode:t,searchValue:e,suggestionText:i,showCategories:n,hoveredCategory:r,activeCategory:o,currentLanguage:a,isExpanded:l,isFilterOpen:c,aiModeEnabled:d,categoryIcons:u,setAiMode:h,setAiResponse:m,setIsAiLoading:f,setIsExpanded:g,setIsCategoryHovered:p,setSuggestionText:v,setAnimationKey:b,handleSearchInput:y,handleKeyDown:w,handleSearchFocus:_,handleClear:k,handleCategoryClick:N})=>{const C=A=>{h(!1),m(""),f(!1),g(!1),p(!1),setTimeout(()=>{p(!1)},10)},S=A=>{N(),p(!1),setTimeout(()=>{p(!1)},10)},x=A=>{A.stopPropagation(),console.log(" AI-Mode Button clicked"),g(!0),h(!0),v(""),b(`ai-mode-${Date.now()}`)},B=A=>{A.stopPropagation(),A.preventDefault(),!l&&!t&&(g(!0),b(`expand-${Date.now()}`))};return s(ve,{children:[s("div",{className:`category-icon ${t?"ai-active":""}`,onClick:t?C:S,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),title:t?"AI-Modus beenden":"",children:t?s(ve,{children:[s("div",{className:"default-icon",children:s(F0,{})}),s(P0,{className:"chevron-icon"})]}):s(ve,{children:[s("div",{className:"default-icon",children:n&&r?u[r]():u[o]()}),s(P0,{className:"chevron-icon"})]})}),s("div",{className:"search-input-container",children:[s("input",{type:"text",className:"search-suggestion",value:i,readOnly:!0,tabIndex:"-1","aria-hidden":"true"}),s("input",{type:"text",className:"search-input",placeholder:Z8({aiMode:t,showCategories:n,hoveredCategory:r,activeCategory:o,currentLanguage:a}),value:e,onChange:y,onKeyDown:w,onFocus:_,onClick:B})]}),s(Ce,{children:e&&s(T.button,{className:"clear-button",onClick:k,variants:$s,initial:"initial",animate:{...$s.animate,x:c?-260:0},exit:"exit",whileHover:yu.hover,whileTap:yu.tap,children:s(rS,{})})}),s(Ce,{children:e&&!t&&d&&s(T.button,{className:"ai-mode-button",onClick:x,title:"AI-Modus aktivieren",variants:$s,initial:"initial",animate:{...$s.animate,x:c?-260:0},exit:"exit",whileHover:gu.hover,whileTap:gu.tap,children:s(F0,{})})})]})},fS=({handleGenerateTestData:t,predictiveSuggestions:e})=>window.location.hostname!=="localhost"?null:s("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:9999,display:"flex",gap:"10px",flexDirection:"column",alignItems:"flex-end"},children:[s("button",{onClick:t,style:{padding:"10px 20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",boxShadow:"0 4px 15px rgba(0,0,0,0.2)"},children:" Generate Test Patterns"}),s("div",{style:{padding:"10px",background:"rgba(0,0,0,0.8)",color:"white",borderRadius:"10px",fontSize:"12px"},children:[s("div",{children:["Predictive Suggestions: ",e.length]}),s("div",{style:{fontSize:"10px",opacity:.7},children:"Refresh in 5min or click button"})]})]}),pS=({showCategories:t,categoryIcons:e,activeCategory:i,handleCategorySelect:n,setHoveredCategory:r})=>s(Ce,{children:t&&s(T.div,{className:"category-buttons-container",variants:ew,initial:"hidden",animate:"visible",exit:"hidden",children:s("div",{className:"category-buttons",children:Object.entries(e).map(([o,a])=>{const l=i===o;return s(T.button,{className:`category-button glass-panel ${l?"active":""}`,onClick:()=>n(o),onMouseEnter:()=>r(o),onMouseLeave:()=>r(null),title:o.charAt(0).toUpperCase()+o.slice(1),variants:Z5,whileHover:l?{}:vu.hover,whileTap:vu.tap,animate:q5(l),style:{color:l?"rgba(0, 0, 0, 0.85)":"rgba(255, 255, 255, 0.9)"},children:a()},o)})})})}),gS=({aiMode:t,isExpanded:e,centralPanelVariants:i,searchValue:n,sendToAI:r,aiResponse:o,isAiLoading:a,handleAISuggestionClick:l,searchPanelRef:c,aiSubmitTrigger:d,currentLanguage:u})=>{const h={collapsed:{height:0,opacity:0,transition:{duration:.4,ease:[.16,1,.3,1]}},expanded:{height:600,opacity:1,transition:{duration:.4,ease:[.16,1,.3,1]}}};return s(Ce,{children:t&&s(T.div,{initial:"collapsed",animate:"expanded",exit:"collapsed",variants:h,style:{position:"absolute",top:"72px",left:0,right:0,zIndex:1e3,pointerEvents:"auto",overflow:"hidden"},children:s(U8,{searchValue:n,onSend:r,response:o,isLoading:a,onSuggestionClick:l,containerBounds:c.current?c.current.getBoundingClientRect():null,onSubmit:d,lang:u})})})},vS=({showDetail:t,selectedDevice:e,setShowDetail:i,setAnimationKey:n,toggleFavorite:r,recordUserAction:o,favorites:a,currentLanguage:l,initialTab:c,devices:d,setSelectedDevice:u,setInitialTab:h,hass:m,isMobile:f,position:g,hasAppeared:p,statsBarEnabled:v})=>{const[b,y]=M(!1);U(()=>{t&&y(!0)},[t]);const w=()=>{y(!1),setTimeout(()=>{i(!1),n(`back-${Date.now()}`)},400)},_=x=>{r(x),o("toggle_favorite",x)},k=async(x,B,A)=>{if(!m)return console.warn("Home Assistant not available"),Promise.reject("Home Assistant not available");try{const P=await op(m,x,B,A);return console.log(`Service call successful: ${x}.${B}`,A),P}catch(P){throw console.error(`Service call failed: ${x}.${B}`,P),P}},N=(x,B)=>{console.log("[SearchField] onActionNavigate received:",x,"Params:",B);let A=null;if(typeof x=="string"){if(console.log(`[SearchField] Finding device by ID: ${x}`),A=d.find(I=>I.entity_id===x||I.id===x),!A){console.error(`[SearchField] Could not find device with ID: ${x}`);return}}else typeof x=="object"&&x!==null&&(console.log("[SearchField] Received device/action object:",x),x.type&&["scene","script","automation"].includes(x.type)?A={id:x.id,entity_id:x.id,domain:x.type,name:x.name,area:x.area,state:"ready",attributes:{friendly_name:x.name,icon:x.icon}}:A={id:x.entity_id||x.id,entity_id:x.entity_id,domain:x.domain,name:x.attributes?.friendly_name||x.name,area:x.area,state:x.state,attributes:x.attributes});if(!A){console.error("[SearchField] Could not determine target device from:",x);return}const P=B?.openTab||null;console.log(`[SearchField] Setting device: ${A.name}, initial tab: ${P}`),u(A),h(P),t||i(!0),o("navigation",{target:A.entity_id||A.id,initialTab:P})},C=v?f?45:47:0,S=g==="centered"?f?60:120:0;return s(ve,{children:t&&s(T.div,{className:"detail-panel-wrapper",style:{top:`${C}px`},initial:{y:0,opacity:0},animate:{y:p?S:0,opacity:p?1:0},transition:{y:{type:"spring",stiffness:260,damping:20,mass:.8},opacity:{duration:.3,ease:[.16,1,.3,1]}},children:s(k6,{item:{entity_id:e?.id||e?.entity_id,id:e?.id,domain:e?.domain,name:e?.name,area:e?.area,state:e?.state,attributes:e?.attributes||{friendly_name:e?.name}},isVisible:b,onBack:w,onToggleFavorite:_,onServiceCall:k,isFavorite:a.has(e?.entity_id)||a.has(e?.id),lang:l,initialTabName:c,onActionNavigate:N,hass:m})})})},yS=()=>{const{isInitialized:t,isLoading:e,recordUserAction:i,generateTestPatterns:n}=At(),[r]=sc(),[o,a]=Tw(),[l,c]=fp(),[d,u,h]=Dw(),[m]=Ew(),f=r||[],g=sS(l),{isExpanded:p,setIsExpanded:v,isPanelAnimationComplete:b,setIsPanelAnimationComplete:y,searchValue:w,setSearchValue:_,isFilterOpen:k,setIsFilterOpen:N,activeCategory:C,setActiveCategory:S,showCategories:x,setShowCategories:B,activeFilter:A,setActiveFilter:P,activeSubFilter:I,setActiveSubFilter:z,selectedSubcategory:D,setSelectedSubcategory:L,subcategoryPerCategory:E,setSubcategoryPerCategory:W,isMobile:F,setIsMobile:K,showDetail:G,setShowDetail:$,initialTab:Q,setInitialTab:re,selectedDevice:he,setSelectedDevice:O,containerRef:H,searchPanelRef:X,resultsRef:me,isExpandedRef:q,showDetailRef:ce,suggestionText:ie,setSuggestionText:J,hoveredCategory:Y,setHoveredCategory:oe,setIsCategoryHovered:ae,aiMode:V,setAiMode:ne,aiResponse:Z,setAiResponse:se,isAiLoading:R,setIsAiLoading:j,aiSubmitTrigger:le,setAiSubmitTrigger:ye,aiModeEnabled:be,setAiModeEnabled:de,animationKey:pe,setAnimationKey:Le,currentLanguage:Fe,setCurrentLanguage:Ae}=g,[bi,ko]=M(!1),[Ft,Lc]=M("centered"),[qi,n1]=M(!1),[Ps,s1]=M(()=>{try{const Re=JSON.parse(localStorage.getItem("systemSettings")||"{}").appearance||{};return{enabled:Re.statsBarEnabled!==!1,username:Re.statsBarUsername||"User"}}catch{return{enabled:!0,username:"User"}}}),[r1,o1]=M(()=>{try{return{enabled:(JSON.parse(localStorage.getItem("systemSettings")||"{}").appearance||{}).greetingsBarEnabled!==!1}}catch{return{enabled:!0}}});U(()=>{const ge=Re=>{s1(wi=>({...wi,enabled:Re.detail}))};return window.addEventListener("statsBarEnabledChanged",ge),()=>window.removeEventListener("statsBarEnabledChanged",ge)},[]),U(()=>{const ge=Re=>{o1(wi=>({...wi,enabled:Re.detail}))};return window.addEventListener("greetingsBarEnabledChanged",ge),()=>window.removeEventListener("greetingsBarEnabledChanged",ge)},[]),U(()=>{const ge=setTimeout(()=>{n1(!0)},100);return()=>clearTimeout(ge)},[]);const Mc=te(p);U(()=>{const ge=Mc.current;Mc.current=p,ge&&!p&&!x&&Ft==="top"&&setTimeout(()=>{Lc("centered")},400)},[p,x,Ft]);const a1=ge=>{ge&&(window.__fastSearchToastContainer=ge)},{setSearchTerm:_o,results:_n,getSuggestions:l1}=c8(f);l1(w,5);const c1=q8({setSearchValue:_,setFuzzySearchTerm:_o,aiMode:V,devices:f,setSuggestionText:J,isExpanded:p,setIsExpanded:v,setAnimationKey:Le}),d1=X8({searchValue:w,setAiMode:ne,setSuggestionText:J,setIsExpanded:v,setAnimationKey:Le,suggestionText:ie,setSearchValue:_,setFuzzySearchTerm:_o,aiMode:V,setAiSubmitTrigger:ye,setAiResponse:se,setIsAiLoading:j}),Tc=J8({aiMode:V,isExpanded:p,setIsExpanded:v,setAnimationKey:Le,setShowCategories:B,searchPanelRef:X}),u1=(...ge)=>{Ft==="centered"?(Lc("top"),Tc(...ge)):Tc(...ge)},h1=Q8({setSearchValue:_,setSuggestionText:J,setFuzzySearchTerm:_o,aiMode:V,setAiMode:ne,setAiResponse:se,setIsAiLoading:j}),m1=eS({setIsExpanded:v,setShowCategories:B,showCategories:x,setIsCategoryHovered:ae}),f1=tS({activeCategory:C,setShowCategories:B,subcategoryPerCategory:E,setSelectedSubcategory:L,setActiveCategory:S,setIsExpanded:v,setAnimationKey:Le}),p1=iS({setIsFilterOpen:N,isFilterOpen:k}),g1=nS({setSelectedSubcategory:L,setSubcategoryPerCategory:W,activeCategory:C,setAnimationKey:Le});U(()=>{const ge=E[C]||"all";L(ge)},[C]),U(()=>{const ge=()=>{K(window.innerWidth<=768)};return ge(),window.addEventListener("resize",ge),()=>window.removeEventListener("resize",ge)},[]),U(()=>{if(pe){const ge=setTimeout(()=>{Le("")},3e3);return()=>clearTimeout(ge)}},[pe]);const v1=async()=>{window.location.hostname==="localhost"&&(await n(),await h())};U(()=>{const ge=Re=>{de(Re.detail.enabled),c("aiModeEnabled",Re.detail.enabled)};return window.addEventListener("aiModeSettingChanged",ge),()=>{window.removeEventListener("aiModeSettingChanged",ge)}},[c]),U(()=>{q.current=p,ce.current=G},[p,G]),U(()=>{V&&(console.log(" AI-Mode aktiviert - Panel wird expanded"),v(!0))},[V]),U(()=>{const ge=Re=>{Ae(Re.detail.language),c("language",Re.detail.language)};return window.addEventListener("languageChanged",ge),()=>{window.removeEventListener("languageChanged",ge)}},[c]),U(()=>{const ge=Re=>{if(ce.current||!q.current)return;const wi=Re.composedPath();H.current&&!wi.includes(H.current)&&v(!1)};return document.addEventListener("click",ge,!0),()=>{document.removeEventListener("click",ge,!0)}},[]);const y1=async ge=>{j(!0),setTimeout(()=>{const Re=["Ich habe alle Lichter im Wohnzimmer ausgeschaltet. Es waren 3 Lichter aktiv.","Die Temperatur im Schlafzimmer betrgt aktuell 21C. Die Heizung ist auf 22C eingestellt.",`Ich habe eine neue Szene "${ge}" erstellt mit gedimmtem Licht und entspannter Atmosphre.`,"Folgende Gerte verbrauchen aktuell Strom: Khlschrank (85W), TV Wohnzimmer (120W), Router (15W).","Die Haustr ist seit 15:30 Uhr verschlossen. Alle Fenster sind ebenfalls geschlossen."],wi=Re[Math.floor(Math.random()*Re.length)];se(wi),j(!1)},1500)},b1=ge=>{_(ge),setTimeout(()=>{ye(Re=>Re+1)},50)},Is=Me(()=>G8({searchValue:w,fuzzyResults:_n,devices:f,activeCategory:C,selectedSubcategory:D,activeSubFilter:I,favorites:o,predictiveSuggestions:d}),[w,_n,f,C,D,I,o,d]),Ec=Me(()=>K8({searchValue:w,fuzzyResults:_n,currentLanguage:Fe}),[w,_n,Fe]),xo=Me(()=>Y8({searchValue:w,filteredDevices:Is,selectedSubcategory:D,currentLanguage:Fe,favorites:o,predictiveSuggestions:d}),[w,Is,D,Fe,o,d]);U(()=>{window.DEBUG_groupedFilteredDevices=xo,window.DEBUG_filteredDevices=Is,window.DEBUG_activeCategory=C,window.DEBUG_selectedSubcategory=D,window.DEBUG_isExpanded=p,window.DEBUG_showDetail=G},[xo,Is,C,D,p,G,w]),Me(()=>!o||o.size===0?[]:f.filter(ge=>o.has(ge.entity_id)||o.has(ge.id)),[o,f]);const w1=Me(()=>{if(!f||f.length===0)return null;const ge=f.filter(Re=>Re.domain==="weather"&&Re.entity_id!=="weather.system"&&Re.attributes&&(Re.attributes.temperature!==void 0||Re.attributes.current_temperature!==void 0));return console.log(" Found weather entities:",ge.map(Re=>({id:Re.entity_id,temp:Re.attributes?.temperature||Re.attributes?.current_temperature,state:Re.state}))),ge[0]||null},[f]),k1=Me(()=>f.find(ge=>ge.entity_id?.includes("power")||ge.entity_id?.includes("energy")||ge.domain==="sensor"&&(ge.name?.toLowerCase().includes("power")||ge.name?.toLowerCase().includes("energy")))||null,[f]),_1=0;return!t&&f.length===0?s("div",{style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px"},children:s("div",{className:"glass-panel",style:{padding:"20px 40px",borderRadius:"35px",background:"radial-gradient(circle at 50% 0%, rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.15) 70%), rgba(40, 40, 40, 0.85)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)",color:"rgba(255, 255, 255, 0.7)",fontSize:"16px"},children:e?s("span",{children:[" ",ee("general.loading",Fe)||"Lade Gerte..."]}):s("span",{children:[" ",ee("general.initializing",Fe)||"Initialisiere..."]})})}):s("div",{style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',background:window.location.hostname==="localhost"?"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)":"transparent",minHeight:window.location.hostname==="localhost"?"100vh":"auto",padding:window.location.hostname==="localhost"?"40px 20px":"0",position:"relative"},children:[s("div",{id:"toast-container",ref:a1}),s("div",{className:"main-container",ref:H,children:[s(fS,{handleGenerateTestData:v1,predictiveSuggestions:d}),s(_6,{username:Ps.username,weatherEntity:w1,powerEntity:k1,hass:m,notificationCount:_1,show:Ps.enabled,isMobile:F,position:Ft,hasAppeared:qi}),s(x6,{username:m?.user?.name||Ps.username,show:r1.enabled,isExpanded:p||Ft==="top",currentLanguage:Fe,isMobile:F,position:Ft,hasAppeared:qi}),s("div",{className:"search-row",children:[s(T.div,{className:`search-panel glass-panel ${G?"hidden":""} ${V?"ai-mode":""}`,ref:X,initial:{height:F?57:72,y:0,opacity:0},animate:{height:p||V?672:F?57:72,y:qi&&Ft==="centered"?F?60:120:0,opacity:qi?1:0,boxShadow:Ft==="centered"?"0 8px 32px rgba(0, 0, 0, 0.12)":"0 20px 60px rgba(0, 0, 0, 0.25)"},transition:{height:{duration:.4,ease:[.16,1,.3,1]},y:{type:"spring",stiffness:260,damping:20,mass:.8},opacity:{duration:.6,ease:[.16,1,.3,1]},boxShadow:{duration:.4,ease:[.16,1,.3,1]}},children:[s("div",{className:"search-wrapper",children:[s(mS,{aiMode:V,searchValue:w,suggestionText:ie,showCategories:x,hoveredCategory:Y,activeCategory:C,currentLanguage:Fe,isExpanded:p,isFilterOpen:k,aiModeEnabled:be,categoryIcons:A0,setAiMode:ne,setAiResponse:se,setIsAiLoading:j,setIsExpanded:v,setIsCategoryHovered:ae,setSuggestionText:J,setAnimationKey:Le,handleSearchInput:c1,handleKeyDown:d1,handleSearchFocus:u1,handleClear:h1,handleCategoryClick:m1}),!V&&s(hS,{isFilterOpen:k,activeFilter:A,activeSubFilter:I,setActiveFilter:P,setActiveSubFilter:z,handleFilterToggle:p1,currentLanguage:Fe})]}),s(gS,{aiMode:V,isExpanded:p,centralPanelVariants:pu,searchValue:w,sendToAI:y1,aiResponse:Z,isAiLoading:R,handleAISuggestionClick:b1,searchPanelRef:X,aiSubmitTrigger:le,currentLanguage:Fe}),s(T.div,{ref:me,className:"results-container",initial:"collapsed",animate:p?"expanded":"collapsed",variants:pu,onAnimationComplete:()=>{y(!!p)},onMouseEnter:()=>ko(!0),onMouseLeave:()=>ko(!1),style:{display:V?"none":p?"block":"none"},children:s(ve,{children:[p&&!w&&s("div",{style:{marginBottom:"16px"},children:[" ",s(hw,{activeCategory:C,items:f.filter(ge=>C==="devices"?!["script","automation","scene","sensor","binary_sensor","settings","marketplace"].includes(ge.domain):C==="sensors"?["sensor","binary_sensor"].includes(ge.domain):C==="actions"?["script","automation","scene"].includes(ge.domain):C==="custom"?["settings","marketplace"].includes(ge.domain):!1).map(ge=>({...ge,isFavorite:o.has(ge.entity_id)||o.has(ge.id)})),mode:I==="areas"?"areas":"categories",onSubcategoryChange:g1,lang:Fe,activeSubcategory:D,suggestions:d,hasSuggestions:d.length>0})]}),w&&Ec?s(I0,{groupedData:Ec,isEmpty:_n.length===0,searchValue:w,activeFilter:A,setSelectedDevice:O,setShowDetail:$,isExpanded:p,setIsExpanded:v,setAnimationKey:Le,recordUserAction:i,currentLanguage:Fe,animationKey:pe,isPanelAnimationComplete:b}):w?null:s(I0,{groupedData:xo,activeFilter:A,setSelectedDevice:O,setShowDetail:$,isExpanded:p,setIsExpanded:v,setAnimationKey:Le,recordUserAction:i,currentLanguage:Fe,animationKey:pe,isPanelAnimationComplete:b})]})}),s(Pe,{scrollContainerRef:me,isHovered:bi})]}),s(T.div,{animate:{y:qi&&Ft==="centered"?F?60:120:0},transition:{y:{duration:.3,ease:[.16,1,.3,1]}},children:s(pS,{showCategories:x,categoryIcons:A0,activeCategory:C,handleCategorySelect:f1,setHoveredCategory:oe})})]}),s(vS,{showDetail:G,selectedDevice:he,setShowDetail:$,setAnimationKey:Le,toggleFavorite:a,recordUserAction:i,favorites:o,currentLanguage:Fe,initialTab:Q,devices:f,setSelectedDevice:O,setInitialTab:re,hass:m,isMobile:F,position:Ft,hasAppeared:qi,statsBarEnabled:Ps.enabled})]})]})},bS=typeof window<"u"&&window.location?.hostname==="localhost";let zr=[];bS?(zr=[{entity_id:"light.test_device",domain:"light",name:"Test Light",area:"Test Room",state:"on",attributes:{brightness:180,friendly_name:"Test Light",supported_features:1},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()}],console.log("[MockDevices] Development mode - loaded mock data")):console.log("[MockDevices] Production mode - no mock data");const wS=()=>{const{db:t,isInitialized:e}=At();U(()=>{e&&i()},[e]);const i=async()=>{try{const r=(await t.getAll("entities")).some(o=>o.entity_id==="light.test_device");if(!r&&zr.length>0){console.log(`[MockDataMigration] Adding ${zr.length} mock devices...`);for(const o of zr)await t.put("entities",{...o,entity_id:o.entity_id||o.id});console.log("[MockDataMigration] Mock devices added successfully!"),window.location.reload()}else console.log(r?"[MockDataMigration] Mock device already exists":"[MockDataMigration] No mock devices to add")}catch(n){console.error("[MockDataMigration] Error migrating mock data:",n)}};return null},R0=["","","","","",""],br=[{step:"Initializing...",progress:0},{step:"Loading Settings...",progress:25},{step:"DataProvider...",progress:50},{step:"FramerMotion...",progress:75},{step:"Ready...",progress:100}],kS=({progress:t,isComplete:e})=>{const[i,n]=M(0),[r,o]=M(!0),a=()=>{for(let l=br.length-1;l>=0;l--)if(t>=br[l].progress)return br[l].step;return br[0].step};return U(()=>{const l=setInterval(()=>{n(c=>{let d=c,u=r;return c>=R0.length-1?(u=!1,d=c-1):c<=0?(u=!0,d=c+1):d=u?c+1:c-1,o(u),d})},250);return()=>clearInterval(l)},[r]),s(Ce,{children:!e&&s(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:[.4,0,.2,1]},style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.4)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",zIndex:999999},children:[s("style",{children:`
            .loading-container {
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 40px;
              width: 100%;
              max-width: 400px;
              padding: 0 20px;
            }

            .thinking-text-container {
              display: flex;
              align-items: center;
              gap: 8px;
              font-family: "SF Mono", "Monaco", "Courier New", Courier, monospace;
            }

            .thinking-symbol {
              color: rgba(255, 255, 255, 0.8);
              font-size: 24px;
              line-height: 1.5em;
              height: 1.5em;
              text-align: center;
              min-width: 24px;
            }

            .thinking-step {
              color: rgba(255, 255, 255, 0.8);
              font-size: 16px;
              line-height: 1.5em;
              height: 1.5em;
              white-space: nowrap;
            }

            .progress-bar-container {
              width: 100%;
              max-width: 400px;
              height: 4px;
              border-radius: 4px;
              background: rgba(255, 255, 255, 0.2);
              overflow: hidden;
            }

            .progress-bar-fill {
              height: 100%;
              background: rgba(255, 255, 255, 0.9);
              border-radius: 4px;
              transition: width 0.4s cubic-bezier(0.4, 0.0, 0.2, 1.0);
            }
          `}),s("div",{className:"loading-container",children:[s("div",{className:"thinking-text-container",children:[s("span",{className:"thinking-symbol",children:R0[i]}),s("span",{className:"thinking-step",children:a()})]}),s("div",{className:"progress-bar-container",children:s("div",{className:"progress-bar-fill",style:{width:`${t}%`}})})]})]})})},_S=()=>{const[t,e]=M("auto"),[i,n]=M(0),[r,o]=M("black");U(()=>{const l=localStorage.getItem("darkMode")||"auto";e(l),a(l);const c=d=>{const u=d.detail.mode;e(u),a(u)};return window.addEventListener("darkModeChanged",c),()=>window.removeEventListener("darkModeChanged",c)},[]);const a=l=>{let c=0,d="black";if(l==="dark")c=.4,d="black";else if(l==="light")c=.2,d="white";else if(l==="auto"){const u=new Date().getHours();u>=20||u<6?(c=.4,d="black"):(c=0,d="black")}n(c),o(d)};return s("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:r,opacity:i,pointerEvents:"none",zIndex:0,backdropFilter:t!=="auto"||i>0?"blur(8px)":"none",WebkitBackdropFilter:t!=="auto"||i>0?"blur(8px)":"none",transition:"opacity 0.5s ease, background 0.5s ease, backdrop-filter 0.5s ease"}})};function vl({hass:t,config:e}){const i=!t&&window.location.hostname==="localhost",[n,r]=M(0),[o,a]=M(!1);return U(()=>{(async()=>{try{r(0),await new Promise(d=>setTimeout(d,500)),r(25);const c=localStorage.getItem("systemSettings");if(c){const u=JSON.parse(c).appearance||{},h=u.gridColumns||4;document.documentElement.style.setProperty("--device-grid-columns",h);const m=u.squircleStyle||"none";if(m!=="none"){const{getSquircleClipPath:y}=await $e(async()=>{const{getSquircleClipPath:_}=await Promise.resolve().then(()=>GC);return{getSquircleClipPath:_}},void 0),w=y(m);w&&document.documentElement.style.setProperty("--card-clip-path",w)}const f=u.backgroundBrightness||100,g=u.backgroundBlur||0,p=u.backgroundContrast||100,v=u.backgroundSaturation||100,b=u.backgroundGrayscale||0;document.documentElement.style.setProperty("--background-brightness",`${f}%`),document.documentElement.style.setProperty("--background-blur",`${g}px`),document.documentElement.style.setProperty("--background-contrast",`${p}%`),document.documentElement.style.setProperty("--background-saturation",`${v}%`),document.documentElement.style.setProperty("--background-grayscale",`${b}%`)}await new Promise(d=>setTimeout(d,1e3)),r(50),await new Promise(d=>setTimeout(d,1e3)),r(75),await new Promise(d=>setTimeout(d,1e3)),r(100),await new Promise(d=>setTimeout(d,1500)),a(!0)}catch(c){console.error("Failed to load app:",c),r(100),a(!0)}})()},[]),s(ve,{children:[s(kS,{progress:n,isComplete:o}),s(_S,{}),s(Mw,{hass:t,config:e,children:[i&&s(wS,{}),s("div",{style:{position:"relative",width:"100%",background:"transparent",opacity:o?1:0,transition:"opacity 0.4s cubic-bezier(0.4, 0.0, 0.2, 1.0)"},children:s(yS,{})})]})]})}document.getElementById("app")&&_r(s(vl,{}),document.getElementById("app"));typeof window<"u"&&(window.FastSearchCardApp={mount:function(t,e,i){console.log("[FastSearchCardApp] Mounting Preact app..."),t.innerHTML="";const n=document.createElement("div");n.id="fast-search-card-root",n.style.width="100%",n.style.height="672px",n.style.minHeight="672px",t.appendChild(n),t.__fastSearchCardRoot=n,_r(s(vl,{hass:e,config:i}),n),console.log("[FastSearchCardApp] Preact app mounted")},updateHass:function(t,e){const i=t.__fastSearchCardRoot;i?_r(s(vl,{hass:e,config:t.__config}),i):console.warn("[FastSearchCardApp] No root element found for update")},unmount:function(t){console.log("[FastSearchCardApp] Unmounting...");const e=t.__fastSearchCardRoot;e&&(_r(null,e),t.removeChild(e),delete t.__fastSearchCardRoot,delete t.__config),console.log("[FastSearchCardApp] Unmounted")}},console.log("[FastSearchCardApp] Interface registered globally"));class Xg extends rt{constructor(){super({id:"settings",domain:"settings",name:"Einstellungen",icon:"mdi:cog",brandColor:"rgb(0, 145, 255)",category:"system",description:"Konfiguriere deine Fast Search Card",relevance:100,attributes:{sections:["general","appearance","privacy","about"],version:"1.2.0",buildDate:"2025.10.22"},permissions:["settings:read","settings:write","storage:manage","plugins:manage"],routes:{general:"/settings/general",appearance:"/settings/appearance",privacy:"/settings/privacy",about:"/settings/about",excludedPatterns:"/settings/privacy/excluded-patterns"},actions:{getSetting:async function(e){const{key:i}=e,n=this.getStorage();return n?await n.get(i):localStorage.getItem(i)},setSetting:async function(e){const{key:i,value:n}=e,r=this.getStorage();if(!r){localStorage.setItem(i,n);return}await r.set(i,n),window.dispatchEvent(new CustomEvent("settingChanged",{detail:{key:i,value:n}}))},getAllSettings:async function(){return{darkMode:localStorage.getItem("darkMode")||"auto",language:localStorage.getItem("userLanguage")||"de",aiModeEnabled:localStorage.getItem("aiModeEnabled")!=="false",notifications:localStorage.getItem("notificationsEnabled")!=="false",soundEffects:localStorage.getItem("soundEffects")!=="false",animations:localStorage.getItem("animations")!=="false",excludedPatterns:(()=>{try{const i=localStorage.getItem("excludedPatterns");return i?JSON.parse(i):[]}catch{return[]}})(),version:this.attributes.version,buildDate:this.attributes.buildDate}},resetSettings:async function(e){const{section:i}=e;i==="all"?(["darkMode","userLanguage","aiModeEnabled","notificationsEnabled","soundEffects","animations","excludedPatterns"].forEach(r=>{localStorage.removeItem(r)}),console.log(" All settings reset to defaults")):console.log(` Reset settings for section: ${i}`),window.dispatchEvent(new CustomEvent("settingsReset",{detail:{section:i}}))},addExcludedPattern:async function(e){const{pattern:i}=e;try{const n=localStorage.getItem("excludedPatterns"),r=n?JSON.parse(n):[];r.includes(i)||(r.push(i),localStorage.setItem("excludedPatterns",JSON.stringify(r)),console.log(` Added excluded pattern: ${i}`))}catch(n){throw console.error("Failed to add excluded pattern:",n),n}},removeExcludedPattern:async function(e){const{pattern:i}=e;try{const n=localStorage.getItem("excludedPatterns"),r=n?JSON.parse(n):[],o=r.indexOf(i);o>-1&&(r.splice(o,1),localStorage.setItem("excludedPatterns",JSON.stringify(r)),console.log(` Removed excluded pattern: ${i}`))}catch(n){throw console.error("Failed to remove excluded pattern:",n),n}}},hasTabs:!0,hasCustomView:!1,showInDetailView:!0,viewComponent:()=>$e(()=>Promise.resolve().then(()=>VS),void 0)})}async onMount(e){await super.onMount(e),console.log(" Settings Entity mounted with special initialization"),!localStorage.getItem("fastSearchCardInitialized")&&await this._initializeDefaults(),await this._checkVersionAndMigrate()}async _initializeDefaults(){console.log(" First use detected, initializing defaults...");const e={darkMode:"auto",userLanguage:navigator.language.split("-")[0]||"de",aiModeEnabled:"true",notificationsEnabled:"true",soundEffects:"true",animations:"true",excludedPatterns:JSON.stringify([".*_battery_level$",".*_rssi$",".*_linkquality$"])};Object.entries(e).forEach(([i,n])=>{localStorage.getItem(i)||localStorage.setItem(i,n)}),localStorage.setItem("fastSearchCardInitialized","true"),localStorage.setItem("fastSearchCardVersion",this.attributes.version)}async _checkVersionAndMigrate(){const e=localStorage.getItem("fastSearchCardVersion"),i=this.attributes.version;e!==i&&(console.log(` Version change detected: ${e}  ${i}`),localStorage.setItem("fastSearchCardVersion",i))}}const B0=new Xg,xS=Object.freeze(Object.defineProperty({__proto__:null,SettingsEntity:Xg,default:B0,settingsEntity:B0},Symbol.toStringTag,{value:"Module"}));class CS{constructor(){this.loadedModules=new Map,this.loadingPromises=new Map}async loadFromPath(e){if(this.loadedModules.has(e))return this.loadedModules.get(e);if(this.loadingPromises.has(e))return this.loadingPromises.get(e);const i=this._loadModule(e);this.loadingPromises.set(e,i);try{const n=await i;return this.loadedModules.set(e,n),this.loadingPromises.delete(e),n}catch(n){throw this.loadingPromises.delete(e),n}}async _loadModule(e){try{console.log(` Loading entity from: ${e}`);const i=await import(e);let n=i.default||i.entity||i;return typeof n=="function"&&!(n.prototype instanceof rt)&&(n=n()),n instanceof rt||(n=new rt(n)),_e.register(n),console.log(` Loaded entity: ${n.id}`),n}catch(i){throw console.error(` Failed to load entity from ${e}:`,i),i}}async loadPluginFromURL(e){try{console.log(` Loading plugin from URL: ${e}`);let i=null;const n=e.replace(/\.js$/,".manifest.json");try{const a=await fetch(n);a.ok&&(i=await a.json())}catch{console.warn("No separate manifest found, will try to extract from plugin")}const r=await import(e),o=r.default||r;return i||(i=o.manifest||r.manifest),i||(i={id:`plugin-${Date.now()}`,name:"Unknown Plugin",version:"0.0.0",system_entity:{domain:`plugin${Date.now()}`,icon:"mdi:puzzle"},files:{main:e.split("/").pop()}}),this.validateManifest(i)||console.warn("Invalid manifest, using with defaults"),await _e.registerPlugin(o,i),console.log(` Loaded plugin: ${i.id} v${i.version}`),{plugin:o,manifest:i}}catch(i){throw console.error(" Failed to load plugin from URL:",i),i}}async loadPluginFromGitHub(e,i="dist/bundle.js",n="main"){const r=`https://cdn.jsdelivr.net/gh/${e}@${n}/${i}`;return this.loadPluginFromURL(r)}async loadPluginFromZip(e){console.warn(" ZIP-Upload ist deaktiviert (spart ~120KB Bundle-Size)"),console.warn("Alternative: Nutze URL oder GitHub Installation");const i=`
 ZIP-Upload nicht verfgbar

Fast Search Card nutzt keine ZIP-Library um die App klein zu halten.

 Empfohlene Installations-Methoden:

1 GitHub Installation (Empfohlen)
    Lade dein Plugin auf GitHub hoch
    Format: username/repository
    Wird ber JSDelivr CDN geladen
    Automatische Updates mglich

2 URL Installation
    Hoste dein Plugin als .js Datei
    Gib die direkte URL ein
    Funktioniert mit jedem Webserver

 Beispiel Plugin-Struktur:
    manifest.json - Plugin-Metadaten
    index.js - Plugin-Code
    view.jsx - UI-Komponente (optional)

 Dokumentation im "Entwickeln"-Tab
    `.trim();throw new Error(i)}validateManifest(e){const i=["id","name","version","system_entity","files"];for(const n of i)if(!e[n])return console.error(`Missing required field in manifest: ${n}`),!1;return e.system_entity.domain?e.files.main?this.isValidVersion(e.version)?e.requirements&&!this.checkRequirements(e.requirements)?(console.error("Plugin requirements not met"),!1):!0:(console.error(`Invalid version format: ${e.version}`),!1):(console.error("Missing files.main in manifest"),!1):(console.error("Missing system_entity.domain in manifest"),!1)}isValidVersion(e){return/^\d+\.\d+\.\d+(-[\w.]+)?(\+[\w.]+)?$/.test(e)}checkRequirements(e){if(e.min_version){const i=this.getAppVersion();if(!this.compareVersions(i,e.min_version))return console.error(`App version ${i} is below required ${e.min_version}`),!1}return!0}getAppVersion(){return"1.2.0"}compareVersions(e,i){const n=e.split(".").map(Number),r=i.split(".").map(Number);for(let o=0;o<3;o++){const a=n[o]||0,l=r[o]||0;if(a>l)return!0;if(a<l)return!1}return!0}async loadAllLocal(){try{const e=Object.assign({}),i=[];for(const n in e)i.push(this.loadFromPath(n));await Promise.all(i),console.log(` Loaded ${i.length} local entities`)}catch(e){console.error("Failed to load local entities:",e)}}async uninstallPlugin(e){if(!_e.getPlugin(e))throw new Error(`Plugin '${e}' not found`);await _e.unregister(e);for(const[n,r]of this.loadedModules.entries())if(r.id===e){this.loadedModules.delete(n);break}console.log(` Uninstalled plugin: ${e}`)}getLoadedModules(){return new Map(this.loadedModules)}clearCache(){this.loadedModules.clear(),this.loadingPromises.clear(),console.log(" Loader cache cleared")}}const tn=new CS;class Jg extends rt{constructor(){super({id:"pluginstore",domain:"pluginstore",name:"Plugin Store",icon:"mdi:puzzle-plus",brandColor:"rgb(219, 52, 242)",category:"apps",description:"Erweitere deine Fast Search Card mit Plugins",relevance:90,attributes:{sections:["discover","installed","develop","upload"],plugin_count:0,installed_plugins:[],featured_plugins:[],categories:[{id:"integration",name:"Integrationen",icon:""},{id:"visualization",name:"Visualisierungen",icon:""},{id:"automation",name:"Automationen",icon:""},{id:"utility",name:"Werkzeuge",icon:""},{id:"theme",name:"Themes",icon:""},{id:"fun",name:"Fun & Games",icon:""}]},permissions:["plugins:browse","plugins:install","plugins:manage","plugins:develop"],routes:{discover:"/plugins/discover",installed:"/plugins/installed",develop:"/plugins/develop",upload:"/plugins/upload",details:"/plugins/details/:id"},actions:{loadAvailablePlugins:async function(){try{const i=(await Promise.all([this._loadOfficialPlugins(),this._loadCommunityPlugins(),this._loadLocalPlugins()])).flat();return i.sort((n,r)=>(r.downloads||0)-(n.downloads||0)),this.updateAttributes({plugin_count:i.length,featured_plugins:i.slice(0,6)}),i}catch(e){return console.error("Failed to load plugins:",e),this._getMockPlugins()}},installPluginFromURL:async function(e){const{url:i,autoEnable:n=!0}=e;try{console.log(" Installing plugin from:",i);const r=await tn.loadPluginFromURL(i),o=this._getInstalledPlugins();return o.push({id:r.manifest.id,name:r.manifest.name,version:r.manifest.version,url:i,enabled:n,installedAt:new Date().toISOString()}),localStorage.setItem("installed_plugins",JSON.stringify(o)),this.updateAttributes({installed_plugins:o}),{success:!0,plugin:r.plugin,manifest:r.manifest}}catch(r){return console.error("Plugin installation failed:",r),{success:!1,error:r.message}}},installPluginFromGitHub:async function(e){const{repo:i,path:n="dist/plugin.js",branch:r="main"}=e;try{const o=await tn.loadPluginFromGitHub(i,n,r),a=this._getInstalledPlugins();return a.push({id:o.manifest.id,name:o.manifest.name,version:o.manifest.version,source:"github",repo:i,enabled:!0,installedAt:new Date().toISOString()}),localStorage.setItem("installed_plugins",JSON.stringify(a)),{success:!0,plugin:o.plugin,manifest:o.manifest}}catch(o){return{success:!1,error:o.message}}},installPluginFromZip:async function(e){const{file:i}=e;if(!i||!(i instanceof File))return{success:!1,error:"Keine gltige Datei"};try{const n=await tn.loadPluginFromZip(i),r=this._getInstalledPlugins();return r.push({id:n.manifest.id,name:n.manifest.name,version:n.manifest.version,source:"local",fileName:i.name,enabled:!0,installedAt:new Date().toISOString()}),localStorage.setItem("installed_plugins",JSON.stringify(r)),{success:!0,plugin:n.plugin,manifest:n.manifest}}catch(n){return{success:!1,error:n.message}}},uninstallPlugin:async function(e){const{pluginId:i}=e;try{await tn.uninstallPlugin(i);const r=this._getInstalledPlugins().filter(o=>o.id!==i);return localStorage.setItem("installed_plugins",JSON.stringify(r)),this.updateAttributes({installed_plugins:r}),{success:!0}}catch(n){return{success:!1,error:n.message}}},togglePlugin:async function(e){const{pluginId:i}=e,n=this._getInstalledPlugins(),r=n.find(o=>o.id===i);return r?(r.enabled=!r.enabled,localStorage.setItem("installed_plugins",JSON.stringify(n)),{success:!0,enabled:r.enabled}):{success:!1,error:"Plugin nicht gefunden"}},createPluginTemplate:function(e){const{name:i,type:n="basic"}=e,r={basic:this._getBasicTemplate(i),visualization:this._getVisualizationTemplate(i),integration:this._getIntegrationTemplate(i)};return r[n]||r.basic},_getInstalledPlugins:function(){try{const e=localStorage.getItem("installed_plugins");return e?JSON.parse(e):[]}catch{return[]}},_loadOfficialPlugins:async function(){return[{id:"weather-card",name:"Weather Card",description:"Beautiful weather widget with forecast",author:"Fast Search Team",version:"1.0.0",category:"visualization",downloads:1250,rating:4.8,icon:"",official:!0,url:"https://example.com/plugins/weather.js"},{id:"energy-monitor",name:"Energy Monitor",description:"Real-time energy consumption tracking",author:"Fast Search Team",version:"1.2.0",category:"visualization",downloads:890,rating:4.9,icon:"",official:!0,url:"https://example.com/plugins/energy.js"}]},_loadCommunityPlugins:async function(){return[{id:"spotify-controls",name:"Spotify Controls",description:"Control Spotify playback from Fast Search",author:"community-dev",version:"2.1.0",category:"integration",downloads:3400,rating:4.6,icon:"",github:"user/spotify-plugin"},{id:"vacuum-map",name:"Vacuum Map",description:"Live map for robot vacuums",author:"robo-fan",version:"3.0.0",category:"visualization",downloads:2100,rating:4.7,icon:"",github:"user/vacuum-map"},{id:"plant-care",name:"Plant Care Assistant",description:"Monitor and track your plants health",author:"green-thumb",version:"1.5.0",category:"utility",downloads:1560,rating:4.5,icon:"",github:"user/plant-care"}]},_loadLocalPlugins:async function(){return this._getInstalledPlugins().map(e=>({...e,local:!0,icon:""}))},_getMockPlugins:function(){return[{id:"demo-plugin",name:"Demo Plugin",description:"Ein Beispiel-Plugin zum Testen",author:"Fast Search",version:"0.1.0",category:"utility",icon:"",demo:!0}]},_getBasicTemplate:function(e){const i=e.replace(/[^a-zA-Z0-9]/g,"-").toLowerCase();return{"manifest.json":JSON.stringify({id:i,name:e,version:"1.0.0",description:"A custom plugin for Fast Search Card",author:"Your Name",system_entity:{domain:i,icon:"mdi:puzzle",category:"apps",relevance:80},files:{main:"index.js",view:"view.jsx"},requirements:{min_version:"1.2.0"}},null,2),"index.js":`/**
 * ${e} Plugin
 * 
 * A custom plugin for Fast Search Card
 */

export default {
  // Plugin initialization
  async init(context) {
    console.log('${e} plugin initialized');
    
    // Access to Home Assistant
    const { hass, storage } = context;
    
    return true;
  },
  
  // Plugin actions
  actions: {
    testAction: async (params) => {
      console.log('Test action called with:', params);
      return { success: true };
    }
  },
  
  // View component (optional)
  viewComponent: () => import('./view.jsx')
};`,"view.jsx":`import { h } from 'preact';
import { useState } from 'preact/hooks';

export default function ${e.replace(/[^a-zA-Z0-9]/g,"")}View({ entity, hass, lang }) {
  const [message, setMessage] = useState('Hello from ${e}!');
  
  return (
    <div style={{
      padding: '20px',
      textAlign: 'center'
    }}>
      <h2>${e}</h2>
      <p>{message}</p>
      <button onClick={() => setMessage('Button clicked!')}>
        Click Me
      </button>
    </div>
  );
}`}},_getVisualizationTemplate:function(e){const i=this._getBasicTemplate(e);return i["view.jsx"]=`import { h } from 'preact';
import { useState, useEffect } from 'preact/hooks';

export default function ${e.replace(/[^a-zA-Z0-9]/g,"")}View({ entity, hass, lang }) {
  const [data, setData] = useState([]);
  
  useEffect(() => {
    // Load data from Home Assistant
    loadData();
  }, []);
  
  const loadData = async () => {
    // Example: Load sensor data
    try {
      const states = Object.values(hass.states).filter(
        state => state.entity_id.startsWith('sensor.')
      );
      setData(states);
    } catch (error) {
      console.error('Failed to load data:', error);
    }
  };
  
  return (
    <div style={{padding: '20px'}}>
      <h2>${e}</h2>
      <div style={{
        display: 'grid',
        gridTemplateColumns: 'repeat(auto-fill, minmax(200px, 1fr))',
        gap: '16px'
      }}>
        {data.map(sensor => (
          <div key={sensor.entity_id} style={{
            padding: '12px',
            background: 'rgba(255,255,255,0.1)',
            borderRadius: '8px'
          }}>
            <div>{sensor.attributes.friendly_name}</div>
            <div style={{fontSize: '24px', fontWeight: 'bold'}}>
              {sensor.state} {sensor.attributes.unit_of_measurement}
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}`,i},_getIntegrationTemplate:function(e){const i=this._getBasicTemplate(e);return i["index.js"]=`/**
 * ${e} Integration Plugin
 */

export default {
  async init(context) {
    const { hass } = context;
    
    // Register service
    this.registerService(hass);
    
    return true;
  },
  
  registerService(hass) {
    // Example: Register a custom service
    console.log('Registering ${e} service...');
  },
  
  actions: {
    callService: async (params) => {
      const { hass, service, data } = params;
      
      try {
        const result = await hass.callService(
          'domain',
          service,
          data
        );
        return { success: true, result };
      } catch (error) {
        return { success: false, error: error.message };
      }
    }
  }
};`,i}},hasTabs:!1,hasCustomView:!0,showInDetailView:!0,viewComponent:()=>$e(()=>Promise.resolve().then(()=>OS),[])})}async onMount(e){await super.onMount(e),console.log(" Plugin Store Entity mounted");const i=this._getInstalledPlugins();if(i.length>0){console.log(`Found ${i.length} installed plugins`);for(const n of i)if(n.enabled)try{n.source==="github"&&n.repo?(await tn.loadPluginFromGitHub(n.repo),console.log(` Reloaded GitHub plugin: ${n.name}`)):n.url?(await tn.loadPluginFromURL(n.url),console.log(` Reloaded URL plugin: ${n.name}`)):console.warn(` Cannot reload plugin ${n.name}: No source information`)}catch(r){console.warn(`Failed to reload plugin ${n.name}:`,r)}}this.updateAttributes({installed_plugins:i})}_getInstalledPlugins(){try{const e=localStorage.getItem("installed_plugins");return e?JSON.parse(e):[]}catch{return[]}}}const z0=new Jg,SS=Object.freeze(Object.defineProperty({__proto__:null,PluginStoreEntity:Jg,default:z0,pluginStoreEntity:z0},Symbol.toStringTag,{value:"Module"}));class NS extends rt{constructor(){super({id:"all_schedules",domain:"all_schedules",name:"Zeitplne bersicht",icon:"mdi:calendar-clock",brandColor:"rgb(255, 146, 48)",category:"system",description:"bersicht aller Timer und Zeitplne",relevance:95,hasTabs:!1,hasCustomView:!0,showInDetailView:!0,viewComponent:()=>$e(()=>Promise.resolve().then(()=>HS),void 0)})}}const LS=new NS,MS=Object.freeze(Object.defineProperty({__proto__:null,default:LS},Symbol.toStringTag,{value:"Module"}));class Qg extends rt{constructor(){super({id:"weather",domain:"weather",name:"Wetter",icon:"mdi:weather-partly-cloudy",brandColor:"rgb(60, 211, 254)",category:"system",description:"Wetterinformationen und Vorhersage",relevance:90,attributes:{weather_entities:[],primary_entity:null,locations:[],last_update:null,current_condition:null,current_temperature:null,forecast_type:"daily",forecast_days:7,units:"metric",show_forecast:!0,show_alerts:!0,show_historical:!0,has_forecast:!1,has_alerts:!1,has_pressure:!1,has_humidity:!1,has_wind:!1},permissions:["weather:read","history:read","entities:read","storage:write"],routes:{current:"/weather/current",forecast:"/weather/forecast",locations:"/weather/locations",alerts:"/weather/alerts",history:"/weather/history"},actions:{getCurrentWeather:async function(e){const{hass:i,entity_id:n}=e||{};if(console.log(" getCurrentWeather called with:",{hasHass:!!i,entity_id:n}),!i)return console.warn(" No HASS instance available, using mock data"),this.actions._getMockWeatherData.call(this);if(!i.states)return console.warn(" HASS.states is undefined, using mock data"),this.actions._getMockWeatherData.call(this);try{const r=n||this.actions._getPrimaryWeatherEntity.call(this,i);if(console.log(" Found weather entity:",r),!r){console.warn(" No weather entity found in Home Assistant");const a=Object.keys(i.states),l=a.filter(c=>c.startsWith("weather."));return console.log("Available weather entities:",l),console.log("Total entities in HA:",a.length),this.actions._getMockWeatherData.call(this)}const o=i.states[r];return o?(console.log(" Weather state found:",r,o),this.updateAttributes({last_update:new Date().toISOString(),current_condition:o.state,current_temperature:o.attributes.temperature,has_pressure:!!o.attributes.pressure,has_humidity:!!o.attributes.humidity,has_wind:!!o.attributes.wind_speed}),{entity_id:r,condition:o.state,temperature:o.attributes.temperature,temperature_unit:o.attributes.temperature_unit||"C",humidity:o.attributes.humidity,pressure:o.attributes.pressure,pressure_unit:o.attributes.pressure_unit||"hPa",wind_speed:o.attributes.wind_speed,wind_speed_unit:o.attributes.wind_speed_unit||"km/h",wind_bearing:o.attributes.wind_bearing,wind_gust_speed:o.attributes.wind_gust_speed,visibility:o.attributes.visibility,visibility_unit:o.attributes.visibility_unit||"km",apparent_temperature:o.attributes.apparent_temperature,cloud_coverage:o.attributes.cloud_coverage,dew_point:o.attributes.dew_point,ozone:o.attributes.ozone,forecast:o.attributes.forecast||[],attribution:o.attributes.attribution||"",friendly_name:o.attributes.friendly_name||"Wetter"}):(console.warn(` Weather entity ${r} not found in hass.states`),this.actions._getMockWeatherData.call(this))}catch(r){return console.error("Failed to get current weather:",r),this.actions._getMockWeatherData.call(this)}},getForecast:async function(e){const{hass:i,entity_id:n,type:r="daily"}=e||{};if(console.log(` getForecast called with type: ${r}`),!i)return console.warn(" No HASS instance, using mock forecast"),this.actions._getMockForecast.call(this,r);try{const o=n||this.actions._getPrimaryWeatherEntity.call(this,i);if(!o)return console.warn(" No weather entity found, using mock forecast"),this.actions._getMockForecast.call(this,r);console.log(` Getting ${r} forecast for entity: ${o}`);try{console.log(` Calling weather.get_forecasts service with type: ${r}`);const l=await i.callWS({type:"call_service",domain:"weather",service:"get_forecasts",service_data:{entity_id:o,type:r},return_response:!0});if(console.log(" Service response:",l),l&&l.response&&l.response[o]&&l.response[o].forecast){const c=l.response[o].forecast;return console.log(` Got ${r} forecast with ${c.length} entries`),c.length>0&&(console.log("   - First entry:",c[0]),console.log("   - Last entry:",c[c.length-1])),this.updateAttributes({has_forecast:!0,forecast_type:r}),c}else console.warn("  Service response structure unexpected:",l)}catch(l){console.log(`  weather.get_forecasts service failed for type ${r}:`,l.message),console.log("   Trying fallback: state.attributes.forecast")}const a=i.states[o];return a&&a.attributes.forecast?(console.log(" Using forecast from state.attributes"),console.log(`   - Forecast length: ${a.attributes.forecast.length}`),this.updateAttributes({has_forecast:!0}),a.attributes.forecast):(console.warn(` No forecast data available for type ${r}, using mock data`),this.actions._getMockForecast.call(this,r))}catch(o){return console.error(` Failed to get ${r} forecast:`,o),this.actions._getMockForecast.call(this,r)}},getHistoricalData:async function(e){const{hass:i,entity_id:n,hours:r=24}=e||{};if(!i)return this.actions._getMockHistoricalData.call(this);try{const o=n||this.actions._getPrimaryWeatherEntity.call(this,i);if(!o)return this.actions._getMockHistoricalData.call(this);const a=new Date,l=new Date(a.getTime()-r*60*60*1e3),c=await i.callWS({type:"history/history_during_period",start_time:l.toISOString(),end_time:a.toISOString(),entity_ids:[o],minimal_response:!0,no_attributes:!1});if(!c||!c[0])return this.actions._getMockHistoricalData.call(this);const d={temperature:[],humidity:[],pressure:[]};return c[0].forEach(u=>{const h=new Date(u.last_changed).getTime();u.attributes.temperature!==void 0&&d.temperature.push({timestamp:h,value:u.attributes.temperature}),u.attributes.humidity!==void 0&&d.humidity.push({timestamp:h,value:u.attributes.humidity}),u.attributes.pressure!==void 0&&d.pressure.push({timestamp:h,value:u.attributes.pressure})}),d}catch(o){return console.error("Failed to get historical data:",o),this.actions._getMockHistoricalData.call(this)}},getWeatherAlerts:async function(e){const{hass:i,entity_id:n}=e||{};if(!i)return[];try{const r=n||this._getPrimaryWeatherEntity(i);if(!r)return[];const o=i.states[r];if(o&&o.attributes.alerts)return this.updateAttributes({has_alerts:!0}),o.attributes.alerts;const a=Object.keys(i.states).filter(l=>l.startsWith("sensor.")&&l.includes("weather")&&l.includes("alert"));if(a.length>0){const l=a.map(c=>{const d=i.states[c];return{id:c,title:d.attributes.friendly_name||"Wetterwarnung",severity:d.state,description:d.attributes.description||"",start_time:d.attributes.start_time||null,end_time:d.attributes.end_time||null,areas:d.attributes.areas||[]}});return this.updateAttributes({has_alerts:!0}),l}return[]}catch(r){return console.error("Failed to get weather alerts:",r),[]}},addLocation:async function(e){const{entity_id:i,name:n,is_primary:r=!1}=e||{};if(!i)throw new Error("entity_id is required");try{const o=this.getStorage(),l=(o?await o.get("locations"):[])||[];if(l.find(u=>u.entity_id===i))return console.warn(`Location ${i} already exists`),{success:!1,message:"Location already exists"};const d={id:`loc_${Date.now()}`,entity_id:i,name:n||i,is_primary:r||l.length===0,added_at:new Date().toISOString()};return l.push(d),o&&await o.set("locations",l),d.is_primary?this.updateAttributes({primary_entity:i,locations:l}):this.updateAttributes({locations:l}),console.log(` Added location: ${n} (${i})`),{success:!0,location:d}}catch(o){throw console.error("Failed to add location:",o),o}},removeLocation:async function(e){const{location_id:i}=e||{};if(!i)throw new Error("location_id is required");try{const n=this.getStorage(),o=(n?await n.get("locations"):[])||[],a=o.findIndex(c=>c.id===i);if(a===-1)return console.warn(`Location ${i} not found`),{success:!1,message:"Location not found"};const l=o[a].is_primary;return o.splice(a,1),l&&o.length>0&&(o[0].is_primary=!0,this.updateAttributes({primary_entity:o[0].entity_id})),n&&await n.set("locations",o),this.updateAttributes({locations:o}),console.log(` Removed location: ${i}`),{success:!0}}catch(n){throw console.error("Failed to remove location:",n),n}},_getPrimaryWeatherEntity:function(e){if(console.log(" _getPrimaryWeatherEntity called"),console.log("   - this.attributes.primary_entity:",this.attributes?.primary_entity),console.log("   - hass exists:",!!e),console.log("   - hass.states exists:",!!e?.states),this.attributes.primary_entity)return console.log(" Using saved primary entity:",this.attributes.primary_entity),this.attributes.primary_entity;if(!e||!e.states)return console.error(" Cannot search for weather entities: hass.states is undefined"),null;const i=Object.keys(e.states);console.log("   - Total states in hass:",i.length);const n=i.filter(r=>r.startsWith("weather."));if(console.log("   - Found weather entities:",n),n.length>0){const r=n[0];return console.log(" Selected primary weather entity:",r),this.updateAttributes({primary_entity:r,weather_entities:n}),r}return console.warn(" No weather.* entities found in Home Assistant"),null},_getMockWeatherData:function(){return{entity_id:"weather.home",condition:"sunny",temperature:22.5,temperature_unit:"C",humidity:65,pressure:1013,pressure_unit:"hPa",wind_speed:12.5,wind_speed_unit:"km/h",wind_bearing:180,wind_gust_speed:20,visibility:10,visibility_unit:"km",apparent_temperature:20.5,cloud_coverage:30,dew_point:12,ozone:300,forecast:[],attribution:"Mock Data",friendly_name:"Zuhause"}},_getMockForecast:function(e="daily"){const i=["sunny","partly-cloudy","cloudy","rainy","pouring"],n=[];if(e==="hourly")for(let r=0;r<24;r++){const o=new Date;o.setHours(o.getHours()+r),n.push({datetime:o.toISOString(),condition:i[Math.floor(Math.random()*i.length)],temperature:18+Math.floor(Math.random()*10),precipitation:Math.floor(Math.random()*5),precipitation_probability:Math.floor(Math.random()*100),wind_speed:5+Math.floor(Math.random()*15),wind_bearing:Math.floor(Math.random()*360)})}else for(let r=0;r<10;r++){const o=new Date;o.setDate(o.getDate()+r),n.push({datetime:o.toISOString(),condition:i[Math.floor(Math.random()*i.length)],temperature:18+Math.floor(Math.random()*10),templow:12+Math.floor(Math.random()*6),precipitation:Math.floor(Math.random()*5),precipitation_probability:Math.floor(Math.random()*100),wind_speed:5+Math.floor(Math.random()*15),wind_bearing:Math.floor(Math.random()*360)})}return n},_getMockHistoricalData:function(){const e={temperature:[],humidity:[],pressure:[]},i=Date.now();for(let n=24;n>=0;n--){const r=i-n*60*60*1e3;e.temperature.push({timestamp:r,value:18+Math.sin(n/3)*5}),e.humidity.push({timestamp:r,value:60+Math.sin(n/2)*15}),e.pressure.push({timestamp:r,value:1010+Math.sin(n/4)*10})}return e}},hasTabs:!1,hasCustomView:!0,showInDetailView:!0,viewComponent:()=>$e(()=>Promise.resolve().then(()=>JS),void 0)})}async onMount(e){if(await super.onMount(e),console.log(" Weather Entity mounted"),console.log("   - context exists:",!!e),console.log("   - context.hass exists:",!!e?.hass),console.log("   - context.hass.states exists:",!!e?.hass?.states),e&&e.hass)try{if(!e.hass.states){console.error(" context.hass.states is undefined at mount time!");return}const i=Object.keys(e.hass.states);console.log(`   - Total entities in HA: ${i.length}`);const n=i.filter(o=>o.startsWith("weather."));this.updateAttributes({weather_entities:n}),console.log(` Found ${n.length} weather entities:`,n);const r=this.getStorage();if(r){const o=await r.get("locations");if(o&&o.length>0){this.updateAttributes({locations:o});const a=o.find(l=>l.is_primary);a&&this.updateAttributes({primary_entity:a.entity_id})}}console.log(" Loading initial weather data for DeviceCard...");try{await this.executeAction("getCurrentWeather",{hass:e.hass}),console.log(" Initial weather data loaded")}catch(o){console.warn(" Failed to load initial weather data:",o)}}catch(i){console.warn("Failed to initialize weather data:",i)}}}const V0=new Qg,TS=Object.freeze(Object.defineProperty({__proto__:null,WeatherEntity:Qg,default:V0,weatherEntity:V0},Symbol.toStringTag,{value:"Module"}));class e1 extends rt{constructor(){super({id:"news",domain:"news",name:"Nachrichten",icon:"mdi:newspaper",brandColor:"rgb(255, 149, 0)",category:"system",description:"RSS News Feeds und Nachrichten",relevance:85,attributes:{articles:[],unread_count:0,total_articles:0,feed_count:0,last_update:null,active_feeds:[],categories:[],latest_article:null,max_articles:50,update_interval:15,article_retention_days:7,show_images:!0,auto_mark_read:!1,has_feedreader:!1,has_notifications:!0,has_tts:!1},hasTabs:!1,hasCustomView:!0,showInDetailView:!0,actionButtons:[{id:"overview",action:"overview",title:"bersicht"},{id:"settings",action:"settings",title:"Einstellungen"},{id:"refresh",action:"refresh",title:"Aktualisieren"}],viewComponent:()=>$e(()=>Promise.resolve().then(()=>i7),void 0),permissions:["feedreader:read","entities:read","storage:write","storage:read"],routes:{feed:"/news/feed",article:"/news/article/:id",favorites:"/news/favorites",settings:"/news/settings",category:"/news/category/:category"},actions:{getArticles:async function(e){const{hass:i,refresh:n=!1}=e||{};console.log(" getArticles called",{hasHass:!!i,refresh:n});try{const r=await this.actions._checkFeedreaderAvailability.call(this,i);let o=[];r?(console.log(" Loading articles from feedreader events"),o=await this.actions._fetchFromFeedreader.call(this,i)):(console.log(" Feedreader not available, using mock data"),o=this.actions._getMockArticles.call(this));const l=new Set(o.map(c=>c.source).filter(c=>c)).size;return this.updateAttributes({articles:o,total_articles:o.length,unread_count:o.filter(c=>!c.read).length,feed_count:l,last_update:new Date().toISOString(),latest_article:o[0]||null,has_feedreader:r}),o}catch(r){return console.error("Failed to get articles:",r),this.actions._getMockArticles.call(this)}},refreshFeeds:async function(e){const{hass:i}=e||{};console.log(" refreshFeeds called - manually refreshing feeds");try{const n=await this.actions._checkFeedreaderAvailability.call(this,i);if(!n)return console.warn(" Feedreader not available, cannot refresh"),this.actions._getMockArticles.call(this);try{console.log(" Calling homeassistant.update_entity service...");const l=i?.states?Object.keys(i.states).filter(c=>c.startsWith("event.")&&(i.states[c].attributes?.event_type==="feedreader"||i.states[c].attributes?.event_types?.includes("feedreader"))):[];if(console.log(" Found feedreader entities:",l),l.length>0&&i?.callService){for(const c of l)await i.callService("homeassistant","update_entity",{entity_id:c}),console.log(`  Updated ${c}`);await new Promise(c=>setTimeout(c,1e3))}}catch(l){console.warn(" Could not call update service:",l)}console.log(" Reloading articles after refresh...");const r=await this.actions._fetchFromFeedreader.call(this,i),a=new Set(r.map(l=>l.source).filter(l=>l)).size;return this.updateAttributes({articles:r,total_articles:r.length,unread_count:r.filter(l=>!l.read).length,feed_count:a,last_update:new Date().toISOString(),latest_article:r[0]||null,has_feedreader:n}),console.log(`  Refresh complete! Loaded ${r.length} articles`),r}catch(n){return console.error(" Failed to refresh feeds:",n),this.actions._fetchFromFeedreader.call(this,i)}},markAsRead:async function(e){const{articleId:i}=e,n=this.attributes.articles||[],r=n.find(o=>o.id===i);return r?(r.read=!0,this.updateAttributes({articles:[...n],unread_count:n.filter(o=>!o.read).length}),this.actions._cacheArticles.call(this,n),{success:!0}):{success:!1}},markAsUnread:async function(e){const{articleId:i}=e,n=this.attributes.articles||[],r=n.find(o=>o.id===i);return r?(r.read=!1,this.updateAttributes({articles:[...n],unread_count:n.filter(o=>!o.read).length}),this.actions._cacheArticles.call(this,n),{success:!0}):{success:!1}},toggleFavorite:async function(e){const{articleId:i}=e,n=this.attributes.articles||[],r=n.find(o=>o.id===i);return r?(r.favorite=!r.favorite,this.updateAttributes({articles:[...n]}),this.actions._cacheArticles.call(this,n),{success:!0,favorite:r.favorite}):{success:!1}},_checkFeedreaderAvailability:async function(e){if(console.log(" [CHECK] Checking Feedreader availability..."),console.log("   - hass exists:",!!e),console.log("   - hass.config exists:",!!e?.config),console.log("   - hass.config.components exists:",!!e?.config?.components),!e||!e.config||!e.config.components)return console.log(" [CHECK]  Feedreader check failed - missing hass/config/components"),!1;const i=e.config.components.includes("feedreader");return console.log(" [CHECK] Components:",e.config.components.filter(n=>n.includes("feed"))),console.log(" [CHECK]  Feedreader available:",i),i},_fetchFromFeedreader:async function(e){try{console.log(" FEEDREADER V4.0 - EVENT LISTENER + CACHE!");const i=this.actions._loadSettings.call(this),n=i?.display?.maxAge||7,r=i?.display?.maxArticles||100;console.log(` Settings: maxAge=${n} days, maxArticles=${r}`);let o=this.actions._loadArticlesFromEventCache.call(this);if(o.length===0)return console.log(" Event-Cache ist leer, nutze Mock-Daten"),this.actions._getMockArticles.call(this);const a=new Date;a.setDate(a.getDate()-n);const l=o.length;o=o.filter(d=>new Date(d.published)>=a),console.log(` Age filter: ${l}  ${o.length} articles (removed ${l-o.length} older than ${n} days)`);const c=this.actions._getCachedArticles.call(this);if(c&&c.length>0){const d=new Map(c.map(u=>[u.id,u]));o.forEach(u=>{const h=d.get(u.id);h&&(u.read=h.read||!1,u.favorite=h.favorite||!1)})}return o.sort((d,u)=>new Date(u.published)-new Date(d.published)),o.length>r&&(console.log(` Limiting articles: ${o.length}  ${r}`),o=o.slice(0,r)),console.log(` Articles ready: ${o.length}`),o}catch(i){return console.error(" Failed to fetch from event cache:",i),this.actions._getMockArticles.call(this)}},_handleFeedreaderEvent:function(e){console.log(" [EVENT] ========================================"),console.log(" [EVENT] FEEDREADER EVENT RECEIVED!"),console.log(" [EVENT] Event:",e),console.log(" [EVENT] Event.data:",e.data);const i=e.data||{};let n=i.image||null;n||(n=this.actions._extractImageFromHtml.call(this,i.content||i.description||i.summary||"")),!n&&i.enclosure&&i.enclosure.url&&(n=i.enclosure.url),!n&&i.media_thumbnail&&(n=i.media_thumbnail);let r="news";if(i.feed_url){const a=this.actions._findEntityIdByFeedUrl.call(this,i.feed_url);a&&(r=this.actions._getCategoryForEntityId.call(this,a))}const o={id:i.id||i.link||i.guid,title:i.title||"Kein Titel",description:i.summary||i.description||"",content:i.content||i.summary||i.description||"",link:i.link,published:i.published_parsed?new Date(i.published_parsed):new Date,source:this.actions._extractSourceFromUrl.call(this,i.feed_url),category:r,thumbnail:n,read:!1,favorite:!1,priority:"normal"};console.log(" [EVENT] Created article:",o),console.log(" [EVENT] Category:",r),console.log(" [EVENT] Thumbnail:",n),this.actions._addArticleToEventCache.call(this,o),console.log(" [EVENT] ========================================")},_extractImageFromHtml:function(e){if(!e)return null;try{const i=e.match(/<img[^>]+src="([^">]+)"/i);if(i&&i[1])return console.log(" [IMAGE] Extracted from HTML:",i[1]),i[1];const n=e.match(/<meta[^>]+property="og:image"[^>]+content="([^">]+)"/i);if(n&&n[1])return console.log(" [IMAGE] Extracted from og:image:",n[1]),n[1]}catch(i){console.error(" [IMAGE] Failed to extract:",i)}return null},_loadArticlesFromEventCache:function(){try{const e=localStorage.getItem("news_event_cache");if(!e)return console.log(" No event cache found"),[];const i=JSON.parse(e);if(!Array.isArray(i))return[];const n=this.actions._loadSettings.call(this);let r=parseInt(n.display.maxAge)||7;r>30&&(r=30);const o=r*24*60*60*1e3,a=Date.now(),l=i.filter(h=>{const m=new Date(h.published).getTime();return a-m<=o});l.sort((h,m)=>new Date(m.published)-new Date(h.published));const c=l.slice(0,100);let d=0;const u=[];for(const h of c){const m=this.actions._findEntityIdBySource.call(this,h.source);if(console.log(` [FILTER] Article: "${h.title.substring(0,50)}..."`),console.log(`   - Source: "${h.source}"`),console.log(`   - Entity ID found: ${m||"NOT FOUND"}`),m){const f=n.feeds?.[m],g=f?.enabled!==!1;if(console.log("   - Feed Settings:",f),console.log(`   - Is Enabled: ${g}`),!g){console.log("   -  FILTERED OUT (disabled)");continue}const p=this.actions._getCategoryForEntityId.call(this,m);console.log(`   - Category: ${h.category}  ${p}`),h.category!==p&&(console.log("   -  CATEGORY UPDATED"),h.category=p,d++),u.push(h),console.log("   -  INCLUDED")}else console.log("   -  Entity ID not found, SKIPPING (no matching feed)")}return d>0&&(console.log(` Updated ${d} article categories from settings`),localStorage.setItem("news_event_cache",JSON.stringify(i))),console.log(` Loaded ${u.length} articles from event cache (filtered from ${i.length}, ${c.length-u.length} disabled)`),u}catch(e){return console.error(" Failed to load from event cache:",e),[]}},_addArticleToEventCache:function(e){try{let i=[];const n=localStorage.getItem("news_event_cache");if(n&&(i=JSON.parse(n)),i.some(o=>o.id===e.id)){console.log(" Article already in cache:",e.id);return}i.unshift(e),i.length>500&&(i=i.slice(0,500)),localStorage.setItem("news_event_cache",JSON.stringify(i)),console.log(" Added article to event cache:",e.title)}catch(i){console.error(" Failed to add article to event cache:",i)}},_extractSourceFromUrl:function(e){if(!e)return"Unknown";try{return new URL(e).hostname.replace("www.","")}catch{return"Unknown"}},_loadSettings:function(){const e=localStorage.getItem("newsSettings");return e?JSON.parse(e):{display:{maxAge:7,maxArticles:50},feeds:[]}},_getCategoryForEntityId:function(e){try{const n=this.actions._loadSettings.call(this).feeds?.[e];return n&&n.category?(console.log(` [CATEGORY] Entity ${e}  ${n.category}`),n.category):(console.log(` [CATEGORY] Entity ${e}  news (default)`),"news")}catch(i){return console.error(" [CATEGORY] Failed to get category:",i),"news"}},_findEntityIdByFeedUrl:function(e){try{if(!this._hass||!this._hass.states)return console.log(" [CATEGORY] No hass.states available for entity lookup"),null;for(const i in this._hass.states){if(!i.startsWith("event."))continue;if((this._hass.states[i].attributes||{}).feed_url===e)return console.log(` [CATEGORY] Found entity ${i} for feed_url ${e}`),i}return console.log(` [CATEGORY] No entity found for feed_url ${e}`),null}catch(i){return console.error(" [CATEGORY] Failed to find entity by feed_url:",i),null}},_findEntityIdBySource:function(e){try{if(!this._hass||!this._hass.states)return console.log(` [FIND] No hass.states for source "${e}"`),null;console.log(` [FIND] Looking for entity with source: "${e}"`);for(const i in this._hass.states){if(!i.startsWith("event."))continue;const r=this._hass.states[i].attributes||{};if(console.log(` [FIND]   Checking ${i}:`),console.log(`       - friendly_name: "${r.friendly_name}"`),r.friendly_name===e)return console.log("       -  EXACT MATCH (friendly_name)"),i;if(r.friendly_name&&r.friendly_name.toLowerCase()===e.toLowerCase())return console.log("       -  MATCH (friendly_name, case-insensitive)"),i;const o=i.replace("event.","").replace(/_/g," ");if(console.log(`       - generated name: "${o}"`),o.toLowerCase()===e.toLowerCase())return console.log("       -  MATCH (generated name)"),i;if(r.feed_url)try{const l=new URL(r.feed_url).hostname.replace("www.","");if(l===e||l.toLowerCase()===e.toLowerCase())return console.log(`       -  MATCH (feed_url domain: "${l}")`),i}catch{}}return console.log(` [FIND]  No entity found for source "${e}"`),null}catch(i){return console.error(" [CATEGORY] Failed to find entity by source:",i),null}},_cacheArticles:function(e){try{const i={timestamp:Date.now(),articles:e};localStorage.setItem("news_articles_cache",JSON.stringify(i))}catch(i){console.error("Failed to cache articles:",i)}},_getCachedArticles:function(){try{const e=localStorage.getItem("news_articles_cache");if(!e)return[];const i=JSON.parse(e),n=this.attributes.article_retention_days*24*60*60*1e3;return Date.now()-i.timestamp>n?(localStorage.removeItem("news_articles_cache"),[]):i.articles}catch(e){return console.error("Failed to load cached articles:",e),[]}},_getMockArticles:function(){return console.log(" _getMockArticles called - returning empty (use Event Entities)"),[]}},events:{"article:new":"Neuer Artikel verfgbar","article:read":"Artikel wurde gelesen","article:favorite":"Artikel als Favorit markiert","feeds:updated":"Feeds wurden aktualisiert"}})}async onMount(e){await super.onMount(e),console.log(" ========================================"),console.log(" [LIFECYCLE] NewsEntity onMount START"),console.log(" [LIFECYCLE] Context:",e),console.log(" [LIFECYCLE] Context.hass exists:",!!e?.hass),console.log(" [LIFECYCLE] Context.hass.connection exists:",!!e?.hass?.connection),this._hass=e?.hass||null,this._feedreaderEventListener=null,e&&e.hass&&e.hass.connection?(console.log(" [LIFECYCLE] Registering Feedreader event listener..."),this._feedreaderEventListener=e.hass.connection.subscribeEvents(i=>{console.log(" [LISTENER]  Event callback triggered!"),this.actions._handleFeedreaderEvent.call(this,i)},"feedreader"),console.log(" [LIFECYCLE]  Event listener registered successfully"),console.log(" [LIFECYCLE] Listener object:",this._feedreaderEventListener)):(console.error(" [LIFECYCLE]  Cannot register event listener:"),console.log("   - context exists:",!!e),console.log("   - context.hass exists:",!!e?.hass),console.log("   - context.hass.connection exists:",!!e?.hass?.connection)),console.log(" [LIFECYCLE] Loading initial news articles...");try{await this._loadFeedreaderHistory(e.hass),await this._loadFeedreaderEventEntities(e.hass),await this.executeAction("getArticles",{hass:e.hass}),console.log(" [LIFECYCLE]  Initial news articles loaded")}catch(i){console.error(" [LIFECYCLE]  Failed to load initial news articles:",i)}console.log(" [LIFECYCLE] NewsEntity onMount COMPLETE"),console.log(" ========================================")}async _loadFeedreaderHistory(e){if(console.log(" [HISTORY] ========================================"),console.log(" [HISTORY] Loading Feedreader event history..."),!e||!e.callWS){console.warn(" [HISTORY] No hass.callWS available");return}try{const i=this.actions._loadSettings.call(this);let n=parseInt(i.display.maxAge)||7;n>30&&(n=30);const r=new Date,o=new Date(r.getTime()-n*24*60*60*1e3);console.log(" [HISTORY] Fetching events from",o.toISOString(),"to",r.toISOString()),console.log(" [HISTORY] Max age:",n,"days");const a=await e.callWS({type:"logbook/get_events",start_time:o.toISOString(),end_time:r.toISOString(),event_types:["feedreader"]});if(console.log(" [HISTORY] Response:",a),!a||!Array.isArray(a)){console.warn(" [HISTORY] No events array in response"),console.log(" [HISTORY] Trying alternative API...");const c=await e.callWS({type:"recorder/get_events",start_time:o.toISOString(),end_time:r.toISOString(),event_types:["feedreader"]});if(console.log(" [HISTORY] Alternative response:",c),!c||!Array.isArray(c)){console.warn(" [HISTORY] Alternative API also failed");return}console.log(` [HISTORY] Found ${c.length} events via alternative API`);let d=0;for(const u of c)u.data&&(this.actions._handleFeedreaderEvent.call(this,u),d++);console.log(` [HISTORY]  Processed ${d} events`);return}console.log(` [HISTORY] Found ${a.length} feedreader events in history`);let l=0;for(const c of a)c.data&&(this.actions._handleFeedreaderEvent.call(this,c),l++);console.log(` [HISTORY]  Processed ${l} events from history`)}catch(i){console.error(" [HISTORY]  Failed to load history:"),console.error("   - Error:",i),console.error("   - Error message:",i?.message),console.error("   - Error code:",i?.code),console.error("   - Error stack:",i?.stack),console.log(" [HISTORY] Falling back to Event Entities...")}console.log(" [HISTORY] ========================================")}async _loadFeedreaderEventEntities(e){if(console.log(" [INIT] ========================================"),console.log(" [INIT] Loading Feedreader event entities..."),!e||!e.states){console.warn(" [INIT] No hass.states available");return}const i=Object.keys(e.states).filter(r=>r.startsWith("event.")).map(r=>e.states[r]);console.log(` [INIT] Found ${i.length} total event entities`);const n=i.filter(r=>{const o=r.attributes?.event_type==="feedreader",a=r.attributes?.event_types?.includes("feedreader");return o||a});console.log(` [INIT] Found ${n.length} feedreader event entities:`),n.forEach(r=>console.log("   -",r.entity_id));for(const r of n){console.log(" [INIT] ----------------------------------------"),console.log(" [INIT] Processing:",r.entity_id),console.log("   - State (timestamp):",r.state),console.log("   - Attributes:",r.attributes);const o=r.attributes||{};if(o.title&&o.link){let a=o.image||null;a||(a=this.actions._extractImageFromHtml.call(this,o.content||o.description||""));const l=this.actions._getCategoryForEntityId.call(this,r.entity_id),c={id:o.link||r.entity_id+"_"+Date.now(),title:o.title||"Kein Titel",description:o.description||"",content:o.content||o.description||"",link:o.link,published:r.state?new Date(r.state):new Date,source:o.friendly_name||r.entity_id.replace("event.","").replace(/_/g," "),category:l,thumbnail:a,read:!1,favorite:!1,priority:"normal"};console.log(" [INIT]  Created article:"),console.log("   - Title:",c.title),console.log("   - Source:",c.source),console.log("   - Category:",c.category),console.log("   - Published:",c.published),console.log("   - Thumbnail:",c.thumbnail||"NONE"),this.actions._addArticleToEventCache.call(this,c)}else console.log(" [INIT]  Skipping - missing title or link")}console.log(" [INIT] ========================================"),console.log(" [INIT]  Event entities processed")}async onUnmount(e){console.log(" [LIFECYCLE] NewsEntity onUnmount - Unregistering event listener"),this._feedreaderEventListener&&(this._feedreaderEventListener.then(i=>i()),this._feedreaderEventListener=null,console.log(" [LIFECYCLE] Event listener unregistered")),await super.onUnmount(e)}}const zt=new e1;typeof window<"u"&&(window.newsEntity=zt,window.debugNews=()=>{console.group(" NEWS DEBUG"),console.log("Entity:",zt),console.log("Attributes:",zt.attributes),console.log("Articles:",zt.attributes.articles),console.log("Has Feedreader:",zt.attributes.has_feedreader),console.log("Event Listener Active:",zt._feedreaderEventListener!==null);const t=localStorage.getItem("news_event_cache"),e=localStorage.getItem("news_articles_cache"),i=localStorage.getItem("newsSettings");console.log("Event Cache:",t?JSON.parse(t).length+" articles":"empty"),console.log("Articles Cache:",e?JSON.parse(e).articles.length+" articles":"empty"),console.log("Settings:",i?JSON.parse(i):"default"),console.groupEnd()},window.testFeedreaderEvent=()=>{console.log(" Testing manual Feedreader event...");const t={data:{id:"test_"+Date.now(),title:"Test Artikel von manuellen Event",summary:"Dies ist ein Test-Event",link:"https://example.com/test",published_parsed:new Date,feed_url:"https://example.com/feed.xml",image:null}};zt.actions._handleFeedreaderEvent.call(zt,t),console.log(" Test event processed. Check event cache.")},console.log(" Debug functions available:"),console.log("   - window.debugNews() - Show news entity debug info"),console.log("   - window.testFeedreaderEvent() - Manually trigger test event"));const ES=Object.freeze(Object.defineProperty({__proto__:null,NewsEntity:e1,default:zt,newsEntity:zt},Symbol.toStringTag,{value:"Module"}));class t1 extends rt{constructor(){super({id:"todos",domain:"todos",name:"Aufgaben",icon:'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 6L20 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3.80002 5.79999L4.60002 6.59998L6.60001 4.59999" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3.80002 11.8L4.60002 12.6L6.60001 10.6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3.80002 17.8L4.60002 18.6L6.60001 16.6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9 12L20 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M9 18L20 18" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',brandColor:"rgb(0, 122, 255)",category:"system",description:"Todo-Listen und Aufgaben verwalten",relevance:80,attributes:{todos:[],incomplete_count:0,total_todos:0,overdue_count:0,today_count:0,last_update:null,available_lists:[],has_todo_integration:!1},hasTabs:!1,hasCustomView:!0,showInDetailView:!0,actionButtons:[{id:"overview",action:"overview",title:"bersicht"},{id:"settings",action:"settings",title:"Einstellungen"},{id:"add",action:"add",title:"Hinzufgen"},{id:"refresh",action:"refresh",title:"Aktualisieren"}],viewComponent:()=>$e(()=>Promise.resolve().then(()=>c7),void 0),permissions:["todo:read","todo:write","entities:read","storage:write","storage:read"],routes:{main:"/todos",item:"/todos/item/:id",settings:"/todos/settings",list:"/todos/list/:listId"},actions:{getTodos:async function(e){const{hass:i,refresh:n=!1}=e||{};console.log(" getTodos called",{hasHass:!!i,refresh:n});try{const r=await this.actions._checkTodoAvailability.call(this,i);let o=[];r?(console.log(" Loading todos from Home Assistant"),o=await this.actions._fetchFromHomeAssistant.call(this,i)):(console.log(" Todo integration not available, using mock data"),o=this.actions._getMockTodos.call(this));const a=this.actions._loadSettings.call(this);o=this.actions._applyFilters.call(this,o,a);const l=this.actions._getCachedTodos.call(this);if(l&&l.length>0){const h=new Map(l.map(m=>[m.uid,m]));o.forEach(m=>{const f=h.get(m.uid);f&&f.status&&(m.status=f.status)})}const c=o.filter(h=>h.status==="needs_action").length,d=this.actions._getOverdueTodos.call(this,o).length,u=this.actions._getTodayTodos.call(this,o).length;return this.updateAttributes({todos:o,total_todos:o.length,incomplete_count:c,overdue_count:d,today_count:u,last_update:new Date().toISOString(),has_todo_integration:r}),o}catch(r){return console.error("Failed to get todos:",r),this.actions._getMockTodos.call(this)}},refreshTodos:async function(e){const{hass:i}=e||{};console.log(" refreshTodos called - manually refreshing todos");try{const n=await this.actions._checkTodoAvailability.call(this,i);if(!n)return console.warn(" Todo integration not available, cannot refresh"),this.actions._getMockTodos.call(this);console.log(" Reloading todos after refresh...");const r=await this.actions._fetchFromHomeAssistant.call(this,i),o=this.actions._loadSettings.call(this),a=this.actions._applyFilters.call(this,r,o),l=a.filter(u=>u.status==="needs_action").length,c=this.actions._getOverdueTodos.call(this,a).length,d=this.actions._getTodayTodos.call(this,a).length;return this.updateAttributes({todos:a,total_todos:a.length,incomplete_count:l,overdue_count:c,today_count:d,last_update:new Date().toISOString(),has_todo_integration:n}),console.log(`  Refresh complete! Loaded ${a.length} todos`),a}catch(n){return console.error(" Failed to refresh todos:",n),this.actions._getMockTodos.call(this)}},addTodo:async function(e){const{hass:i,listId:n,summary:r,description:o,dueDate:a}=e;console.log(" addTodo called",{listId:n,summary:r,dueDate:a});try{const l={entity_id:n,item:r,description:o};return a&&(a.includes("T")?l.due_datetime=a.replace("T"," "):l.due_date=a),await i.callService("todo","add_item",l),console.log(" Todo added successfully"),await this.actions.getTodos.call(this,{hass:i,refresh:!0})}catch(l){throw console.error(" Failed to add todo:",l),l}},updateTodo:async function(e){const{hass:i,listId:n,uid:r,summary:o,description:a,dueDate:l,status:c}=e;console.log(" updateTodo called",{listId:n,uid:r,summary:o,status:c});try{const d={entity_id:n,item:r};return o!==void 0&&(d.rename=o),a!==void 0&&(d.description=a),l&&(l.includes("T")?d.due_datetime=l.replace("T"," "):d.due_date=l),c!==void 0&&(d.status=c),await i.callService("todo","update_item",d),console.log(" Todo updated successfully"),await this.actions.getTodos.call(this,{hass:i,refresh:!0})}catch(d){throw console.error(" Failed to update todo:",d),d}},toggleComplete:async function(e){const{hass:i,listId:n,uid:r,currentStatus:o}=e,a=o==="completed"?"needs_action":"completed";console.log(" toggleComplete called",{uid:r,currentStatus:o,newStatus:a});try{await i.callService("todo","update_item",{entity_id:n,item:r,status:a}),console.log(" Todo status toggled successfully");const c=(this.attributes.todos||[]).map(d=>d.uid===r?{...d,status:a}:d);return this.actions._cacheTodos.call(this,c),await this.actions.getTodos.call(this,{hass:i,refresh:!0})}catch(l){throw console.error(" Failed to toggle todo:",l),l}},deleteTodo:async function(e){const{hass:i,listId:n,uid:r}=e;console.log(" deleteTodo called",{listId:n,uid:r});try{return await i.callService("todo","remove_item",{entity_id:n,item:[r]}),console.log(" Todo deleted successfully"),await this.actions.getTodos.call(this,{hass:i,refresh:!0})}catch(o){throw console.error(" Failed to delete todo:",o),o}},removeCompleted:async function(e){const{hass:i,listId:n}=e;console.log(" removeCompleted called",{listId:n});try{if(n)await i.callService("todo","remove_completed_items",{entity_id:n});else{const r=this.attributes.available_lists||[];for(const o of r)await i.callService("todo","remove_completed_items",{entity_id:o.id})}return console.log(" Completed todos removed successfully"),await this.actions.getTodos.call(this,{hass:i,refresh:!0})}catch(r){throw console.error(" Failed to remove completed todos:",r),r}},_checkTodoAvailability:async function(e){if(!e||!e.states)return console.log(" [CHECK]  Todo check failed - missing hass/states"),!1;const i=Object.keys(e.states).filter(r=>r.startsWith("todo.")),n=i.length>0;return console.log(" [CHECK] Todo entities found:",i.length),console.log(" [CHECK]  Todo integration available:",n),n},_fetchFromHomeAssistant:async function(e){try{console.log(" Fetching todos from Home Assistant...");const i=Object.keys(e.states).filter(r=>r.startsWith("todo.")).map(r=>({id:r,name:e.states[r].attributes.friendly_name||r.replace("todo.","").replace(/_/g," "),state:e.states[r].state}));console.log(" Found todo lists:",i),this.updateAttributes({available_lists:i});let n=[];for(const r of i)try{const o=await e.callWS({type:"todo/item/list",entity_id:r.id});if(console.log(` Items from ${r.name}:`,o),o&&o.items){const a=o.items.map(l=>({uid:l.uid,summary:l.summary,description:l.description||"",status:l.status||"needs_action",due:l.due||null,listId:r.id,listName:r.name}));n=[...n,...a]}}catch(o){console.warn(` Failed to fetch items from ${r.name}:`,o)}return console.log(` Total todos loaded: ${n.length}`),n}catch(i){return console.error(" Failed to fetch from Home Assistant:",i),[]}},_applyFilters:function(e,i){return!i||!i.lists?e:e.filter(n=>i.lists[n.listId]?.enabled!==!1)},_getOverdueTodos:function(e){const i=new Date;return i.setHours(0,0,0,0),e.filter(n=>{if(n.status==="completed"||!n.due)return!1;const r=new Date(n.due);return r.setHours(0,0,0,0),r<i})},_getTodayTodos:function(e){const i=new Date;return i.setHours(0,0,0,0),e.filter(n=>{if(!n.due)return!1;const r=new Date(n.due);return r.setHours(0,0,0,0),r.getTime()===i.getTime()})},_loadSettings:function(){try{const e=localStorage.getItem("todosSettings");if(e)return JSON.parse(e)}catch(e){console.error("Failed to load settings:",e)}return{lists:{},display:{showCompleted:!0,autoHideAfterDays:7,defaultFilter:"all",sortBy:"dueDate"}}},_cacheTodos:function(e){try{const i={todos:e,timestamp:Date.now()};localStorage.setItem("todosCache",JSON.stringify(i))}catch(i){console.error("Failed to cache todos:",i)}},_getCachedTodos:function(){try{const e=localStorage.getItem("todosCache");if(e)return JSON.parse(e).todos||[]}catch(e){console.error("Failed to load cached todos:",e)}return[]},_getMockTodos:function(){return[{uid:"1",summary:"Milch kaufen",description:"Fettarm, 1 Liter",status:"needs_action",due:new Date().toISOString().split("T")[0],listId:"todo.shopping_list",listName:"Einkaufsliste"},{uid:"2",summary:"Meeting vorbereiten",description:"Prsentation fertigstellen",status:"needs_action",due:new Date(Date.now()+864e5).toISOString().split("T")[0],listId:"todo.work",listName:"Arbeit"},{uid:"3",summary:"Code Review machen",description:"Pull Request #123 prfen",status:"completed",due:new Date(Date.now()-864e5).toISOString().split("T")[0],listId:"todo.work",listName:"Arbeit"}]}}}),this.setup()}setup(){console.log(" TodosEntity setup complete")}async onMount(e){if(await super.onMount(e),e?.hass){console.log(" TodosEntity: Loading initial todos for counts...");try{await this.actions.getTodos.call(this,{hass:e.hass})}catch(i){console.warn(" TodosEntity: Failed to load initial todos:",i)}}}}const W0=new t1,DS=Object.freeze(Object.defineProperty({__proto__:null,TodosEntity:t1,default:W0,todosEntity:W0},Symbol.toStringTag,{value:"Module"}));class AS extends rt{constructor(e){const{id:i,name:n,serial:r,deviceType:o,type:a,category:l}=e;super({id:i,domain:"printer3d_device",name:n,icon:'<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 19V5C2 3.89543 2.89543 3 4 3H20C21.1046 3 22 3.89543 22 5V19C22 20.1046 21.1046 21 20 21H4C2.89543 21 2 20.1046 2 19Z" stroke="currentColor" stroke-width="1.5"></path><path d="M2 7L22 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5 5.01L5.01 4.99889" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8 5.01L8.01 4.99889" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M11 5.01L11.01 4.99889" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',brandColor:"rgb(48, 209, 88)",category:"devices",relevance:75,attributes:{serial:r,device_type:o,printer_type:a,category:l,progress:0,nozzle_temp:null,bed_temp:null,current_step:null,remaining_time:null,is_printing:!1},hasTabs:!0,hasCustomView:!0,showInDetailView:!0,viewComponent:()=>$e(()=>Promise.resolve().then(()=>d7),void 0),tabs:[{id:"overview",name_de:"bersicht",name_en:"Overview",icon:"mdi:printer-3d-nozzle",component:()=>$e(()=>Promise.resolve().then(()=>u7),void 0)},{id:"controls",name_de:"Steuerung",name_en:"Controls",icon:"mdi:tune",component:()=>$e(()=>Promise.resolve().then(()=>h7),void 0)},{id:"diagnostics",name_de:"Diagnose",name_en:"Diagnostics",icon:"mdi:chart-line",component:()=>$e(()=>Promise.resolve().then(()=>m7),void 0)}],actionButtons:[{id:"overview",action:"overview",title:"bersicht"},{id:"settings",action:"settings",title:"Einstellungen"},{id:"camera",action:"camera",title:"Kamera"},{id:"image",action:"image",title:"Bild"}],actions:{getPrinterData:async function(c){const{hass:d}=c||{};if(!d||!d.states)return null;try{const{serial:u}=this.attributes,h=Object.keys(d.states).filter(y=>y.toLowerCase().includes(u.toLowerCase())),m={progress:"druckfortschritt",nozzleTemp:"temperatur_der_duse",bedTemp:"druckbetttemperatur",currentStep:"aktueller_arbeitsschritt",remainingTime:"verbleibende_zeit",nozzleSize:"dusengrosse",nozzleType:"dusentyp",currentLayer:"aktuelle_schicht",totalLayers:"gesamtzahl_der_schichten",startTime:"startzeit",endTime:"vrs_fertigstellung",printStatus:"druckstatus",printType:"drucktyp",speedProfile:"geschwindigkeitsprofil",fanSpeed:"druckkopflufterdrehzahl",heatbreakFanSpeed:"hotendlufterdrehzahl",targetNozzle:"zieltemperatur_der_duse",targetBed:"zieltemperatur_des_druckbett",chamberLight:"druckraumbeleuchtung",cameraEnabled:"enable_camera",imageCamera:"verwenden_sie_eine_bildsensorkamera",alertTone:"aufforderungston_zulassen",pause:"druckvorgang_anhalten",resume:"druckvorgang_fortsetzen",stop:"druckvorgang_beenden",forceUpdate:"aktualisierung_erzwingen",printError:"druckfehler",lanMode:"entwickler_lan_modus",firmwareStatus:"firmware_status",hmsError:"hms_fehler",mqttEncryption:"mqtt_verschlusselungsfirmware",online:"online",timelapse:"aufnahme_von_zeitraffern",extruderFilament:"extruder_filament_status",totalUsage:"gesamtnutzung",ipAddress:"ip_adresse",mqttMode:"mqtt_verbindungsmodus",sdCard:"sd_kartenstatus",wifiSignal:"wi_fi_signalqualitat"},f={};h.forEach(y=>{const w=d.states[y];if(!w)return;const _=y.toLowerCase();Object.keys(m).forEach(k=>{const N=m[k].toLowerCase();_.endsWith(N)&&!f[k]&&(f[k]=w.state,f[k+"_entity"]=w)})});const g=Object.keys(d.states).find(y=>{const w=y.toLowerCase();return w.startsWith("camera.")&&w.includes(u.toLowerCase())&&(w.endsWith("_kamera")||w.endsWith("_camera"))});g&&(f.cameraEntityId=g,f.cameraEntity=d.states[g],this._cameraLogged||(console.log(" Found camera entity:",g),this._cameraLogged=!0));let p=null,v=null,b=null;if(d.devices){const y=[];Object.keys(d.devices).forEach(w=>{const _=d.devices[w],k=_.name||"",N=JSON.stringify(_.identifiers||[]);if(k.toLowerCase().includes("bambu")||N.toLowerCase().includes("bambu")){const C=k.toLowerCase().includes(u.toLowerCase())||N.toLowerCase().includes(u.toLowerCase());y.push({id:w,name:k,identifiers:_.identifiers,area_id:_.area_id,matches_serial:C}),C&&(v=w,p=_.area_id)}}),this._deviceLogged||(console.log(" [BAMBU DEVICES] Found:",y.length,"devices"),v?console.log(" [MATCH] Device ID:",v,"| Area ID:",p):console.log(" [NO MATCH] Serial not found in",y.length,"Bambu devices"),this._deviceLogged=!0)}return p&&d.areas&&d.areas[p]&&(b=d.areas[p].name),this.updateAttributes({progress:parseFloat(f.progress)||0,nozzle_temp:f.nozzleTemp,bed_temp:f.bedTemp,current_step:f.currentStep,remaining_time:f.remainingTime,is_printing:f.progress>0&&f.currentStep!=="idle",area_id:p,camera_entity_id:f.cameraEntityId||null}),this.area_id=p,this.area=b,f}catch(u){return console.error("Failed to get printer data:",u),null}},refresh:async function(c){return await this.executeAction("getPrinterData",c)}}}),this._originalConfig=e}async onMount(e){await super.onMount(e),this._hass=e.hass,await this.executeAction("getPrinterData",{hass:e.hass}),this._updateInterval=setInterval(async()=>{await this.executeAction("getPrinterData",{hass:this._hass})},2e3)}async onUnmount(){this._updateInterval&&(clearInterval(this._updateInterval),this._updateInterval=null),await super.onUnmount()}getConfig(){return this._originalConfig}toEntity(){const e=super.toEntity();return e.area=this.area||null,e}}function nn(){try{const t=localStorage.getItem("energy_dashboard_sensors");if(t)return JSON.parse(t)}catch(t){console.error("Failed to load sensor config:",t)}return{gridImportSensor:null,kwhSensor:"sensor.smart_meter_ts_65a_3_bezogene_wirkenergie",pvTotalSensor:null}}function FS(t){try{localStorage.setItem("energy_dashboard_sensors",JSON.stringify(t)),console.log(" Sensor config saved:",t)}catch(e){console.error("Failed to save sensor config:",e)}}class PS extends rt{constructor(e){const{id:i,name:n,serial:r,deviceType:o,type:a,category:l}=e;super({id:i,domain:"energy_dashboard_device",name:n,icon:'<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 19V5C2 3.89543 2.89543 3 4 3H20C21.1046 3 22 3.89543 22 5V19C22 20.1046 21.1046 21 20 21H4C2.89543 21 2 20.1046 2 19Z" stroke="currentColor" stroke-width="1.5"></path><path d="M2 7L22 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5 5.01L5.01 4.99889" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8 5.01L8.01 4.99889" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M11 5.01L11.01 4.99889" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',brandColor:"rgb(48, 209, 88)",category:"devices",relevance:75,attributes:{serial:r,device_type:o,energy_type:a,category:l,progress:0,nozzle_temp:null,bed_temp:null,current_step:null,remaining_time:null,is_printing:!1},hasTabs:!0,hasCustomView:!0,showInDetailView:!0,viewComponent:()=>$e(()=>Promise.resolve().then(()=>f7),void 0),tabs:[{id:"controls",name_de:"Steuerung",name_en:"Controls",icon:"mdi:tune",component:()=>$e(()=>Promise.resolve().then(()=>J0),void 0)},{id:"sensors",name_de:"Sensoren",name_en:"Sensors",icon:"mdi:chart-line",component:()=>$e(()=>Promise.resolve().then(()=>p7),void 0)},{id:"diagnostics",name_de:"Diagnose",name_en:"Diagnostics",icon:"mdi:wrench",component:()=>$e(()=>Promise.resolve().then(()=>g7),void 0)},{id:"misc",name_de:"Sonstiges",name_en:"Miscellaneous",icon:"mdi:dots-horizontal",component:()=>$e(()=>Promise.resolve().then(()=>J0),void 0)}],actionButtons:[{id:"overview",action:"overview",title:"bersicht"},{id:"settings",action:"settings",title:"Einstellungen"}],actions:{loadEnergyPreferences:async function(c){const{hass:d}=c||{};if(!d||!d.connection)return null;try{const u=await d.connection.sendMessagePromise({type:"energy/get_prefs"});console.log(" Energy Preferences loaded:",u),this.updateAttributes({energy_prefs:u});let h=null;if(u.energy_sources){const m=u.energy_sources.find(f=>f.type==="grid");m&&m.flow_from&&m.flow_from.length>0&&(h=m.flow_from[0].stat_energy_from)}return{prefs:u,gridImportSensor:h}}catch(u){return console.error("Failed to load energy preferences:",u),null}},getGridImportValue:async function(c){const{hass:d}=c||{};if(!d||!d.states)return 0;try{const h=nn().gridImportSensor||this.attributes.grid_import_sensor;if(!h)return console.warn("No grid import sensor configured"),0;const m=d.states[h];if(!m)return console.warn("Grid import sensor not found:",h),0;const f=parseFloat(m.state)||0;return this.updateAttributes({grid_import_value:f,grid_import_unit:m.attributes?.unit_of_measurement||"kWh"}),f}catch(u){return console.error("Failed to get grid import value:",u),0}},updateSensorConfig:async function(c){const{gridImportSensor:d,kwhSensor:u,pvTotalSensor:h}=c,f={...nn(),...d!==void 0&&{gridImportSensor:d},...u!==void 0&&{kwhSensor:u},...h!==void 0&&{pvTotalSensor:h}};return FS(f),d!==void 0&&this.updateAttributes({grid_import_sensor:d}),u!==void 0&&this.updateAttributes({kwh_sensor:u}),h!==void 0&&this.updateAttributes({pv_total_sensor:h}),{success:!0}},getEnergyData:async function(c){const{hass:d}=c||{};if(!d||!d.states)return null;try{const{serial:u}=this.attributes,h=Object.keys(d.states).filter(y=>y.toLowerCase().includes(u.toLowerCase())),m={progress:"druckfortschritt",nozzleTemp:"temperatur_der_duse",bedTemp:"druckbetttemperatur",currentStep:"aktueller_arbeitsschritt",remainingTime:"verbleibende_zeit",nozzleSize:"dusengrosse",nozzleType:"dusentyp",currentLayer:"aktuelle_schicht",totalLayers:"gesamtzahl_der_schichten",startTime:"startzeit",endTime:"vrs_fertigstellung",printStatus:"druckstatus",printType:"drucktyp",speedProfile:"geschwindigkeitsprofil",fanSpeed:"druckkopflufterdrehzahl",heatbreakFanSpeed:"hotendlufterdrehzahl",targetNozzle:"zieltemperatur_der_duse",targetBed:"zieltemperatur_des_druckbett",chamberLight:"druckraumbeleuchtung",cameraEnabled:"enable_camera",imageCamera:"verwenden_sie_eine_bildsensorkamera",alertTone:"aufforderungston_zulassen",pause:"druckvorgang_anhalten",resume:"druckvorgang_fortsetzen",stop:"druckvorgang_beenden",forceUpdate:"aktualisierung_erzwingen",printError:"druckfehler",lanMode:"entwickler_lan_modus",firmwareStatus:"firmware_status",hmsError:"hms_fehler",mqttEncryption:"mqtt_verschlusselungsfirmware",online:"online",timelapse:"aufnahme_von_zeitraffern",extruderFilament:"extruder_filament_status",totalUsage:"gesamtnutzung",ipAddress:"ip_adresse",mqttMode:"mqtt_verbindungsmodus",sdCard:"sd_kartenstatus",wifiSignal:"wi_fi_signalqualitat"},f={};h.forEach(y=>{const w=d.states[y];if(!w)return;const _=y.toLowerCase();Object.keys(m).forEach(k=>{const N=m[k].toLowerCase();_.endsWith(N)&&!f[k]&&(f[k]=w.state,f[k+"_entity"]=w)})});const g=Object.keys(d.states).find(y=>{const w=y.toLowerCase();return w.startsWith("camera.")&&w.includes(u.toLowerCase())&&(w.endsWith("_kamera")||w.endsWith("_camera"))});g&&(f.cameraEntityId=g,f.cameraEntity=d.states[g],this._cameraLogged||(console.log(" Found camera entity:",g),this._cameraLogged=!0));let p=null,v=null,b=null;if(d.devices){const y=[];Object.keys(d.devices).forEach(w=>{const _=d.devices[w],k=_.name||"",N=JSON.stringify(_.identifiers||[]);if(k.toLowerCase().includes("bambu")||N.toLowerCase().includes("bambu")){const C=k.toLowerCase().includes(u.toLowerCase())||N.toLowerCase().includes(u.toLowerCase());y.push({id:w,name:k,identifiers:_.identifiers,area_id:_.area_id,matches_serial:C}),C&&(v=w,p=_.area_id)}}),this._deviceLogged||(console.log(" [BAMBU DEVICES] Found:",y.length,"devices"),v?console.log(" [MATCH] Device ID:",v,"| Area ID:",p):console.log(" [NO MATCH] Serial not found in",y.length,"Bambu devices"),this._deviceLogged=!0)}return p&&d.areas&&d.areas[p]&&(b=d.areas[p].name),this.updateAttributes({progress:parseFloat(f.progress)||0,nozzle_temp:f.nozzleTemp,bed_temp:f.bedTemp,current_step:f.currentStep,remaining_time:f.remainingTime,is_printing:f.progress>0&&f.currentStep!=="idle",area_id:p,camera_entity_id:f.cameraEntityId||null}),this.area_id=p,this.area=b,f}catch(u){return console.error("Failed to get energy data:",u),null}},getHistoricalPeriod:async function(c){const{hass:d,periodType:u="day",periodIndex:h=0}=c||{};if(!d||!d.connection)return null;try{const f=nn().kwhSensor||"sensor.smart_meter_ts_65a_3_bezogene_wirkenergie",{start:g,end:p,label:v}=this._calculatePeriodDates(u,h,d.language||"de");console.log(` Fetching statistics for ${v}:`,g,"",p);const y=(await d.connection.sendMessagePromise({type:"recorder/statistics_during_period",start_time:g.toISOString(),end_time:p.toISOString(),statistic_ids:[f],period:"hour"}))[f];if(!y||y.length===0)return console.warn("No statistics found for period:",v),{consumption:0,unit:"kWh",periodLabel:v,periodType:u,periodIndex:h};const w=y[0]?.sum||0,_=y[y.length-1]?.sum||0,N=(_-w)/1e3;return console.log(` ${v}: ${N.toFixed(2)} kWh`),{consumption:parseFloat(N.toFixed(2)),unit:"kWh",periodLabel:v,periodType:u,periodIndex:h,startValue:w/1e3,endValue:_/1e3}}catch(m){return console.error("Failed to get historical period:",m),null}},getCurrentPeriodConsumption:async function(c){const{hass:d,periodType:u="day"}=c||{};if(!d||!d.connection)return{consumption:0,unit:"kWh",periodLabel:"",trend:0,trendPositive:!1};try{const h=nn(),m=h.kwhSensor||h.kwh;if(!m)return console.warn("No kWh sensor configured for getCurrentPeriodConsumption"),{consumption:0,unit:"kWh",periodLabel:"",trend:0,trendPositive:!1};const{start:f,end:g,label:p}=this._calculatePeriodDates(u,0,d.language||"de");let v;switch(u){case"day":v="hour";break;case"week":v="day";break;case"month":v="day";break;case"year":v="month";break;default:v="hour"}let b=0;try{let S,x;switch(u){case"day":S=new Date(f.getTime()-36e5),x=new Date(f);break;case"week":const A=new Date(f.getTime()-864e5);S=new Date(A.getFullYear(),A.getMonth(),A.getDate(),0,0,0),x=new Date(A.getFullYear(),A.getMonth(),A.getDate(),23,59,59);break;case"month":const P=new Date(f);P.setDate(0),S=new Date(P.getFullYear(),P.getMonth(),P.getDate(),0,0,0),x=new Date(P.getFullYear(),P.getMonth(),P.getDate(),23,59,59);break;case"year":const I=new Date(f.getFullYear()-1,11,31);S=new Date(I.getFullYear(),I.getMonth(),I.getDate(),0,0,0),x=new Date(I.getFullYear(),I.getMonth(),I.getDate(),23,59,59);break}const B=await this._fetchStatistics({hass:d,startTime:S,endTime:x,sensorIds:[m],period:v});B?.[m]?.length>0&&(b=B[m][B[m].length-1]?.sum||0)}catch(S){console.warn("Could not fetch baseline for consumption, starting from 0:",S.message),b=0}const y=await this._fetchStatistics({hass:d,startTime:f,endTime:g,sensorIds:[m],period:v});if(!y||!y[m]||y[m].length===0)return{consumption:0,unit:"kWh",periodLabel:p,trend:0,trendPositive:!1};const w=y[m],k=((w[w.length-1]?.sum||0)-b)/1e3,N=0,C=N>0;return{consumption:parseFloat(k.toFixed(2)),unit:"kWh",periodLabel:p,trend:Math.abs(N),trendPositive:C}}catch(h){return console.error("Failed to get current period consumption:",h),{consumption:0,unit:"kWh",periodLabel:"",trend:0,trendPositive:!1}}},getChartData:async function(c){const{hass:d,periodType:u="day",sensorId:h}=c||{};if(!d||!d.connection)return{periodType:u,periodLabel:"",chartType:"line",unit:"kWh",dataPoints:[]};try{const m=nn(),f=h||m.kwhSensor;if(!f)return console.warn("No kWh sensor configured for getChartData"),{periodType:u,periodLabel:"",chartType:"line",unit:"kWh",dataPoints:[]};const g=new Date,p=d.language||"de";if(u==="year"){const S=g.getFullYear(),x=S-1,B=new Date(x,0,1,0,0,0),A=new Date(x,11,31,23,59,59),P=new Date(S,0,1,0,0,0),I=new Date;let z=0;try{const K=await this._fetchStatistics({hass:d,startTime:new Date(x-1,11,1,0,0,0),endTime:new Date(x-1,11,31,23,59,59),sensorIds:[f],period:"month"});K?.[f]?.length>0&&(z=K[f][K[f].length-1]?.sum||0)}catch(K){console.warn("Could not fetch baseline for previous year:",K.message)}const D=await this._fetchStatistics({hass:d,startTime:B,endTime:A,sensorIds:[f],period:"month"}),L=await this._fetchStatistics({hass:d,startTime:P,endTime:I,sensorIds:[f],period:"day"});let E=0;D?.[f]?.length>0&&(E=((D[f][D[f].length-1]?.sum||0)-z)/1e3);let W=0;const F=D?.[f]?.length>0?D[f][D[f].length-1]?.sum||0:z;return L?.[f]?.length>0&&(W=((L[f][L[f].length-1]?.sum||0)-F)/1e3),{periodType:"year",periodLabel:`${x} vs ${S}`,chartType:"bar",unit:"kWh",dataPoints:[{time:x.toString(),value:Math.max(0,parseFloat(E.toFixed(2))),timestamp:A.toISOString()},{time:S.toString(),value:Math.max(0,parseFloat(W.toFixed(2))),timestamp:I.toISOString()}]}}let v,b,y,w;switch(u){case"day":v=new Date(g.getFullYear(),g.getMonth(),g.getDate(),0,0,0),b=new Date(g.getFullYear(),g.getMonth(),g.getDate(),23,59,59),y="hour",w="line";break;case"week":v=new Date(g.getTime()-168*36e5),b=g,y="day",w="bar";break;case"month":v=new Date(g.getFullYear(),g.getMonth(),1,0,0,0),b=new Date(g.getFullYear(),g.getMonth()+1,0,23,59,59),y="day",w="bar";break;default:v=new Date(g.getFullYear(),g.getMonth(),g.getDate(),0,0,0),b=g,y="hour",w="line"}let _=0;try{let S,x;switch(u){case"day":S=new Date(v.getTime()-36e5),x=new Date(v);break;case"week":const A=new Date(v.getTime()-864e5);S=new Date(A.getFullYear(),A.getMonth(),A.getDate(),0,0,0),x=new Date(A.getFullYear(),A.getMonth(),A.getDate(),23,59,59);break;case"month":const P=new Date(v);P.setDate(0),S=new Date(P.getFullYear(),P.getMonth(),P.getDate(),0,0,0),x=new Date(P.getFullYear(),P.getMonth(),P.getDate(),23,59,59);break}const B=await this._fetchStatistics({hass:d,startTime:S,endTime:x,sensorIds:[f],period:y});B?.[f]?.length>0&&(_=B[f][B[f].length-1]?.sum||0)}catch(S){console.warn("Could not fetch baseline value, starting from 0:",S.message),_=0}const k=await this._fetchStatistics({hass:d,startTime:v,endTime:b,sensorIds:[f],period:y});if(!k||!k[f]||k[f].length===0)return{periodType:u,periodLabel:"",chartType:w,unit:"kWh",dataPoints:[]};const N=k[f],C=[];for(let S=0;S<N.length;S++){const x=N[S],B=new Date(x.start);let A;if(S===0)A=((x.sum||0)-_)/1e3;else{const I=N[S-1]?.sum||0;A=((x.sum||0)-I)/1e3}let P;u==="day"?P=B.toLocaleTimeString(p==="de"?"de-DE":"en-US",{hour:"2-digit",minute:"2-digit"}):u==="week"?P=B.toLocaleDateString(p==="de"?"de-DE":"en-US",{weekday:"short",day:"numeric"}):u==="month"?P=B.toLocaleDateString(p==="de"?"de-DE":"en-US",{day:"numeric"}):u==="year"&&(P=B.toLocaleDateString(p==="de"?"de-DE":"en-US",{month:"short"})),C.push({time:P,value:Math.max(0,parseFloat(A.toFixed(2))),timestamp:B.toISOString()})}return{periodType:u,periodLabel:this._calculatePeriodDates(u,0,p).label,chartType:w,unit:"kWh",dataPoints:C}}catch(m){return console.error("Failed to get chart data:",m),{periodType:u,periodLabel:"",chartType:"line",unit:"kWh",dataPoints:[]}}},_fetchStatistics:async function(c){const{hass:d,startTime:u,endTime:h,sensorIds:m,period:f}=c;try{return await d.connection.sendMessagePromise({type:"recorder/statistics_during_period",start_time:u.toISOString(),end_time:h.toISOString(),statistic_ids:m,period:f})}catch(g){console.warn("Statistics API failed, falling back to History API:",g.message);try{const p=await d.callWS({type:"history/history_during_period",start_time:u.toISOString(),end_time:h.toISOString(),entity_ids:m,minimal_response:!1,no_attributes:!1}),v={};return m.forEach((b,y)=>{const w=Array.isArray(p)?p[y]:p[b];if(!w||w.length===0){v[b]=[];return}const _=this._aggregateHistory(w,f,u,h);v[b]=_}),v}catch(p){throw console.error("Both Statistics and History API failed:",p),p}}},_aggregateHistory:function(c,d,u,h){const m=[],f=this._getPeriodMilliseconds(d);let g=new Date(u);for(;g<h;){const p=new Date(g.getTime()+f),v=c.filter(y=>{const w=new Date(y.last_changed||y.lu);return w>=g&&w<p});let b=0;if(v.length>0){const y=v[v.length-1];b=parseFloat(y.state||y.s)*1e3}else m.length>0&&(b=m[m.length-1].sum);m.push({start:g.toISOString(),sum:b}),g=p}return m},_getPeriodMilliseconds:function(c){switch(c){case"hour":return 36e5;case"day":return 864e5;case"month":return 2592e6;default:return 36e5}},_calculatePeriodDates:function(c,d,u="de"){const h=new Date;let m,f,g;switch(c){case"day":const p=new Date(h);p.setDate(h.getDate()+d),m=new Date(p.setHours(0,0,0,0)),f=new Date(p.setHours(23,59,59,999)),d===0?g=u==="de"?"Heute":"Today":d===-1?g=u==="de"?"Gestern":"Yesterday":g=m.toLocaleDateString(u==="de"?"de-DE":"en-US",{weekday:"short",day:"2-digit",month:"short"});break;case"week":const v=new Date(h),b=v.getDay(),y=(b===0?-6:1)-b;v.setDate(v.getDate()+y+d*7),m=new Date(v.setHours(0,0,0,0)),f=new Date(v),f.setDate(f.getDate()+6),f.setHours(23,59,59,999);const w=this._getISOWeek(m),_=m.getFullYear();d===0?g=u==="de"?`KW ${w}`:`Week ${w}`:g=u==="de"?`KW ${w} ${_}`:`Week ${w} ${_}`;break;case"month":const k=new Date(h.getFullYear(),h.getMonth()+d,1);m=new Date(k.getFullYear(),k.getMonth(),1,0,0,0,0),d===0?f=new Date:f=new Date(k.getFullYear(),k.getMonth()+1,0,23,59,59,999),g=m.toLocaleDateString(u==="de"?"de-DE":"en-US",{month:"short",year:d!==0?"numeric":void 0});break;case"year":const C=h.getFullYear()+d;m=new Date(C,0,1,0,0,0,0),d===0?f=new Date:f=new Date(C,11,31,23,59,59,999),g=C.toString();break;default:m=new Date(h.setHours(0,0,0,0)),f=new Date(h.setHours(23,59,59,999)),g=u==="de"?"Heute":"Today"}return{start:m,end:f,label:g}},_getISOWeek:function(c){const d=new Date(c.valueOf()),u=(c.getDay()+6)%7;d.setDate(d.getDate()-u+3);const h=d.valueOf();return d.setMonth(0,1),d.getDay()!==4&&d.setMonth(0,1+(4-d.getDay()+7)%7),1+Math.ceil((h-d)/6048e5)},refresh:async function(c){return await this.executeAction("getEnergyData",c)}}}),this._originalConfig=e}async onMount(e){await super.onMount(e),this._hass=e.hass;const i=nn();i.gridImportSensor&&this.updateAttributes({grid_import_sensor:i.gridImportSensor}),i.kwhSensor&&this.updateAttributes({kwh_sensor:i.kwhSensor}),i.pvTotalSensor&&this.updateAttributes({pv_total_sensor:i.pvTotalSensor}),await this.executeAction("loadEnergyPreferences",{hass:e.hass}),await this.executeAction("getGridImportValue",{hass:e.hass}),await this.executeAction("getEnergyData",{hass:e.hass})}async onUnmount(){await super.onUnmount()}getConfig(){return this._originalConfig}toEntity(){const e=super.toEntity();return e.area=this.area||null,e}}function O0(t){console.log(" DeviceEntityFactory.createDeviceEntity called with:",t);const{category:e}=t;switch(e){case"printer3d":return new AS(t);case"energy_dashboard":console.log(" Creating EnergyDashboardDeviceEntity...");const i=new PS(t);return console.log(" EnergyDashboardDeviceEntity created:",i),i;default:return console.error(`Unknown device category: ${e}`),null}}class IS extends rt{constructor(){super({id:"integration",domain:"integration",name:"Integration",icon:'<svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 19V5C2 3.89543 2.89543 3 4 3H20C21.1046 3 22 3.89543 22 5V19C22 20.1046 21.1046 21 20 21H4C2.89543 21 2 20.1046 2 19Z" stroke="currentColor" stroke-width="1.5"></path><path d="M2 7L22 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M5 5.01L5.01 4.99889" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8 5.01L8.01 4.99889" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M11 5.01L11.01 4.99889" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>',brandColor:"rgb(175, 82, 222)",category:"apps",relevance:90,attributes:{device_count:0,last_added:null},hasTabs:!1,hasCustomView:!0,showInDetailView:!0,actionButtons:[{id:"back",action:"back",title:"Zurck"},{id:"management",action:"settings",title:"Verwalten"}],viewComponent:()=>$e(()=>Promise.resolve().then(()=>L7),void 0),actions:{getDevices:async function(e){try{return this.actions._loadConfig.call(this).devices||[]}catch(i){return console.error("Failed to get devices:",i),[]}},addDevice:async function(e){const{deviceData:i}=e;try{const n=this.actions._loadConfig.call(this);i.id||(i.id=`device_${Date.now()}`),i.addedAt=i.addedAt||Date.now(),n.devices.push(i),this.actions._saveConfig.call(this,n);const r=O0(i);return r&&(_e.register(r),_e.isInitialized&&this._hass&&await r.onMount({hass:this._hass,storage:{get:o=>localStorage.getItem(o),set:(o,a)=>localStorage.setItem(o,a),delete:o=>localStorage.removeItem(o),clearNamespace:o=>{Object.keys(localStorage).forEach(a=>{a.startsWith(o)&&localStorage.removeItem(a)})}}}),console.log(` Created and registered device entity: ${r.id}`)),await this.updateDeviceStats(),{success:!0,device:i}}catch(n){return console.error("Failed to add device:",n),{success:!1,error:n.message}}},removeDevice:async function(e){const{deviceId:i}=e;try{const n=this.actions._loadConfig.call(this);return n.devices=n.devices.filter(r=>r.id!==i),this.actions._saveConfig.call(this,n),await _e.unregister(i),console.log(` Unregistered device entity: ${i}`),await this.updateDeviceStats(),{success:!0}}catch(n){return console.error("Failed to remove device:",n),{success:!1,error:n.message}}},_loadConfig:function(){try{const e=localStorage.getItem("integration_config");if(e)return JSON.parse(e)}catch(e){console.error("Failed to load integration config:",e)}return{devices:[]}},_saveConfig:function(e){try{localStorage.setItem("integration_config",JSON.stringify(e))}catch(i){console.error("Failed to save integration config:",i)}}}})}async onMount(e){await super.onMount(e),this._hass=e.hass,await this.loadSavedDevices(e),await this.updateDeviceStats()}async loadSavedDevices(e){try{const n=(await this.executeAction("_loadConfig")).devices||[];console.log(` Loading ${n.length} saved devices...`);for(const r of n)try{const o=O0(r);o&&(_e.register(o),await o.onMount({hass:e.hass,storage:e.storage}),console.log(` Loaded device entity: ${o.id} (${o.name})`))}catch(o){console.error(`Failed to load device ${r.id}:`,o)}console.log(` Loaded ${n.length} device entities`)}catch(i){console.error("Failed to load saved devices:",i)}}async updateDeviceStats(){try{const i=(await this.executeAction("_loadConfig")).devices||[],n=i.length>0?i[i.length-1].addedAt:null;this.updateAttributes({device_count:i.length,last_added:n})}catch(e){console.error("Failed to update device stats:",e)}}async onUnmount(){await super.onUnmount()}}const RS=new IS,BS=Object.freeze(Object.defineProperty({__proto__:null,default:RS},Symbol.toStringTag,{value:"Module"}));function i1({entity:t,hass:e,lang:i="de",onBack:n,onNavigate:r,onServiceCall:o}){return console.log(" SettingsView mounted with entity:",t),console.log(" SettingsView received hass:",e?"AVAILABLE":"MISSING"),e&&(console.log(" SettingsView hass.states:",!!e.states),console.log(" SettingsView hass.callWS:",!!e.callWS)),s("div",{className:"system-entity-view settings-view",children:s(so,{lang:i,onTabChange:a=>{if(console.log("Settings internal tab changed to:",a),t&&t.routes){const l=Object.keys(t.routes)[a];l&&r&&console.log("Route would be:",t.routes[l])}},systemEntity:t,hass:e})})}const zS=()=>i1,VS=Object.freeze(Object.defineProperty({__proto__:null,createSettingsView:zS,default:i1},Symbol.toStringTag,{value:"Module"}));function WS({entity:t,hass:e,lang:i="de",onBack:n,onNavigate:r,onServiceCall:o}){const[a,l]=M("discover"),[c,d]=M([]),[u,h]=M([]),[m,f]=M(!1),[g,p]=M(""),[v,b]=M(""),y=te(null),w=[{id:"discover",label:i==="de"?"Entdecken":"Discover",icon:"",badge:null},{id:"installed",label:i==="de"?"Installiert":"Installed",icon:"",badge:u.length||null},{id:"upload",label:"Upload",icon:"",badge:null},{id:"develop",label:i==="de"?"Entwickeln":"Develop",icon:"",badge:null}];U(()=>{_(),k()},[]);const _=async()=>{f(!0);try{const P=await t.executeAction("loadAvailablePlugins");d(P)}catch(P){console.error("Failed to load plugins:",P)}finally{f(!1)}},k=()=>{try{const P=localStorage.getItem("installed_plugins"),I=P?JSON.parse(P):[];h(I)}catch(P){console.error("Failed to load installed plugins:",P)}},N=async()=>{if(!g){alert(i==="de"?"Bitte gib eine Plugin-URL ein":"Please enter a plugin URL");return}f(!0);try{const P=await t.executeAction("installPluginFromURL",{url:g});P.success?(alert(` ${P.manifest.name} ${i==="de"?"wurde erfolgreich installiert!":"was successfully installed!"}`),p(""),k(),l("installed")):alert(` ${i==="de"?"Installation fehlgeschlagen:":"Installation failed:"} ${P.error}`)}catch(P){alert(` ${i==="de"?"Fehler:":"Error:"} ${P.message}`)}finally{f(!1)}},C=async()=>{if(!v){alert(i==="de"?"Bitte gib ein GitHub Repository ein (user/repo)":"Please enter a GitHub repository (user/repo)");return}f(!0);try{const P=await t.executeAction("installPluginFromGitHub",{repo:v});P.success?(alert(` ${P.manifest.name} ${i==="de"?"wurde von GitHub installiert!":"was installed from GitHub!"}`),b(""),k(),l("installed")):alert(` ${i==="de"?"Installation fehlgeschlagen:":"Installation failed:"} ${P.error}`)}catch(P){alert(` ${i==="de"?"Fehler:":"Error:"} ${P.message}`)}finally{f(!1)}},S=async P=>{const I=P.target.files[0];if(I){if(!I.name.endsWith(".zip")){alert(i==="de"?"Bitte whle eine ZIP-Datei":"Please select a ZIP file");return}f(!0);try{const z=await t.executeAction("installPluginFromZip",{file:I});z.success?(alert(` ${z.manifest.name} ${i==="de"?"wurde aus ZIP installiert!":"was installed from ZIP!"}`),k(),l("installed"),setShowUploadModal(!1)):alert(` ${i==="de"?"Installation fehlgeschlagen:":"Installation failed:"} ${z.error}`)}catch(z){alert(` ${i==="de"?"Fehler:":"Error:"} ${z.message}`)}finally{f(!1),P.target.value=""}}},x=async(P,I)=>{if(confirm(`${i==="de"?`${I} wirklich deinstallieren?`:`Really uninstall ${I}?`}`))try{const z=await t.executeAction("uninstallPlugin",{pluginId:P});z.success?(alert(` ${I} ${i==="de"?"wurde deinstalliert":"was uninstalled"}`),k()):alert(` ${i==="de"?"Deinstallation fehlgeschlagen:":"Uninstallation failed:"} ${z.error}`)}catch(z){alert(` ${i==="de"?"Fehler:":"Error:"} ${z.message}`)}},B=async P=>{try{(await t.executeAction("togglePlugin",{pluginId:P})).success&&k()}catch(I){console.error("Failed to toggle plugin:",I)}},A=({plugin:P,installed:I=!1})=>s("div",{className:"plugin-card",children:[s("div",{className:"plugin-header",children:[s("div",{className:"plugin-icon",children:P.icon||""}),s("div",{className:"plugin-info",children:[s("h3",{children:P.name}),s("p",{className:"plugin-author",children:[i==="de"?"von":"by"," ",P.author||"Unknown"]})]})]}),s("p",{className:"plugin-description",children:P.description}),s("div",{className:"plugin-footer",children:[s("span",{className:"plugin-version",children:["v",P.version||"1.0.0"]}),I?s("div",{style:{display:"flex",gap:"8px"},children:[s("button",{className:`toggle-btn ${P.enabled?"enabled":""}`,onClick:z=>{z.stopPropagation(),B(P.id)},children:P.enabled?"":""}),s("button",{className:"plugin-btn uninstall-btn",onClick:z=>{z.stopPropagation(),x(P.id,P.name)},children:i==="de"?"Lschen":"Delete"})]}):s("button",{className:"plugin-btn install-btn",onClick:z=>{z.stopPropagation(),P.url?t.executeAction("installPluginFromURL",{url:P.url}).then(D=>{D.success&&(alert(` ${P.name} ${i==="de"?"installiert":"installed"}!`),k())}):P.github&&t.executeAction("installPluginFromGitHub",{repo:P.github}).then(D=>{D.success&&(alert(` ${P.name} ${i==="de"?"installiert":"installed"}!`),k())})},children:i==="de"?"Installieren":"Install"})]})]});return s("div",{className:"plugin-store-container",children:[s("div",{className:"plugin-store-tabs",children:w.map(P=>s("button",{className:`plugin-tab ${a===P.id?"active":""}`,onClick:()=>l(P.id),children:[s("span",{children:P.icon}),s("span",{children:P.label}),P.badge&&s("span",{className:"plugin-tab-badge",children:P.badge})]},P.id))}),s("div",{className:"plugin-store-content",children:[a==="discover"&&s(ve,{children:m?s("div",{className:"loading-state",children:[s("div",{className:"loading-spinner"}),s("p",{children:i==="de"?"Lade Plugins...":"Loading plugins..."})]}):c.length>0?s("div",{className:"plugins-grid",children:c.map(P=>s(A,{plugin:P},P.id))}):s("div",{className:"empty-state",children:[s("div",{className:"empty-state-icon",children:""}),s("h3",{children:i==="de"?"Keine Plugins verfgbar":"No plugins available"}),s("p",{children:i==="de"?"Der Plugin Store ist noch leer":"The plugin store is empty"})]})}),a==="installed"&&s(ve,{children:u.length>0?s("div",{className:"plugins-grid",children:u.map(P=>s(A,{plugin:P,installed:!0},P.id))}):s("div",{className:"empty-state",children:[s("div",{className:"empty-state-icon",children:""}),s("h3",{children:i==="de"?"Keine Plugins installiert":"No plugins installed"}),s("p",{children:i==="de"?"Installiere Plugins um Fast Search Card zu erweitern":"Install plugins to extend Fast Search Card"})]})}),a==="upload"&&s("div",{className:"upload-section",children:[s("div",{className:"upload-card",children:[s("h3",{children:[" ",i==="de"?"Plugin von URL installieren":"Install plugin from URL"]}),s("p",{children:i==="de"?"Installiere ein Plugin direkt von einer URL (JavaScript-Datei)":"Install a plugin directly from a URL (JavaScript file)"}),s("div",{className:"input-group",children:[s("input",{type:"text",placeholder:"https://example.com/plugin.js",value:g,onChange:P=>p(P.target.value)}),s("button",{className:"upload-btn",onClick:N,disabled:m||!g,children:m?i==="de"?"Lade...":"Loading...":i==="de"?"Installieren":"Install"})]})]}),s("div",{className:"upload-card",children:[s("h3",{children:[" ",i==="de"?"Plugin von GitHub installieren":"Install plugin from GitHub"]}),s("p",{children:i==="de"?"Installiere ein Plugin aus einem GitHub Repository":"Install a plugin from a GitHub repository"}),s("div",{className:"input-group",children:[s("input",{type:"text",placeholder:"username/repository",value:v,onChange:P=>b(P.target.value)}),s("button",{className:"upload-btn",onClick:C,disabled:m||!v,children:m?i==="de"?"Lade...":"Loading...":i==="de"?"Von GitHub installieren":"Install from GitHub"})]})]}),s("div",{className:"upload-card",children:[s("h3",{children:[" ",i==="de"?"Plugin ZIP hochladen":"Upload plugin ZIP"]}),s("p",{children:i==="de"?"Lade ein Plugin als ZIP-Datei hoch":"Upload a plugin as a ZIP file"}),s("input",{type:"file",ref:y,accept:".zip",style:{display:"none"},onChange:S}),s("div",{className:"file-drop-zone",onClick:()=>y.current?.click(),children:[s("div",{className:"empty-state-icon",children:""}),s("h4",{children:i==="de"?"ZIP-Datei hier ablegen":"Drop ZIP file here"}),s("p",{children:i==="de"?"oder klicken zum Auswhlen":"or click to select"})]})]})]}),a==="develop"&&s("div",{className:"develop-section",children:[s("h3",{children:i==="de"?" Plugin entwickeln":" Develop Plugin"}),s("p",{children:i==="de"?"Erstelle eigene Plugins fr Fast Search Card":"Create custom plugins for Fast Search Card"}),s("div",{className:"docs-card",children:[s("h3",{children:[" ",i==="de"?"Dokumentation":"Documentation"]}),s("p",{children:i==="de"?"Lerne wie du Plugins fr Fast Search Card entwickelst":"Learn how to develop plugins for Fast Search Card"}),s("ul",{className:"docs-list",children:[s("li",{children:i==="de"?"Plugins sind JavaScript/JSX Module":"Plugins are JavaScript/JSX modules"}),s("li",{children:i==="de"?"Nutze die SystemEntity API":"Use the SystemEntity API"}),s("li",{children:i==="de"?"Zugriff auf Home Assistant via hass":"Access Home Assistant via hass"}),s("li",{children:i==="de"?"React/Preact fr UI-Komponenten":"React/Preact for UI components"}),s("li",{children:i==="de"?"Automatische Integration ins System":"Automatic system integration"})]}),s("div",{className:"code-example",children:s("pre",{children:`// manifest.json
{
  "id": "my-plugin",
  "name": "My Plugin",
  "version": "1.0.0",
  "system_entity": {
    "domain": "myplugin",
    "icon": "mdi:puzzle"
  }
}

// index.js
export default {
  manifest,
  async init(context) {
    // Initialisierung
  },
  actions: {
    myAction: async (params) => {
      return { success: true };
    }
  },
  viewComponent: () => import('./view.jsx')
};`})}),s("p",{children:i==="de"?"Siehe das Hello World Demo-Plugin in src/demo-plugins/ fr ein vollstndiges Beispiel.":"See the Hello World demo plugin in src/demo-plugins/ for a complete example."})]})]})]})]})}const OS=Object.freeze(Object.defineProperty({__proto__:null,default:WS},Symbol.toStringTag,{value:"Module"}));function $S({entity:t,hass:e,lang:i="de",onBack:n,onNavigate:r}){console.log(" AllSchedulesView RENDERED",{entity:t,hass:e,lang:i,hasOnNavigate:!!r});const o=te(e),[a,l]=M(!1);U(()=>{let D=!0;return(()=>{if(e&&e.states)o.current=e,D&&l(!0);else{console.log(" HASS ohne states - hole echtes HASS aus DOM...");const E=document.querySelector("home-assistant");E&&E.hass&&E.hass.states?(console.log(" Echtes HASS gefunden:",Object.keys(E.hass.states).length,"entities"),o.current=E.hass,D&&l(!0)):(console.warn(" Kein echtes HASS im DOM gefunden"),o.current=e,D&&l(!1))}})(),()=>{D=!1}},[e]);const[c,d]=M("all"),[u,h]=M([]),[m,f]=M([]),[g,p]=M(!1),[v,b]=M(!0),[y,w]=M(0),[_,k]=M({x:0,width:0}),N=te(null),C=D=>ee(`schedule.${D}`,i),S=D=>!a||!o.current?.states?.[D]?D:o.current.states[D].attributes?.friendly_name||D,x=Ee(D=>(i==="de"?{climate:"Klima",light:"Licht",switch:"Schalter",cover:"Rollladen",fan:"Lfter",media_player:"Medien",scene:"Szene",script:"Skript",automation:"Automation"}:{climate:"Climate",light:"Light",switch:"Switch",cover:"Cover",fan:"Fan",media_player:"Media",scene:"Scene",script:"Script",automation:"Automation"})[D]||D,[i]),B=D=>D?.type==="timer"||D==="timer"?s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s("path",{d:"M12 12C15.866 12 19 8.86599 19 5H5C5 8.86599 8.13401 12 12 12ZM12 12C15.866 12 19 15.134 19 19H5C5 15.134 8.13401 12 12 12Z",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M5 2L12 2L19 2",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M5 22H12L19 22",strokeLinecap:"round",strokeLinejoin:"round"})]}):s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[s("path",{d:"M9 2L15 2",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 10L12 14",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M12 22C16.4183 22 20 18.4183 20 14C20 9.58172 16.4183 6 12 6C7.58172 6 4 9.58172 4 14C4 18.4183 7.58172 22 12 22Z",strokeLinecap:"round",strokeLinejoin:"round"})]}),A=D=>{const L=[],E=[],W=[C("monday"),C("tuesday"),C("wednesday"),C("thursday"),C("friday"),C("saturday"),C("sunday")],F=["mon","tue","wed","thu","fri","sat","sun"];for(const K of D)try{const G=K.attributes,$=G.timeslots?.[0],Q=G.actions?.[0];let re=C("noDays");const he=G.weekdays||[];he.includes("daily")?re=C("daily"):he.includes("weekdays")?re=C("weekdays"):he.includes("weekend")?re=C("weekend"):he.length>0&&(re=he.map(ce=>W[F.indexOf(ce)]||ce).join(", "));let O=null;const H=Q?.service,X=Q?.data;H&&(H==="climate.set_temperature"?O=X?.temperature?`${C("schedule.setTemperature")} - ${X.temperature}C`:C("schedule.setTemperature"):H==="cover.open_cover"?O=C("schedule.open"):H==="cover.close_cover"?O=C("schedule.close"):H==="cover.set_cover_position"?O=X?.position?`${C("schedule.setPosition")} - ${X.position}%`:C("schedule.setPosition"):H.includes("turn_on")?O=C("schedule.turnOn"):H.includes("turn_off")?O=C("schedule.turnOff"):O=H);const me=(G.entities?.[0]||"unknown.unknown").split(".")[0],q={id:K.entity_id,name:G.friendly_name||K.entity_id,enabled:K.state==="on",entities:G.entities||[],time:$?$.slice(0,5):"00:00",days:re,daysRaw:he,action:O,actionRaw:Q?.service,serviceData:X,repeat_type:G.repeat_type||"repeat",type:G.repeat_type==="single"?"timer":"schedule",domainLabel:x(me),domainRaw:me};q.type==="timer"?E.push(q):L.push(q)}catch(G){console.warn(`Konnte Schedule ${K.entity_id} nicht verarbeiten:`,G)}return{allSchedules:L,allTimers:E}};U(()=>{const D=()=>{if(N.current){const E=["all","timer","schedule"].indexOf(c),W=N.current.querySelectorAll(".filter-tab");if(W[E]){const F=W[E],K=N.current.getBoundingClientRect(),G=F.getBoundingClientRect(),$=G.left-K.left,Q=G.width;k({x:Math.round($),width:Math.round(Q)})}}};return setTimeout(D,50),window.addEventListener("resize",D),()=>{window.removeEventListener("resize",D)}},[c]),U(()=>{const D=setTimeout(()=>p(!0),50);return()=>clearTimeout(D)},[]),U(()=>{a&&P()},[a,y]);const P=async()=>{b(!0);try{const D=o.current;if(!D?.states){console.error(" Kein HASS mit states gefunden (loadData)!"),b(!1);return}const E=Object.values(D.states).filter(K=>K.entity_id.startsWith("switch.schedule_")&&K.attributes.timeslots);console.log(` ${E.length} rohe Schedule-Entitten gefunden.`);const{allSchedules:W,allTimers:F}=A(E);console.log(` Transformiert: ${W.length} Schedules, ${F.length} Timer`),f(W),h(F),b(!1)}catch(D){console.error(" Fehler beim Laden aller Schedules:",D),f([]),h([]),b(!1)}},I=Ee(D=>{if(console.log(" Schedule geklickt:",D),!D.entities||D.entities.length===0){console.warn(" Schedule hat keine Entity:",D);return}const L=D.entities[0];console.log(` Navigation zu ${L} mit ScheduleTab`),r?r(L,{openTab:"schedule"}):(console.warn(" onNavigate Callback fehlt - Navigation nicht mglich"),alert(i==="de"?"Navigation nicht verfgbar. Bitte onNavigate Prop setzen.":"Navigation not available. Please set onNavigate prop."))},[r]),z=c==="all"?[...m,...u].sort((D,L)=>D.time.localeCompare(L.time)):c==="timer"?u:c==="schedule"?m:[];return!a||v?s("div",{className:"all-schedules-view loading",children:s("div",{className:"loading-spinner",children:C("loading")||(i==="de"?"Ldt...":"Loading...")})}):s("div",{className:`all-schedules-view ${g?"visible":""}`,children:[s("div",{className:"filter-tabs-container",ref:N,children:[s("div",{className:"filter-tabs",children:[s("button",{className:`filter-tab ${c==="all"?"active":""}`,onClick:()=>d("all"),children:C("all")||(i==="de"?"Alle":"All")}),s("button",{className:`filter-tab ${c==="timer"?"active":""}`,onClick:()=>d("timer"),children:C("timer")||"Timer"}),s("button",{className:`filter-tab ${c==="schedule"?"active":""}`,onClick:()=>d("schedule"),children:C("schedules")||(i==="de"?"Zeitplne":"Schedules")})]}),s(T.div,{className:"tab-slider",animate:{x:_.x,width:_.width},transition:{type:"spring",stiffness:300,damping:30}})]}),s("div",{className:"schedules-list",children:z.length===0?s("div",{className:"empty-state",children:s("p",{children:C("noSchedules")||(i==="de"?"Keine Zeitplne":"No schedules")})}):z.map((D,L)=>s(T.div,{className:"scheduler-item",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:L*.05},onClick:()=>I(D),style:{cursor:"pointer"},children:[s("div",{className:"item-icon",children:B(D)}),s("div",{className:"item-content",children:[s("div",{className:"item-name",children:[s("div",{className:"schedule-entity-info",children:s("span",{className:"entity-name",children:D.entities&&D.entities[0]?S(D.entities[0]):i==="de"?"Unbekannt":"Unknown"})}),s("span",{className:`item-type ${D.domainRaw}`,children:D.domainLabel})]}),s("div",{className:"item-time",children:[D.time&&s("span",{className:"schedule-time",children:[i==="de"?"Um":"At"," ",D.time]}),D.type==="schedule"&&D.days!==C("noDays")&&s(ve,{children:[s("span",{className:"separator",children:"-"}),s("span",{className:"schedule-days",children:D.days})]}),D.action&&s(ve,{children:[s("span",{className:"separator",children:"-"}),s("span",{className:"schedule-action",children:D.action})]})]})]})]},D.id))}),s("div",{className:"info-footer",children:s("p",{children:C("createInDetailView")||(i==="de"?"Zeitplne knnen in der Detailansicht der jeweiligen Gerte erstellt werden.":"Schedules can be created in the detail view of each device.")})})]})}const HS=Object.freeze(Object.defineProperty({__proto__:null,default:$S},Symbol.toStringTag,{value:"Module"}));function jS({tempLow:t,tempHigh:e,currentTemp:i=null,globalMin:n,globalMax:r,isToday:o=!1}){const a=r-n,l=(t-n)/a*100,c=(e-t)/a*100;let d=null;if(o&&i!==null){const u=(i-t)/(e-t);d=l+c*u}return s("div",{className:"temperature-bar-container",children:s("div",{className:"temperature-bar-track",children:s("div",{className:"temperature-bar-range",style:{left:`${l}%`,width:`${c}%`},children:o&&d!==null&&s("div",{className:"temperature-bar-current",style:{left:`${(i-t)/(e-t)*100}%`}})})})})}function US(t){if(!t||t.length===0)return{min:0,max:30};const e=t.flatMap(i=>[i.templow||i.temperature,i.temperature]).filter(i=>i!=null);return{min:Math.min(...e),max:Math.max(...e)}}function GS(t,e,i="de"){const n=[];if(t.apparent_temperature!==void 0&&t.temperature!==void 0&&Math.abs(t.apparent_temperature-t.temperature)>2){const o=Math.round(t.apparent_temperature);n.push(i==="de"?`Fhlt sich an wie ${o}`:`Feels like ${o}`)}if(t.cloud_coverage!==void 0){const r=t.cloud_coverage;let o="";i==="de"?r>=90?o="Bedeckt den ganzen Tag":r>=70?o="Stark bewlkt":r>=40?o="Teils bewlkt":r>=20?o="Leicht bewlkt":o="Klar":r>=90?o="Overcast all day":r>=70?o="Mostly cloudy":r>=40?o="Partly cloudy":r>=20?o="Mostly clear":o="Clear",n.push(o)}if(e&&e.precipitation_probability!==void 0&&e.precipitation_probability>20){const r=Math.round(e.precipitation_probability);n.push(i==="de"?`${r}% Regenwahrscheinlichkeit`:`${r}% chance of rain`)}if(t.visibility!==void 0&&t.visibility<10){const r=Math.round(t.visibility);n.push(i==="de"?`Sicht ${r} km`:`Visibility ${r} km`)}if(t.wind_gust_speed!==void 0&&t.wind_gust_speed>40){const r=Math.round(t.wind_gust_speed);n.push(i==="de"?`Windben bis ${r} km/h`:`Wind gusts up to ${r} km/h`)}return n.join(". ")+(n.length>0?".":"")}function KS({currentWeather:t,forecast:e,lang:i="de"}){if(!t)return null;const n=GS(t,e,i);return n?s("div",{className:"weather-summary-text",children:n}):null}const $0={hidden:{opacity:0,scale:.8,transition:{duration:.15,ease:[.4,0,1,1]}},visible:{opacity:1,scale:1,backgroundColor:"rgba(0, 0, 0, 0.5)",transition:{duration:.25,ease:[.25,.46,.45,.94]}},hover:{scale:1.15,backgroundColor:"rgba(255, 255, 255, 0.25)",transition:{duration:.2}}};function YS({hourlyData:t=[],currentWeather:e=null,todayForecast:i=null,lang:n="de"}){const[r,o]=M(!1),[a,l]=M(!1),c=te(null);if(!t||t.length===0)return null;const d=()=>{if(!c.current)return;const{scrollLeft:m,scrollWidth:f,clientWidth:g}=c.current;o(m>0),l(m<f-g-5)};U(()=>{d();const m=c.current;if(m)return m.addEventListener("scroll",d),window.addEventListener("resize",d),()=>{m.removeEventListener("scroll",d),window.removeEventListener("resize",d)}},[t]);const u=(m,f)=>{if(m.preventDefault(),!c.current)return;const g=300,p=c.current.scrollLeft,v=f==="left"?p-g:p+g;c.current.scrollTo({left:v,behavior:"smooth"})},h=m=>{const g=new Date(m).getHours();return t[0]===t.find(p=>p.datetime===m)?"Jetzt":`${g}:00`};return s("div",{className:"hourly-forecast",style:{position:"relative"},children:[s(KS,{currentWeather:e,forecast:i,lang:n}),s("div",{className:"hourly-forecast-scroll",ref:c,children:t.slice(0,24).map((m,f)=>s(T.div,{className:"hourly-forecast-item",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{type:"spring",damping:25,stiffness:120,delay:.02*f},children:[s("div",{className:"hourly-time",children:h(m.datetime)}),s("div",{className:"hourly-icon",children:wo(m.condition,22,"#FFFFFF",!0)}),s("div",{className:"hourly-temp",children:[Math.round(m.temperature),""]}),m.precipitation_probability!==void 0&&m.precipitation_probability>0&&s("div",{className:"hourly-precipitation",children:[s(Zg,{size:12,color:"white"}),s("span",{children:[Math.round(m.precipitation_probability),"%"]})]})]},m.datetime||f))}),s(Ce,{children:r&&s(T.div,{className:"scroll-indicator scroll-indicator-left",onClick:m=>u(m,"left"),variants:$0,initial:"hidden",animate:"visible",exit:"hidden",whileHover:"hover",whileTap:{scale:.95},children:s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s("polyline",{points:"15 18 9 12 15 6"})})})}),s(Ce,{children:a&&s(T.div,{className:"scroll-indicator scroll-indicator-right",onClick:m=>u(m,"right"),variants:$0,initial:"hidden",animate:"visible",exit:"hidden",whileHover:"hover",whileTap:{scale:.95},children:s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s("polyline",{points:"9 18 15 12 9 6"})})})})]})}function ZS({value:t,className:e=""}){const i=Gr(t,{damping:20,stiffness:100,mass:.5});U(()=>{i.set(t)},[t,i]);const n=Wi(i,r=>Math.round(r));return s(T.span,{className:e,children:n})}function qS({entity:t,hass:e,lang:i="de",onBack:n,onNavigate:r,onServiceCall:o}){const[a,l]=M(null),[c,d]=M([]),[u,h]=M([]),[m,f]=M(!0),[g,p]=M(null),[v,b]=M([]),[y,w]=M(null);U(()=>{console.log(" WeatherView mounted/updated"),console.log("   - entity:",t),console.log("   - entity.id:",t?.id),console.log("   - entity.domain:",t?.domain),console.log("   - entity.executeAction:",typeof t?.executeAction),console.log("   - hass exists:",!!e),console.log("   - hass.states exists:",!!e?.states),_()},[y]);const _=async()=>{f(!0),p(null);try{if(!t||typeof t.executeAction!="function")throw console.error("Entity does not have executeAction method:",t),new Error("Invalid entity instance");const N=await t.executeAction("getCurrentWeather",{hass:e,entity_id:y});if(!N)throw new Error("No weather data returned");l(N);const C=await t.executeAction("getForecast",{hass:e,entity_id:y,type:"daily"});d(C||[]);try{const S=await t.executeAction("getForecast",{hass:e,entity_id:y,type:"hourly"});h(S||[])}catch(S){console.warn("Hourly forecast not available:",S),h([])}t.attributes.locations&&t.attributes.locations.length>0&&b(t.attributes.locations)}catch(N){console.error("Failed to load weather data:",N),p(i==="en"?"Failed to load weather data":"Wetterdaten konnten nicht geladen werden")}finally{f(!1)}},k=N=>{const C=i==="en"?["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]:["So","Mo","Di","Mi","Do","Fr","Sa"],S=new Date(N);return C[S.getDay()]};return m?s("div",{className:"weather-view",children:s("div",{className:"weather-loading",children:s("div",{className:"loading-spinner",children:i==="en"?"Loading weather data...":"Ldt Wetterdaten..."})})}):g||!a?s("div",{className:"weather-view",children:s("div",{className:"weather-error",children:[s("div",{style:{fontSize:"48px",opacity:.5},children:""}),s("p",{children:g||(i==="en"?"No weather data available":"Keine Wetterdaten verfgbar")}),s("button",{onClick:_,className:"retry-button",children:i==="en"?"Retry":"Erneut versuchen"})]})}):s("div",{className:"weather-view",children:[v.length>0&&s("div",{className:"weather-location-selector",children:s("select",{value:y||"",onChange:N=>w(N.target.value||null),className:"location-dropdown",children:[s("option",{value:"",children:i==="en"?"Default":"Standard"}),v.map(N=>s("option",{value:N.entity_id,children:[N.name," ",N.is_primary?"":""]},N.id))]})}),s(T.div,{className:"weather-current",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",damping:20,stiffness:100},children:[s("div",{className:"weather-location",children:a.friendly_name||a.location||t?.attributes?.friendly_name||t?.name||(i==="en"?"Weather":"Wetter")}),s("div",{className:"weather-temperature-large",children:[s(ZS,{value:a.temperature,className:"temp-number"}),s("span",{className:"temp-unit",children:""})]}),s("div",{className:"weather-condition",children:XS(a.condition,i)}),c.length>0&&s("div",{className:"weather-high-low",children:["H:",Math.round(c[0].temperature)," T:",Math.round(c[0].templow||c[0].temperature-5),""]}),s("div",{className:"weather-icon-large",children:s(O8,{condition:a.condition,size:96,color:"#FFFFFF",animated:!0})}),s("div",{className:"weather-metrics",children:[a.humidity!==void 0&&s("div",{className:"metric",children:[s("div",{className:"metric-icon",children:s(Zg,{size:20,color:"white"})}),s("div",{className:"metric-value",children:[Math.round(a.humidity),"%"]})]}),a.wind_speed!==void 0&&s("div",{className:"metric",children:[s("div",{className:"metric-icon",children:s(V8,{size:20,color:"white"})}),s("div",{className:"metric-value",children:[Math.round(a.wind_speed)," ",a.wind_speed_unit]})]}),a.pressure!==void 0&&s("div",{className:"metric",children:[s("div",{className:"metric-icon",children:s(W8,{size:20,color:"white"})}),s("div",{className:"metric-value",children:[Math.round(a.pressure)," ",a.pressure_unit]})]})]})]}),u.length>0&&s(YS,{hourlyData:u,currentWeather:a,todayForecast:c.length>0?c[0]:null,lang:i}),c.length>0&&(()=>{const{min:N,max:C}=US(c.slice(0,10));return s(T.div,{className:"weather-forecast",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",damping:20,stiffness:100,delay:.1},children:[s("h3",{className:"forecast-title",children:i==="en"?"10-Day Forecast":"10-Tage Vorhersage"}),s("div",{className:"forecast-list",children:c.slice(0,10).map((S,x)=>{const B=x===0;return s(T.div,{className:"forecast-day",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{type:"spring",damping:25,stiffness:120,delay:.05*x},children:[s("div",{className:"forecast-weekday",children:B?i==="en"?"Today":"Heute":k(S.datetime)}),s("div",{className:"forecast-icon",children:wo(S.condition,22,"#FFFFFF",!0)}),s("div",{className:"forecast-precipitation",children:S.precipitation_probability!==void 0&&S.precipitation_probability>0?`${Math.round(S.precipitation_probability)}%`:s("span",{style:{opacity:.3},children:""})}),s("div",{className:"forecast-temp-container",children:[s("span",{className:"temp-low",children:[Math.round(S.templow||S.temperature-5),""]}),s(jS,{tempLow:S.templow||S.temperature-5,tempHigh:S.temperature,currentTemp:B?a.temperature:null,globalMin:N,globalMax:C,isToday:B}),s("span",{className:"temp-high",children:[Math.round(S.temperature),""]})]})]},S.datetime)})})]})})()]})}function XS(t,e){const i={de:{"clear-night":"Klare Nacht",cloudy:"Bewlkt",fog:"Nebel",hail:"Hagel",lightning:"Gewitter","lightning-rainy":"Gewitter mit Regen",partlycloudy:"Teilweise bewlkt","partly-cloudy":"Teilweise bewlkt",pouring:"Starkregen",rainy:"Regnerisch",snowy:"Schneefall","snowy-rainy":"Schneeregen",sunny:"Sonnig",windy:"Windig","windy-variant":"Strmisch",exceptional:"Auergewhnlich"},en:{"clear-night":"Clear night",cloudy:"Cloudy",fog:"Fog",hail:"Hail",lightning:"Lightning","lightning-rainy":"Thunderstorm",partlycloudy:"Partly cloudy","partly-cloudy":"Partly cloudy",pouring:"Pouring",rainy:"Rainy",snowy:"Snowy","snowy-rainy":"Sleet",sunny:"Sunny",windy:"Windy","windy-variant":"Stormy",exceptional:"Exceptional"}};return(i[e]||i.de)[t]||t}const JS=Object.freeze(Object.defineProperty({__proto__:null,default:qS},Symbol.toStringTag,{value:"Module"})),QS=({settings:t,articles:e,hass:i,lang:n="de",onUpdateFeedCategory:r,onToggleFeedEnabled:o,onUpdateSetting:a})=>{const[l,c]=M("main"),[d,u]=M(null),h=te(null),[m,f]=M(!1);console.log(" IOSSettingsView - hass:",i),console.log(" IOSSettingsView - hass.states:",i?.states);const g=i?.states?Object.keys(i.states).filter(x=>x.startsWith("event.")&&(i.states[x].attributes?.event_type==="feedreader"||i.states[x].attributes?.event_types?.includes("feedreader"))).map(x=>({id:x,entity:i.states[x],name:i.states[x]?.attributes?.friendly_name||x.replace("event.feedreader_","").replace(/_/g," "),articleCount:e.filter(B=>B.source===i.states[x]?.attributes?.friendly_name||B.source===x.replace("event.feedreader_","").replace(/_/g," ")).length})):[];console.log(" IOSSettingsView - availableFeeds:",g);const p=[{id:"news",label:"News",icon:""},{id:"tech",label:"Tech",icon:""},{id:"smarthome",label:"SmartHome",icon:""},{id:"sport",label:"Sport",icon:""},{id:"entertainment",label:"Entertainment",icon:""},{id:"politics",label:"Politics",icon:""},{id:"business",label:"Business",icon:""}],v={enter:x=>({x:x>0?"100%":"-100%",opacity:0}),center:{x:0,opacity:1},exit:x=>({x:x<0?"100%":"-100%",opacity:0})},b=x=>{u(x),c(`category-${x.id}`)},y=x=>{d&&(r(d.id,x),setTimeout(()=>{c("main"),u(null)},150))},w=()=>{c("main"),u(null)},_=x=>t.feeds[x]?.category||"news",k=x=>t.feeds[x]?.enabled!==!1,N=x=>{const B=p.find(A=>A.id===x);return B?B.label:x},C=x=>n==="de"?x===1?"1 Tag":`${x} Tage`:x===1?"1 Day":`${x} Days`,S=x=>({all:n==="de"?"Alle":"All",unread:n==="de"?"Ungelesen":"Unread",favorites:n==="de"?"Favoriten":"Favorites"})[x]||x;return s("div",{className:"ios-settings-container",children:s(Ce,{mode:"wait",initial:!1,custom:l==="main"?-1:1,children:l==="main"?s(T.div,{custom:-1,variants:v,initial:!1,animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:s("div",{className:"ios-navbar-title",children:n==="de"?"Einstellungen":"Settings"})}),s("div",{ref:h,className:"ios-settings-view",children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:"FEEDS"}),s("div",{className:"ios-card",children:g.length===0?s("div",{className:"ios-empty-state",children:s("p",{children:n==="de"?"Keine Feedreader-Feeds gefunden.":"No Feedreader feeds found."})}):g.map((x,B)=>{const A=k(x.id),P=_(x.id),I=N(P);return s("div",{children:[B>0&&s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:[s("div",{className:"ios-feed-icon",children:""}),s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:x.name}),s("div",{className:"ios-item-subtitle",children:[x.articleCount," ",n==="de"?"Artikel":"Articles"]})]})]}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:A,onChange:()=>o(x.id)}),s("span",{className:"ios-toggle-slider"})]})})]}),A&&s(ve,{children:[s("div",{className:"ios-divider ios-divider-inset"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>b(x),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label-small",children:n==="de"?"Kategorie":"Category"})})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:I}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]})]},x.id)})})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:n==="de"?"ANZEIGE":"DISPLAY"}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:n==="de"?"Bilder anzeigen":"Show Images"})})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:t.display?.showImages!==!1,onChange:x=>a("display.showImages",x.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:n==="de"?"Beim ffnen als gelesen markieren":"Mark as read when opening"})})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:t.display?.autoMarkRead||!1,onChange:x=>a("display.autoMarkRead",x.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>c("max-age"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:n==="de"?"Artikelalter":"Article Age"})})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:C(t.display?.maxAge||7)}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>c("max-articles"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:n==="de"?"Maximale Artikel":"Maximum Articles"})})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:t.display?.maxArticles||100}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>c("default-filter"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:n==="de"?"Standard-Filter":"Default Filter"})})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:S(t.display?.defaultFilter||"all")}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]})]})]}),s(Pe,{scrollContainerRef:h,isHovered:m})]},"main"):l.startsWith("category-")?s(T.div,{custom:1,variants:v,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s(T.button,{className:"ios-back-button",onClick:w,whileHover:{opacity:.7},whileTap:{opacity:.5},children:[s("svg",{width:"9",height:"14",viewBox:"0 0 9 14",children:s("path",{d:"M8 1L1 7L8 13",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:"Feeds"})]}),s("div",{className:"ios-navbar-title",children:n==="de"?"Kategorie":"Category"})]}),s("div",{ref:h,className:"ios-settings-view",children:s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:[n==="de"?"KATEGORIE FR":"CATEGORY FOR"," ",d?.name.toUpperCase()]}),s("div",{className:"ios-card",children:p.map((x,B)=>{const A=_(d?.id)===x.id;return s("div",{children:[B>0&&s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>y(x.id),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:[x.icon," ",x.label]})})}),s("div",{className:"ios-item-right",children:A&&s("svg",{className:"ios-checkmark",width:"16",height:"12",viewBox:"0 0 16 12",children:s("path",{d:"M1 6L6 11L15 1",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]},x.id)})})]})}),s(Pe,{scrollContainerRef:h,isHovered:m})]},`category-${d?.id}`):l==="max-age"?s(T.div,{custom:1,variants:v,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s(T.button,{className:"ios-back-button",onClick:w,whileHover:{opacity:.7},whileTap:{opacity:.5},children:[s("svg",{width:"9",height:"14",viewBox:"0 0 9 14",children:s("path",{d:"M8 1L1 7L8 13",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:n==="de"?"Anzeige":"Display"})]}),s("div",{className:"ios-navbar-title",children:n==="de"?"Artikelalter":"Article Age"})]}),s("div",{ref:h,className:"ios-settings-view",children:s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:n==="de"?"ARTIKELALTER":"ARTICLE AGE"}),s("div",{className:"ios-card",children:[1,3,7,14,30].map((x,B)=>{const A=(t.display?.maxAge||7)===x;return s("div",{children:[B>0&&s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{a("display.maxAge",x),setTimeout(()=>c("main"),150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:C(x)})})}),s("div",{className:"ios-item-right",children:A&&s("svg",{className:"ios-checkmark",width:"16",height:"12",viewBox:"0 0 16 12",children:s("path",{d:"M1 6L6 11L15 1",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]},x)})})]})}),s(Pe,{scrollContainerRef:h,isHovered:m})]},"max-age"):l==="max-articles"?s(T.div,{custom:1,variants:v,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s(T.button,{className:"ios-back-button",onClick:w,whileHover:{opacity:.7},whileTap:{opacity:.5},children:[s("svg",{width:"9",height:"14",viewBox:"0 0 9 14",children:s("path",{d:"M8 1L1 7L8 13",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:n==="de"?"Anzeige":"Display"})]}),s("div",{className:"ios-navbar-title",children:n==="de"?"Maximale Artikel":"Maximum Articles"})]}),s("div",{ref:h,className:"ios-settings-view",children:s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:n==="de"?"MAXIMALE ARTIKEL":"MAXIMUM ARTICLES"}),s("div",{className:"ios-card",children:[10,25,50,100,150,200,300,500].map((x,B)=>{const A=(t.display?.maxArticles||100)===x;return s("div",{children:[B>0&&s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{a("display.maxArticles",x),setTimeout(()=>c("main"),150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:x})})}),s("div",{className:"ios-item-right",children:A&&s("svg",{className:"ios-checkmark",width:"16",height:"12",viewBox:"0 0 16 12",children:s("path",{d:"M1 6L6 11L15 1",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]},x)})})]})}),s(Pe,{scrollContainerRef:h,isHovered:m})]},"max-articles"):l==="default-filter"?s(T.div,{custom:1,variants:v,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s(T.button,{className:"ios-back-button",onClick:w,whileHover:{opacity:.7},whileTap:{opacity:.5},children:[s("svg",{width:"9",height:"14",viewBox:"0 0 9 14",children:s("path",{d:"M8 1L1 7L8 13",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:n==="de"?"Anzeige":"Display"})]}),s("div",{className:"ios-navbar-title",children:n==="de"?"Standard-Filter":"Default Filter"})]}),s("div",{ref:h,className:"ios-settings-view",children:s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:n==="de"?"STANDARD-FILTER":"DEFAULT FILTER"}),s("div",{className:"ios-card",children:["all","unread","favorites"].map((x,B)=>{const A=(t.display?.defaultFilter||"all")===x;return s("div",{children:[B>0&&s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{a("display.defaultFilter",x),setTimeout(()=>c("main"),150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:S(x)})})}),s("div",{className:"ios-item-right",children:A&&s("svg",{className:"ios-checkmark",width:"16",height:"12",viewBox:"0 0 16 12",children:s("path",{d:"M1 6L6 11L15 1",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]},x)})})]})}),s(Pe,{scrollContainerRef:h,isHovered:m})]},"default-filter"):null})})};function H0(){try{const t=localStorage.getItem("newsSettings");if(t)return JSON.parse(t)}catch(t){console.error("Failed to load settings:",t)}return{feeds:{},display:{maxAge:7,maxArticles:100,showImages:!0,autoMarkRead:!1,defaultFilter:"all"}}}function e7(t){try{localStorage.setItem("newsSettings",JSON.stringify(t)),console.log(" Settings saved:",t)}catch(e){console.error("Failed to save settings:",e)}}function wr(t){if(!t)return"";const e=document.createElement("div");e.innerHTML=t;let i=e.textContent||e.innerText||"";return i=i.replace(/Continue reading\.\.\.?/gi,""),i=i.replace(/Read more\.\.\.?/gi,""),i=i.replace(/\[\.\.\.\.?\]/g,""),i=i.replace(/\[weiterlesen\]/gi,""),i=i.replace(/Weiterlesen\.\.\.?/gi,""),i=i.replace(/\[\]/g,""),i=i.replace(/$/g,""),i=i.replace(/\s+/g," ").trim(),i}function t7(t){if(!t)return console.error(" NewsView: Props are undefined!"),s("div",{style:{padding:"40px",textAlign:"center",color:"white"},children:[s("h3",{children:"Error: Component Props Missing"}),s("p",{children:"NewsView was called without props"})]});console.log(" NewsView called with props:",t);const{entity:e,hass:i,lang:n="de",onBack:r}=t,[o,a]=M([]),[l,c]=M([]),[d,u]=M(!0),[h,m]=M(null),[f,g]=M(!1),[p,v]=M(null),[b,y]=M(!1),[w,_]=M("overview"),[k,N]=M(()=>H0()),[C,S]=M(()=>H0().display.defaultFilter||"all"),[x,B]=M(!1),[A,P]=M(!1),I=te(null),z=()=>{if(p){v(null);return}if(b){y(!1),_("overview");return}r&&r()};U(()=>{const q=o.filter(ie=>!ie.read).length,ce=Object.keys(k.feeds||{}).filter(ie=>k.feeds[ie].enabled).length;return window._newsViewRef={handleOpenSettings:()=>{y(!0),_("settings")},handleOverview:()=>{y(!1),v(null),_("overview")},handleRefresh:E,handleBackNavigation:z,selectedArticle:p,showSettings:b,handleToggleRead:()=>p&&K(p),handleToggleFavorite:()=>p&&he(p),getActiveButton:()=>w,unreadCount:q,feedCount:ce},()=>{delete window._newsViewRef}},[p,b,w,r,o,k]),U(()=>{const q=new CustomEvent("news-view-state-changed");window.dispatchEvent(q)},[p,b]),U(()=>{console.log(" NewsView mounted/updated"),console.log("   - entity:",e),console.log("   - entity.id:",e?.id),console.log("   - hass exists:",!!i),L()},[]),U(()=>{W(C)},[C,o]),U(()=>{const q=()=>{const ie=I.current;if(!ie)return;const{scrollLeft:J,scrollWidth:Y,clientWidth:oe}=ie;B(J>10),P(J<Y-oe-10)},ce=I.current;if(ce){q();const ie=setTimeout(q,100);return ce.addEventListener("scroll",q),window.addEventListener("resize",q),()=>{clearTimeout(ie),ce.removeEventListener("scroll",q),window.removeEventListener("resize",q)}}},[o,C]);const D=q=>{const ce=I.current;if(!ce)return;const ie=200,J=q==="left"?ce.scrollLeft-ie:ce.scrollLeft+ie;ce.scrollTo({left:J,behavior:"smooth"})},L=async()=>{u(!0),m(null);try{if(!e||typeof e.executeAction!="function")throw console.error("Entity does not have executeAction method:",e),new Error("Invalid entity instance");const q=await e.executeAction("getArticles",{hass:i,refresh:!1});if(!q)throw new Error("No articles returned");console.log(` Loaded ${q.length} articles`),a(q),c(q)}catch(q){console.error("Failed to load news:",q),m(q.message)}finally{u(!1)}},E=async()=>{g(!0);try{const q=await e.executeAction("refreshFeeds",{hass:i});a(q)}catch(q){console.error("Failed to refresh feeds:",q)}finally{g(!1)}},W=q=>{c(q==="all"?o:q==="unread"?o.filter(ce=>!ce.read):q==="favorites"?o.filter(ce=>ce.favorite):o.filter(ce=>ce.category===q))},F=async q=>{console.log(" Article clicked:",q.id),k.display.autoMarkRead&&(await e.executeAction("markAsRead",{articleId:q.id}),a(ce=>ce.map(ie=>ie.id===q.id?{...ie,read:!0}:ie)),q={...q,read:!0}),v(q)},K=async q=>{const ce=!q.read;ce?await e.executeAction("markAsRead",{articleId:q.id}):await e.executeAction("markAsUnread",{articleId:q.id}),a(ie=>ie.map(J=>J.id===q.id?{...J,read:ce}:J)),p&&p.id===q.id&&v(ie=>({...ie,read:ce}))},G=q=>{q.link&&window.open(q.link,"_blank")},$=async q=>{N(q),e7(q),await L()},Q=(q,ce)=>{const ie={...k,feeds:{...k.feeds,[q]:{...k.feeds[q],category:ce,enabled:k.feeds[q]?.enabled!==!1}}};$(ie)},re=q=>{const ce=k.feeds[q]?.enabled!==!1,ie={...k,feeds:{...k.feeds,[q]:{...k.feeds[q],enabled:!ce}}};$(ie)},he=async(q,ce)=>{await e.executeAction("toggleFavorite",{articleId:q.id});let ie=!1;a(J=>J.map(Y=>Y.id===q.id?(ie=!Y.favorite,{...Y,favorite:ie}):Y)),p&&p.id===q.id&&v(J=>({...J,favorite:ie}))},O=()=>{const q=new Set(o.map(ce=>ce.category).filter(ce=>ce));return Array.from(q).sort()},H=q=>o.filter(ce=>ce.category===q).length,X=()=>o.filter(q=>!q.read).length;if(d)return s("div",{className:"news-view-container",children:s("div",{className:"news-loading",children:[s("div",{className:"loading-spinner"}),s("p",{children:n==="de"?"Lade Nachrichten...":"Loading news..."})]})});if(h)return s("div",{className:"news-view-container",children:s("div",{className:"news-error",children:[s("h3",{children:n==="de"?"Fehler":"Error"}),s("p",{children:h}),s("button",{onClick:L,className:"retry-button",children:n==="de"?"Erneut versuchen":"Retry"})]})});const me=e?.attributes?.has_feedreader;if(!d&&!me)return s("div",{className:"news-view-container",children:s("div",{className:"news-feedparser-hint",children:[s("div",{className:"hint-icon",children:s("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"2"}),s("path",{d:"M12 16v-4M12 8h.01",strokeWidth:"2",strokeLinecap:"round"})]})}),s("h2",{children:n==="de"?"Feedreader nicht konfiguriert":"Feedreader not configured"}),s("p",{className:"hint-description",children:n==="de"?"Um RSS Feeds zu nutzen, konfiguriere die Feedreader Integration in Home Assistant.":"To use RSS feeds, configure the Feedreader integration in Home Assistant."}),s("div",{className:"hint-steps",children:[s("h3",{children:n==="de"?"Einrichtung:":"Setup:"}),s("ol",{children:[s("li",{children:n==="de"?"ffne Einstellungen  Gerte & Dienste":"Open Settings  Devices & Services"}),s("li",{children:n==="de"?'Klicke auf "Integration hinzufgen"':'Click "Add Integration"'}),s("li",{children:n==="de"?'Suche nach "Feedreader"':'Search for "Feedreader"'}),s("li",{children:n==="de"?"Fge deine RSS Feed-URLs hinzu":"Add your RSS feed URLs"})]})]}),s("div",{className:"hint-example",children:[s("h3",{children:n==="de"?"Beispiel Feed-URLs:":"Example Feed URLs:"}),s("pre",{children:`https://www.heise.de/rss/heise.rdf
https://www.tagesschau.de/xml/rss2/
https://feeds.bbci.co.uk/news/rss.xml`})]}),s("a",{href:"https://www.home-assistant.io/integrations/feedreader/",target:"_blank",rel:"noopener noreferrer",className:"hint-link-button",children:[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s("polyline",{points:"15 3 21 3 21 9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s("line",{x1:"10",y1:"14",x2:"21",y2:"3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),n==="de"?"Zur Home Assistant Dokumentation":"Open Home Assistant Documentation"]})]})});if(p)return s("div",{className:"news-view-container",children:s("div",{className:"news-detail-content",children:s(T.div,{className:"news-detail-article",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[p.category&&s("div",{className:"article-detail-meta",children:s("span",{className:`article-category-badge category-${p.category}`,children:p.category})}),s("h1",{className:"article-detail-title",children:wr(p.title)}),p.thumbnail&&k.display.showImages&&s("div",{className:"article-detail-thumbnail",children:s("img",{src:p.thumbnail,alt:p.title})}),p.description&&s("p",{className:"article-detail-description",children:wr(p.description)}),p.content&&p.content!==p.description&&s("div",{className:"article-detail-body",children:wr(p.content)}),s("button",{onClick:()=>G(p),className:"article-detail-link-button",children:[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s("polyline",{points:"15 3 21 3 21 9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s("line",{x1:"10",y1:"14",x2:"21",y2:"3",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),n==="de"?"Artikel ffnen":"Open Article"]})]})})});if(b){const q=i&&i.states?Object.keys(i.states).filter(ie=>ie.startsWith("event.")&&(i.states[ie].attributes?.event_type==="feedreader"||i.states[ie].attributes?.event_types?.includes("feedreader"))):[];return console.log(" Settings: Found feeds:",q),s(QS,{settings:k,articles:o,hass:i,lang:n,onUpdateFeedCategory:Q,onToggleFeedEnabled:re,onUpdateSetting:(ie,J)=>{const Y=ie.split("."),oe={...k};Y.length===2&&(oe[Y[0]]={...oe[Y[0]],[Y[1]]:J}),$(oe)}})}return s("div",{className:"news-view-container",children:[s("div",{className:"news-filter-wrapper",style:{position:"relative",marginBottom:"20px"},children:[s(Ce,{children:x&&s(T.div,{className:"news-scroll-indicator news-scroll-indicator-left",onClick:()=>D("left"),initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},whileHover:{scale:1.1},whileTap:{scale:.95},transition:{duration:.2},children:s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("path",{d:"M15 18L9 12L15 6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),s(Ce,{children:A&&s(T.div,{className:"news-scroll-indicator news-scroll-indicator-right",onClick:()=>D("right"),initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},whileHover:{scale:1.1},whileTap:{scale:.95},transition:{duration:.2},children:s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("path",{d:"M9 18L15 12L9 6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),s(T.div,{className:"news-filter-bar",ref:I,initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:s("div",{className:"filter-tabs",children:[s(T.button,{className:`filter-tab ${C==="all"?"active":""}`,onClick:()=>S("all"),whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:[n==="de"?"Alle":"All"," ",s("span",{className:"filter-badge",children:o.length})]}),s(T.button,{className:`filter-tab ${C==="unread"?"active":""}`,onClick:()=>S("unread"),whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:[n==="de"?"Ungelesen":"Unread"," ",s("span",{className:"filter-badge",children:X()})]}),s(T.button,{className:`filter-tab ${C==="favorites"?"active":""}`,onClick:()=>S("favorites"),whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:[n==="de"?"Favoriten":"Favorites"," ",s("span",{className:"filter-badge",children:o.filter(q=>q.favorite).length})]}),O().map(q=>s(T.button,{className:`filter-tab category-${q} ${C===q?"active":""}`,onClick:()=>S(q),whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:[q.charAt(0).toUpperCase()+q.slice(1)," ",s("span",{className:"filter-badge",children:H(q)})]},q))]})})]}),s("div",{className:"news-feed",children:s(Ce,{mode:"wait",children:l.length===0?s(T.div,{className:"news-empty",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:o.length===0?s(ve,{children:[s("div",{className:"empty-icon",children:""}),s("h3",{children:n==="de"?"Keine Artikel vorhanden":"No articles available"}),s("p",{children:n==="de"?"Warte auf neue Artikel oder passe deine Einstellungen an":"Waiting for new articles or adjust your settings"})]}):C==="unread"?s(ve,{children:[s("div",{className:"empty-icon",children:""}),s("h3",{children:n==="de"?"Alles gelesen!":"All caught up!"}),s("p",{children:n==="de"?"Du bist auf dem neuesten Stand":"You're up to date"})]}):C==="favorites"?s(ve,{children:[s("div",{className:"empty-icon",children:""}),s("h3",{children:n==="de"?"Keine Favoriten":"No favorites"}),s("p",{children:n==="de"?"Markiere Artikel als Favoriten um sie hier zu sehen":"Mark articles as favorites to see them here"})]}):s(ve,{children:[s("div",{className:"empty-icon",children:""}),s("h3",{children:n==="de"?"Keine Artikel in dieser Kategorie":"No articles in this category"}),s("p",{children:n==="de"?`Keine Artikel fr "${C}" gefunden`:`No articles found for "${C}"`})]})}):s(T.div,{className:"news-articles-list",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:l.map((q,ce)=>s(T.div,{className:`news-article-card ${q.read?"read":"unread"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"spring",damping:25,stiffness:120,delay:ce*.05,scale:{duration:.2}},onClick:()=>F(q),children:[q.thumbnail&&k.display.showImages&&s("div",{className:"article-thumbnail",children:s("img",{src:q.thumbnail,alt:q.title})}),s("div",{className:"article-content",children:[q.category&&s("span",{className:`article-category-badge category-${q.category}`,children:q.category}),s("h3",{className:"article-title",children:wr(q.title)}),s("div",{className:"article-footer",children:[s("span",{className:"article-source",children:q.source}),s("span",{className:"article-separator",children:""}),s("span",{className:"article-date",children:new Date(q.published).toLocaleDateString(n==="de"?"de-DE":"en-US",{day:"numeric",month:"short"})})]})]})]},q.id))})})})]})}const i7=Object.freeze(Object.defineProperty({__proto__:null,default:t7},Symbol.toStringTag,{value:"Module"})),n7=({isOpen:t,onClose:e,title:i,message:n,actions:r=[]})=>{U(()=>{if(!t)return;const l=c=>{c.key==="Escape"&&e()};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[t,e]);const o=l=>{l.target===l.currentTarget&&e()},a=l=>{l.onPress&&l.onPress(),e()};return s(Ce,{children:t&&s(ve,{children:s(T.div,{className:"action-sheet-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:o,children:s(T.div,{className:"action-sheet-container",initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},onClick:l=>l.stopPropagation(),children:[(i||n)&&s("div",{className:"action-sheet-header",children:[i&&s("h3",{className:"action-sheet-title",children:i}),n&&s("p",{className:"action-sheet-message",children:n})]}),s("div",{className:"action-sheet-actions",children:r.map((l,c)=>s("button",{className:`action-sheet-button action-sheet-button-${l.style||"default"}`,onClick:()=>a(l),children:[l.icon&&s("span",{className:"action-sheet-button-icon",children:l.icon}),s("span",{className:"action-sheet-button-label",children:l.label})]},c))})]})})})})},s7=({todo:t,availableLists:e=[],hass:i,onSave:n,onCancel:r,onDelete:o,lang:a="de"})=>{const[l,c]=M("main"),[d,u]=M(t),[h,m]=M(!1),[f,g]=M(!1),[p,v]=M(""),[b,y]=M(""),[w,_]=M(""),[k,N]=M(""),C=te(null),S=te(null),x=te(null),B=te(null),A=te(null),P=te(null),I=te(null),z=te(null),D={enter:J=>({x:J>0?"100%":"-100%",opacity:0}),center:{x:0,opacity:1},exit:J=>({x:J<0?"100%":"-100%",opacity:0})};U(()=>{if(u(t),g(!1),t.due){const J=t.due.includes("T")&&!t.due.endsWith("T00:00:00"),Y=t.due.split("T")[0];v(Y);const oe=new Date(t.due),ae={day:"2-digit",month:"short",year:"numeric"};if(y(oe.toLocaleDateString(a==="de"?"de-DE":"en-US",ae)),J){const V=t.due.split("T")[1],[ne,Z]=V.split(":");_(`${ne}:${Z}`),N(`${ne}:${Z}`)}else _(""),N("")}else v(""),y(""),_(""),N("")},[t,a]);const{supportsDate:L,supportsTime:E,supportsDescription:W}=Me(()=>{if(console.log(" [TodoDetailView] Feature detection:",{hasHass:!!i,listId:d.listId,hasStates:!!i?.states}),!i||!d.listId)return console.log(" [TodoDetailView] No hass or listId  features OFF"),{supportsDate:!1,supportsTime:!1,supportsDescription:!1};const J=i.states[d.listId];if(!J)return console.log(" [TodoDetailView] Entity not found:",d.listId),{supportsDate:!1,supportsTime:!1,supportsDescription:!1};const Y=(J.attributes?.friendly_name||d.listId).toLowerCase();if(Y.includes("einkauf")||Y.includes("shopping"))return console.log(" [TodoDetailView] Shopping list detected  all features OFF:",Y),{supportsDate:!1,supportsTime:!1,supportsDescription:!1};const ae=J.attributes?.supported_features||0,V={supportsDate:(ae&1)!==0||(ae&2)!==0,supportsTime:(ae&2)!==0,supportsDescription:(ae&4)!==0};return console.log(" [TodoDetailView] Features for",d.listId,":",{supportedFeatures:ae,binary:ae.toString(2),supportsDate:V.supportsDate,supportsTime:V.supportsTime,supportsDescription:V.supportsDescription,entityName:J.attributes?.friendly_name}),V},[i,d.listId]);U(()=>{if(l==="date"){const J=()=>{if(C.current&&S.current&&x.current){const Y=new Date;Y.setDate(Y.getDate()+1),I.current=new vp(C.current,S.current,x.current,{initialDay:p?parseInt(p.split("-")[2]):Y.getDate(),initialMonth:p?parseInt(p.split("-")[1]):Y.getMonth()+1,initialYear:p?parseInt(p.split("-")[0]):Y.getFullYear(),lang:a,callback:(oe,ae)=>{v(oe),y(ae),g(!0)}})}else requestAnimationFrame(J)};requestAnimationFrame(J)}},[l]),U(()=>{if(l==="time"){const J=()=>{if(B.current&&A.current&&P.current){const[Y,oe]=w?w.split(":"):["09","00"];z.current=new rc(B.current,A.current,P.current,{initialHour:Y,initialMinute:oe,minuteStep:5,callback:(ae,V,ne)=>{_(`${ae}:${V}`),N(`${ae}:${V}`),g(!0)}})}else requestAnimationFrame(J)};requestAnimationFrame(J)}},[l]);const F=()=>{c("main")},K=(J,Y)=>{u(oe=>({...oe,[J]:Y})),g(!0)},G=J=>{const Y=e.find(oe=>oe.id===J);u(oe=>({...oe,listId:J,listName:Y?.name||oe.listName})),g(!0),setTimeout(F,150)},$=J=>{u(Y=>({...Y,status:J})),g(!0),setTimeout(F,150)},Q=()=>{const J=d.status==="completed"?"needs_action":"completed";u(Y=>({...Y,status:J})),g(!0)},re=()=>{let J=null;p&&L&&(w&&E?J=`${p}T${w}:00`:J=`${p}T00:00:00`);const Y={...d,due:J};W||delete Y.description,console.log(" [TodoDetailView] Saving todo:",Y),f||J!==t.due?n(Y):r()},he=()=>{g(!0),F()},O=()=>{v(""),y(""),g(!0),F()},H=()=>{g(!0),F()},X=()=>{_(""),N(""),g(!0),F()},me=()=>{m(!0)},q=()=>{o(t.uid,t.listId)},ce={de:{back:"Zurck",delete:"Lschen",titlePlaceholder:"Todo-Titel eingeben...",descriptionPlaceholder:"Beschreibung hinzufgen...",list:"Liste",dueDate:"Datum",dueTime:"Uhrzeit",status:"Status",statusCompleted:"Erledigt",statusIncomplete:"Unerledigt",noDueDate:"Kein Datum",noTime:"Keine Uhrzeit",selectDate:"Datum auswhlen",selectTime:"Uhrzeit auswhlen",confirm:"Fertig",clear:"Lschen",cancel:"Abbrechen",save:"Speichern",deleteTitle:"Todo lschen?",deleteMessage:"Diese Aktion kann nicht rckgngig gemacht werden.",deleteConfirm:"Lschen",deleteCancel:"Abbrechen"},en:{back:"Back",delete:"Delete",titlePlaceholder:"Enter todo title...",descriptionPlaceholder:"Add description...",list:"List",dueDate:"Date",dueTime:"Time",status:"Status",statusCompleted:"Completed",statusIncomplete:"Incomplete",noDueDate:"No date",noTime:"No time",selectDate:"Select date",selectTime:"Select time",confirm:"Done",clear:"Clear",cancel:"Cancel",save:"Save",deleteTitle:"Delete Todo?",deleteMessage:"This action cannot be undone.",deleteConfirm:"Delete",deleteCancel:"Cancel"}},ie=ce[a]||ce.de;return s("div",{className:"ios-settings-container todo-detail-container",children:[s(Ce,{mode:"wait",initial:!1,custom:l==="main"?-1:1,children:l==="main"?s(T.div,{custom:-1,variants:D,initial:!1,animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:r,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:ie.back})]}),s("button",{className:"todo-detail-delete-btn",onClick:me,children:ie.delete})]}),s("div",{className:"ios-settings-view",children:s("div",{className:"todo-detail-edit-content",children:[s("div",{className:"todo-detail-field",style:{display:"flex",alignItems:"center",gap:"12px"},children:[s("label",{className:"todo-detail-checkbox",children:[s("input",{type:"checkbox",checked:d.status==="completed",onChange:Q}),s("span",{className:"checkbox-mark-large"})]}),s("input",{type:"text",className:`todo-detail-title-input ${d.status==="completed"?"completed":""}`,value:d.summary,onInput:J=>K("summary",J.target.value),placeholder:ie.titlePlaceholder,style:{flex:1}})]}),W&&s("div",{className:"todo-detail-field",children:s("textarea",{className:"todo-detail-description-input",value:d.description||"",onInput:J=>K("description",J.target.value),placeholder:ie.descriptionPlaceholder,rows:3})}),s("div",{className:"ios-section",style:{marginTop:"16px"},children:s("div",{className:"ios-card",children:[e.length>0&&s(ve,{children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>c("list"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:ie.list})})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:d.listName}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),s("div",{className:"ios-divider"})]}),L&&s(ve,{children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>c("date"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:ie.dueDate})})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:b||ie.noDueDate}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),s("div",{className:"ios-divider"})]}),E&&s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>c("time"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:ie.dueTime})})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:k||ie.noTime}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]})}),s("div",{className:"todo-detail-actions",children:[s("button",{className:"todo-action-btn todo-action-cancel",onClick:r,children:ie.cancel}),s("button",{className:"todo-action-btn todo-action-save",onClick:re,children:ie.save})]})]})})]},"main"):l==="list"?s(T.div,{custom:1,variants:D,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:F,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:ie.back})]}),s("div",{className:"ios-navbar-title",children:ie.list})]}),s("div",{className:"ios-settings-view",children:s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:e.map((J,Y)=>s("div",{children:[Y>0&&s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>G(J.id),children:[s("div",{className:"ios-item-left",children:[s("div",{className:"ios-feed-icon",children:""}),s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:J.name})})]}),s("div",{className:"ios-item-right",children:d.listId===J.id&&s("svg",{className:"ios-checkmark",width:"15",height:"12",viewBox:"0 0 15 12",fill:"none",children:s("path",{d:"M1 6L5.5 10.5L13.5 1.5",stroke:"rgb(0, 122, 255)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]},J.id))})})})]},"list"):l==="date"?s(T.div,{custom:1,variants:D,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:O,children:ie.clear}),s("div",{className:"ios-navbar-title",children:ie.selectDate}),s("button",{className:"todo-detail-delete-btn",onClick:he,children:ie.confirm})]}),s("div",{className:"ios-settings-view",children:s("div",{className:"todo-picker-container",children:s("div",{className:"todo-date-picker-wheels",children:[s("div",{ref:C,className:"date-picker-wheel"}),s("div",{ref:S,className:"date-picker-wheel"}),s("div",{ref:x,className:"date-picker-wheel"})]})})})]},"date"):l==="time"?s(T.div,{custom:1,variants:D,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:X,children:ie.clear}),s("div",{className:"ios-navbar-title",children:ie.selectTime}),s("button",{className:"todo-detail-delete-btn",onClick:H,children:ie.confirm})]}),s("div",{className:"ios-settings-view",children:s("div",{className:"todo-picker-container",children:s("div",{className:"todo-time-picker-wheels",children:[s("div",{ref:B,className:"time-picker-wheel"}),s("div",{className:"time-picker-separator",children:":"}),s("div",{ref:A,className:"time-picker-wheel"}),s("div",{ref:P,className:"time-picker-wheel"})]})})})]},"time"):l==="status"?s(T.div,{custom:1,variants:D,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:F,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:ie.back})]}),s("div",{className:"ios-navbar-title",children:ie.status})]}),s("div",{className:"ios-settings-view",children:s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>$("needs_action"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:ie.statusIncomplete})})}),s("div",{className:"ios-item-right",children:d.status==="needs_action"&&s("svg",{className:"ios-checkmark",width:"15",height:"12",viewBox:"0 0 15 12",fill:"none",children:s("path",{d:"M1 6L5.5 10.5L13.5 1.5",stroke:"rgb(0, 122, 255)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>$("completed"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:ie.statusCompleted})})}),s("div",{className:"ios-item-right",children:d.status==="completed"&&s("svg",{className:"ios-checkmark",width:"15",height:"12",viewBox:"0 0 15 12",fill:"none",children:s("path",{d:"M1 6L5.5 10.5L13.5 1.5",stroke:"rgb(0, 122, 255)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})})})]},"status"):null}),s(n7,{isOpen:h,onClose:()=>m(!1),title:ie.deleteTitle,message:ie.deleteMessage,actions:[{label:ie.deleteConfirm,style:"destructive",onPress:q},{label:ie.deleteCancel,style:"cancel"}]})]})},r7=({availableLists:t,hass:e,onAdd:i,onCancel:n,lang:r="de"})=>{const[o,a]=M("main"),[l,c]=M(""),[d,u]=M(""),[h,m]=M(""),[f,g]=M(""),[p,v]=M(""),[b,y]=M(""),[w,_]=M(""),k=te(null),N=te(null),C=te(null),S=te(null),x=te(null),B=te(null),A=te(null),P=te(null),I={enter:H=>({x:H>0?"100%":"-100%",opacity:0}),center:{x:0,opacity:1},exit:H=>({x:H<0?"100%":"-100%",opacity:0})};U(()=>{t.length>0&&!h&&m(t[0].id)},[t]);const{supportsDate:z,supportsTime:D,supportsDescription:L}=Me(()=>{if(console.log(" [TodoAddDialog] Feature detection:",{hasHass:!!e,selectedListId:h,hasStates:!!e?.states}),!e||!h)return console.log(" [TodoAddDialog] No hass or listId  features OFF"),{supportsDate:!1,supportsTime:!1,supportsDescription:!1};const H=e.states[h];if(!H)return console.log(" [TodoAddDialog] Entity not found:",h),{supportsDate:!1,supportsTime:!1,supportsDescription:!1};const X=(H.attributes?.friendly_name||h).toLowerCase();if(X.includes("einkauf")||X.includes("shopping"))return console.log(" [TodoAddDialog] Shopping list detected  all features OFF:",X),{supportsDate:!1,supportsTime:!1,supportsDescription:!1};const q=H.attributes?.supported_features||0,ce={supportsDate:(q&1)!==0||(q&2)!==0,supportsTime:(q&2)!==0,supportsDescription:(q&4)!==0};return console.log(" [TodoAddDialog] Features for",h,":",{supportedFeatures:q,binary:q.toString(2),supportsDate:ce.supportsDate,supportsTime:ce.supportsTime,supportsDescription:ce.supportsDescription,entityName:H.attributes?.friendly_name}),ce},[e,h]);U(()=>{if(o==="date"){const H=()=>{if(k.current&&N.current&&C.current){const X=new Date;X.setDate(X.getDate()+1),A.current=new vp(k.current,N.current,C.current,{initialDay:f?parseInt(f.split("-")[2]):X.getDate(),initialMonth:f?parseInt(f.split("-")[1]):X.getMonth()+1,initialYear:f?parseInt(f.split("-")[0]):X.getFullYear(),lang:r,callback:(me,q)=>{g(me),v(q)}})}else requestAnimationFrame(H)};requestAnimationFrame(H)}},[o]),U(()=>{if(o==="time"){const H=()=>{if(S.current&&x.current&&B.current){const[X,me]=b?b.split(":"):["09","00"];P.current=new rc(S.current,x.current,B.current,{initialHour:X,initialMinute:me,minuteStep:5,callback:(q,ce,ie)=>{y(`${q}:${ce}`),_(`${q}:${ce}`)}})}else requestAnimationFrame(H)};requestAnimationFrame(H)}},[o]);const E=()=>{a("main")},W=H=>{m(H),setTimeout(E,150)},F=()=>{E()},K=()=>{g(""),v(""),E()},G=()=>{E()},$=()=>{y(""),_(""),E()},Q=()=>{if(!l.trim())return;let H=null;f&&z&&(b&&D?H=`${f}T${b}:00`:H=`${f}T09:00:00`);const X={listId:h,summary:l.trim(),dueDate:H};L&&d.trim()&&(X.description=d.trim()),console.log(" [TodoAddDialog] Creating todo:",X),i(X)},re=()=>t.find(X=>X.id===h)?.name||"",he={de:{cancel:"Abbrechen",create:"Erstellen",back:"Zurck",titlePlaceholder:"Was mchtest du erledigen?",descriptionPlaceholder:"Notizen hinzufgen...",list:"Liste",dueDate:"Datum",dueTime:"Uhrzeit",noDueDate:"Kein Datum",noTime:"Keine Uhrzeit",selectDate:"Datum auswhlen",selectTime:"Uhrzeit auswhlen",confirm:"Fertig",clear:"Lschen"},en:{cancel:"Cancel",create:"Create",back:"Back",titlePlaceholder:"What do you want to do?",descriptionPlaceholder:"Add notes...",list:"List",dueDate:"Date",dueTime:"Time",noDueDate:"No date",noTime:"No time",selectDate:"Select date",selectTime:"Select time",confirm:"Done",clear:"Clear"}},O=he[r]||he.de;return s("div",{className:"todo-add-dialog ios-settings-container",children:s(Ce,{mode:"wait",initial:!1,custom:o==="main"?-1:1,children:o==="main"?s(T.div,{custom:-1,variants:I,initial:!1,animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:n,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:O.cancel})]}),s("button",{className:"todo-detail-delete-btn",onClick:Q,disabled:!l.trim(),children:O.create})]}),s("div",{className:"ios-settings-view",children:s("div",{className:"todo-detail-edit-content",children:[s("div",{className:"todo-detail-field",children:s("input",{type:"text",className:"todo-detail-title-input",value:l,onInput:H=>c(H.target.value),placeholder:O.titlePlaceholder,autoFocus:!0})}),L&&s("div",{className:"todo-detail-field",children:s("textarea",{className:"todo-detail-description-input",value:d,onInput:H=>u(H.target.value),placeholder:O.descriptionPlaceholder,rows:3})}),s("div",{className:"ios-section",style:{marginTop:"16px"},children:s("div",{className:"ios-card",children:[t.length>0&&s(ve,{children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>a("list"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:O.list})})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:re()}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),s("div",{className:"ios-divider"})]}),z&&s(ve,{children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>a("date"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:O.dueDate})})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:p||O.noDueDate}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),s("div",{className:"ios-divider"})]}),D&&s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>a("time"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:O.dueTime})})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:w||O.noTime}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]})})]})})]},"main"):o==="list"?s(T.div,{custom:1,variants:I,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:E,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:O.back})]}),s("div",{className:"ios-navbar-title",children:O.list})]}),s("div",{className:"ios-settings-view",children:s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:t.map((H,X)=>s("div",{children:[X>0&&s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>W(H.id),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:H.name})})}),s("div",{className:"ios-item-right",children:h===H.id&&s("svg",{className:"ios-checkmark",width:"15",height:"12",viewBox:"0 0 15 12",fill:"none",children:s("path",{d:"M1 6L5.5 10.5L13.5 1.5",stroke:"rgb(0, 122, 255)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]},H.id))})})})]},"list"):o==="date"?s(T.div,{custom:1,variants:I,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:K,children:O.clear}),s("div",{className:"ios-navbar-title",children:O.selectDate}),s("button",{className:"todo-detail-delete-btn",onClick:F,children:O.confirm})]}),s("div",{className:"ios-settings-view",children:s("div",{className:"todo-picker-container",children:s("div",{className:"todo-date-picker-wheels",children:[s("div",{ref:k,className:"date-picker-wheel"}),s("div",{ref:N,className:"date-picker-wheel"}),s("div",{ref:C,className:"date-picker-wheel"})]})})})]},"date"):o==="time"?s(T.div,{custom:1,variants:I,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:$,children:O.clear}),s("div",{className:"ios-navbar-title",children:O.selectTime}),s("button",{className:"todo-detail-delete-btn",onClick:G,children:O.confirm})]}),s("div",{className:"ios-settings-view",children:s("div",{className:"todo-picker-container",children:s("div",{className:"todo-time-picker-wheels",children:[s("div",{ref:S,className:"time-picker-wheel"}),s("div",{className:"time-picker-separator",children:":"}),s("div",{ref:x,className:"time-picker-wheel"}),s("div",{ref:B,className:"time-picker-wheel"})]})})})]},"time"):null})})},o7=({settings:t,todos:e,availableLists:i,lang:n="de",onToggleListEnabled:r,onUpdateSetting:o})=>{const[a,l]=M("main"),c=te(null),[d,u]=M(!1),h={enter:y=>({x:y>0?"100%":"-100%",opacity:0}),center:{x:0,opacity:1},exit:y=>({x:y<0?"100%":"-100%",opacity:0})},m=()=>{l("main")},f=y=>t.lists[y]?.enabled!==!1,g=y=>e.filter(w=>w.listId===y).length,p=y=>n==="de"?y===1?"1 Tag":`${y} Tage`:y===1?"1 Day":`${y} Days`,v=y=>({all:n==="de"?"Alle":"All",incomplete:n==="de"?"Unerledigt":"Incomplete",today:n==="de"?"Heute":"Today",overdue:n==="de"?"berfllig":"Overdue",completed:n==="de"?"Erledigt":"Completed"})[y]||y,b=y=>({dueDate:n==="de"?"Flligkeitsdatum":"Due Date",alphabetical:n==="de"?"Alphabetisch":"Alphabetical",list:n==="de"?"Liste":"List",createdDate:n==="de"?"Erstellungsdatum":"Created Date"})[y]||y;return s("div",{className:"ios-settings-container",children:s(Ce,{mode:"wait",initial:!1,custom:a==="main"?-1:1,children:a==="main"?s(T.div,{custom:-1,variants:h,initial:!1,animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:s("div",{className:"ios-navbar-title",children:n==="de"?"Einstellungen":"Settings"})}),s("div",{ref:c,className:"ios-settings-view",children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:n==="de"?"LISTEN":"LISTS"}),s("div",{className:"ios-card",children:i.length===0?s("div",{className:"ios-empty-state",children:s("p",{children:n==="de"?"Keine Todo-Listen gefunden.":"No todo lists found."})}):i.map((y,w)=>{const _=f(y.id),k=g(y.id);return s("div",{children:[w>0&&s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:[s("div",{className:"ios-feed-icon",children:""}),s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:y.name}),s("div",{className:"ios-item-subtitle",children:[k," ",n==="de"?"Aufgaben":"Tasks"]})]})]}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:_,onChange:()=>r(y.id)}),s("span",{className:"ios-toggle-slider"})]})})]})]},y.id)})})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:n==="de"?"ANZEIGE":"DISPLAY"}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:n==="de"?"Erledigte anzeigen":"Show Completed"})})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:t.display?.showCompleted!==!1,onChange:y=>o("display.showCompleted",y.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>l("auto-hide-days"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:n==="de"?"Erledigte ausblenden nach":"Auto-hide completed after"})})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:p(t.display?.autoHideAfterDays||7)}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>l("default-filter"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:n==="de"?"Standard-Filter":"Default Filter"})})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:v(t.display?.defaultFilter||"all")}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>l("sort-by"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:n==="de"?"Sortierung":"Sort By"})})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:b(t.display?.sortBy||"dueDate")}),s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:n==="de"?"SICHTBARE TABS":"VISIBLE TABS"}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:n==="de"?"Alle":"All"})})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:t.visibleTabs?.all!==!1,onChange:y=>o("visibleTabs.all",y.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:n==="de"?"Unerledigt":"Incomplete"})})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:t.visibleTabs?.incomplete!==!1,onChange:y=>o("visibleTabs.incomplete",y.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:n==="de"?"Heute":"Today"})})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:t.visibleTabs?.today!==!1,onChange:y=>o("visibleTabs.today",y.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:n==="de"?"berfllig":"Overdue"})})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:t.visibleTabs?.overdue!==!1,onChange:y=>o("visibleTabs.overdue",y.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:n==="de"?"Erledigt":"Completed"})})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:t.visibleTabs?.completed!==!1,onChange:y=>o("visibleTabs.completed",y.target.checked)}),s("span",{className:"ios-toggle-slider"})]})})]})]})]})]}),s(Pe,{scrollContainerRef:c,isHovered:d})]},"main"):a==="auto-hide-days"?s(T.div,{custom:1,variants:h,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:m,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:n==="de"?"Zurck":"Back"})]}),s("div",{className:"ios-navbar-title",children:n==="de"?"Erledigte ausblenden":"Auto-hide Completed"})]}),s("div",{ref:c,className:"ios-settings-view",children:s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:[1,3,7,14,30].map((y,w)=>s("div",{children:[w>0&&s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{o("display.autoHideAfterDays",y),setTimeout(m,150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:p(y)})})}),s("div",{className:"ios-item-right",children:(t.display?.autoHideAfterDays||7)===y&&s(T.svg,{className:"ios-checkmark",width:"24",height:"24",viewBox:"0 0 24 24",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},children:[s(T.circle,{cx:"12",cy:"12",r:"11",fill:"white",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"}),s(T.path,{d:"M7 12L10.5 15.5L17 9",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]})]},y))})})}),s(Pe,{scrollContainerRef:c,isHovered:d})]},"auto-hide-days"):a==="default-filter"?s(T.div,{custom:1,variants:h,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:m,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:n==="de"?"Zurck":"Back"})]}),s("div",{className:"ios-navbar-title",children:n==="de"?"Standard-Filter":"Default Filter"})]}),s("div",{ref:c,className:"ios-settings-view",children:s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:["all","incomplete","today","overdue","completed"].map((y,w)=>s("div",{children:[w>0&&s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{o("display.defaultFilter",y),setTimeout(m,150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:v(y)})})}),s("div",{className:"ios-item-right",children:(t.display?.defaultFilter||"all")===y&&s(T.svg,{className:"ios-checkmark",width:"24",height:"24",viewBox:"0 0 24 24",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},children:[s(T.circle,{cx:"12",cy:"12",r:"11",fill:"white",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"}),s(T.path,{d:"M7 12L10.5 15.5L17 9",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]})]},y))})})}),s(Pe,{scrollContainerRef:c,isHovered:d})]},"default-filter"):a==="sort-by"?s(T.div,{custom:1,variants:h,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:m,children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:n==="de"?"Zurck":"Back"})]}),s("div",{className:"ios-navbar-title",children:n==="de"?"Sortierung":"Sort By"})]}),s("div",{ref:c,className:"ios-settings-view",children:s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:["dueDate","alphabetical","list","createdDate"].map((y,w)=>s("div",{children:[w>0&&s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{o("display.sortBy",y),setTimeout(m,150)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",children:b(y)})})}),s("div",{className:"ios-item-right",children:(t.display?.sortBy||"dueDate")===y&&s(T.svg,{className:"ios-checkmark",width:"24",height:"24",viewBox:"0 0 24 24",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:25},children:[s(T.circle,{cx:"12",cy:"12",r:"11",fill:"white",stroke:"rgba(0,0,0,0.1)",strokeWidth:"0.5"}),s(T.path,{d:"M7 12L10.5 15.5L17 9",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]})]},y))})})}),s(Pe,{scrollContainerRef:c,isHovered:d})]},"sort-by"):null})})};function j0(){const t={lists:{},display:{showCompleted:!0,autoHideAfterDays:7,defaultFilter:"all",sortBy:"dueDate"},visibleTabs:{all:!0,incomplete:!0,today:!0,overdue:!0,completed:!0}};try{const e=localStorage.getItem("todosSettings");if(e){const i=JSON.parse(e);return{...t,...i,display:{...t.display,...i.display},visibleTabs:{...t.visibleTabs,...i.visibleTabs},lists:i.lists||{}}}}catch(e){console.error("Failed to load settings:",e)}return t}function U0(t){try{localStorage.setItem("todosSettings",JSON.stringify(t)),console.log(" Settings saved:",t)}catch(e){console.error("Failed to save settings:",e)}}function a7(t,e="de"){if(!t)return"";const i=new Date;i.setHours(0,0,0,0);const n=new Date(t),r=new Date(t);r.setHours(0,0,0,0);const o=r-i,a=Math.floor(o/(1e3*60*60*24)),c=typeof t=="string"&&t.includes("T")&&!t.endsWith("T00:00:00")?` ${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}`:"";if(e==="de"){if(a===0)return`Heute${c}`;if(a===1)return`Morgen${c}`;if(a===-1)return`Gestern${c}`;if(a<-1)return`berfllig seit ${Math.abs(a)} Tagen`;if(a>1)return`In ${a} Tagen${c}`}else{if(a===0)return`Today${c}`;if(a===1)return`Tomorrow${c}`;if(a===-1)return`Yesterday${c}`;if(a<-1)return`Overdue by ${Math.abs(a)} days`;if(a>1)return`In ${a} days${c}`}return r.toLocaleDateString(e==="de"?"de-DE":"en-US")+c}function In(t){if(!t.due||t.status==="completed")return!1;const e=new Date;e.setHours(0,0,0,0);const i=new Date(t.due);return i.setHours(0,0,0,0),i<e}function l7(t){if(!t)return console.error(" TodosView: Props are undefined!"),s("div",{style:{padding:"40px",textAlign:"center",color:"white"},children:[s("h3",{children:"Error: Component Props Missing"}),s("p",{children:"TodosView was called without props"})]});console.log(" TodosView called with props:",t);const{entity:e,hass:i,lang:n="de",onBack:r}=t,[o,a]=M([]),[l,c]=M([]),[d,u]=M(!0),[h,m]=M(null),[f,g]=M(null),[p,v]=M(!1),[b,y]=M("overview"),[w,_]=M(()=>j0()),[k,N]=M(()=>j0().display.defaultFilter||"all"),[C,S]=M(!1),[x,B]=M(!1),[A,P]=M(!1),I=te(null),z=()=>{if(f){g(null);return}if(p){v(!1),y("overview");return}if(A){P(!1);return}r&&r()};U(()=>{const V=o.filter(R=>R.status==="needs_action").length,ne=o.filter(R=>In(R)).length,Z=new Date;Z.setHours(0,0,0,0);const se=o.filter(R=>{if(!R.due)return!1;const j=new Date(R.due);return j.setHours(0,0,0,0),j.getTime()===Z.getTime()}).length;return window._todosViewRef={handleOpenSettings:()=>{v(!0),y("settings")},handleOverview:()=>{v(!1),g(null),P(!1),y("overview")},handleRefresh:E,handleBackNavigation:z,handleAdd:()=>{p?(v(!1),y("add"),setTimeout(()=>P(!0),50)):(P(!0),y("add"))},getActiveButton:()=>b,selectedTodo:f,showSettings:p,incompleteCount:V,overdueCount:ne,todayCount:se},()=>{delete window._todosViewRef}},[f,p,A,b,r,o]),U(()=>{const V=new CustomEvent("todos-view-state-changed");window.dispatchEvent(V)},[f,p,A]),U(()=>{console.log(" TodosView mounted/updated"),L()},[]),U(()=>{F(k)},[k,o,w]),U(()=>{const V=()=>{const Z=I.current;if(!Z)return;const{scrollLeft:se,scrollWidth:R,clientWidth:j}=Z;S(se>10),B(se<R-j-10)},ne=I.current;if(ne){V();const Z=setTimeout(V,100);return ne.addEventListener("scroll",V),window.addEventListener("resize",V),()=>{clearTimeout(Z),ne.removeEventListener("scroll",V),window.removeEventListener("resize",V)}}},[o,k]);const D=V=>{const ne=I.current;if(!ne)return;const Z=200,se=V==="left"?ne.scrollLeft-Z:ne.scrollLeft+Z;ne.scrollTo({left:se,behavior:"smooth"})},L=async()=>{u(!0),m(null);try{if(!e||typeof e.executeAction!="function")throw console.error("Entity does not have executeAction method:",e),new Error("Invalid entity instance");const V=await e.executeAction("getTodos",{hass:i,refresh:!1});if(!V)throw new Error("No todos returned");console.log(` Loaded ${V.length} todos`),a(V),c(V)}catch(V){console.error("Failed to load todos:",V),m(V.message)}finally{u(!1)}},E=async()=>{try{const V=await e.executeAction("refreshTodos",{hass:i});a(V)}catch(V){console.error("Failed to refresh todos:",V)}},W=(V,ne)=>{const Z=[...V];switch(ne){case"dueDate":Z.sort((se,R)=>{if(!se.due&&!R.due)return 0;if(!se.due)return 1;if(!R.due)return-1;const j=new Date(se.due),le=new Date(R.due);return j-le});break;case"alphabetical":Z.sort((se,R)=>{const j=se.summary.toLowerCase(),le=R.summary.toLowerCase();return j.localeCompare(le,n==="de"?"de-DE":"en-US")});break;case"list":Z.sort((se,R)=>{const j=se.listName.localeCompare(R.listName,n==="de"?"de-DE":"en-US");return j!==0?j:!se.due&&!R.due?0:se.due?R.due?new Date(se.due)-new Date(R.due):-1:1});break;case"createdDate":Z.sort((se,R)=>{const j=se.status==="needs_action"?0:1,le=R.status==="needs_action"?0:1,ye=j-le;return ye!==0?ye:!se.due&&!R.due?0:se.due?R.due?new Date(se.due)-new Date(R.due):-1:1});break;default:Z.sort((se,R)=>!se.due&&!R.due?0:se.due?R.due?new Date(se.due)-new Date(R.due):-1:1)}return Z},F=V=>{const ne=new Date;ne.setHours(0,0,0,0);let Z=[...o];Z=Z.filter(le=>w.lists[le.listId]?.enabled!==!1);const se=w.display?.showCompleted!==!1,R=w.display?.autoHideAfterDays||7;if(!se)Z=Z.filter(le=>le.status!=="completed");else{const le=new Date;le.setDate(le.getDate()-R),le.setHours(0,0,0,0),Z=Z.filter(ye=>{if(ye.status!=="completed")return!0;if(ye.due){const be=new Date(ye.due);return be.setHours(0,0,0,0),be>=le}return!0})}V==="all"||(V==="incomplete"?Z=Z.filter(le=>le.status==="needs_action"):V==="today"?Z=Z.filter(le=>{if(!le.due)return!1;const ye=new Date(le.due);return ye.setHours(0,0,0,0),ye.getTime()===ne.getTime()}):V==="overdue"?Z=Z.filter(le=>In(le)):V==="completed"?Z=Z.filter(le=>le.status==="completed"):Z=Z.filter(le=>le.listId===V));const j=w.display?.sortBy||"dueDate";Z=W(Z,j),c(Z)},K=V=>{console.log(" Todo clicked:",V.uid),g(V)},G=async(V,ne)=>{ne&&ne.stopPropagation();try{await e.executeAction("toggleComplete",{hass:i,listId:V.listId,uid:V.uid,currentStatus:V.status});const Z=V.status==="completed"?"needs_action":"completed";a(se=>se.map(R=>R.uid===V.uid?{...R,status:Z}:R)),f&&f.uid===V.uid&&g(se=>({...se,status:Z}))}catch(Z){console.error("Failed to toggle todo:",Z)}},$=async V=>{try{await e.executeAction("addTodo",{hass:i,listId:V.listId,summary:V.summary,description:V.description,dueDate:V.dueDate}),await L(),P(!1)}catch(ne){console.error("Failed to add todo:",ne)}},Q=async V=>{try{console.log(" Saving todo:",V),await e.executeAction("updateTodo",{hass:i,listId:V.listId,uid:V.uid,summary:V.summary,description:V.description,dueDate:V.due,status:V.status}),a(ne=>ne.map(Z=>Z.uid===V.uid?V:Z)),g(null),console.log(" Todo saved successfully")}catch(ne){console.error(" Failed to save todo:",ne)}},re=()=>{console.log(" Canceling detail view"),g(null)},he=async(V,ne)=>{try{console.log(" Deleting todo:",V),await e.executeAction("deleteTodo",{hass:i,listId:ne,uid:V}),a(Z=>Z.filter(se=>se.uid!==V)),g(null),console.log(" Todo deleted successfully")}catch(Z){console.error(" Failed to delete todo:",Z)}},O=V=>{const ne=w.lists[V]?.enabled!==!1,Z={...w,lists:{...w.lists,[V]:{...w.lists[V],enabled:!ne}}};_(Z),U0(Z),console.log(" List enabled toggled:",V,!ne)},H=(V,ne)=>{const Z=V.split("."),se={...w};let R=se;for(let j=0;j<Z.length-1;j++)R[Z[j]]||(R[Z[j]]={}),R=R[Z[j]];if(R[Z[Z.length-1]]=ne,_(se),U0(se),console.log(" Setting updated:",V,ne),V==="display.defaultFilter"&&N(ne),V.startsWith("visibleTabs.")&&ne===!1){const j=V.split(".")[1];if(k===j){const ye=["all","incomplete","today","overdue","completed"].find(be=>be!==j&&se.visibleTabs?.[be]!==!1);ye&&N(ye)}}},X=()=>e?.attributes?.available_lists||[],me=()=>{const V={};return o.forEach(ne=>{V[ne.listId]||(V[ne.listId]={id:ne.listId,name:ne.listName})}),Object.values(V)},q=()=>{let V=[...o];V=V.filter(se=>w.lists[se.listId]?.enabled!==!1);const ne=w.display?.showCompleted!==!1,Z=w.display?.autoHideAfterDays||7;if(!ne)V=V.filter(se=>se.status!=="completed");else{const se=new Date;se.setDate(se.getDate()-Z),se.setHours(0,0,0,0),V=V.filter(R=>{if(R.status!=="completed")return!0;if(R.due){const j=new Date(R.due);return j.setHours(0,0,0,0),j>=se}return!0})}return V},ce=()=>q().filter(V=>V.status==="needs_action").length,ie=()=>{const V=new Date;return V.setHours(0,0,0,0),q().filter(ne=>{if(!ne.due)return!1;const Z=new Date(ne.due);return Z.setHours(0,0,0,0),Z.getTime()===V.getTime()}).length},J=()=>q().filter(V=>In(V)).length,Y=()=>q().filter(V=>V.status==="completed").length,oe=V=>q().filter(ne=>ne.listId===V).length;if(d)return s("div",{className:"todos-view-container",children:s("div",{className:"todos-loading",children:[s("div",{className:"loading-spinner"}),s("p",{children:n==="de"?"Lade Aufgaben...":"Loading todos..."})]})});if(h)return s("div",{className:"todos-view-container",children:s("div",{className:"todos-error",children:[s("h3",{children:n==="de"?"Fehler":"Error"}),s("p",{children:h}),s("button",{onClick:L,className:"retry-button",children:n==="de"?"Erneut versuchen":"Retry"})]})});const ae=e?.attributes?.has_todo_integration;return!d&&!ae?s("div",{className:"todos-view-container",children:s("div",{className:"todos-hint",children:[s("div",{className:"hint-icon",children:s("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[s("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"2"}),s("path",{d:"M12 16v-4M12 8h.01",strokeWidth:"2",strokeLinecap:"round"})]})}),s("h2",{children:n==="de"?"Todo Integration nicht konfiguriert":"Todo Integration not configured"}),s("p",{className:"hint-description",children:n==="de"?"Um Todos zu nutzen, fge Todo-Listen in Home Assistant hinzu.":"To use todos, add todo lists in Home Assistant."})]})}):s("div",{className:"todos-view-container",style:{position:"relative"},children:s(Ce,{mode:"wait",children:p?s(o7,{settings:w,todos:o,availableLists:X(),lang:n,onToggleListEnabled:O,onUpdateSetting:H},"settings"):f?s(s7,{todo:f,availableLists:me(),hass:i,onSave:Q,onCancel:re,onDelete:he,lang:n},"detail"):A?s(r7,{availableLists:me(),hass:i,onAdd:$,onCancel:()=>P(!1),lang:n},"add"):s(T.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:30,stiffness:300},style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[s("div",{className:"todos-filter-wrapper",style:{position:"relative",marginBottom:"20px"},children:[s(Ce,{children:C&&s(T.div,{className:"todos-scroll-indicator todos-scroll-indicator-left",onClick:()=>D("left"),initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},whileHover:{scale:1.1},whileTap:{scale:.95},transition:{duration:.2},children:s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("path",{d:"M15 18L9 12L15 6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),s(Ce,{children:x&&s(T.div,{className:"todos-scroll-indicator todos-scroll-indicator-right",onClick:()=>D("right"),initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},whileHover:{scale:1.1},whileTap:{scale:.95},transition:{duration:.2},children:s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("path",{d:"M9 18L15 12L9 6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),s(T.div,{className:"todos-filter-bar",ref:I,initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:s("div",{className:"filter-tabs",children:[w.visibleTabs?.all!==!1&&s(T.button,{className:`filter-tab ${k==="all"?"active":""}`,onClick:()=>N("all"),whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:[n==="de"?"Alle":"All"," ",s("span",{className:"filter-badge",children:q().length})]}),w.visibleTabs?.incomplete!==!1&&s(T.button,{className:`filter-tab ${k==="incomplete"?"active":""}`,onClick:()=>N("incomplete"),whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:[n==="de"?"Unerledigt":"Incomplete"," ",s("span",{className:"filter-badge",children:ce()})]}),w.visibleTabs?.today!==!1&&s(T.button,{className:`filter-tab ${k==="today"?"active":""}`,onClick:()=>N("today"),whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:[n==="de"?"Heute":"Today"," ",s("span",{className:"filter-badge",children:ie()})]}),w.visibleTabs?.overdue!==!1&&s(T.button,{className:`filter-tab ${k==="overdue"?"active":""}`,onClick:()=>N("overdue"),whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:[n==="de"?"berfllig":"Overdue"," ",s("span",{className:"filter-badge",children:J()})]}),w.visibleTabs?.completed!==!1&&s(T.button,{className:`filter-tab ${k==="completed"?"active":""}`,onClick:()=>N("completed"),whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:[n==="de"?"Erledigt":"Completed"," ",s("span",{className:"filter-badge",children:Y()})]}),me().map(V=>s(T.button,{className:`filter-tab list-filter ${k===V.id?"active":""}`,onClick:()=>N(V.id),whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:[" ",V.name," ",s("span",{className:"filter-badge",children:oe(V.id)})]},V.id))]})})]}),s("div",{className:"todos-feed",children:s(Ce,{mode:"wait",children:l.length===0?s(T.div,{className:"todos-empty",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[s("div",{className:"empty-icon",children:""}),s("h3",{children:n==="de"?"Keine Aufgaben":"No todos"}),s("p",{children:n==="de"?"Fge neue Aufgaben hinzu":"Add new todos"})]}):s(T.div,{className:"todos-list",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:l.map((V,ne)=>s(T.div,{className:`todo-card ${V.status==="completed"?"completed":""} ${In(V)?"overdue":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},whileTap:{scale:.98},transition:{type:"spring",damping:25,stiffness:120,delay:ne*.05,scale:{duration:.2}},onClick:()=>K(V),children:[s("div",{className:"todo-checkbox-wrapper",onClick:Z=>Z.stopPropagation(),children:s("label",{className:"todo-checkbox",children:[s("input",{type:"checkbox",checked:V.status==="completed",onChange:Z=>G(V,Z)}),s("span",{className:"checkbox-mark"})]})}),s("div",{className:"todo-content",children:[s("h3",{className:"todo-title",children:V.summary}),V.description&&s("p",{className:"todo-description",children:V.description}),s("div",{className:"todo-footer",children:[s("span",{className:"todo-list",children:V.listName}),V.due&&s(ve,{children:[s("span",{className:"todo-separator",children:""}),s("span",{className:`todo-due ${In(V)?"overdue":""}`,children:a7(V.due,n)})]})]})]})]},V.uid))})})})]},"main")})})}const c7=Object.freeze(Object.defineProperty({__proto__:null,default:l7},Symbol.toStringTag,{value:"Module"})),G0=({entity:t,hass:e,lang:i="de",onServiceCall:n})=>{const[r,o]=M(!1),[a,l]=M(!1),[c,d]=M(!1),[u,h]=M("overview"),m=te(null),[f,g]=M(!1),[p,v]=M(localStorage.getItem("userLanguage")||i||"de");M(!0),M(!0),M(!0),M(localStorage.getItem("aiModeEnabled")!=="false");const[b,y]=M(parseInt(localStorage.getItem("bambulab_camera_refresh_interval"))||10),[w,_]=M(()=>{const A=localStorage.getItem("bambulab_quickstats_config");return A?JSON.parse(A):{progress:!0,status:!0,remainingTime:!0,nozzleTemp:!1,bedTemp:!1,layerProgress:!1}}),k=A=>{const P=parseInt(A.target.value);y(P),localStorage.setItem("bambulab_camera_refresh_interval",P),window.dispatchEvent(new CustomEvent("cameraRefreshIntervalChanged",{detail:{interval:P*1e3}}))},N=A=>{const P={...w,[A]:!w[A]};_(P),localStorage.setItem("bambulab_quickstats_config",JSON.stringify(P)),window.dispatchEvent(new CustomEvent("quickStatsConfigChanged",{detail:{config:P}}))},[C,S]=M(Date.now()),x=p||i||"de",B=async()=>{try{t&&t.executeAction&&await t.executeAction("refresh",{hass:e})}catch(A){console.error("Failed to refresh printer data:",A)}};if(U(()=>(window._printerViewRef={handleOpenSettings:()=>{o(!0),l(!1),d(!1),h("settings")},handleOpenCamera:()=>{l(!0),o(!1),d(!1),h("camera")},handleOpenImage:()=>{d(!0),l(!1),o(!1),h("image")},handleOverview:()=>{o(!1),l(!1),d(!1),h("overview")},handleRefresh:B,handleBackNavigation:()=>{o(!1),l(!1),d(!1),h("overview")},getActiveButton:()=>u},()=>{window._printerViewRef=null}),[u]),U(()=>{const A=P=>{const I=P.detail.language;v(I)};return window.addEventListener("languageChanged",A),()=>{window.removeEventListener("languageChanged",A)}},[]),U(()=>{const A=P=>{const I=P.detail.interval/1e3;y(I),console.log(" Camera refresh interval changed to:",I,"seconds")};return window.addEventListener("cameraRefreshIntervalChanged",A),()=>{window.removeEventListener("cameraRefreshIntervalChanged",A)}},[]),U(()=>{if(!a)return;console.log(" Starting camera refresh timer with interval:",b,"seconds");const A=setInterval(()=>{S(Date.now()),console.log(" Camera refreshed at:",new Date().toLocaleTimeString())},b*1e3);return()=>{console.log(" Clearing camera refresh timer"),clearInterval(A)}},[a,b]),r)return s("div",{className:"printer3d-device-view",style:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},children:s("div",{className:"tab-content-container",children:s("div",{className:"ios-settings-container",children:s("div",{className:"ios-view-wrapper",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),style:{position:"relative"},children:[s("div",{ref:m,className:"ios-settings-view",style:{padding:"20px"},children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:x==="de"?"Kamera-Einstellungen":"Camera Settings"}),s("div",{className:"ios-card",children:s("div",{className:"ios-item",style:{flexDirection:"column",alignItems:"stretch"},children:[s("div",{className:"ios-item-left",style:{width:"100%",marginBottom:"6px"},children:s("div",{className:"ios-item-content",children:[s("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s("div",{className:"ios-item-label",children:x==="de"?"Aktualisierungsintervall":"Refresh Interval"}),s("div",{className:"ios-item-value",style:{fontSize:"14px",color:"rgba(255, 255, 255, 0.6)"},children:[b,"s"]})]}),s("div",{className:"ios-item-subtitle",children:x==="de"?"Wie oft die Kamera aktualisiert wird (5-15 Sekunden)":"How often the camera refreshes (5-15 seconds)"})]})}),s("input",{type:"range",min:"5",max:"15",step:"1",value:b,onChange:k,className:"ios-range-slider",style:{width:"100%",height:"4px",borderRadius:"2px",background:`linear-gradient(to right, rgb(48, 209, 88) 0%, rgb(48, 209, 88) ${(b-5)/10*100}%, rgba(255, 255, 255, 0.15) ${(b-5)/10*100}%, rgba(255, 255, 255, 0.15) 100%)`,outline:"none",WebkitAppearance:"none",appearance:"none",cursor:"pointer"}})]})})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:x==="de"?"Quick Stats Anzeige":"Quick Stats Display"}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:x==="de"?"Fortschritt":"Progress"}),s("div",{className:"ios-item-subtitle",children:x==="de"?"Zeigt den Druckfortschritt in %":"Shows print progress in %"})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:w.progress,onChange:()=>N("progress")}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:"Status"}),s("div",{className:"ios-item-subtitle",children:x==="de"?"Zeigt den aktuellen Druckstatus":"Shows current print status"})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:w.status,onChange:()=>N("status")}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:x==="de"?"Verbleibende Zeit":"Remaining Time"}),s("div",{className:"ios-item-subtitle",children:x==="de"?"Zeigt die geschtzte Restzeit":"Shows estimated remaining time"})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:w.remainingTime,onChange:()=>N("remainingTime")}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:x==="de"?"Dsentemperatur":"Nozzle Temperature"}),s("div",{className:"ios-item-subtitle",children:x==="de"?"Zeigt aktuelle Dsentemperatur":"Shows current nozzle temperature"})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:w.nozzleTemp,onChange:()=>N("nozzleTemp")}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:x==="de"?"Druckbett-Temperatur":"Bed Temperature"}),s("div",{className:"ios-item-subtitle",children:x==="de"?"Zeigt aktuelle Bett-Temperatur":"Shows current bed temperature"})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:w.bedTemp,onChange:()=>N("bedTemp")}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:x==="de"?"Schicht-Fortschritt":"Layer Progress"}),s("div",{className:"ios-item-subtitle",children:x==="de"?"Zeigt aktuelle/gesamte Schichten":"Shows current/total layers"})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:w.layerProgress,onChange:()=>N("layerProgress")}),s("span",{className:"ios-toggle-slider"})]})})]})]})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:x==="de"?"Benachrichtigungen":"Notifications"}),s("div",{className:"ios-card",children:[s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:x==="de"?"Druck abgeschlossen":"Print Completed"}),s("div",{className:"ios-item-subtitle",children:x==="de"?"Benachrichtigung wenn Druck fertig":"Notify when print finishes"})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",defaultChecked:!0}),s("span",{className:"ios-toggle-slider"})]})})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:x==="de"?"Fehler-Benachrichtigungen":"Error Notifications"}),s("div",{className:"ios-item-subtitle",children:x==="de"?"Bei Druckfehlern benachrichtigen":"Notify on print errors"})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",defaultChecked:!0}),s("span",{className:"ios-toggle-slider"})]})})]})]})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:x==="de"?"Erweitert":"Advanced"}),s("div",{className:"ios-card",children:s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:x==="de"?"Debug-Modus":"Debug Mode"}),s("div",{className:"ios-item-subtitle",children:x==="de"?"Erweiterte Logs anzeigen":"Show advanced logs"})]})}),s("div",{className:"ios-item-right",children:s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",defaultChecked:!1}),s("span",{className:"ios-toggle-slider"})]})})]})})]})]}),s(Pe,{scrollContainerRef:m,isHovered:f})]})})})});if(a){const A=t.attributes?.camera_entity_id;console.log(" === CAMERA DEBUG ==="),console.log(" Camera Entity ID from attributes:",A),console.log(" Entity attributes:",t.attributes),console.log(" Entity serial:",t.attributes?.serial);let P=A,I=null;if(!A&&e?.states){const D=t.attributes?.serial;if(D){const L=Object.keys(e.states).find(E=>{const W=E.toLowerCase();return W.startsWith("camera.")&&W.includes(D.toLowerCase())&&(W.endsWith("_kamera")||W.endsWith("_camera"))});if(L)P=L,console.log(" Found camera entity via fallback search:",L);else{const E=Object.keys(e.states).filter(W=>W.startsWith("camera."));console.log(" All available camera entities:",E)}}}P&&e?.states&&(I=e.states[P],console.log(" Camera state object:",I),console.log(" Camera entity_picture:",I?.attributes?.entity_picture));const z=Me(()=>{let D=null;return I?.attributes?.entity_picture?(D=I.attributes.entity_picture,console.log(" Using entity_picture:",D)):P&&(D=`/api/camera_proxy/${P}`,console.log(" Using camera_proxy:",D)),D&&C&&(D=`${D}${D.includes("?")?"&":"?"}t=${C}`),D},[I,P,C]);return s("div",{className:"printer3d-device-view",style:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},children:s("div",{className:"tab-content-container",style:{display:"block",height:"100%",padding:"0",overflow:"hidden",borderRadius:"20px"},children:z?s("img",{src:z,alt:"Printer Camera",onError:D=>{console.error("  Failed to load camera image"),console.log(" Attempted URL:",D.target.src),console.log(" Entity ID used:",P),console.log(" Camera state:",I),D.target.style.display="none";const L=document.createElement("div");L.style.cssText="text-align: center; color: rgba(255, 255, 255, 0.8); padding: 20px;",L.innerHTML=`
                  <p style="margin-bottom: 10px; font-size: 14px;"> Kamera konnte nicht geladen werden</p>
                  <p style="font-size: 11px; opacity: 0.6; margin-bottom: 5px;">Entity: ${P}</p>
                  <p style="font-size: 11px; opacity: 0.6;">URL: ${D.target.src}</p>
                  <p style="font-size: 11px; opacity: 0.6; margin-top: 10px;">Fehler: 403 Forbidden - Zugriff verweigert</p>
                  <p style="font-size: 11px; opacity: 0.6;">Versuchen Sie, die Kamera-Entity neu zu laden</p>
                `,D.target.parentNode.appendChild(L)},onLoad:()=>{console.log("  Camera image loaded successfully"),console.log(" Entity ID:",P),console.log(" Image source:",z)},style:{display:"block",width:"100%",height:"auto",maxHeight:"100%",maxWidth:"100%",borderRadius:"20px",objectFit:"cover"}}):s("div",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:[s("p",{style:{marginBottom:"10px"},children:x==="de"?" Keine Kamera gefunden":" No camera found"}),s("p",{style:{fontSize:"12px",opacity:.6},children:["Printer: ",t.id]}),s("p",{style:{fontSize:"11px",opacity:.5,marginTop:"10px"},children:["Serial: ",t.attributes?.serial]})]})})})}if(c){const A=t.attributes?.serial;console.log(" === IMAGE DEBUG ==="),console.log(" Entity serial:",A),console.log(" Looking for image entity: image.a1_"+A?.toLowerCase()+"_titelbild");let P=null,I=null;if(A&&e?.states)if(P=Object.keys(e.states).find(D=>{const L=D.toLowerCase();return L.startsWith("image.")&&L.includes(A.toLowerCase())&&L.endsWith("_titelbild")}),P)console.log(" Found image entity:",P);else{const D=Object.keys(e.states).filter(L=>L.startsWith("image."));console.log(" All available image entities:",D)}P&&e?.states&&(I=e.states[P],console.log(" Image state object:",I),console.log(" Image entity_picture:",I?.attributes?.entity_picture),console.log(" Image access_token:",I?.attributes?.access_token));let z=null;return I?.attributes?.entity_picture?(z=I.attributes.entity_picture,console.log(" Using entity_picture:",z),I.attributes.access_token&&(z=`${z}${z.includes("?")?"&":"?"}token=${I.attributes.access_token}`)):I?.state&&I.state!=="unavailable"&&(z=I.state,console.log(" Using state as image source:",z)),s("div",{className:"printer3d-device-view",style:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},children:s("div",{className:"tab-content-container",style:{display:"block",height:"100%",padding:"0",overflow:"hidden",borderRadius:"20px"},children:z?s("img",{src:z,alt:"Printer Titelbild",onError:D=>{console.error("  Failed to load image"),console.log(" Attempted URL:",D.target.src),console.log(" Entity ID used:",P),console.log(" Image state:",I),D.target.style.display="none";const L=document.createElement("div");L.style.cssText="text-align: center; color: rgba(255, 255, 255, 0.8); padding: 20px;",L.innerHTML=`
                  <p style="margin-bottom: 10px; font-size: 14px;"> Bild konnte nicht geladen werden</p>
                  <p style="font-size: 11px; opacity: 0.6; margin-bottom: 5px;">Entity: ${P}</p>
                  <p style="font-size: 11px; opacity: 0.6;">URL: ${D.target.src}</p>
                  <p style="font-size: 11px; opacity: 0.6; margin-top: 10px;">Fehler: Zugriff verweigert</p>
                `,D.target.parentNode.appendChild(L)},onLoad:()=>{console.log("  Image loaded successfully"),console.log(" Entity ID:",P),console.log(" Image source:",z)},style:{display:"block",width:"100%",height:"auto",maxHeight:"100%",maxWidth:"100%",borderRadius:"20px",objectFit:"cover"}}):s("div",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.6)",padding:"20px"},children:[s("p",{style:{marginBottom:"10px"},children:x==="de"?" Kein Titelbild gefunden":" No title image found"}),s("p",{style:{fontSize:"12px",opacity:.6},children:["Printer: ",t.id]}),s("p",{style:{fontSize:"11px",opacity:.5,marginTop:"10px"},children:["Serial: ",A]}),s("p",{style:{fontSize:"11px",opacity:.5,marginTop:"5px"},children:["Erwartete Entity: image.a1_",A?.toLowerCase(),"_titelbild"]})]})})})}return s("div",{className:"printer3d-device-view",style:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},children:s(io,{item:t,hass:e,lang:i,onServiceCall:n})})},d7=Object.freeze(Object.defineProperty({__proto__:null,Printer3DDeviceView:G0,default:G0},Symbol.toStringTag,{value:"Module"})),K0=({entity:t,hass:e,lang:i="de"})=>{const[n,r]=M({});U(()=>{const p=async()=>{if(!t||!e)return;const b=await t.executeAction("getPrinterData",{hass:e});b&&r(b)};p();const v=setInterval(p,5e3);return()=>clearInterval(v)},[t,e]);const o=(p,v=null)=>{if(!p||p==="unavailable")return"--";const b=parseFloat(p);if(isNaN(b))return"--";if(v&&v!=="unavailable"){const y=parseFloat(v);if(!isNaN(y)&&y>0)return`${Math.round(b)}C  ${Math.round(y)}C`}return`${Math.round(b)}C`},a=n.currentStep||(i==="de"?"Bereit":"Ready"),l=()=>{const p=[];return n.nozzleSize&&n.nozzleSize!=="unavailable"&&p.push(n.nozzleSize),n.nozzleType&&n.nozzleType!=="unavailable"&&p.push(n.nozzleType),p.length===0?i==="de"?"Nicht verfgbar":"Not available":p.join(", ")},c=()=>{const p=o(n.bedTemp,n.targetBed),v=o(n.nozzleTemp,n.targetNozzle);return`Druckbett: ${p} | Dse: ${v}`},d=p=>!p||p==="unavailable"?i==="de"?"Unbekannt":"Unknown":p,u=parseFloat(n.progress)||0,h=(n.currentStep||"").toLowerCase(),m=["idle","offline","unavailable","unknown"].includes(h),f=u>0&&!m,g={value:u,min:0,max:100,unit:"%",label:i==="de"?"Druckfortschritt":"Print Progress",subValue:c(),color:f?"rgb(48, 209, 88)":"rgba(255, 255, 255, 0.3)",readOnly:!0,showPower:!1,progressMode:!1};return s("div",{className:"printer-overview-container",children:[s("div",{className:"printer-header-info",children:[s("div",{className:"printer-info-row",children:[s("span",{className:"info-label",children:i==="de"?"Arbeitsschritt":"Current Step"}),s("span",{className:"info-value",children:a})]}),s("div",{className:"printer-info-row",children:[s("span",{className:"info-label",children:i==="de"?"Dse":"Nozzle"}),s("span",{className:"info-value",children:l()})]})]}),s("div",{className:"printer-progress-section",children:s(Kr,{...g})}),s("div",{className:"printer-time-info",children:[s("span",{className:"time-label",children:i==="de"?"Verbleibende Zeit":"Remaining Time"}),s("span",{className:"time-value",children:d(n.remainingTime)})]})]})},u7=Object.freeze(Object.defineProperty({__proto__:null,Printer3DOverviewTab:K0,default:K0},Symbol.toStringTag,{value:"Module"})),Y0=({entity:t,hass:e,lang:i="de"})=>{const[n,r]=M({});return U(()=>{if(!t||!e)return;const o={printSpeed:t.attributes?.print_speed||100,fanSpeed:t.attributes?.fan_speed||100,chamberLight:t.attributes?.chamber_light||!1,targetNozzle:t.attributes?.target_nozzle_temp||220,targetBed:t.attributes?.target_bed_temp||60};r(o)},[t,e]),s("div",{className:"controls-content",children:[s("div",{className:"ios-control-row",children:[s("div",{className:"ios-control-label",children:i==="de"?"Druckgeschwindigkeit":"Print Speed"}),s("input",{type:"range",min:"50",max:"200",defaultValue:n.printSpeed||100,className:"ios-slider"}),s("span",{className:"ios-value",children:[n.printSpeed||100,"%"]})]}),s("div",{className:"ios-control-row",children:[s("div",{className:"ios-control-label",children:i==="de"?"Druckkopflfter":"Part Cooling Fan"}),s("input",{type:"range",min:"0",max:"100",defaultValue:n.fanSpeed||100,className:"ios-slider"}),s("span",{className:"ios-value",children:[n.fanSpeed||100,"%"]})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-control-row",children:[s("div",{className:"ios-control-label",children:i==="de"?"Druckraumbeleuchtung":"Chamber Light"}),s("label",{className:"ios-switch",children:[s("input",{type:"checkbox",defaultChecked:n.chamberLight}),s("span",{className:"ios-switch-slider"})]})]}),s("div",{className:"ios-control-row",children:[s("div",{className:"ios-control-label",children:i==="de"?"Aufforderungston":"Sound Alerts"}),s("label",{className:"ios-switch",children:[s("input",{type:"checkbox"}),s("span",{className:"ios-switch-slider"})]})]}),s("div",{className:"ios-control-row",children:[s("div",{className:"ios-control-label",children:i==="de"?"Bildsensorkamera":"Image Sensor Camera"}),s("label",{className:"ios-switch",children:[s("input",{type:"checkbox"}),s("span",{className:"ios-switch-slider"})]})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-control-row tappable",children:[s("div",{className:"ios-control-label",children:i==="de"?"Zieltemperatur der Dse":"Target Nozzle Temp"}),s("div",{className:"ios-value",children:[n.targetNozzle||220,"C"]}),s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"chevron-icon",children:s("path",{d:"M9 18l6-6-6-6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),s("div",{className:"ios-control-row tappable",children:[s("div",{className:"ios-control-label",children:i==="de"?"Zieltemperatur des Druckbetts":"Target Bed Temp"}),s("div",{className:"ios-value",children:[n.targetBed||60,"C"]}),s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"chevron-icon",children:s("path",{d:"M9 18l6-6-6-6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),s("div",{className:"ios-divider"}),s("button",{className:"ios-action-button pause",children:[" ",i==="de"?"Druckvorgang anhalten":"Pause Print"]}),s("button",{className:"ios-action-button stop",children:[" ",i==="de"?"Druckvorgang beenden":"Stop Print"]}),s("button",{className:"ios-action-button resume",children:[" ",i==="de"?"Druckvorgang fortsetzen":"Resume Print"]}),s("button",{className:"ios-action-button camera",children:[" ",i==="de"?"Kamera aktivieren":"Activate Camera"]})]})},h7=Object.freeze(Object.defineProperty({__proto__:null,Printer3DControlsTab:Y0,default:Y0},Symbol.toStringTag,{value:"Module"})),ma=({title:t,isExpanded:e,onToggle:i,children:n})=>s("div",{className:"ios-expandable-card",children:[s("div",{className:"ios-card-header",onClick:i,children:[s("span",{className:"ios-card-title",children:t}),s(T.svg,{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"chevron-icon",animate:{rotate:e?90:0},transition:{duration:.3,ease:"easeInOut"},children:s("path",{d:"M9 18l6-6-6-6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),s(Ce,{initial:!1,children:e&&s(T.div,{className:"ios-card-content",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{height:{duration:.3,ease:"easeInOut"},opacity:{duration:.2,ease:"easeInOut"}},children:s("div",{className:"ios-card-content-inner",children:n})})})]}),Z0=({entity:t,hass:e,lang:i="de"})=>{const[n,r]=M(null),[o,a]=M({});U(()=>{if(!t||!e)return;const d={chamberTemp:t.attributes?.chamber_temp||null,fanSpeed:t.attributes?.fan_speed||null,currentLayer:t.attributes?.current_layer||null,totalLayers:t.attributes?.total_layers||null,filamentUsed:t.attributes?.filament_used||null,printDuration:t.attributes?.print_duration||null,wifiSignal:t.attributes?.wifi_signal||null,firmwareVersion:t.attributes?.firmware_version||null},u=t.attributes?.serial;u&&e.states&&Object.keys(e.states).filter(m=>m.toLowerCase().includes(u.toLowerCase())).forEach(m=>{const f=e.states[m],g=m.toLowerCase();g.includes("online")?d.online=f.state:g.includes("druckfehler")||g.includes("print_error")?d.printError=f.state:g.includes("hms_fehler")||g.includes("hms_error")?d.hmsError=f.state:g.includes("firmware_status")?d.firmwareStatus=f.state:g.includes("entwickler_lan_modus")||g.includes("lan_mode")?d.lanMode=f.state:g.includes("mqtt_verbindungsmodus")||g.includes("mqtt_mode")?d.mqttMode=f.state:(g.includes("mqtt_verschlusselungsfirmware")||g.includes("mqtt_encryption"))&&(d.mqttEncryption=f.state)}),a(d)},[t,e]);const l=d=>{r(n===d?null:d)},c=d=>{if(!d)return"--";const u=String(d).toLowerCase();return u==="on"?i==="de"?"An":"On":u==="off"?i==="de"?"Aus":"Off":d};return s("div",{className:"printer-control-sections",children:[s(ma,{title:i==="de"?"  Sensoren & Diagnose":"  Sensors & Diagnostics",isExpanded:n==="sensors",onToggle:()=>l("sensors"),children:s("div",{className:"sensors-content",children:[s("div",{className:"ios-info-row",children:[s("div",{className:"ios-info-label",children:i==="de"?"Kammertemperatur":"Chamber Temperature"}),s("div",{className:"ios-info-value",children:[o.chamberTemp||"--","C"]})]}),s("div",{className:"ios-info-row",children:[s("div",{className:"ios-info-label",children:i==="de"?"Lftergeschwindigkeit":"Fan Speed"}),s("div",{className:"ios-info-value",children:[o.fanSpeed||"--","%"]})]}),s("div",{className:"ios-info-row",children:[s("div",{className:"ios-info-label",children:i==="de"?"Aktuelle Schicht":"Current Layer"}),s("div",{className:"ios-info-value",children:[o.currentLayer||"--","/",o.totalLayers||"--"]})]}),s("div",{className:"ios-info-row",children:[s("div",{className:"ios-info-label",children:i==="de"?"Filamentverbrauch":"Filament Used"}),s("div",{className:"ios-info-value",children:[o.filamentUsed||"--","g"]})]}),s("div",{className:"ios-info-row",children:[s("div",{className:"ios-info-label",children:i==="de"?"Druckdauer":"Print Duration"}),s("div",{className:"ios-info-value",children:o.printDuration||"--"})]}),s("div",{className:"ios-info-row",children:[s("div",{className:"ios-info-label",children:"WiFi-Signal"}),s("div",{className:"ios-info-value",children:[o.wifiSignal||"--"," dBm"]})]}),s("div",{className:"ios-info-row",children:[s("div",{className:"ios-info-label",children:i==="de"?"Firmware-Version":"Firmware Version"}),s("div",{className:"ios-info-value",children:o.firmwareVersion||"--"})]})]})}),s(ma,{title:i==="de"?"  Diagnose":"  Diagnostics",isExpanded:n==="diagnostics",onToggle:()=>l("diagnostics"),children:s("div",{className:"sensors-content",children:[s("div",{className:"ios-info-row",children:[s("div",{className:"ios-info-label",children:"Online"}),s("div",{className:"ios-info-value",children:c(o.online)})]}),s("div",{className:"ios-info-row",children:[s("div",{className:"ios-info-label",children:i==="de"?"Druckfehler":"Print Error"}),s("div",{className:"ios-info-value",children:c(o.printError)})]}),s("div",{className:"ios-info-row",children:[s("div",{className:"ios-info-label",children:"HMS-Fehler"}),s("div",{className:"ios-info-value",children:c(o.hmsError)})]}),s("div",{className:"ios-info-row",children:[s("div",{className:"ios-info-label",children:"Firmware Status"}),s("div",{className:"ios-info-value",children:c(o.firmwareStatus)})]}),s("div",{className:"ios-info-row",children:[s("div",{className:"ios-info-label",children:i==="de"?"Entwickler LAN-Modus":"Developer LAN Mode"}),s("div",{className:"ios-info-value",children:c(o.lanMode)})]}),s("div",{className:"ios-info-row",children:[s("div",{className:"ios-info-label",children:i==="de"?"MQTT-Verbindungsmodus":"MQTT Connection Mode"}),s("div",{className:"ios-info-value",children:c(o.mqttMode)})]}),s("div",{className:"ios-info-row",children:[s("div",{className:"ios-info-label",children:i==="de"?"MQTT-Verschlsselung":"MQTT Encryption"}),s("div",{className:"ios-info-value",children:c(o.mqttEncryption)})]})]})}),s(ma,{title:i==="de"?"  Verbundene Gerte":"  Connected Devices",isExpanded:n==="devices",onToggle:()=>l("devices"),children:s("div",{className:"devices-content",children:[s("div",{className:"ios-device-row",children:[s("div",{className:"ios-device-icon",children:""}),s("div",{className:"ios-device-info",children:[s("div",{className:"ios-device-name",children:"Bambu Handy (MQTT)"}),s("div",{className:"ios-device-status",children:"Connected  192.168.1.45"})]})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-device-row",children:[s("div",{className:"ios-device-icon",children:""}),s("div",{className:"ios-device-info",children:[s("div",{className:"ios-device-name",children:"Bambu Studio"}),s("div",{className:"ios-device-status",children:"Connected  Cloud"})]})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-device-row",children:[s("div",{className:"ios-device-icon",children:""}),s("div",{className:"ios-device-info",children:[s("div",{className:"ios-device-name",children:"AMS (Filament System)"}),s("div",{className:"ios-device-status",children:"Connected  4 Spools loaded"})]})]})]})})]})},m7=Object.freeze(Object.defineProperty({__proto__:null,Printer3DDiagnosticsTab:Z0,default:Z0},Symbol.toStringTag,{value:"Module"})),q0=({entity:t,hass:e,lang:i="de",onServiceCall:n})=>{const[r,o]=M(!1),[a,l]=M(!1),[c,d]=M(!1),[u,h]=M(!1),[m,f]=M(null),[g,p]=M(null),[v,b]=M("overview"),[y,w]=M("main");M(null);const[_,k]=M(()=>{const R={verbrauch:{enabled:!1},nettonutzung:{enabled:!1},solarerzeugung:{enabled:!1},batterie:{enabled:!1}};try{const j=localStorage.getItem("energy_circular_config_v3");if(j){const le=JSON.parse(j);if(le&&typeof le=="object"&&!Array.isArray(le))return le}}catch(j){console.warn("Failed to load circular config from localStorage:",j)}return R}),[N,C]=M(0),[S,x]=M(!1),B=te(null),[A,P]=M(null),I=te(null),[z,D]=M(!1),[L,E]=M(!1),[W,F]=M(null),[K,G]=M(localStorage.getItem("userLanguage")||i||"de"),$=K||i||"de",Q={grid_import:{de:"Netzbezug",en:"Grid Import"},grid_return:{de:"Netzeinspeisung",en:"Grid Export"},solar:{de:"PV Leistung",en:"PV Power"},consumption:{de:"Verbrauch",en:"Consumption"},estimated_power:{de:"Geschtzte Leistung",en:"Estimated Power"},kwh:{de:"Bezogene Wirkenergie gesamt",en:"Total Active Energy Consumed"},pv_total:{de:"PV kumulativ gesamt",en:"PV Cumulative Total"},estimated_energy_today:{de:"Geschtzte Erzeugung heute",en:"Estimated Generation Today"},grid_export_total:{de:"Einspeisung gesamt",en:"Total Grid Export"},battery:{de:"Batterie",en:"Battery"},battery_discharged:{de:"Entladen (kWh)",en:"Discharged (kWh)"},battery_charged:{de:"Geladen (kWh)",en:"Charged (kWh)"},feed_in_tariff:{de:"Einspeisetarif",en:"Feed-in Tariff"},purchase_tariff:{de:"Bezugstarif",en:"Purchase Tariff"}},re={grid_import:{de:"Strom, der aus dem ffentlichen Netz bezogen wird (in Watt).",en:"Power drawn from the public grid (in Watts)."},grid_return:{de:"Strom, der ins ffentliche Netz eingespeist wird (in Watt).",en:"Power fed back into the public grid (in Watts)."},solar:{de:"Aktuelle Solar-Produktion der PV-Anlage (in Watt).",en:"Current solar production from PV system (in Watts)."},consumption:{de:"Gesamtverbrauch = Netzbezug + (Solar - Einspeisung) (in Watt).",en:"Total consumption = Grid Import + (Solar - Grid Export) (in Watts)."},estimated_power:{de:"Geschtzte Leistung basierend auf Prognose-Daten.",en:"Estimated power based on forecast data."},kwh:{de:'Kumulativer Netzbezug seit Installation (in kWh). Fr "Verbrauch heute" wird der Wert um 00:00 Uhr abgezogen.',en:'Cumulative grid import since installation (in kWh). For "consumption today", the value at 00:00 is subtracted.'},pv_total:{de:"Kumulativ produzierte Solar-Energie seit Installation (in kWh). Lifetime-Wert.",en:"Cumulative solar energy produced since installation (in kWh). Lifetime value."},estimated_energy_today:{de:"Geschtzte Solar-Energie fr heute basierend auf Prognose.",en:"Estimated solar energy for today based on forecast."},grid_export_total:{de:"Kumulativ ins Netz eingespeiste Energie seit Installation (in kWh).",en:"Cumulative energy fed back to grid since installation (in kWh)."},battery:{de:"Aktueller Batterieladezustand (in Prozent).",en:"Current battery charge level (in percent)."},battery_discharged:{de:"Energie, die aus der Batterie entnommen wurde (in kWh).",en:"Energy discharged from battery (in kWh)."},battery_charged:{de:"Energie, die in die Batterie geladen wurde (in kWh).",en:"Energy charged into battery (in kWh)."},feed_in_tariff:{de:"Tarif fr Einspeisung ins Netz (in EUR/kWh oder andere Whrung pro kWh).",en:"Tariff for feeding energy into the grid (in EUR/kWh or other currency per kWh)."},purchase_tariff:{de:"Tarif fr Bezug aus dem Netz (in EUR/kWh oder andere Whrung pro kWh).",en:"Tariff for purchasing energy from the grid (in EUR/kWh or other currency per kWh)."}},he=Ee(R=>{console.log(" getCircularTypeLabel called with:",{type:R,currentLang:$});const le={verbrauch:$==="de"?"Verbrauch":"Consumption",nettonutzung:$==="de"?"Nettonutzung":"Net Usage",solarerzeugung:$==="de"?"Solarerzeugung":"Solar Production",batterie:$==="de"?"Batterie":"Battery"}[R]||R;return console.log(" Result:",le),le},[$]),O=Ee(R=>({verbrauch:{primary:t.attributes?.consumption_sensor,secondary:t.attributes?.grid_return_sensor},nettonutzung:{primary:t.attributes?.grid_import_sensor,secondary:t.attributes?.kwh_sensor},solarerzeugung:{primary:t.attributes?.solar_sensor,secondary:t.attributes?.pv_total_sensor},batterie:{primary:t.attributes?.battery_discharged_sensor,secondary:t.attributes?.battery_charged_sensor}})[R]||{primary:null,secondary:null},[t.attributes]),H=Me(()=>!_||typeof _!="object"||Array.isArray(_)?[]:Object.keys(_).filter(R=>{if(!_[R]?.enabled)return!1;const le=O(R);return le.primary&&le.secondary}).map(R=>({type:R})),[_,O]);U(()=>{if(!(H.length<=1||S||r||a||c||u))return B.current=setInterval(()=>{C(R=>(R+1)%H.length)},5e3),()=>{B.current&&clearInterval(B.current)}},[H.length,S,r,a,c,u]),M(!0),M(!0),M(!0),M(localStorage.getItem("aiModeEnabled")!=="false");const[X,me]=M(parseInt(localStorage.getItem("bambulab_camera_refresh_interval"))||10);M(()=>{const R=localStorage.getItem("bambulab_quickstats_config");return R?JSON.parse(R):{progress:!0,status:!0,remainingTime:!0,nozzleTemp:!1,bedTemp:!1,layerProgress:!1}});const[q,ce]=M(Date.now()),ie={enter:R=>({x:R>0?"100%":"-100%",opacity:0}),center:{x:0,opacity:1},exit:R=>({x:R<0?"100%":"-100%",opacity:0})},J=(R,j)=>{const le={..._,[R]:{enabled:j}};k(le),localStorage.setItem("energy_circular_config_v3",JSON.stringify(le))},Y=R=>({grid_import:$==="de"?"Netzbezug (W)":"Grid Import (W)",grid_return:$==="de"?"Netzeinspeisung (W)":"Grid Export (W)",solar:$==="de"?"PV Leistung (W)":"PV Power (W)",battery:$==="de"?"Batterie":"Battery",kwh:$==="de"?"Energie (kWh)":"Energy (kWh)",pv_total:$==="de"?"PV kumulativ gesamt (kWh)":"PV Cumulative Total (kWh)",consumption:$==="de"?"Verbrauch (W)":"Consumption (W)",self_sufficiency:$==="de"?"Autarkie (%)":"Self-Sufficiency (%)",self_consumption:$==="de"?"Eigenverbrauch (%)":"Self-Consumption (%)",estimated_energy_today:$==="de"?"Geschtzte Erzeugung heute (kWh)":"Estimated Production Today (kWh)",estimated_power:$==="de"?"Geschtzte Leistung (W)":"Estimated Power (W)",grid_export_total:$==="de"?"Einspeisung gesamt (Wh)":"Grid Export Total (Wh)",feed_in_tariff:$==="de"?"Einspeisetarif (/kWh)":"Feed-in Tariff (/kWh)",purchase_tariff:$==="de"?"Bezugstarif (/kWh)":"Purchase Tariff (/kWh)"})[R]||R,oe=R=>{if(!R||!e?.states?.[R])return{value:"-",unit:""};const j=e.states[R],le=parseFloat(j.state),ye=j.attributes?.unit_of_measurement||"";return isNaN(le)?{value:"-",unit:ye}:ye==="W"||ye==="kW"?{value:le.toFixed(1),unit:ye}:ye==="Wh"||ye==="kWh"?{value:(le/1e3).toFixed(2),unit:"kWh"}:{value:le.toFixed(2),unit:ye}},ae=async()=>{try{t&&t.executeAction&&await t.executeAction("refresh",{hass:e})}catch(R){console.error("Failed to refresh energy data:",R)}};U(()=>(window._printerViewRef={handleOpenSettings:()=>{o(!0),l(!1),d(!1),b("settings"),P(null)},handleOpenCamera:()=>{l(!0),o(!1),d(!1),b("camera"),P(null)},handleOpenImage:()=>{d(!0),l(!1),o(!1),b("image"),P(null)},handleOverview:()=>{o(!1),l(!1),d(!1),b("overview"),P(null)},handleRefresh:ae,handleBackNavigation:()=>{o(!1),l(!1),d(!1),b("overview"),P(null)},getActiveButton:()=>v},()=>{window._printerViewRef=null}),[v]),U(()=>{const R=j=>{const le=j.detail.language;G(le)};return window.addEventListener("languageChanged",R),()=>{window.removeEventListener("languageChanged",R)}},[]),U(()=>{const R=j=>{const le=j.detail.interval/1e3;me(le),console.log(" Camera refresh interval changed to:",le,"seconds")};return window.addEventListener("cameraRefreshIntervalChanged",R),()=>{window.removeEventListener("cameraRefreshIntervalChanged",R)}},[]),U(()=>{if(!a)return;console.log(" Starting camera refresh timer with interval:",X,"seconds");const R=setInterval(()=>{ce(Date.now()),console.log(" Camera refreshed at:",new Date().toLocaleTimeString())},X*1e3);return()=>{console.log(" Clearing camera refresh timer"),clearInterval(R)}},[a,X]),U(()=>{const R=t.attributes?.grid_import_sensor;if(!R||!e?.states||!e.states[R])return;(async()=>{try{await t.executeAction("getGridImportValue",{hass:e})}catch(ye){console.error("Failed to update grid import value:",ye)}})()},[e?.states,t.attributes?.grid_import_sensor]);const V={grid_import:{attr:"grid_import_sensor",units:["W","kW"],deviceClass:"power"},grid_return:{attr:"grid_return_sensor",units:["W","kW"],deviceClass:"power"},solar:{attr:"solar_sensor",units:["W","kW"],deviceClass:"power"},consumption:{attr:"consumption_sensor",units:["W","kW"],deviceClass:"power"},estimated_power:{attr:"estimated_power_sensor",units:["W","kW"],deviceClass:"power"},kwh:{attr:"kwh_sensor",units:["Wh","kWh"],deviceClass:"energy"},pv_total:{attr:"pv_total_sensor",units:["Wh","kWh"],deviceClass:"energy"},estimated_energy_today:{attr:"estimated_energy_today_sensor",units:["Wh","kWh"],deviceClass:"energy"},grid_export_total:{attr:"grid_export_total_sensor",units:["Wh","kWh"],deviceClass:"energy"},battery:{attr:"battery_sensor",units:["%"],deviceClass:"battery"},battery_discharged:{attr:"battery_discharged_sensor",units:["Wh","kWh"],deviceClass:"energy"},battery_charged:{attr:"battery_charged_sensor",units:["Wh","kWh"],deviceClass:"energy"},feed_in_tariff:{attr:"feed_in_tariff_sensor",units:["EUR/kWh","/kWh","USD/kWh","$/kWh"],deviceClass:"monetary_rate",unitPattern:"/kWh"},purchase_tariff:{attr:"purchase_tariff_sensor",units:["EUR/kWh","/kWh","USD/kWh","$/kWh"],deviceClass:"monetary_rate",unitPattern:"/kWh"}};U(()=>{console.log(" Loading sensor configuration from localStorage..."),Object.values(V).forEach(R=>{const j=`energy_${t.id}_${R.attr}`,le=localStorage.getItem(j);le&&(console.log(` Restoring from localStorage: ${R.attr} = ${le}`),t.updateAttributes({[R.attr]:le}))}),console.log(" Sensor configuration loaded")},[t.id]);const ne=async R=>{console.log(" handleSensorSelect called:",{sensorId:R,sensorSelectionType:m});try{const j=V[m];if(!j){console.error(" Unknown sensor type:",m);return}console.log(" Config:",j),console.log(` Saving: ${j.attr} = ${R}`),t.updateAttributes({[j.attr]:R}),console.log(" entity.updateAttributes called"),console.log(" Current entity.attributes:",t.attributes);const le=`energy_${t.id}_${j.attr}`;localStorage.setItem(le,R),console.log(` Saved to localStorage: ${le} = ${R}`);try{await t.executeAction("updateSensorConfig",{[j.attr]:R}),console.log(` Backend save successful: ${j.attr}`)}catch(ye){console.warn(" Backend save failed (using localStorage only):",ye)}console.log(" Closing sensor selection..."),h(!1),f(null),p(null),w("sensors"),console.log(" handleSensorSelect completed")}catch(j){console.error(" Failed to update sensor config:",j)}};if(u){const R=V[m]||V.grid_import,j=t.attributes?.[R.attr]||null,le=R.units,ye=R.deviceClass,be=Me(()=>e?.states?Object.keys(e.states).filter(de=>{const pe=e.states[de],Le=pe.state,Fe=pe.attributes?.unit_of_measurement||"",Ae=pe.attributes?.device_class||"";if(!de.startsWith("sensor.")||!le.includes(Fe))return!1;const bi=parseFloat(Le);return!(isNaN(bi)||Ae&&Ae!==ye&&ye!=="battery"&&ye!=="battery"||["","$","EUR","USD","CHF","GBP"].includes(Fe))}).map(de=>{const pe=e.states[de];return{id:de,name:pe.attributes?.friendly_name||de,value:pe.state,unit:pe.attributes?.unit_of_measurement||"",deviceClass:pe.attributes?.device_class||"",stateClass:pe.attributes?.state_class||""}}).sort((de,pe)=>de.unit.startsWith("k")&&!pe.unit.startsWith("k")?-1:!de.unit.startsWith("k")&&pe.unit.startsWith("k")?1:de.name.localeCompare(pe.name)):[],[e?.states,m]);return s("div",{className:"energy-device-view",style:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},children:s("div",{className:"tab-content-container",children:s("div",{className:"ios-settings-container",children:s("div",{className:"ios-view-wrapper",children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:()=>{h(!1),p(null),w("sensors")},children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:$==="de"?"Zurck":"Back"})]}),s("div",{className:"ios-navbar-title",children:Y(m)})]}),s("div",{className:"ios-settings-view",children:s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:be.length===0?s("div",{className:"ios-item",children:s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:s("div",{className:"ios-item-label",style:{opacity:.6},children:$==="de"?"Keine Sensoren gefunden":"No sensors found"})})})}):be.map((de,pe)=>s("div",{children:[pe>0&&s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>ne(de.id),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:de.name}),s("div",{className:"ios-item-subtitle",children:de.id})]})}),s("div",{className:"ios-item-right",children:[s("span",{className:"ios-item-value",children:[de.value," ",de.unit]}),j===de.id&&s("svg",{className:"ios-checkmark",width:"15",height:"12",viewBox:"0 0 15 12",fill:"none",children:s("path",{d:"M1 6L5.5 10.5L13.5 1.5",stroke:"rgb(0, 122, 255)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})]})]},de.id))})})})]})})})})}if(r)return Me(()=>e?.states?Object.keys(e.states).filter(R=>{const j=e.states[R],le=j.state,ye=j.attributes?.unit_of_measurement||"",be=j.attributes?.device_class||"";if(!R.startsWith("sensor.")||!["W","kW"].includes(ye))return!1;const pe=parseFloat(le);return!(isNaN(pe)||be&&be!=="power"||["","$","EUR","USD","CHF","GBP"].includes(ye))}).map(R=>{const j=e.states[R];return{id:R,name:j.attributes?.friendly_name||R,value:j.state,unit:j.attributes?.unit_of_measurement||"",deviceClass:j.attributes?.device_class||"",stateClass:j.attributes?.state_class||""}}).sort((R,j)=>R.unit==="kW"&&j.unit==="W"?-1:R.unit==="W"&&j.unit==="kW"?1:R.name.localeCompare(j.name)):[],[e?.states]),s("div",{className:"energy-device-view",style:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},children:s("div",{className:"tab-content-container",style:{height:"100%"},children:[s("div",{className:"ios-settings-container",children:s(Ce,{mode:"wait",initial:!1,custom:y==="main"?-1:1,children:y==="main"?s(T.div,{custom:-1,variants:ie,initial:!1,animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),style:{position:"relative"},children:[s("div",{ref:I,className:"ios-settings-view",style:{padding:"20px"},children:[s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>w("sensors"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:$==="de"?"Werte":"Values"}),s("div",{className:"ios-item-subtitle",children:$==="de"?"Sensoren konfigurieren":"Configure sensors"})]})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})})}),s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>w("circular-overview"),children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:"Circular"}),s("div",{className:"ios-item-subtitle",children:[H.length," ",$==="de"?"aktiv":"active"]})]})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})})})]}),s(Pe,{scrollContainerRef:I,isHovered:z})]},"main"):y==="sensors"?s(T.div,{custom:1,variants:ie,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:()=>w("main"),children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:$==="de"?"Zurck":"Back"})]}),s("div",{className:"ios-navbar-title",children:$==="de"?"Werte":"Values"})]}),s("div",{ref:I,className:"ios-settings-view",children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:$==="de"?"LEISTUNG (W/KW)":"POWER (W/KW)"}),s("div",{className:"ios-card",children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{f("grid_import"),p("sensors"),h(!0)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[s("span",{children:$==="de"?"Netzbezug":"Grid Import"}),s(T.button,{className:"info-icon-button",onClick:R=>{R.stopPropagation(),F("grid_import"),E(!0)},whileHover:{scale:1.1},whileTap:{scale:.95},style:{background:"none",border:"none",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",color:"rgba(0, 122, 255, 0.8)"},children:s("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[s("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M8 7V11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s("circle",{cx:"8",cy:"5",r:"0.75",fill:"currentColor"})]})})]}),s("div",{className:"ios-item-subtitle",children:(()=>{const R=t.attributes?.grid_import_sensor;if(!R)return $==="de"?"Nicht konfiguriert":"Not configured";const j=oe(R);return`${R.split(".")[1]}  ${j.value} ${j.unit}`})()})]})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{f("grid_return"),p("sensors"),h(!0)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[s("span",{children:$==="de"?"Netzeinspeisung":"Grid Export"}),s(T.button,{className:"info-icon-button",onClick:R=>{R.stopPropagation(),F("grid_return"),E(!0)},whileHover:{scale:1.1},whileTap:{scale:.95},style:{background:"none",border:"none",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",color:"rgba(0, 122, 255, 0.8)"},children:s("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[s("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M8 7V11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s("circle",{cx:"8",cy:"5",r:"0.75",fill:"currentColor"})]})})]}),s("div",{className:"ios-item-subtitle",children:(()=>{const R=t.attributes?.grid_return_sensor;if(!R)return $==="de"?"Nicht konfiguriert":"Not configured";const j=oe(R);return`${R.split(".")[1]}  ${j.value} ${j.unit}`})()})]})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{f("solar"),p("sensors"),h(!0)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[s("span",{children:$==="de"?"PV Leistung":"PV Power"}),s(T.button,{className:"info-icon-button",onClick:R=>{R.stopPropagation(),F("solar"),E(!0)},whileHover:{scale:1.1},whileTap:{scale:.95},style:{background:"none",border:"none",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",color:"rgba(0, 122, 255, 0.8)"},children:s("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[s("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M8 7V11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s("circle",{cx:"8",cy:"5",r:"0.75",fill:"currentColor"})]})})]}),s("div",{className:"ios-item-subtitle",children:(()=>{const R=t.attributes?.solar_sensor;if(!R)return $==="de"?"Nicht konfiguriert":"Not configured";const j=oe(R);return`${R.split(".")[1]}  ${j.value} ${j.unit}`})()})]})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{f("consumption"),p("sensors"),h(!0)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[s("span",{children:$==="de"?"Verbrauch":"Consumption"}),s(T.button,{className:"info-icon-button",onClick:R=>{R.stopPropagation(),F("consumption"),E(!0)},whileHover:{scale:1.1},whileTap:{scale:.95},style:{background:"none",border:"none",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",color:"rgba(0, 122, 255, 0.8)"},children:s("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[s("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M8 7V11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s("circle",{cx:"8",cy:"5",r:"0.75",fill:"currentColor"})]})})]}),s("div",{className:"ios-item-subtitle",children:(()=>{const R=t.attributes?.consumption_sensor;if(!R)return $==="de"?"Nicht konfiguriert":"Not configured";const j=oe(R);return`${R.split(".")[1]}  ${j.value} ${j.unit}`})()})]})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{f("estimated_power"),p("sensors"),h(!0)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[s("span",{children:$==="de"?"Geschtzte Leistung":"Estimated Power"}),s(T.button,{className:"info-icon-button",onClick:R=>{R.stopPropagation(),F("estimated_power"),E(!0)},whileHover:{scale:1.1},whileTap:{scale:.95},style:{background:"none",border:"none",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",color:"rgba(0, 122, 255, 0.8)"},children:s("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[s("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M8 7V11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s("circle",{cx:"8",cy:"5",r:"0.75",fill:"currentColor"})]})})]}),s("div",{className:"ios-item-subtitle",children:(()=>{const R=t.attributes?.estimated_power_sensor;if(!R)return $==="de"?"Nicht konfiguriert":"Not configured";const j=oe(R);return`${R.split(".")[1]}  ${j.value} ${j.unit}`})()})]})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:$==="de"?"ENERGIE (WH/KWH)":"ENERGY (WH/KWH)"}),s("div",{className:"ios-card",children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{f("kwh"),p("sensors"),h(!0)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[s("span",{children:$==="de"?"Bezogene Wirkenergie gesamt":"Total Active Energy Consumed"}),s(T.button,{className:"info-icon-button",onClick:R=>{R.stopPropagation(),F("kwh"),E(!0)},whileHover:{scale:1.1},whileTap:{scale:.95},style:{background:"none",border:"none",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",color:"rgba(0, 122, 255, 0.8)"},children:s("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[s("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M8 7V11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s("circle",{cx:"8",cy:"5",r:"0.75",fill:"currentColor"})]})})]}),s("div",{className:"ios-item-subtitle",children:(()=>{const R=t.attributes?.kwh_sensor;if(!R)return $==="de"?"Nicht konfiguriert":"Not configured";const j=oe(R);return`${R.split(".")[1]}  ${j.value} ${j.unit}`})()})]})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{f("pv_total"),p("sensors"),h(!0)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[s("span",{children:$==="de"?"PV kumulativ gesamt":"PV Cumulative Total"}),s(T.button,{className:"info-icon-button",onClick:R=>{R.stopPropagation(),F("pv_total"),E(!0)},whileHover:{scale:1.1},whileTap:{scale:.95},style:{background:"none",border:"none",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",color:"rgba(0, 122, 255, 0.8)"},children:s("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[s("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M8 7V11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s("circle",{cx:"8",cy:"5",r:"0.75",fill:"currentColor"})]})})]}),s("div",{className:"ios-item-subtitle",children:(()=>{const R=t.attributes?.pv_total_sensor;if(!R)return $==="de"?"Nicht konfiguriert":"Not configured";const j=oe(R);return`${R.split(".")[1]}  ${j.value} ${j.unit}`})()})]})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{f("estimated_energy_today"),p("sensors"),h(!0)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[s("span",{children:$==="de"?"Geschtzte Erzeugung heute":"Estimated Production Today"}),s(T.button,{className:"info-icon-button",onClick:R=>{R.stopPropagation(),F("estimated_energy_today"),E(!0)},whileHover:{scale:1.1},whileTap:{scale:.95},style:{background:"none",border:"none",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",color:"rgba(0, 122, 255, 0.8)"},children:s("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[s("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M8 7V11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s("circle",{cx:"8",cy:"5",r:"0.75",fill:"currentColor"})]})})]}),s("div",{className:"ios-item-subtitle",children:(()=>{const R=t.attributes?.estimated_energy_today_sensor;if(!R)return $==="de"?"Nicht konfiguriert":"Not configured";const j=oe(R);return`${R.split(".")[1]}  ${j.value} ${j.unit}`})()})]})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item-clickable",onClick:()=>{f("grid_export_total"),p("sensors"),h(!0)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[s("span",{children:$==="de"?"Einspeisung gesamt":"Grid Export Total"}),s(T.button,{className:"info-icon-button",onClick:R=>{R.stopPropagation(),F("grid_export_total"),E(!0)},whileHover:{scale:1.1},whileTap:{scale:.95},style:{background:"none",border:"none",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",color:"rgba(0, 122, 255, 0.8)"},children:s("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[s("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M8 7V11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s("circle",{cx:"8",cy:"5",r:"0.75",fill:"currentColor"})]})})]}),s("div",{className:"ios-item-subtitle",children:(()=>{const R=t.attributes?.grid_export_total_sensor;if(!R)return $==="de"?"Nicht konfiguriert":"Not configured";const j=oe(R);return`${R.split(".")[1]}  ${j.value} ${j.unit}`})()})]})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:$==="de"?"BATTERIE":"BATTERY"}),s("div",{className:"ios-card",children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{f("battery_discharged"),p("sensors"),h(!0)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[s("span",{children:$==="de"?"Entladen (kWh)":"Discharged (kWh)"}),s(T.button,{className:"info-icon-button",onClick:R=>{R.stopPropagation(),F("battery_discharged"),E(!0)},whileHover:{scale:1.1},whileTap:{scale:.95},style:{background:"none",border:"none",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",color:"rgba(0, 122, 255, 0.8)"},children:s("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[s("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M8 7V11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s("circle",{cx:"8",cy:"5",r:"0.75",fill:"currentColor"})]})})]}),s("div",{className:"ios-item-subtitle",children:(()=>{const R=t.attributes?.battery_discharged_sensor;if(!R)return $==="de"?"Nicht konfiguriert":"Not configured";const j=oe(R);return`${R.split(".")[1]}  ${j.value} ${j.unit}`})()})]})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{f("battery_charged"),p("sensors"),h(!0)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[s("span",{children:$==="de"?"Geladen (kWh)":"Charged (kWh)"}),s(T.button,{className:"info-icon-button",onClick:R=>{R.stopPropagation(),F("battery_charged"),E(!0)},whileHover:{scale:1.1},whileTap:{scale:.95},style:{background:"none",border:"none",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",color:"rgba(0, 122, 255, 0.8)"},children:s("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[s("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M8 7V11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s("circle",{cx:"8",cy:"5",r:"0.75",fill:"currentColor"})]})})]}),s("div",{className:"ios-item-subtitle",children:(()=>{const R=t.attributes?.battery_charged_sensor;if(!R)return $==="de"?"Nicht konfiguriert":"Not configured";const j=oe(R);return`${R.split(".")[1]}  ${j.value} ${j.unit}`})()})]})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})]}),s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:$==="de"?"TARIFE":"TARIFFS"}),s("div",{className:"ios-card",children:[s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{f("feed_in_tariff"),p("sensors"),h(!0)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[s("span",{children:$==="de"?"Einspeisetarif":"Feed-in Tariff"}),s(T.button,{className:"info-icon-button",onClick:R=>{R.stopPropagation(),F("feed_in_tariff"),E(!0)},whileHover:{scale:1.1},whileTap:{scale:.95},style:{background:"none",border:"none",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",color:"rgba(0, 122, 255, 0.8)"},children:s("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[s("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M8 7V11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s("circle",{cx:"8",cy:"5",r:"0.75",fill:"currentColor"})]})})]}),s("div",{className:"ios-item-subtitle",children:(()=>{const R=t.attributes?.feed_in_tariff_sensor;if(!R)return $==="de"?"Nicht konfiguriert":"Not configured";const j=oe(R);return`${R.split(".")[1]}  ${j.value} ${j.unit}`})()})]})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),s("div",{className:"ios-divider"}),s(T.div,{className:"ios-item ios-item-clickable",onClick:()=>{f("purchase_tariff"),p("sensors"),h(!0)},children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",style:{display:"flex",alignItems:"center",gap:"8px"},children:[s("span",{children:$==="de"?"Bezugstarif":"Purchase Tariff"}),s(T.button,{className:"info-icon-button",onClick:R=>{R.stopPropagation(),F("purchase_tariff"),E(!0)},whileHover:{scale:1.1},whileTap:{scale:.95},style:{background:"none",border:"none",padding:"0",cursor:"pointer",display:"flex",alignItems:"center",color:"rgba(0, 122, 255, 0.8)"},children:s("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",children:[s("circle",{cx:"8",cy:"8",r:"7",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M8 7V11",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),s("circle",{cx:"8",cy:"5",r:"0.75",fill:"currentColor"})]})})]}),s("div",{className:"ios-item-subtitle",children:(()=>{const R=t.attributes?.purchase_tariff_sensor;if(!R)return $==="de"?"Nicht konfiguriert":"Not configured";const j=oe(R);return`${R.split(".")[1]}  ${j.value} ${j.unit}`})()})]})}),s("div",{className:"ios-item-right",children:s("svg",{className:"ios-chevron",width:"7",height:"12",viewBox:"0 0 7 12",children:s("path",{d:"M1 1L6 6L1 11",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})]})]}),s(Pe,{scrollContainerRef:I,isHovered:z})]},"sensors"):y==="circular-overview"?s(T.div,{custom:1,variants:ie,initial:"enter",animate:"center",exit:"exit",transition:{type:"spring",stiffness:300,damping:30},className:"ios-view-wrapper",onMouseEnter:()=>D(!0),onMouseLeave:()=>D(!1),style:{position:"relative"},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:()=>w("main"),children:[s("svg",{width:"11",height:"18",viewBox:"0 0 11 18",fill:"none",children:s("path",{d:"M9 2L2 9L9 16",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})}),s("span",{children:$==="de"?"Zurck":"Back"})]}),s("div",{className:"ios-navbar-title",children:"Circular"})]}),s("div",{ref:I,className:"ios-settings-view",children:s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:_&&typeof _=="object"&&!Array.isArray(_)&&Object.keys(_).map((R,j)=>{const le=_[R];if(!le||typeof le!="object")return null;const ye=O(R),be=ye.primary&&ye.secondary;return s("div",{children:[j>0&&s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:he(R)}),s("div",{className:"ios-item-subtitle",children:be?$==="de"?"Konfiguriert":"Configured":$==="de"?"Sensoren fehlen":"Missing sensors"})]})}),s("div",{className:"ios-item-right",children:be&&s("label",{className:"ios-toggle",children:[s("input",{type:"checkbox",checked:le.enabled||!1,onChange:()=>J(R,!le.enabled)}),s("span",{className:"ios-toggle-slider"})]})})]})]},R)})})})}),s(Pe,{scrollContainerRef:I,isHovered:z})]},"circular-overview"):null})}),s(Ce,{children:L&&W&&s(T.div,{className:"info-overlay-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>E(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(10px)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:s(T.div,{className:"info-overlay-content",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:R=>R.stopPropagation(),style:{backgroundColor:"rgba(30, 30, 30, 0.95)",borderRadius:"20px",padding:"24px",maxWidth:"400px",width:"100%",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[s("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"16px"},children:s(T.button,{onClick:()=>E(!1),whileHover:{scale:1.1},whileTap:{scale:.9},style:{background:"none",border:"none",color:"rgba(255, 255, 255, 0.5)",fontSize:"24px",cursor:"pointer",padding:"0",lineHeight:"1"},children:""})}),s("h3",{style:{margin:"0 0 12px 0",fontSize:"20px",fontWeight:"600",color:"#fff",lineHeight:"1.3"},children:Q[W]?.[$]||"Sensor"}),s("p",{style:{margin:0,fontSize:"15px",lineHeight:"1.6",color:"rgba(255, 255, 255, 0.7)"},children:re[W]?.[$]||($==="de"?"Keine Information verfgbar.":"No information available.")})]})})})]})});if(a){const R=t.attributes?.camera_entity_id;console.log(" === CAMERA DEBUG ==="),console.log(" Camera Entity ID from attributes:",R),console.log(" Entity attributes:",t.attributes),console.log(" Entity serial:",t.attributes?.serial);let j=R,le=null;if(!R&&e?.states){const be=t.attributes?.serial;if(be){const de=Object.keys(e.states).find(pe=>{const Le=pe.toLowerCase();return Le.startsWith("camera.")&&Le.includes(be.toLowerCase())&&(Le.endsWith("_kamera")||Le.endsWith("_camera"))});if(de)j=de,console.log(" Found camera entity via fallback search:",de);else{const pe=Object.keys(e.states).filter(Le=>Le.startsWith("camera."));console.log(" All available camera entities:",pe)}}}j&&e?.states&&(le=e.states[j],console.log(" Camera state object:",le),console.log(" Camera entity_picture:",le?.attributes?.entity_picture));const ye=Me(()=>{let be=null;return le?.attributes?.entity_picture?(be=le.attributes.entity_picture,console.log(" Using entity_picture:",be)):j&&(be=`/api/camera_proxy/${j}`,console.log(" Using camera_proxy:",be)),be&&q&&(be=`${be}${be.includes("?")?"&":"?"}t=${q}`),be},[le,j,q]);return s("div",{className:"energy-device-view",style:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},children:s("div",{className:"tab-content-container",style:{display:"block",height:"100%",padding:"0",overflow:"hidden",borderRadius:"20px"},children:ye?s("img",{src:ye,alt:"Energy Camera",onError:be=>{console.error("  Failed to load camera image"),console.log(" Attempted URL:",be.target.src),console.log(" Entity ID used:",j),console.log(" Camera state:",le),be.target.style.display="none";const de=document.createElement("div");de.style.cssText="text-align: center; color: rgba(255, 255, 255, 0.8); padding: 20px;",de.innerHTML=`
                  <p style="margin-bottom: 10px; font-size: 14px;"> Kamera konnte nicht geladen werden</p>
                  <p style="font-size: 11px; opacity: 0.6; margin-bottom: 5px;">Entity: ${j}</p>
                  <p style="font-size: 11px; opacity: 0.6;">URL: ${be.target.src}</p>
                  <p style="font-size: 11px; opacity: 0.6; margin-top: 10px;">Fehler: 403 Forbidden - Zugriff verweigert</p>
                  <p style="font-size: 11px; opacity: 0.6;">Versuchen Sie, die Kamera-Entity neu zu laden</p>
                `,be.target.parentNode.appendChild(de)},onLoad:()=>{console.log("  Camera image loaded successfully"),console.log(" Entity ID:",j),console.log(" Image source:",ye)},style:{display:"block",width:"100%",height:"auto",maxHeight:"100%",maxWidth:"100%",borderRadius:"20px",objectFit:"cover"}}):s("div",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.6)"},children:[s("p",{style:{marginBottom:"10px"},children:$==="de"?" Keine Kamera gefunden":" No camera found"}),s("p",{style:{fontSize:"12px",opacity:.6},children:["Energy: ",t.id]}),s("p",{style:{fontSize:"11px",opacity:.5,marginTop:"10px"},children:["Serial: ",t.attributes?.serial]})]})})})}if(c){const R=t.attributes?.serial;console.log(" === IMAGE DEBUG ==="),console.log(" Entity serial:",R),console.log(" Looking for image entity: image.a1_"+R?.toLowerCase()+"_titelbild");let j=null,le=null;if(R&&e?.states)if(j=Object.keys(e.states).find(be=>{const de=be.toLowerCase();return de.startsWith("image.")&&de.includes(R.toLowerCase())&&de.endsWith("_titelbild")}),j)console.log(" Found image entity:",j);else{const be=Object.keys(e.states).filter(de=>de.startsWith("image."));console.log(" All available image entities:",be)}j&&e?.states&&(le=e.states[j],console.log(" Image state object:",le),console.log(" Image entity_picture:",le?.attributes?.entity_picture),console.log(" Image access_token:",le?.attributes?.access_token));let ye=null;return le?.attributes?.entity_picture?(ye=le.attributes.entity_picture,console.log(" Using entity_picture:",ye),le.attributes.access_token&&(ye=`${ye}${ye.includes("?")?"&":"?"}token=${le.attributes.access_token}`)):le?.state&&le.state!=="unavailable"&&(ye=le.state,console.log(" Using state as image source:",ye)),s("div",{className:"energy-device-view",style:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},children:s("div",{className:"tab-content-container",style:{display:"block",height:"100%",padding:"0",overflow:"hidden",borderRadius:"20px"},children:ye?s("img",{src:ye,alt:"Energy Titelbild",onError:be=>{console.error("  Failed to load image"),console.log(" Attempted URL:",be.target.src),console.log(" Entity ID used:",j),console.log(" Image state:",le),be.target.style.display="none";const de=document.createElement("div");de.style.cssText="text-align: center; color: rgba(255, 255, 255, 0.8); padding: 20px;",de.innerHTML=`
                  <p style="margin-bottom: 10px; font-size: 14px;"> Bild konnte nicht geladen werden</p>
                  <p style="font-size: 11px; opacity: 0.6; margin-bottom: 5px;">Entity: ${j}</p>
                  <p style="font-size: 11px; opacity: 0.6;">URL: ${be.target.src}</p>
                  <p style="font-size: 11px; opacity: 0.6; margin-top: 10px;">Fehler: Zugriff verweigert</p>
                `,be.target.parentNode.appendChild(de)},onLoad:()=>{console.log("  Image loaded successfully"),console.log(" Entity ID:",j),console.log(" Image source:",ye)},style:{display:"block",width:"100%",height:"auto",maxHeight:"100%",maxWidth:"100%",borderRadius:"20px",objectFit:"cover"}}):s("div",{style:{textAlign:"center",color:"rgba(255, 255, 255, 0.6)",padding:"20px"},children:[s("p",{style:{marginBottom:"10px"},children:$==="de"?" Kein Titelbild gefunden":" No title image found"}),s("p",{style:{fontSize:"12px",opacity:.6},children:["Energy: ",t.id]}),s("p",{style:{fontSize:"11px",opacity:.5,marginTop:"10px"},children:["Serial: ",R]}),s("p",{style:{fontSize:"11px",opacity:.5,marginTop:"5px"},children:["Erwartete Entity: image.a1_",R?.toLowerCase(),"_titelbild"]})]})})})}const Z=H[N]||H[0],se=Me(()=>{if(!Z||!Z.type)return t;const R=O(Z.type);return{...t,attributes:{...t.attributes,_display_primary:R.primary,_display_secondary:R.secondary,_display_primary_type:Z.type,_display_secondary_type:Z.type}}},[t,Z]);return s("div",{className:"energy-device-view",style:{display:"flex",flexDirection:"column",height:"100%",position:"relative"},onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:[s(io,{item:se,hass:e,lang:i,onServiceCall:n,slideShowKey:N,expandedControl:A,setExpandedControl:P}),H.length>1&&!A&&s("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"8px",alignItems:"center",padding:"8px 16px",background:"rgba(0, 0, 0, 0.3)",backdropFilter:"blur(10px)",borderRadius:"20px",zIndex:10},children:H.map((R,j)=>s(T.div,{onClick:()=>C(j),animate:{width:N===j?"24px":"8px",backgroundColor:N===j?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 0.4)"},transition:{duration:.3,ease:"easeOut"},style:{height:"8px",borderRadius:"4px",cursor:"pointer"}},j))})]})},f7=Object.freeze(Object.defineProperty({__proto__:null,EnergyDashboardDeviceView:q0,default:q0},Symbol.toStringTag,{value:"Module"})),X0=({entity:t,hass:e,lang:i="de"})=>{const[n,r]=M({});return U(()=>{if(!t||!e)return;const o={printSpeed:t.attributes?.print_speed||100,fanSpeed:t.attributes?.fan_speed||100,chamberLight:t.attributes?.chamber_light||!1,targetNozzle:t.attributes?.target_nozzle_temp||220,targetBed:t.attributes?.target_bed_temp||60};r(o)},[t,e]),s("div",{className:"controls-content",children:[s("div",{className:"ios-control-row",children:[s("div",{className:"ios-control-label",children:i==="de"?"Druckgeschwindigkeit":"Print Speed"}),s("input",{type:"range",min:"50",max:"200",defaultValue:n.printSpeed||100,className:"ios-slider"}),s("span",{className:"ios-value",children:[n.printSpeed||100,"%"]})]}),s("div",{className:"ios-control-row",children:[s("div",{className:"ios-control-label",children:i==="de"?"Druckkopflfter":"Part Cooling Fan"}),s("input",{type:"range",min:"0",max:"100",defaultValue:n.fanSpeed||100,className:"ios-slider"}),s("span",{className:"ios-value",children:[n.fanSpeed||100,"%"]})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-control-row",children:[s("div",{className:"ios-control-label",children:i==="de"?"Druckraumbeleuchtung":"Chamber Light"}),s("label",{className:"ios-switch",children:[s("input",{type:"checkbox",defaultChecked:n.chamberLight}),s("span",{className:"ios-switch-slider"})]})]}),s("div",{className:"ios-control-row",children:[s("div",{className:"ios-control-label",children:i==="de"?"Aufforderungston":"Sound Alerts"}),s("label",{className:"ios-switch",children:[s("input",{type:"checkbox"}),s("span",{className:"ios-switch-slider"})]})]}),s("div",{className:"ios-control-row",children:[s("div",{className:"ios-control-label",children:i==="de"?"Bildsensorkamera":"Image Sensor Camera"}),s("label",{className:"ios-switch",children:[s("input",{type:"checkbox"}),s("span",{className:"ios-switch-slider"})]})]}),s("div",{className:"ios-divider"}),s("div",{className:"ios-control-row tappable",children:[s("div",{className:"ios-control-label",children:i==="de"?"Zieltemperatur der Dse":"Target Nozzle Temp"}),s("div",{className:"ios-value",children:[n.targetNozzle||220,"C"]}),s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"chevron-icon",children:s("path",{d:"M9 18l6-6-6-6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),s("div",{className:"ios-control-row tappable",children:[s("div",{className:"ios-control-label",children:i==="de"?"Zieltemperatur des Druckbetts":"Target Bed Temp"}),s("div",{className:"ios-value",children:[n.targetBed||60,"C"]}),s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"chevron-icon",children:s("path",{d:"M9 18l6-6-6-6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),s("div",{className:"ios-divider"}),s("button",{className:"ios-action-button pause",children:[" ",i==="de"?"Druckvorgang anhalten":"Pause Print"]}),s("button",{className:"ios-action-button stop",children:[" ",i==="de"?"Druckvorgang beenden":"Stop Print"]}),s("button",{className:"ios-action-button resume",children:[" ",i==="de"?"Druckvorgang fortsetzen":"Resume Print"]}),s("button",{className:"ios-action-button camera",children:[" ",i==="de"?"Kamera aktivieren":"Activate Camera"]})]})},J0=Object.freeze(Object.defineProperty({__proto__:null,EnergyControlsTab:X0,default:X0},Symbol.toStringTag,{value:"Module"})),Q0=({entity:t,hass:e,lang:i="de"})=>{const[n,r]=M({});U(()=>{const p=async()=>{if(!t||!e)return;const b=await t.executeAction("getEnergyData",{hass:e});b&&r(b)};p();const v=setInterval(p,5e3);return()=>clearInterval(v)},[t,e]);const o=(p,v=null)=>{if(!p||p==="unavailable")return"--";const b=parseFloat(p);if(isNaN(b))return"--";if(v&&v!=="unavailable"){const y=parseFloat(v);if(!isNaN(y)&&y>0)return`${Math.round(b)}C  ${Math.round(y)}C`}return`${Math.round(b)}C`},a=n.currentStep||(i==="de"?"Bereit":"Ready"),l=()=>{const p=[];return n.nozzleSize&&n.nozzleSize!=="unavailable"&&p.push(n.nozzleSize),n.nozzleType&&n.nozzleType!=="unavailable"&&p.push(n.nozzleType),p.length===0?i==="de"?"Nicht verfgbar":"Not available":p.join(", ")},c=()=>{const p=o(n.bedTemp,n.targetBed),v=o(n.nozzleTemp,n.targetNozzle);return`Druckbett: ${p} | Dse: ${v}`},d=p=>!p||p==="unavailable"?i==="de"?"Unbekannt":"Unknown":p,u=parseFloat(n.progress)||0,h=(n.currentStep||"").toLowerCase(),m=["idle","offline","unavailable","unknown"].includes(h),f=u>0&&!m,g={value:u,min:0,max:100,unit:"%",label:i==="de"?"Druckfortschritt":"Print Progress",subValue:c(),color:f?"rgb(48, 209, 88)":"rgba(255, 255, 255, 0.3)",readOnly:!0,showPower:!1,progressMode:!1};return s("div",{className:"printer-overview-container",children:[s("div",{className:"printer-header-info",children:[s("div",{className:"printer-info-row",children:[s("span",{className:"info-label",children:i==="de"?"Arbeitsschritt":"Current Step"}),s("span",{className:"info-value",children:a})]}),s("div",{className:"printer-info-row",children:[s("span",{className:"info-label",children:i==="de"?"Dse":"Nozzle"}),s("span",{className:"info-value",children:l()})]})]}),s("div",{className:"printer-progress-section",children:s(Kr,{...g})}),s("div",{className:"printer-time-info",children:[s("span",{className:"time-label",children:i==="de"?"Verbleibende Zeit":"Remaining Time"}),s("span",{className:"time-value",children:d(n.remainingTime)})]})]})},p7=Object.freeze(Object.defineProperty({__proto__:null,EnergyOverviewTab:Q0,default:Q0},Symbol.toStringTag,{value:"Module"})),em=({entity:t,hass:e,lang:i="de"})=>s(Br,{item:t,hass:e,lang:i,viewType:"netusage"}),g7=Object.freeze(Object.defineProperty({__proto__:null,EnergyDiagnosticsTab:em,default:em},Symbol.toStringTag,{value:"Module"})),v7=[{id:"energy_dashboard",name_de:"Energie Dashboard",name_en:"Energy Dashboard",icon:"",description_de:"Home Assistant Energie Dashboard",description_en:"Home Assistant Energy Dashboard",available:!0},{id:"printer3d",name_de:"3D-Drucker",name_en:"3D Printer",icon:"",description_de:"Bambu Lab & andere 3D-Drucker",description_en:"Bambu Lab & other 3D printers",available:!0},{id:"oven",name_de:"Backofen",name_en:"Oven",icon:"",description_de:"Smart Backfen & Herde",description_en:"Smart ovens & stoves",available:!1},{id:"dishwasher",name_de:"Splmaschine",name_en:"Dishwasher",icon:"",description_de:"Smart Geschirrspler",description_en:"Smart dishwashers",available:!1},{id:"vacuum",name_de:"Staubsauger",name_en:"Vacuum",icon:"",description_de:"Saugroboter & Staubsauger",description_en:"Robot vacuums & cleaners",available:!1},{id:"coffee",name_de:"Kaffeemaschine",name_en:"Coffee Maker",icon:"",description_de:"Smart Kaffeemaschinen",description_en:"Smart coffee makers",available:!1},{id:"shower",name_de:"Dusche",name_en:"Shower",icon:"",description_de:"Smart Duschen & Badezimmer",description_en:"Smart showers & bathrooms",available:!1}],y7=({hass:t,lang:e="de",onCategorySelect:i,onManagementOpen:n,deviceCount:r=0})=>s(T.div,{className:"integration-category-view",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[s("div",{className:"integration-header",children:[s("h2",{children:e==="de"?"Gert hinzufgen":"Add Device"}),s("p",{className:"integration-subtitle",children:e==="de"?"Whle eine Kategorie um ein neues Gert hinzuzufgen":"Choose a category to add a new device"})]}),r>0&&s(T.button,{className:"integration-management-button",onClick:n,whileHover:{scale:1.02},whileTap:{scale:.98},children:[s("span",{className:"management-icon",children:""}),s("span",{className:"management-text",children:e==="de"?`${r} Gerte verwalten`:`Manage ${r} devices`}),s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("path",{d:"M9 18l6-6-6-6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),s("div",{className:"integration-category-grid",children:v7.map((o,a)=>s(T.div,{className:`integration-category-card ${o.available?"":"disabled"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.05},whileHover:o.available?{scale:1.02}:{},whileTap:o.available?{scale:.98}:{},onClick:()=>{o.available&&i(o.id)},style:{cursor:o.available?"pointer":"not-allowed",opacity:o.available?1:.5},children:[s("div",{className:"integration-category-icon",children:o.icon}),s("div",{className:"integration-category-info",children:[s("h3",{className:"integration-category-name",children:e==="de"?o.name_de:o.name_en}),s("p",{className:"integration-category-description",children:e==="de"?o.description_de:o.description_en}),!o.available&&s("span",{className:"integration-category-badge",children:e==="de"?"Bald verfgbar":"Coming soon"})]})]},o.id))})]}),b7=t=>t==="printer3d"?s("svg",{width:"32",height:"32",viewBox:"0 0 24 24",strokeWidth:"1.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{color:"rgba(255, 255, 255, 0.8)"},children:[s("path",{d:"M2 19V5C2 3.89543 2.89543 3 4 3H20C21.1046 3 22 3.89543 22 5V19C22 20.1046 21.1046 21 20 21H4C2.89543 21 2 20.1046 2 19Z",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M2 7L22 7",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M5 5.01L5.01 4.99889",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M8 5.01L8.01 4.99889",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M11 5.01L11.01 4.99889",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}):{oven:"",dishwasher:"",vacuum:"",coffee:"",shower:""}[t]||"",w7=(t,e)=>({printer3d:{de:"3D-Drucker",en:"3D Printer"},oven:{de:"Backofen",en:"Oven"},dishwasher:{de:"Splmaschine",en:"Dishwasher"},vacuum:{de:"Staubsauger",en:"Vacuum"},coffee:{de:"Kaffeemaschine",en:"Coffee Maker"},shower:{de:"Dusche",en:"Shower"}})[t]?.[e]||t,k7=({devices:t=[],hass:e,lang:i="de",onDeviceRemove:n,onBack:r})=>{const[o,a]=M(null),l=c=>{n(c),a(null)};return s(T.div,{className:"integration-management-view",initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},transition:{duration:.3},children:[s("div",{className:"integration-header",children:[s("h2",{children:i==="de"?"Gerte verwalten":"Manage Devices"}),s("p",{className:"integration-subtitle",children:i==="de"?`${t.length} ${t.length===1?"Gert":"Gerte"} hinzugefgt`:`${t.length} ${t.length===1?"device":"devices"} added`})]}),t.length===0?s("div",{className:"integration-empty",children:[s("div",{className:"empty-icon",children:""}),s("h3",{children:i==="de"?"Keine Gerte":"No Devices"}),s("p",{children:i==="de"?"Du hast noch keine Gerte hinzugefgt.":"You haven't added any devices yet."})]}):s("div",{className:"integration-device-list",children:s(Ce,{children:t.map((c,d)=>s(T.div,{className:"integration-device-item",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:d*.05},children:[s("div",{className:"integration-device-icon",children:b7(c.category)}),s("div",{className:"integration-device-info",children:[s("h3",{className:"integration-device-name",children:c.name}),s("p",{className:"integration-device-category",children:w7(c.category,i)}),c.serial&&s("p",{className:"integration-device-meta",children:["Serial: ",c.serial]}),c.deviceType&&s("p",{className:"integration-device-meta",children:["Type: ",c.deviceType]})]}),o===c.id?s("div",{className:"integration-device-confirm-delete",children:[s("button",{className:"integration-confirm-yes",onClick:()=>l(c.id),children:i==="de"?"Lschen":"Delete"}),s("button",{className:"integration-confirm-no",onClick:()=>a(null),children:i==="de"?"Abbrechen":"Cancel"})]}):s(T.button,{className:"integration-device-delete-button",onClick:()=>a(c.id),whileHover:{scale:1.1},whileTap:{scale:.9},children:""})]},c.id))})})]})},_7=({hass:t,lang:e="de",onComplete:i,onCancel:n})=>{const[r,o]=M([]),[a,l]=M(!0);U(()=>{c()},[]);const c=async()=>{l(!0);try{const h=d(),m=new Set(h.devices.filter(v=>v.category==="printer3d").map(v=>v.serial)),f=Object.keys(t?.states||{}).filter(v=>v.match(/^sensor\.(a1|x1|p1s|p1p)_[0-9a-f]+_/)),g=new Map;f.forEach(v=>{const b=v.match(/^sensor\.([a1|x1|p1s|p1p]+)_([0-9a-f]+)_/);if(b){const[,y,w]=b,_=`${y}_${w}`;if(m.has(w))return;if(!g.has(_)){const C=(t.states[v]?.attributes?.friendly_name||"").split(" ").slice(0,2).join(" ")||`Bambu Lab ${y.toUpperCase()}`;g.set(_,{id:`bambulab_${y}_${w}`,name:C,type:"bambulab",category:"printer3d",deviceType:y,serial:w,discovered:!0})}}});const p=Array.from(g.values());o(p)}catch(h){console.error("Failed to discover printers:",h)}finally{l(!1)}};function d(){try{const h=localStorage.getItem("integration_config");if(h)return JSON.parse(h)}catch(h){console.error("Failed to load integration config:",h)}return{devices:[]}}const u=h=>{i({...h,addedAt:Date.now()})};return s(T.div,{className:"ios-settings-container",initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},transition:{duration:.3},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:n,children:[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("path",{d:"M15 18l-6-6 6-6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e==="de"?"Zurck":"Back"]}),s("div",{className:"ios-navbar-title",children:e==="de"?"3D-Drucker hinzufgen":"Add 3D Printer"})]}),s("div",{className:"ios-settings-view",children:a?s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:s("div",{className:"ios-empty-state",children:[s("div",{className:"loading-spinner",style:{margin:"20px auto"}}),s("p",{children:e==="de"?"Suche nach Druckern...":"Searching for printers..."})]})})}):s(ve,{children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:e==="de"?"VERFGBARE DRUCKER":"AVAILABLE PRINTERS"}),s("div",{className:"ios-card",children:r.length===0?s("div",{className:"ios-empty-state",children:[s("div",{className:"empty-icon",style:{marginBottom:"12px"},children:s("svg",{width:"48",height:"48",viewBox:"0 0 24 24",strokeWidth:"1.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{color:"rgba(255, 255, 255, 0.6)"},children:[s("path",{d:"M2 19V5C2 3.89543 2.89543 3 4 3H20C21.1046 3 22 3.89543 22 5V19C22 20.1046 21.1046 21 20 21H4C2.89543 21 2 20.1046 2 19Z",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M2 7L22 7",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M5 5.01L5.01 4.99889",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M8 5.01L8.01 4.99889",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M11 5.01L11.01 4.99889",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),s("p",{children:e==="de"?"Keine Bambu Lab Drucker gefunden.":"No Bambu Lab printers found."}),s("p",{style:{fontSize:"13px",color:"rgba(255,255,255,0.5)",marginTop:"8px"},children:e==="de"?"Stelle sicher, dass die Bambu Lab Integration in Home Assistant konfiguriert ist.":"Make sure the Bambu Lab integration is configured in Home Assistant."})]}):r.map((h,m)=>s("div",{children:[m>0&&s("div",{className:"ios-divider"}),s("div",{className:"ios-item",children:[s("div",{className:"ios-item-left",children:[s("div",{className:"ios-feed-icon",children:s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"1.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{color:"rgba(255, 255, 255, 0.8)"},children:[s("path",{d:"M2 19V5C2 3.89543 2.89543 3 4 3H20C21.1046 3 22 3.89543 22 5V19C22 20.1046 21.1046 21 20 21H4C2.89543 21 2 20.1046 2 19Z",stroke:"currentColor",strokeWidth:"1.5"}),s("path",{d:"M2 7L22 7",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M5 5.01L5.01 4.99889",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M8 5.01L8.01 4.99889",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s("path",{d:"M11 5.01L11.01 4.99889",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),s("div",{className:"ios-item-content",children:[s("div",{className:"ios-item-label",children:h.name}),s("div",{className:"ios-item-subtitle",children:["Bambu Lab ",h.deviceType.toUpperCase(),`  ${h.serial.substring(0,8)}`]})]})]}),s("div",{className:"ios-item-right",children:s(T.button,{className:"ios-add-button",onClick:()=>u(h),whileHover:{scale:1.05},whileTap:{scale:.95},children:e==="de"?"Hinzufgen":"Add"})})]})]},h.id))})]}),r.length===0&&s("div",{className:"ios-section",children:s(T.button,{className:"ios-refresh-button",onClick:c,whileHover:{scale:1.02},whileTap:{scale:.98},children:[" ",e==="de"?"Erneut suchen":"Search Again"]})}),s("div",{className:"ios-section",children:s("div",{className:"ios-section-footer",children:e==="de"?'Drucker werden automatisch ber die Bambu Lab Home Assistant Integration erkannt. Nach dem Hinzufgen wird eine Device Card unter "Gerte  Tools" erstellt.':'Printers are automatically detected via the Bambu Lab Home Assistant integration. After adding, a Device Card will be created under "Devices  Tools".'})})]})}),s("style",{children:`
        .loading-spinner {
          width: 40px;
          height: 40px;
          border: 3px solid rgba(255, 255, 255, 0.2);
          border-top-color: rgb(48, 209, 88);
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        .ios-add-button {
          background: rgb(48, 209, 88);
          border: none;
          border-radius: 8px;
          padding: 6px 16px;
          color: white;
          font-size: 14px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s ease;
        }

        .ios-add-button:hover {
          background: rgb(40, 199, 78);
        }

        .ios-refresh-button {
          width: 100%;
          background: rgba(255, 255, 255, 0.1);
          border: 1px solid rgba(255, 255, 255, 0.2);
          border-radius: 12px;
          padding: 14px;
          color: rgba(255, 255, 255, 0.9);
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s ease;
        }

        .ios-refresh-button:hover {
          background: rgba(255, 255, 255, 0.15);
        }
      `})]})};async function x7(t){if(!t||!t.connection)return null;try{const e=await t.connection.sendMessagePromise({type:"energy/get_prefs"}),i=await t.connection.sendMessagePromise({type:"energy/info"});return{prefs:e,info:i}}catch(e){return console.error("Failed to check Energy Dashboard:",e),null}}const C7=({hass:t,lang:e="de",onComplete:i,onCancel:n})=>{const[r,o]=M(!0),[a,l]=M(null),[c,d]=M(null);U(()=>{u()},[]);const u=async()=>{o(!0),d(null);try{const f=await x7(t);f&&f.prefs?(console.log(" Energy Dashboard configured:",f),l(f)):d("not_configured")}catch(f){console.error("Failed to check Energy Dashboard:",f),d("failed")}finally{o(!1)}},h=()=>{if(!a)return;const f={id:"energy_dashboard",name:"Energie Dashboard",type:"energy_dashboard",category:"energy_dashboard",serial:"energy_dashboard",model:"Home Assistant Energy Dashboard",energy_prefs:a.prefs,energy_info:a.info,discovered:!0,addedAt:Date.now()};i(f)},m=(f,g,p)=>{if(!a?.prefs?.energy_sources)return null;const v=a.prefs.energy_sources.some(b=>b.type===f);return s("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",background:"rgba(255,255,255,0.05)",borderRadius:"8px",marginBottom:"8px"},children:[s("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[s("span",{style:{fontSize:"24px"},children:p}),s("span",{style:{color:"white",fontSize:"15px"},children:g})]}),s("div",{style:{padding:"4px 12px",borderRadius:"12px",fontSize:"13px",fontWeight:"600",background:v?"rgba(48,209,88,0.2)":"rgba(255,255,255,0.1)",color:v?"rgb(48,209,88)":"rgba(255,255,255,0.5)"},children:v?" Konfiguriert":"Nicht konfiguriert"})]})};return s(T.div,{className:"ios-settings-container",initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},transition:{duration:.3},children:[s("div",{className:"ios-navbar",children:[s("button",{className:"ios-navbar-back",onClick:n,children:[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:s("path",{d:"M15 18l-6-6 6-6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e==="de"?"Zurck":"Back"]}),s("div",{className:"ios-navbar-title",children:e==="de"?"Energie Dashboard hinzufgen":"Add Energy Dashboard"})]}),s("div",{className:"ios-settings-view",children:r?s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:s("div",{className:"ios-empty-state",children:[s("div",{className:"loading-spinner",style:{margin:"20px auto"}}),s("p",{children:e==="de"?"Prfe Energie Dashboard...":"Checking Energy Dashboard..."})]})})}):c?s(ve,{children:[s("div",{className:"ios-section",children:s("div",{className:"ios-card",children:s("div",{className:"ios-empty-state",children:[s("div",{className:"empty-icon",style:{marginBottom:"12px"},children:s("svg",{width:"48",height:"48",viewBox:"0 0 24 24",strokeWidth:"1.5",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{color:"rgba(255, 69, 58, 0.8)"},children:s("path",{d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),s("p",{children:e==="de"?"Energie Dashboard nicht konfiguriert":"Energy Dashboard not configured"}),s("p",{style:{fontSize:"13px",color:"rgba(255,255,255,0.5)",marginTop:"8px"},children:e==="de"?"Bitte konfiguriere das Energie Dashboard in Home Assistant zuerst.":"Please configure the Energy Dashboard in Home Assistant first."})]})})}),s("div",{className:"ios-section",children:s(T.button,{className:"ios-refresh-button",onClick:u,whileHover:{scale:1.02},whileTap:{scale:.98},children:[" ",e==="de"?"Erneut prfen":"Check Again"]})})]}):s(ve,{children:[s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:"ENERGIE-QUELLEN"}),s("div",{className:"ios-card",style:{padding:"12px"},children:[m("grid","Netz (Grid)",""),m("solar","Solar (PV)",""),m("battery","Batterie",""),m("gas","Gas","")]})]}),a?.prefs?.device_consumption?.length>0&&s("div",{className:"ios-section",children:[s("div",{className:"ios-section-header",children:"GERTE-VERBRAUCH"}),s("div",{className:"ios-card",style:{padding:"16px"},children:s("div",{style:{color:"white",fontSize:"14px"},children:[a.prefs.device_consumption.length," ",e==="de"?"Gerte konfiguriert":"devices configured"]})})]}),s("div",{className:"ios-section",children:s(T.button,{className:"ios-add-button-large",onClick:h,whileHover:{scale:1.02},whileTap:{scale:.98},style:{width:"100%",background:"rgb(255, 204, 0)",border:"none",borderRadius:"12px",padding:"16px",color:"black",fontSize:"17px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:[" ",e==="de"?"Energie Dashboard hinzufgen":"Add Energy Dashboard"]})}),s("div",{className:"ios-section",children:s("div",{className:"ios-section-footer",children:e==="de"?"Das Energie Dashboard zeigt Echtzeit-Daten zu deinem Energieverbrauch, -produktion und -kosten basierend auf deiner Home Assistant Konfiguration.":"The Energy Dashboard displays real-time data about your energy consumption, production, and costs based on your Home Assistant configuration."})})]})}),s("style",{children:`
        .loading-spinner {
          width: 40px;
          height: 40px;
          border: 3px solid rgba(255, 255, 255, 0.2);
          border-top-color: rgb(255, 204, 0);
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        .ios-refresh-button {
          width: 100%;
          background: rgba(255, 255, 255, 0.1);
          border: 1px solid rgba(255, 255, 255, 0.2);
          borderRadius: 12px;
          padding: 14px;
          color: rgba(255, 255, 255, 0.9);
          fontSize: 16px;
          fontWeight: 600;
          cursor: pointer;
          transition: all 0.2s ease;
        }

        .ios-refresh-button:hover {
          background: rgba(255, 255, 255, 0.15);
        }
      `})]})};function fa(){try{const t=localStorage.getItem("integration_config");if(t)return JSON.parse(t)}catch(t){console.error("Failed to load integration config:",t)}return{devices:[]}}function tm(t){try{localStorage.setItem("integration_config",JSON.stringify(t))}catch(e){console.error("Failed to save integration config:",e)}}function S7(t){if(!t)return console.error("IntegrationView: Props are undefined!"),s("div",{style:{padding:"40px",textAlign:"center",color:"white"},children:[s("h3",{children:"Error: Component Props Missing"}),s("p",{children:"IntegrationView was called without props"})]});const{entity:e,hass:i,lang:n="de",onBack:r}=t,[o,a]=M(()=>fa()),[l,c]=M("selection"),[d,u]=M(null);U(()=>(window._integrationViewRef={handleOpenSettings:()=>{c("management")},handleBackNavigation:()=>{l==="setup"?(c("selection"),u(null)):l==="management"?c("selection"):r&&r()}},()=>{delete window._integrationViewRef}),[l,r]);const h=p=>{u(p),c("setup")},m=async p=>{if(e&&e.executeAction)await e.executeAction("addDevice",{deviceData:p});else{console.warn("Integration entity not available, using fallback");const v={...o,devices:[...o.devices,p]};a(v),tm(v)}a(fa()),c("selection"),u(null)},f=async p=>{if(e&&e.executeAction)await e.executeAction("removeDevice",{deviceId:p});else{console.warn("Integration entity not available, using fallback");const v={...o,devices:o.devices.filter(b=>b.id!==p)};a(v),tm(v)}a(fa())};return s("div",{className:"integration-view-container",children:s(Ce,{mode:"wait",children:l==="setup"?(()=>{switch(d){case"printer3d":return s(_7,{hass:i,lang:n,onComplete:m,onCancel:()=>{c("selection"),u(null)}},"printer3d");case"energy_dashboard":return s(C7,{hass:i,lang:n,onComplete:m,onCancel:()=>{c("selection"),u(null)}},"energy_dashboard");default:return s("div",{className:"integration-error",children:[s("p",{children:['Setup flow for "',d,'" not implemented yet.']}),s("button",{onClick:()=>c("selection"),children:n==="de"?"Zurck":"Back"})]})}})():l==="management"?s(k7,{devices:o.devices,hass:i,lang:n,onDeviceRemove:f,onBack:()=>c("selection")},"management"):s(y7,{hass:i,lang:n,onCategorySelect:h,onManagementOpen:()=>c("management"),deviceCount:o.devices.length},"selection")})})}const N7=Sl(S7),L7=Object.freeze(Object.defineProperty({__proto__:null,default:N7},Symbol.toStringTag,{value:"Module"}));
